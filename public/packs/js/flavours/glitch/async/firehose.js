(window.webpackJsonp=window.webpackJsonp||[]).push([[512],{1533:function(e,t,a){"use strict";a.r(t);var l=a(0),o=a(2),i=a(7),c=a(35),s=a(20),n=a(129),b=a(1210),d=a(901),r=a(110),m=a(1394),u=a(43),O=a(1665),g=a(1670),j=a(11),y=a(738),h=a(1041),f=a(1214),p=a(1663),M=a(1664),v=a(6);const _=Object(i.d)({title:{id:"column.firehose",defaultMessage:"Live feeds"},filter_regex:{id:"home.column_settings.filter_regex",defaultMessage:"Filter out by regular expressions"}}),w=()=>{const e=Object(c.a)(),t=Object(y.b)(),a=Object(y.c)((e=>e.getIn(["settings","firehose"]))),i=Object(o.useCallback)(((e,a)=>t(Object(r.c)(["firehose",...e],a))),[t]);return Object(l.a)("div",{},void 0,Object(l.a)("div",{className:"column-settings__row"},void 0,Object(l.a)(p.a,{settings:a,settingPath:["onlyMedia"],onChange:i,label:Object(l.a)(s.a,{id:"community.column_settings.media_only",defaultMessage:"Media only"})}),Object(l.a)(p.a,{settings:a,settingPath:["allowLocalOnly"],onChange:i,label:Object(l.a)(s.a,{id:"firehose.column_settings.allow_local_only",defaultMessage:'Show local-only posts in "All"'})}),Object(l.a)("span",{className:"column-settings__section"},void 0,Object(l.a)(s.a,{id:"home.column_settings.advanced",defaultMessage:"Advanced"})),Object(l.a)(g.a,{settings:a,settingPath:["regex","body"],onChange:i,label:e.formatMessage(_.filter_regex)})))};t.default=e=>{let{feedType:t,multiColumn:a}=e;const i=Object(y.b)(),r=Object(c.a)(),{signedIn:g}={signedIn:!!j.d.meta.me,accountId:j.d.meta.me,disabledAccountId:j.d.meta.disabled_account_id,accessToken:j.d.meta.access_token,permissions:j.d.role?j.d.role.permissions:0},p=Object(o.useRef)(null),x=Object(y.c)((e=>e.getIn(["settings","firehose","allowLocalOnly"]))),k=Object(y.c)((e=>e.getIn(["settings","firehose","regex","body"]))),I=Object(y.c)((e=>e.getIn(["settings","firehose","onlyMedia"],!1))),C=Object(y.c)((e=>e.getIn(["timelines",`${t}${"public"===t&&x?":allow_local_only":""}${I?":media":""}`,"unread"],0)>0)),T=Object(o.useCallback)((()=>{switch(t){case"community":i(Object(d.e)("COMMUNITY",{other:{onlyMedia:I},regex:{body:k}}));break;case"public":i(Object(d.e)("PUBLIC",{other:{onlyMedia:I,allowLocalOnly:x},regex:{body:k}}));break;case"public:remote":i(Object(d.e)("REMOTE",{other:{onlyMedia:I,onlyRemote:!0},regex:{body:k}}))}}),[i,I,t,x,k]),L=Object(o.useCallback)((e=>{switch(t){case"community":i(Object(u.s)({maxId:e,onlyMedia:I}));break;case"public":i(Object(u.x)({maxId:e,onlyMedia:I,allowLocalOnly:x}));break;case"public:remote":i(Object(u.x)({maxId:e,onlyMedia:I,onlyRemote:!0}))}}),[i,I,x,t]),N=Object(o.useCallback)((()=>{var e;return null==(e=p.current)?void 0:e.scrollTop()}),[]);Object(o.useEffect)((()=>{let e;switch(t){case"community":i(Object(u.s)({onlyMedia:I})),g&&(e=i(Object(m.a)({onlyMedia:I})));break;case"public":i(Object(u.x)({onlyMedia:I,allowLocalOnly:x})),g&&(e=i(Object(m.e)({onlyMedia:I,allowLocalOnly:x})));break;case"public:remote":i(Object(u.x)({onlyMedia:I,onlyRemote:!0})),g&&(e=i(Object(m.e)({onlyMedia:I,onlyRemote:!0})))}return()=>null==e?void 0:e()}),[i,g,t,I,x]);const R="community"===t?Object(l.a)(O.a,{id:"community_timeline"},void 0,Object(l.a)(s.a,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:j.j}})):Object(l.a)(O.a,{id:"public_timeline"},void 0,Object(l.a)(s.a,{id:"dismissable_banner.public_timeline",defaultMessage:"These are the most recent public posts from people on the social web that people on {domain} follow.",values:{domain:j.j}})),$="community"===t?Object(l.a)(s.a,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"}):Object(l.a)(s.a,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"});return Object(v.jsxs)(h.a,{bindToDocument:!a,ref:p,label:r.formatMessage(_.title),children:[Object(l.a)(f.a,{icon:"globe",active:C,title:r.formatMessage(_.title),onPin:T,onClick:N,multiColumn:a},void 0,Object(l.a)(w,{})),Object(l.a)("div",{className:"scrollable scrollable--flex"},void 0,Object(l.a)("div",{className:"account__section-headline"},void 0,Object(l.a)(b.a,{exact:!0,to:"/public/local"},void 0,Object(l.a)(s.a,{tagName:"div",id:"firehose.local",defaultMessage:"This server"})),Object(l.a)(b.a,{exact:!0,to:"/public/remote"},void 0,Object(l.a)(s.a,{tagName:"div",id:"firehose.remote",defaultMessage:"Other servers"})),Object(l.a)(b.a,{exact:!0,to:"/public"},void 0,Object(l.a)(s.a,{tagName:"div",id:"firehose.all",defaultMessage:"All"}))),Object(l.a)(M.a,{prepend:R,timelineId:`${t}${"public"===t&&x?":allow_local_only":""}${I?":media":""}`,onLoadMore:L,trackScroll:!0,scrollKey:"firehose",emptyMessage:$,bindToDocument:!a,regex:k})),Object(l.a)(n.a,{},void 0,Object(l.a)("title",{},void 0,r.formatMessage(_.title)),Object(l.a)("meta",{name:"robots",content:"noindex"}))]})}}}]);
//# sourceMappingURL=firehose.js.map