(window.webpackJsonp=window.webpackJsonp||[]).push([[497],{1537:function(t,e,s){"use strict";s.r(e);var a=s(0),c=s(3),i=s.n(c),o=s(22),n=s(5),d=s(16),r=s.n(d),u=s(18),p=s(9),l=s(20),h=s(1679),m=s(1671),g=s(1023),b=s(1072),I=s(143),j=s(1018),O=s(43),w=s(1038),f=s(1432),R=s(1658),L=s(1680),M=s(1674),_=s(6);const $=Object(n.List)(),y=t=>{let{url:e}=t;return Object(a.a)(h.a,{url:e,resource:Object(a.a)(o.a,{id:"timeline_hint.resources.statuses",defaultMessage:"Older posts"})})};class C extends u.a{constructor(){super(...arguments),this.handleHeaderClick=()=>{this.column.scrollTop()},this.handleLoadMore=t=>{this.props.dispatch(Object(O.r)(this.props.accountId,{maxId:t,withReplies:this.props.withReplies,tagged:this.props.params.tagged}))},this.setRef=t=>{this.column=t}}_load(){const{accountId:t,withReplies:e,params:{tagged:s},dispatch:a}=this.props;a(Object(l.X)(t)),e||a(Object(O.p)(t,{tagged:s})),a(Object(j.d)(t)),a(Object(O.r)(t,{withReplies:e,tagged:s}))}componentDidMount(){const{params:{acct:t},accountId:e,dispatch:s}=this.props;e?this._load():s(Object(l.fb)(t))}componentDidUpdate(t){const{params:{acct:e,tagged:s},accountId:a,withReplies:c,dispatch:i}=this.props;t.accountId!==a&&a?this._load():t.params.acct!==e?i(Object(l.fb)(e)):t.params.tagged!==s&&(c||i(Object(O.p)(a,{tagged:s})),i(Object(O.r)(a,{withReplies:c,tagged:s})))}UNSAFE_componentWillReceiveProps(t){const{dispatch:e}=this.props;(t.params.accountId!==this.props.params.accountId&&t.params.accountId||t.withReplies!==this.props.withReplies)&&(e(Object(l.X)(t.params.accountId)),t.withReplies||e(Object(O.p)(t.params.accountId)),e(Object(O.r)(t.params.accountId,{withReplies:t.params.withReplies})))}render(){const{accountId:t,statusIds:e,featuredStatusIds:s,isLoading:c,hasMore:i,suspended:n,isAccount:d,hidden:r,multiColumn:u,remote:p,remoteUrl:l}=this.props;if(c&&e.isEmpty())return Object(a.a)(R.a,{},void 0,Object(a.a)(w.a,{}));if(!c&&!d)return Object(a.a)(g.a,{multiColumn:u,errorType:"routing"});let h;const b=n||r;h=n?Object(a.a)(o.a,{id:"empty_column.account_suspended",defaultMessage:"Account suspended"}):r?Object(a.a)(L.a,{accountId:t}):p&&e.isEmpty()?Object(a.a)(y,{url:l}):Object(a.a)(o.a,{id:"empty_column.account_timeline",defaultMessage:"No posts found"});const I=p?Object(a.a)(y,{url:l}):null;return Object(_.jsxs)(R.a,{ref:this.setRef,name:"account",children:[Object(a.a)(m.a,{onClick:this.handleHeaderClick,multiColumn:u}),Object(a.a)(f.a,{prepend:Object(a.a)(M.a,{accountId:this.props.accountId,hideTabs:b,tagged:this.props.params.tagged}),alwaysPrepend:!0,append:I,scrollKey:"account_timeline",statusIds:b?$:e,featuredStatusIds:s,isLoading:c,hasMore:!b&&i,onLoadMore:this.handleLoadMore,emptyMessage:h,bindToDocument:!u,timelineId:"account"})]})}}C.propTypes={params:i.a.shape({acct:i.a.string,id:i.a.string,tagged:i.a.string}).isRequired,accountId:i.a.string,dispatch:i.a.func.isRequired,statusIds:r.a.list,featuredStatusIds:r.a.list,isLoading:i.a.bool,hasMore:i.a.bool,withReplies:i.a.bool,isAccount:i.a.bool,suspended:i.a.bool,hidden:i.a.bool,remote:i.a.bool,remoteUrl:i.a.string,multiColumn:i.a.bool},e.default=Object(p.connect)(((t,e)=>{let{params:{acct:s,id:a,tagged:c},withReplies:i=!1}=e;const o=a||t.getIn(["accounts_map",Object(b.b)(s)]);if(null===o)return{isLoading:!1,isAccount:!1,statusIds:$};if(!o)return{isLoading:!0,statusIds:$};const d=i?`${o}:with_replies`:`${o}${c?`:${c}`:""}`;return{accountId:o,remote:!(t.getIn(["accounts",o,"acct"])===t.getIn(["accounts",o,"username"])),remoteUrl:t.getIn(["accounts",o,"url"]),isAccount:!!t.getIn(["accounts",o]),statusIds:t.getIn(["timelines",`account:${d}`,"items"],Object(n.List)()),featuredStatusIds:i?Object(n.List)():t.getIn(["timelines",`account:${o}:pinned${c?`:${c}`:""}`,"items"],Object(n.List)()),isLoading:t.getIn(["timelines",`account:${d}`,"isLoading"]),hasMore:t.getIn(["timelines",`account:${d}`,"hasMore"]),suspended:t.getIn(["accounts",o,"suspended"],!1),hidden:Object(I.b)(t,o)}}))(C)}}]);
//# sourceMappingURL=account_timeline.js.map