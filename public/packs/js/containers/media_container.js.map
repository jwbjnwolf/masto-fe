{"version":3,"sources":["webpack:///./node_modules/react-redux-loading-bar/build/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/alerts.js","webpack:///./node_modules/escape-html/index.js","webpack:///./node_modules/react-motion/lib/TransitionMotion.js","webpack:///./node_modules/wicg-inert/dist/inert.esm.js","webpack:///./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js","webpack:///./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js","webpack:///./node_modules/react-is/cjs/react-is.production.min.js","webpack:///./node_modules/raf/node_modules/performance-now/lib/performance-now.js","webpack:///./node_modules/react-motion/lib/StaggeredMotion.js","webpack:///./node_modules/react-motion/lib/mergeDiff.js","webpack:///./node_modules/react-motion/lib/reorderKeys.js","webpack:///./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","webpack:///./node_modules/react-redux-loading-bar/build/loading_bar_middleware.js","webpack:///./node_modules/react-redux-loading-bar/build/immutable.js","webpack:///./node_modules/react-swipeable-views/lib/SwipeableViews.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/react-swipeable-views-core/lib/index.js","webpack:///./node_modules/react-swipeable-views-core/lib/checkIndexBounds.js","webpack:///./node_modules/react-swipeable-views-core/lib/computeIndex.js","webpack:///./node_modules/react-swipeable-views-core/lib/getDisplaySameSlide.js","webpack:///./node_modules/react-swipeable-views-core/lib/mod.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/relative_timestamp.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/initial_state.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/settings.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/config.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/alerts.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/relative_timestamp.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/settings.js","webpack:///./node_modules/exif-js/exif.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/animated_number.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/utils/filters.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/animated_number.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/selectors/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/unicode_to_unified_name.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/modal_root.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/utils/scrollbar.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/poll.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/ui/components/media_modal.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/unicode_to_unified_name.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/locales/global_locale.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/locales/load_locale.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/locales/intl_provider.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/modal_root.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/scrollbar.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/ui/components/media_modal.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/video/index.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/video/index.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/containers/media_container.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/selectors/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/settings.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/settings.js","webpack:///./node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js","webpack:///./node_modules/react-immutable-pure-component/lib/react-immutable-pure-component.es.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/containers/media_container.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/accounts.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/resize_image.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/compose.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/accounts.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/compose.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/importer/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/importer/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/icon.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/icon.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/modal.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/icon_button.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/modal.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/timelines.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/timelines.js","webpack:///./node_modules/reselect/es/defaultMemoize.js","webpack:///./node_modules/reselect/es/index.js","webpack:///./node_modules/immer/dist/immer.esm.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/interactions.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/interactions.js","webpack:///./node_modules/immutable/dist/immutable.es.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/icon_button.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/locales/global_locale.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/locales/load_locale.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/locales/intl_provider.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/is_mobile.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/markers.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/markers.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/importer/normalizer.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/importer/normalizer.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/emoji_compressed.js","webpack:///./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/ready.js","webpack:///./node_modules/react-motion/lib/Motion.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/compare_id.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_compressed.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/unicode_to_filename.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/compare_id.ts","webpack:///./node_modules/react-motion/lib/stripStyle.js","webpack:///./node_modules/react-redux-loading-bar/build/loading_bar_ducks.js","webpack:///./node_modules/react-swipeable-views-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/warning/warning.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/ui/util/reduced_motion.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/ui/util/optional_motion.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/ui/util/reduced_motion.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/ui/util/optional_motion.js","webpack:///./node_modules/react-motion/lib/react-motion.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/blurhash.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/blurhash.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/boosts.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/emoji.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/unicode_to_filename.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/boosts.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/html.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/ui/util/fullscreen.js","webpack:///./node_modules/react-motion/lib/spring.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/ui/util/fullscreen.js","webpack:///./node_modules/detect-it/dist/detect-it.esm.js","webpack:///./node_modules/react-motion/lib/mapToZero.js","webpack:///./node_modules/react-motion/lib/stepper.js","webpack:///./node_modules/performance-now/lib/performance-now.js","webpack:///./node_modules/raf/index.js","webpack:///./node_modules/react-motion/lib/shouldStopAnimation.js","webpack:///./node_modules/use-sync-external-store/shim/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/picture_in_picture/components/footer.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/picture_in_picture/components/footer.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/utils/html.js","webpack:///./node_modules/redux-thunk/es/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/audio/visualizer.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/audio/index.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/audio/visualizer.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/audio/index.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/actions/emojis.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/actions/emojis.js","webpack:///./node_modules/redux/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/redux/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack:///./node_modules/redux/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack:///./node_modules/redux/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./node_modules/redux/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/redux/es/redux.js","webpack:///./node_modules/react-redux/es/utils/batch.js","webpack:///./node_modules/react-redux/es/components/Context.js","webpack:///./node_modules/react-redux/es/hooks/useReduxContext.js","webpack:///./node_modules/react-redux/es/utils/useSyncExternalStore.js","webpack:///./node_modules/react-redux/es/hooks/useSelector.js","webpack:///./node_modules/react-redux/node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./node_modules/react-redux/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/react-redux/es/connect/selectorFactory.js","webpack:///./node_modules/react-redux/es/connect/wrapMapToProps.js","webpack:///./node_modules/react-redux/es/connect/invalidArgFactory.js","webpack:///./node_modules/react-redux/es/connect/mergeProps.js","webpack:///./node_modules/react-redux/es/utils/Subscription.js","webpack:///./node_modules/react-redux/es/utils/useIsomorphicLayoutEffect.js","webpack:///./node_modules/react-redux/es/utils/shallowEqual.js","webpack:///./node_modules/react-redux/es/components/connect.js","webpack:///./node_modules/react-redux/es/connect/mapStateToProps.js","webpack:///./node_modules/react-redux/es/connect/mapDispatchToProps.js","webpack:///./node_modules/react-redux/es/utils/bindActionCreators.js","webpack:///./node_modules/react-redux/es/components/Provider.js","webpack:///./node_modules/react-redux/es/hooks/useStore.js","webpack:///./node_modules/react-redux/es/hooks/useDispatch.js","webpack:///./node_modules/react-redux/es/index.js","webpack:///./node_modules/react-motion/lib/presets.js","webpack:///./node_modules/react-redux-loading-bar/build/loading_bar.js","webpack:///./node_modules/react-swipeable-views/lib/index.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///./node_modules/react-swipeable-views-core/lib/constant.js","webpack:///./app/javascript/flavours/glitch/locales lazy ^\\.\\/.*\\.json$ include: \\.json$ preloadOrder: 0 namespace object","webpack:///./node_modules/blurhash/dist/esm/index.js","webpack:///./node_modules/color-blend/dist/index.modern.js","webpack:///./node_modules/use-sync-external-store/shim/with-selector.js","webpack:///./node_modules/react-is/index.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_unicode_mapping_light.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/utils/config.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/emoji_unicode_mapping_light.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/filters.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/content_warning.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/components/gifv.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/blurhash.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/hashtag.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/components/gifv.tsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/blurhash.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/emoji_mart_data_light.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/emoji_utils.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/emoji/emoji_mart_search_light.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_mart_data_light.ts","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_utils.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_mart_search_light.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/ready.js","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/ui/components/zoomable_image.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/mastodon/features/ui/components/image_loader.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/ui/components/zoomable_image.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/features/ui/components/image_loader.jsx","webpack:///app/javascript/Users/jase/Github/masto-fe-standalone/app/javascript/flavours/glitch/utils/idna.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","enumerable","get","_loading_bar","LoadingBar","_loading_bar_middleware","_loading_bar_ducks","hideLoading","loadingBarReducer","resetLoading","showLoading","_immutable","__esModule","cache","_getRequireWildcardCache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_interopRequireWildcard","_interopRequireDefault","WeakMap","_default","messages","defineMessages","unexpectedTitle","id","defaultMessage","unexpectedMessage","rateLimitedTitle","rateLimitedMessage","ALERT_SHOW","ALERT_DISMISS","ALERT_CLEAR","dismissAlert","alert","type","showAlert","showAlertForError","error","skipNotFound","response","data","status","statusText","headers","title","message","values","Date","console","matchHtmlRegExp","module","string","escape","str","match","exec","html","index","lastIndex","length","charCodeAt","substring","_extends","assign","target","i","arguments","source","_createClass","defineProperties","props","descriptor","configurable","writable","Constructor","protoProps","staticProps","_mapToZero2","_stripStyle2","_stepper4","_mergeDiff2","_performanceNow2","_raf2","_shouldStopAnimation2","_react2","_propTypes2","msPerFrame","rehydrateStyles","mergedPropsStyles","unreadPropStyles","plainStyles","cUnreadPropStyles","map","mergedPropsStyle","style","j","mergeAndSync","willEnter","willLeave","didLeave","oldMergedPropsStyles","destStyles","oldCurrentStyles","oldCurrentVelocities","oldLastIdealStyles","oldLastIdealVelocities","newMergedPropsStyles","oldIndex","oldMergedPropsStyle","leavingStyle","newCurrentStyles","newCurrentVelocities","newLastIdealStyles","newLastIdealVelocities","newMergedPropsStyleCell","foundOldIndex","plainStyle","velocity","TransitionMotion","_React$Component","_this","this","instance","TypeError","_classCallCheck","unmounting","animationID","prevTime","accumulatedTime","clearUnreadPropStyle","_mergeAndSync","state","currentStyles","currentVelocities","lastIdealStyles","lastIdealVelocities","unreadPropStyle","dirty","styleValue","setState","startAnimationIfNecessary","timestamp","propStyles","styles","shouldStopAnimationAll","currentTime","timeDelta","currentFrameCompletion","Math","floor","framesToCatchUp","_mergeAndSync2","newMergedPropsStyle","newCurrentStyle","newCurrentVelocity","newLastIdealStyle","newLastIdealVelocity","newLastIdealStyleValue","newLastIdealVelocityValue","_stepper","val","stiffness","damping","precision","_stepper2","nextIdealX","nextIdealV","defaultState","subClass","superClass","create","setPrototypeOf","__proto__","_inherits","defaultStyles","arrayOf","shape","isRequired","any","objectOf","number","oneOfType","func","object","children","styleThatEntered","_props","undefined","defaultStyleCell","s","_mergeAndSync3","componentDidMount","componentWillReceiveProps","componentWillUnmount","cancel","render","hydratedStyles","renderedChildren","Children","only","Component","window","slice","Array","matches","Element","msMatchesSelector","_focusableElementsString","join","InertRoot","rootElement","inertManager","_inertManager","_rootElement","_managedNodes","Set","hasAttribute","_savedAriaHidden","getAttribute","setAttribute","_makeSubtreeUnfocusable","_observer","MutationObserver","_onMutation","bind","observe","attributes","childList","subtree","disconnect","removeAttribute","forEach","inertNode","_unmanageNode","node","startNode","_this2","composedTreeWalk","_visitNode","activeElement","document","body","contains","root","nodeType","Node","DOCUMENT_FRAGMENT_NODE","parentNode","blur","focus","ELEMENT_NODE","element","_adoptInertRoot","_manageNode","register","add","deregister","_this3","inertSubroot","getInertRoot","setInert","managedNodes","savedInertNode","records","self","record","addedNodes","removedNodes","_unmanageSubtree","attributeName","managedNode","ariaHidden","InertNode","inertRoot","_node","_overrodeFocusMethod","_inertRoots","_savedTabIndex","_destroyed","ensureUntabbable","_throwIfDestroyed","destroyed","Error","tabIndex","hasSavedTabIndex","size","destructor","InertManager","_document","Map","_watchForInert","addInertStyle","head","documentElement","readyState","addEventListener","_onDocumentLoaded","inert","parent","addInertRoot","removeInertRoot","querySelectorAll","inertElement","inertElements","unshift","HTMLElement","callback","shadowRootAncestor","shadowRoot","localName","content","distributedNodes","getDistributedNodes","slot","_distributedNodes","assignedNodes","flatten","_i","child","firstChild","nextSibling","querySelector","createElement","textContent","appendChild","e","k","is","a","b","l","useState","m","useEffect","n","useLayoutEffect","p","useDebugValue","r","getSnapshot","d","f","u","inst","c","g","useSyncExternalStore","h","q","t","useRef","v","useMemo","w","useSyncExternalStoreWithSelector","current","hasValue","for","$$typeof","ContextConsumer","ContextProvider","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","SuspenseList","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isSuspenseList","isValidElementType","getModuleId","typeOf","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","process","hr","uptime","getTime","StaggeredMotion","_state","someDirty","destStyle","currentStyle","prev","next","onRemove","prevKeyIndex","nextKeyIndex","ret","fill","push","sort","nextOrderA","nextOrderB","prevOrderA","prevOrderB","pivot","componentWillMount","getDerivedStateFromProps","nextProps","prevState","componentWillUpdate","nextState","prevProps","__reactInternalSnapshotFlag","__reactInternalSnapshot","getSnapshotBeforeUpdate","polyfill","isReactComponent","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","UNSAFE_componentWillUpdate","componentName","displayName","name","newApiName","componentDidUpdate","maybeSnapshot","snapshot","__suppressDeprecationWarning","config","promiseTypeSuffixes","defaultTypeSuffixes","scope","DEFAULT_SCOPE","_ref","dispatch","action","_promiseTypeSuffixes","arr","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","done","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","toString","from","test","_unsupportedIterableToArray","_nonIterableRest","PENDING","FULFILLED","REJECTED","isPending","RegExp","concat","isFulfilled","isRejected","actionScope","meta","len","arr2","_reactRedux","connect","ownProps","loading","getDomTreeShapes","findNativeHandler","default","SwipeableViewsContext","_extends2","_objectWithoutProperties2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","React","_reactSwipeableViewsCore","event","handler","options","remove","removeEventListener","direction","display","willChange","width","WebkitFlexShrink","flexShrink","overflow","axisProperties","x","overflowX","y","overflowY","flexDirection","transform","translate","rotationMatrix","scrollPosition","scrollLength","clientLength","createTransition","property","duration","easeFunction","delay","applyRotationMatrix","touch","axis","pageX","pageY","adaptMouse","touches","rootNode","domTreeShapes","getComputedStyle","getPropertyValue","clientWidth","scrollWidth","clientHeight","scrollHeight","scrollLeft","scrollTop","nodeWhoClaimedTheScroll","params","startX","some","goingForward","round","areNotAtStart","areNotAtEnd","createContext","SwipeableViews","containerNode","ignoreNextScrollEvents","viewLength","lastX","vx","startY","isSwiping","started","startIndex","transitionListener","touchMoveListener","activeSlide","indexCurrent","firstRenderTimeout","setRootNode","setContainerNode","setActiveSlide","updateHeight","handleSwipeStart","getBoundingClientRect","computedStyle","transformValues","split","rootStyle","tranformNormalized","parseInt","paddingLeft","paddingRight","handleSwipeMove","_this$props","ignoreNativeScroll","onSwitching","resistance","dx","abs","dy","constant","UNCERTAINTY_THRESHOLD","count","preventDefault","_computeIndex","computeIndex","setIndexCurrent","displaySameSlide","isDragging","handleTouchStart","handleSwipeEnd","indexNew","indexLatest","delta","threshold","ceil","hysteresis","indexMax","onChangeIndex","reason","handleTransitionEnd","onTouchStart","handleTouchEnd","onTouchEnd","handleMouseDown","onMouseDown","persist","handleMouseUp","onMouseUp","handleMouseLeave","onMouseLeave","handleMouseMove","onMouseMove","handleScroll","onScroll","offsetHeight","heightLatest","renderOnlyActive","disableLazyLoading","disabled","passive","setTimeout","getDisplaySameSlide","clearTimeout","slideUpdateHeight","animateTransitions","WebkitTransform","onTransitionEnd","transition","WebkitTransition","_this4","_this$props2","animateHeight","containerStyleProp","containerStyle","enableMouseEvents","slideStyleProp","slideStyle","slideClassName","springConfig","other","_this$state","touchEvents","mouseEvents","additionalTranstion","height","WebkitFlexDirection","Provider","getSwipeableViewsContext","ref","className","indexChild","hidden","defaultProps","apply","objectWithoutPropertiesLoose","excluded","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_defineProperties","assertThisInitialized","_typeof2","ReferenceError","_getPrototypeOf","getPrototypeOf","_setPrototypeOf","_checkIndexBounds","_constant","_getDisplaySameSlide","_mod","_react","newStartX","exp","RESISTANCE_COEF","getChildrenKey","oldKey","today","just_now","just_now_full","seconds","seconds_full","minutes","minutes_full","hours","hours_full","days","days_full","moments_remaining","seconds_remaining","minutes_remaining","hours_remaining","days_remaining","dateFormatOptions","hour12","year","month","day","hour","minute","shortDateFormatOptions","SECOND","MINUTE","HOUR","DAY","timeAgoString","intl","date","timeGiven","short","relativeTime","formatMessage","getFullYear","formatDate","RelativeTimestamp","_timer","shouldComponentUpdate","locale","_scheduleNextUpdate","unitDelay","units","getUnitDelay","absDelta","selectUnits","unitRemainder","max","futureDate","includes","timeRemainingString","_jsx","dateTime","RelativeTimestampWithIntl","injectIntl","initialPath","_document$querySelect","_document$querySelect2","hasMultiColumnPath","startsWith","getElementById","initialState","JSON","parse","local_settings","localStorage","getItem","getMeta","prop","autoPlayGif","boostModal","deleteModal","disableSwiping","disabledAccountId","displayMedia","domain","expandSpoilers","forceSingleColumn","mascot","me","movedToAccountId","owner","profile_directory","reduceMotion","registrationsOpen","searchEnabled","trendsEnabled","showTrends","singleUserMode","source_url","timelinePreview","trendsAsLanding","unfollowModal","useBlurhash","usePendingItems","version","languages","criticalUpdatesPending","critical_updates_pending","sso_redirect","maxChars","max_toot_chars","favouriteModal","pollLimits","poll_limits","defaultContentType","useSystemEmojiFont","SETTING_CHANGE","SETTING_SAVE","changeSetting","path","saveSettings","debouncedSave","_debounce","getState","getIn","filter","_","toJS","api","put","then","catch","trailing","assetHost","ready","cdnHost","ALERT_NOOP","message_values","reset_date","debug","EXIF","EXIFwrapped","ExifTags","Tags","TiffTags","GPSTags","IFD1Tags","StringValues","ExposureProgram","MeteringMode","LightSource","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","Components","imageHasData","img","exifdata","getImageData","handleBinaryFile","binFile","findEXIFinJPEG","iptcdata","file","dataView","DataView","log","byteLength","getUint8","offset","isFieldSegmentStart","nameHeaderLength","readIPTCData","getUint16","findIPTCinJPEG","isXmpEnabled","xmpdata","dom","DOMParser","getStringFromDB","startOffset","sectionLength","xmpString","xmpEndIndex","indexOfXmp","xml2Object","parseFromString","findXMPinJPEG","src","base64","contentType","replace","binary","atob","buffer","ArrayBuffer","view","Uint8Array","base64ToArrayBuffer","fileReader","FileReader","onload","result","url","http","XMLHttpRequest","open","responseType","send","objectURLToBlob","blob","readAsArrayBuffer","Blob","File","marker","readEXIFData","IptcFieldMap","fieldValue","fieldName","dataSize","segmentType","segmentStartPos","getInt16","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","tag","entries","tags","readTagValue","vals","numerator","denominator","numValues","getUint32","valueOffset","Number","getInt32","start","outstr","String","fromCharCode","exifData","gpsData","tiffOffset","firstIFDOffset","ExifIFDPointer","GPSInfoIFDPointer","IFD1OffsetPointer","getNextIFDOffset","thumbTags","JpegIFOffset","JpegIFByteCount","tOffset","tLength","readThumbnailImage","xml2json","xml","json","attribute","item","nodeName","nodeValue","hasChildNodes","childNodes","old","idx","itemAtt","dataKey","dataValue","enableXmp","disableXmp","getData","Image","HTMLImageElement","complete","getTag","getIptcTag","getAllTags","getAllIptcTags","pretty","strPretty","readFromBinaryFile","AnimatedNumber","previousValue","setPreviousValue","setDirection","useCallback","spring","ShortNumber","items","_ref2","position","toServerSideType","columnType","obfuscatedCount","obfuscate","_Fragment","_jsx2","getAccountBase","getAccountCounters","getAccountRelationship","getAccountMoved","makeGetAccount","createSelector","base","counters","relationship","moved","merge","withMutations","getFilters","contextType","serverSideType","makeGetStatus","_ref3","_ref4","_ref5","statusBase","statusReblog","accountBase","accountReblog","filters","filtered","_statusReblog","filterResults","ImmutableList","isEmpty","makeGetPictureInPicture","_ref6","statusId","inUse","available","ImmutableMap","ALERT_DEFAULTS","dismissAfter","getAlerts","alerts","toArray","makeGetNotification","accountId","account","makeGetReport","targetAccountId","targetAccount","getAccountGallery","statusIds","statuses","medias","media","getAccountHidden","followingOrRequested","isSelf","getStatusList","toList","padLeft","num","unicodeToUnifiedName","output","codePointAt","toUpperCase","ModalRoot","PureComponent","handleKeyUp","keyCode","onClose","handleKeyDown","focusable","shiftKey","stopPropagation","getSiblings","parentElement","setRef","history","context","router","createBrowserHistory","sibling","Promise","resolve","ignoreFocus","preventScroll","_handleModalClose","_handleModalOpen","_ensureHistoryBuffer","_modalHistoryKey","unlistenHistory","listen","location","mastodonModalKey","goBack","pathname","visible","opacity","backgroundColor","multiply","pointerEvents","role","onClick","contextTypes","PropTypes","cachedScrollbarWidth","getScrollbarWidth","scrollbarWidth","isMobile","innerWidth","getActualScrollbarWidth","outer","visibility","inner","offsetWidth","removeChild","closed","voted","votes","Poll","ImmutablePureComponent","selected","expired","_toggleOption","poll","tmp","handleOptionChange","handleOptionKeyPress","handleVote","onVote","handleRefresh","refresh","handleReveal","revealed","expires_at","_setupTimer","renderOption","option","optionIndex","showResults","lang","pollVotesCount","percent","leading","filterNot","every","active","titleHtml","emojiMap","reduce","emoji","emojify","escapeTextContentForBrowser","classNames","selectable","checked","onChange","checkbox","onKeyPress","dangerouslySetInnerHTML","__html","Icon","Motion","defaultStyle","timeRemaining","votesCount","FormattedMessage","identity","signedIn","_jsxs","propTypes","ImmutablePropTypes","bool","close","previous","MediaModal","navigationHidden","zoomButtonHidden","handleSwipe","handleNextClick","getIndex","handlePrevClick","handleChangeIndex","currentTarget","toggleNavigation","_sendBackgroundColor","onChangeBackgroundColor","blurhash","getAverageFromBlurhash","leftNav","fixedWidth","rightNav","image","description","ImageLoader","previewSrc","alt","autoPlay","volume","Video","preview","frameRate","aspectRatio","onCloseVideo","detailed","GIFV","navigationClassName","pagination","ReactSwipeableViews","alignItems","IconButton","icon","Footer","withOpenButton","list","loadedLocale","getLocale","isLocaleLoaded","localeLoadingSemaphore","Semaphore","async","loadLocale","runExclusive","setLocale","onProviderError","IntlProvider","localeLoaded","setLocaleLoaded","loadLocaleData","BaseIntlProvider","onError","textComponent","noEsc","play","pause","mute","unmute","hide","expand","fullscreen","exit_fullscreen","formatTime","secondsNum","findElementPosition","el","box","left","top","docEl","clientLeft","pageXOffset","clientTop","pageYOffset","getPointerPosition","boxW","boxH","boxY","boxX","changedTouches","min","fileNameFromURL","URL","lastIndexOf","paused","dragging","hovered","muted","sensitive","setPlayerRef","player","setVideoRef","video","setSeekRef","seek","setVolumeRef","handleClickRoot","handlePlay","_updateTime","handlePause","handleTimeUpdate","handleVolumeMouseDown","handleMouseVolSlide","handleVolumeMouseUp","_throttle","isNaN","handleVideoKeyDown","togglePlay","frameTime","getFrameRate","toggleMute","toggleFullscreen","seekBy","exitFullscreen","isFullscreen","requestFullscreen","inView","innerHeight","deployPictureInPicture","handleFullscreenChange","handleMouseEnter","toggleReveal","onToggleVisibility","handleLoadedData","handleProgress","lastTimeRange","buffered","end","handleVolumeChange","handleOpenVideo","onOpenVideo","startTime","defaultVolume","componentIndex","handleCloseVideo","requestAnimationFrame","time","editable","autoFocus","progress","preload","warning","inactive","onMouseEnter","onKeyDown","Blurhash","hash","dummy","poster","onPlay","onPause","onLoadedData","onProgress","onVolumeChange","alwaysVisible","preventPlayback","inline","letterbox","fullwidth","playerStyle","MEDIA_COMPONENTS","MediaGallery","Card","Hashtag","Audio","MediaContainer","handleOpenMedia","classList","marginRight","components","mediaList","fromJS","handleCloseMedia","setBackgroundColor","color","_this$state$options","_this$state$options2","_this$state$options3","component","card","hashtag","onOpenMedia","createPortal","_createElement","barStyle","zIndex","Settings","keyBase","generateKey","encodedData","stringify","setItem","rawData","removeItem","pushNotificationsSetting","tagHistory","bannerSettings","searchHistory","Immutable","ANONYMOUS","productionTypeChecker","invariant","getProductionTypeChecker","getPropType","propValue","propType","Iterable","toSource","createChainableTypeChecker","validate","checkType","propName","propFullName","_len","rest","_key","chainedCheckType","createIterableSubclassTypeChecker","subclassName","validator","immutableClassName","immutableClassTypeValidator","isIterable","listOf","mapOf","orderedMapOf","setOf","orderedSetOf","stackOf","iterableOf","recordOf","mapContains","orderedMapContains","orderedMap","orderedSet","stack","seq","iterable","indexed","isIndexed","keyed","isKeyed","_defineProperty","ownKeys","enumerableOnly","symbols","sym","_possibleConstructorReturn","_assertThisInitialized","NOT_SET","collection","notSetValue","isInvalid","isMapLike","keyPath","check","checkItem","createChecker","checklist","getOwnPropertyDescriptors","_objectSpread2","updateOnProps","updateOnStates","ACCOUNT_FETCH_REQUEST","ACCOUNT_FETCH_SUCCESS","ACCOUNT_FETCH_FAIL","ACCOUNT_LOOKUP_FAIL","ACCOUNT_FOLLOW_REQUEST","ACCOUNT_FOLLOW_SUCCESS","ACCOUNT_FOLLOW_FAIL","ACCOUNT_UNFOLLOW_REQUEST","ACCOUNT_UNFOLLOW_SUCCESS","ACCOUNT_UNFOLLOW_FAIL","ACCOUNT_BLOCK_REQUEST","ACCOUNT_BLOCK_SUCCESS","ACCOUNT_BLOCK_FAIL","ACCOUNT_UNBLOCK_REQUEST","ACCOUNT_UNBLOCK_SUCCESS","ACCOUNT_UNBLOCK_FAIL","ACCOUNT_MUTE_REQUEST","ACCOUNT_MUTE_SUCCESS","ACCOUNT_MUTE_FAIL","ACCOUNT_UNMUTE_REQUEST","ACCOUNT_UNMUTE_SUCCESS","ACCOUNT_UNMUTE_FAIL","ACCOUNT_PIN_REQUEST","ACCOUNT_PIN_SUCCESS","ACCOUNT_PIN_FAIL","ACCOUNT_UNPIN_REQUEST","ACCOUNT_UNPIN_SUCCESS","ACCOUNT_UNPIN_FAIL","FOLLOWERS_FETCH_REQUEST","FOLLOWERS_FETCH_SUCCESS","FOLLOWERS_FETCH_FAIL","FOLLOWERS_EXPAND_REQUEST","FOLLOWERS_EXPAND_SUCCESS","FOLLOWERS_EXPAND_FAIL","FOLLOWING_FETCH_REQUEST","FOLLOWING_FETCH_SUCCESS","FOLLOWING_FETCH_FAIL","FOLLOWING_EXPAND_REQUEST","FOLLOWING_EXPAND_SUCCESS","FOLLOWING_EXPAND_FAIL","RELATIONSHIPS_FETCH_REQUEST","RELATIONSHIPS_FETCH_SUCCESS","RELATIONSHIPS_FETCH_FAIL","FOLLOW_REQUESTS_FETCH_REQUEST","FOLLOW_REQUESTS_FETCH_SUCCESS","FOLLOW_REQUESTS_FETCH_FAIL","FOLLOW_REQUESTS_EXPAND_REQUEST","FOLLOW_REQUESTS_EXPAND_SUCCESS","FOLLOW_REQUESTS_EXPAND_FAIL","FOLLOW_REQUEST_AUTHORIZE_REQUEST","FOLLOW_REQUEST_AUTHORIZE_SUCCESS","FOLLOW_REQUEST_AUTHORIZE_FAIL","FOLLOW_REQUEST_REJECT_REQUEST","FOLLOW_REQUEST_REJECT_SUCCESS","FOLLOW_REQUEST_REJECT_FAIL","PINNED_ACCOUNTS_FETCH_REQUEST","PINNED_ACCOUNTS_FETCH_SUCCESS","PINNED_ACCOUNTS_FETCH_FAIL","PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST","PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS","PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE","PINNED_ACCOUNTS_EDITOR_RESET","ACCOUNT_REVEAL","fetchAccount","fetchRelationships","fetchAccountRequest","importFetchedAccount","skipAlert","fetchAccountFail","lookupAccount","acct","lookupAccountRequest","lookupAccountSuccess","lookupAccountFail","followAccount","reblogs","alreadyFollowing","locked","skipLoading","followAccountRequest","post","followAccountSuccess","followAccountFail","unfollowAccount","unfollowAccountRequest","unfollowAccountFail","blockAccount","blockAccountRequest","blockAccountFail","unblockAccount","unblockAccountRequest","unblockAccountFail","muteAccount","notifications","muteAccountRequest","muteAccountFail","unmuteAccount","unmuteAccountRequest","unmuteAccountFail","fetchFollowers","fetchFollowersRequest","getLinks","refs","find","link","rel","importFetchedAccounts","accounts","fetchFollowersSuccess","uri","fetchFollowersFail","expandFollowers","expandFollowersRequest","expandFollowersSuccess","expandFollowersFail","fetchFollowing","fetchFollowingRequest","fetchFollowingSuccess","fetchFollowingFail","expandFollowing","expandFollowingRequest","expandFollowingSuccess","expandFollowingFail","accountIds","loadedRelationships","newAccountIds","ids","relationships","fetchRelationshipsFail","fetchFollowRequests","fetchFollowRequestsSuccess","fetchFollowRequestsFail","expandFollowRequests","expandFollowRequestsSuccess","expandFollowRequestsFail","authorizeFollowRequest","authorizeFollowRequestRequest","authorizeFollowRequestSuccess","authorizeFollowRequestFail","rejectFollowRequest","rejectFollowRequestRequest","rejectFollowRequestSuccess","rejectFollowRequestFail","pinAccount","pinAccountRequest","pinAccountFail","unpinAccount","unpinAccountRequest","unpinAccountFail","revealAccount","fetchPinnedAccounts","limit","fetchPinnedAccountsSuggestions","following","query","clearPinnedAccountsSuggestions","changePinnedAccountsSuggestions","resetPinnedAccountsEditor","MAX_IMAGE_PIXELS","_browser_quirks","loadImage","inputFile","reject","createObjectURL","reader","onerror","readAsDataURL","getImageUrl","getOrientation","orientation","testImageURL","automatic","dropOrientationIfNeeded","resizeImage","newWidth","sqrt","newHeight","refData","getContext","drawImage","processImage","canvas","toBlob","resizeFile","fetchComposeSuggestionsAccountsController","fetchComposeSuggestionsTagsController","COMPOSE_CHANGE","COMPOSE_CYCLE_ELEFRIEND","COMPOSE_SUBMIT_REQUEST","COMPOSE_SUBMIT_SUCCESS","COMPOSE_SUBMIT_FAIL","COMPOSE_REPLY","COMPOSE_REPLY_CANCEL","COMPOSE_DIRECT","COMPOSE_MENTION","COMPOSE_RESET","COMPOSE_UPLOAD_REQUEST","COMPOSE_UPLOAD_SUCCESS","COMPOSE_UPLOAD_FAIL","COMPOSE_UPLOAD_PROGRESS","COMPOSE_UPLOAD_PROCESSING","COMPOSE_UPLOAD_UNDO","THUMBNAIL_UPLOAD_REQUEST","THUMBNAIL_UPLOAD_SUCCESS","THUMBNAIL_UPLOAD_FAIL","THUMBNAIL_UPLOAD_PROGRESS","COMPOSE_SUGGESTIONS_CLEAR","COMPOSE_SUGGESTIONS_READY","COMPOSE_SUGGESTION_SELECT","COMPOSE_SUGGESTION_IGNORE","COMPOSE_SUGGESTION_TAGS_UPDATE","COMPOSE_TAG_HISTORY_UPDATE","COMPOSE_MOUNT","COMPOSE_UNMOUNT","COMPOSE_ADVANCED_OPTIONS_CHANGE","COMPOSE_SENSITIVITY_CHANGE","COMPOSE_SPOILERNESS_CHANGE","COMPOSE_SPOILER_TEXT_CHANGE","COMPOSE_VISIBILITY_CHANGE","COMPOSE_CONTENT_TYPE_CHANGE","COMPOSE_LANGUAGE_CHANGE","COMPOSE_EMOJI_INSERT","COMPOSE_UPLOAD_CHANGE_REQUEST","COMPOSE_UPLOAD_CHANGE_SUCCESS","COMPOSE_UPLOAD_CHANGE_FAIL","COMPOSE_DOODLE_SET","COMPOSE_POLL_ADD","COMPOSE_POLL_REMOVE","COMPOSE_POLL_OPTION_ADD","COMPOSE_POLL_OPTION_CHANGE","COMPOSE_POLL_OPTION_REMOVE","COMPOSE_POLL_SETTINGS_CHANGE","INIT_MEDIA_EDIT_MODAL","COMPOSE_CHANGE_MEDIA_DESCRIPTION","COMPOSE_CHANGE_MEDIA_FOCUS","COMPOSE_SET_STATUS","uploadErrorLimit","uploadErrorPoll","ensureComposeIsVisible","routerHistory","setComposeToStatus","text","spoiler_text","content_type","changeCompose","cycleElefriendCompose","replyCompose","prependCWRe","cancelReplyCompose","resetCompose","mentionCompose","directCompose","submitCompose","media_attributes","spoilerText","toFixed","request","method","in_reply_to_id","media_ids","language","recognizedTags","oldHistory","names","recoverHashtags","intersectedOldHistory","findIndex","newName","toLowerCase","newHistory","updateTagHistory","submitComposeSuccess","insertIfOnline","timelineId","timeline","updateTimeline","importFetchedStatus","local_only","submitComposeFail","doodleSet","uploadCompose","files","pending","total","FormData","append","onUploadProgress","loaded","uploadComposeProgress","uploadComposeSuccess","uploadComposeProcessing","tryCount","retryAfter","log2","uploadComposeFail","uploadThumbnail","uploadThumbnailRequest","uploadThumbnailProgress","uploadThumbnailSuccess","uploadThumbnailFail","initMediaEditModal","openModal","modalType","modalProps","onChangeMediaDescription","onChangeMediaFocus","focusX","focusY","changeUploadCompose","parseFloat","changeUploadComposeSuccess","changeUploadComposeFail","attached","undoUploadCompose","media_id","clearComposeSuggestions","abort","fetchComposeSuggestionsAccounts","token","AbortController","signal","readyComposeSuggestionsAccounts","axios","isCancel","finally","fetchComposeSuggestionsEmojis","results","emojiSearch","maxResults","emojis","readyComposeSuggestionsEmojis","fetchComposeSuggestionsTags","updateSuggestionTags","readyComposeSuggestionsTags","hashtags","fetchComposeSuggestions","selectComposeSuggestion","suggestion","completion","useEmoji","native","colons","localeCompare","sensitivity","hydrateCompose","mountCompose","unmountCompose","changeComposeAdvancedOption","changeComposeSensitivity","changeComposeLanguage","changeComposeSpoilerness","changeComposeSpoilerText","changeComposeVisibility","changeComposeContentType","insertEmojiCompose","addPoll","removePoll","addPollOption","changePollOption","removePollOption","changePollSettings","expiresIn","isMultiple","COMPOSE_COMPOSING_CHANGE","COMPOSE_FOCUS","published","saved","focusCompose","defaultText","username","exclude_unreviewed","startPosition","needsSpace","changeComposing","ACCOUNT_IMPORT","ACCOUNTS_IMPORT","STATUS_IMPORT","STATUSES_IMPORT","POLLS_IMPORT","FILTERS_IMPORT","pushUnique","array","importPolls","polls","normalAccounts","processAccount","normalizeAccount","importAccounts","importFetchedStatuses","normalStatuses","processStatus","normalizeStatus","reblog","normalizePoll","importStatuses","importFilters","importFetchedPoll","createAction","closeModal","activate","deactivate","handleClick","handleKeyPress","animate","_this$props$style","containerSize","fontSize","lineHeight","activeStyle","label","textAlign","expanded","inverted","overlay","counter","obfuscateCount","href","classes","overlayed","contents","TIMELINE_UPDATE","TIMELINE_DELETE","TIMELINE_CLEAR","TIMELINE_EXPAND_REQUEST","TIMELINE_EXPAND_SUCCESS","TIMELINE_EXPAND_FAIL","TIMELINE_SCROLL_TOP","TIMELINE_LOAD_PENDING","TIMELINE_DISCONNECT","TIMELINE_CONNECT","TIMELINE_MARK_AS_PARTIAL","loadPending","accept","preferPendingItems","submitMarkers","deleteFromTimelines","references","reblogOf","clearTimeline","noOp","parseTags","mode","expandTimeline","isLoadingMore","max_id","pinned","compareId","since_id","isLoadingRecent","expandTimelineRequest","partial","expandTimelineSuccess","expandTimelineFail","fillTimelineGaps","gaps","take","maxId","expandHomeTimeline","_temp","expandPublicTimeline","_temp2","onlyMedia","onlyRemote","allowLocalOnly","remote","allow_local_only","only_media","expandCommunityTimeline","_temp3","local","expandDirectTimeline","_temp4","expandAccountTimeline","_temp5","withReplies","tagged","exclude_replies","exclude_reblogs","expandAccountFeaturedTimeline","_temp6","expandAccountMediaTimeline","_temp7","expandListTimeline","_temp8","expandHashtagTimeline","_temp9","all","none","fillHomeTimelineGaps","fillPublicTimelineGaps","_temp10","fillCommunityTimelineGaps","_temp11","fillListTimelineGaps","scrollTopTimeline","connectTimeline","disconnectTimeline","markAsPartial","NOT_FOUND","defaultEqualityCheck","defaultMemoize","equalityCheckOrOptions","equals","entry","providedOptions","equalityCheck","_providedOptions$equa","_providedOptions$maxS","maxSize","resultEqualityCheck","comparator","createCacheKeyComparator","getEntries","clear","cacheIndex","splice","pop","createLruCache","memoized","matchingEntry","clearCache","createSelectorCreator","memoize","memoizeOptionsFromArgs","_len2","funcs","_key2","_lastResult","_recomputations","directlyPassedOptions","memoizeOptions","resultFunc","_directlyPassedOption2","finalMemoizeOptions","dependencies","dep","dependencyTypes","getDependencies","memoizedResultFunc","selector","lastResult","recomputations","resetRecomputations","Q","Function","Z","L","nn","X","rn","delete","freeze","isFrozen","tn","U","O","S","P","M","H","A","I","N","R","D","z","E","F","T","C","en","on","Proxy","revocable","revoke","proxy","J","K","G","W","B","Reflect","getOwnPropertyNames","deleteProperty","un","produce","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","op","$","an","fn","REBLOG_REQUEST","REBLOG_SUCCESS","REBLOG_FAIL","REBLOGS_EXPAND_REQUEST","REBLOGS_EXPAND_SUCCESS","REBLOGS_EXPAND_FAIL","FAVOURITE_REQUEST","FAVOURITE_SUCCESS","FAVOURITE_FAIL","UNREBLOG_REQUEST","UNREBLOG_SUCCESS","UNREBLOG_FAIL","UNFAVOURITE_REQUEST","UNFAVOURITE_SUCCESS","UNFAVOURITE_FAIL","REBLOGS_FETCH_REQUEST","REBLOGS_FETCH_SUCCESS","REBLOGS_FETCH_FAIL","FAVOURITES_FETCH_REQUEST","FAVOURITES_FETCH_SUCCESS","FAVOURITES_FETCH_FAIL","FAVOURITES_EXPAND_REQUEST","FAVOURITES_EXPAND_SUCCESS","FAVOURITES_EXPAND_FAIL","PIN_REQUEST","PIN_SUCCESS","PIN_FAIL","UNPIN_REQUEST","UNPIN_SUCCESS","UNPIN_FAIL","BOOKMARK_REQUEST","BOOKMARK_SUCCESS","BOOKMARK_FAIL","UNBOOKMARK_REQUEST","UNBOOKMARK_SUCCESS","UNBOOKMARK_FAIL","reblogRequest","reblogSuccess","reblogFail","unreblog","unreblogRequest","unreblogSuccess","unreblogFail","favourite","favouriteRequest","favouriteSuccess","favouriteFail","unfavourite","unfavouriteRequest","unfavouriteSuccess","unfavouriteFail","bookmark","bookmarkRequest","bookmarkSuccess","bookmarkFail","unbookmark","unbookmarkRequest","unbookmarkSuccess","unbookmarkFail","fetchReblogs","fetchReblogsRequest","fetchReblogsSuccess","fetchReblogsFail","expandReblogs","expandReblogsRequest","expandReblogsSuccess","expandReblogsFail","fetchFavourites","fetchFavouritesRequest","fetchFavouritesSuccess","fetchFavouritesFail","expandFavourites","expandFavouritesRequest","expandFavouritesSuccess","expandFavouritesFail","pin","pinRequest","pinSuccess","pinFail","unpin","unpinRequest","unpinSuccess","unpinFail","DELETE","SHIFT","SIZE","MASK","SetRef","OwnerID","ensureSize","iter","__iterate","returnTrue","wrapIndex","uint32Index","NaN","wholeSlice","begin","isNeg","resolveBegin","resolveIndex","resolveEnd","defaultIndex","Infinity","IS_COLLECTION_SYMBOL","isCollection","maybeCollection","Boolean","IS_KEYED_SYMBOL","maybeKeyed","IS_INDEXED_SYMBOL","maybeIndexed","isAssociative","maybeAssociative","Collection","Seq","KeyedCollection","KeyedSeq","IndexedCollection","IndexedSeq","SetCollection","SetSeq","Keyed","Indexed","IS_SEQ_SYMBOL","isSeq","maybeSeq","IS_RECORD_SYMBOL","isRecord","maybeRecord","isImmutable","maybeImmutable","IS_ORDERED_SYMBOL","isOrdered","maybeOrdered","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","iteratorValue","iteratorResult","iteratorDone","hasIterator","maybeIterable","getIteratorFn","isIterator","maybeIterator","getIterator","iteratorFn","KEYS","VALUES","ENTRIES","inspect","isArrayLike","isInteger","emptySequence","toSeq","maybeIndexedSeqFromValue","fromEntrySeq","isKeysIterable","toSetSeq","ObjectSeq","seqFromValue","__toString","cacheResult","_cache","__iterateUncached","entrySeq","reverse","__iterator","__iteratorUncached","toKeyedSeq","keyedSeqFromValue","toIndexedSeq","indexedSeqFromValue","of","ArraySeq","_array","ii","_object","_keys","EMPTY_SEQ","CollectionSeq","_collection","iterations","step","IS_MAP_SYMBOL","isMap","maybeMap","isOrderedMap","maybeOrderedMap","isValueObject","maybeValue","hashCode","valueA","valueB","valueOf","imul","smi","i32","defaultValueOf","hashNullish","hashNumber","STRING_HASH_CACHE_MIN_STRLEN","hashed","stringHashCache","hashString","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","cachedHashString","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","uniqueID","getIENodeHash","nextHash","isExtensible","hashJSObj","symbolMap","hashSymbol","nullish","_objHashUID","ToKeyedSequence","useKeys","_iter","_useKeys","valueSeq","this$1$1","reversedSequence","reverseFactory","mapper","mappedSequence","mapFactory","ToIndexedSequence","ToSetSequence","FromEntriesSequence","validateEntry","indexedCollection","flipFactory","flipSequence","makeSequence","flip","cacheResultThrough","filterFactory","predicate","filterSequence","sliceFactory","originalSize","resolvedBegin","resolvedEnd","sliceSize","resolvedSize","sliceSeq","skipped","isSkipping","skipWhileFactory","skipSequence","skipping","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","sortFactory","defaultComparator","isKeyedCollection","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","iters","zipAll","zipSequence","sizes","iterators","isDone","steps","reify","collectionClass","arrCopy","newArr","condition","assertNotInfinite","coerceKeyPath","isPlainObject","proto","parentProto","nextProto","isDataStructure","quoteString","_ignoreError","shallowCopy","to","collectionCopy","updateIn$1","updater","updatedValue","updateInDeeply","inImmutable","existing","wasNotSet","existingValue","newValue","nextExisting","nextUpdated","emptyMap","setIn$1","setIn","removeIn","deleteIn","update$1","update","updateIn","merge$1","mergeIntoKeyedWith","mergeWith$1","merger","collections","collection$1","__ownerID","mergeIntoCollection","oldVal","sources","mergeWithSources","mergeWith","mergeDeep$1","mergeDeepWithSources","mergeDeepWith$1","deepMerger","oldValue","newDataStructure","oldSeq","newSeq","deepMergerWith","merged","mergeItem","hasVal","nextVal","mergeDeep","mergeDeepWith","mergeIn","mergeDeepIn","mutable","asMutable","wasAltered","__ensureOwner","asImmutable","__altered","keyValues","_root","updateMap","deleteAll","__hash","OrderedMap","sortBy","MapIterator","iterate","ownerID","makeMap","MapPrototype","removeAll","ArrayMapNode","shift","keyHash","didChangeSize","didAlter","removed","exists","MAX_ARRAY_MAP_SIZE","ValueNode","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","nodes","bit","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","including","expandedNodes","HashArrayMapNode","expandNodes","isLeafNode","newBitmap","newNodes","setAt","canEdit","newLen","newArray","after","spliceOut","spliceIn","newCount","MIN_HASH_ARRAY_MAP_SIZE","excluding","packedII","packedNodes","packNodes","HashCollisionNode","mergeIntoNode","keyMatch","maxIndex","EMPTY_MAP","_type","_reverse","_stack","mapIteratorFrame","mapIteratorValue","subNode","__prev","newRoot","newSize","idx1","idx2","IS_LIST_SYMBOL","isList","maybeList","List","empty","emptyList","makeList","VNode","setSize","listNodeFor","_origin","setListBounds","newTail","_tail","getTailOffset","_capacity","updateVNode","_level","updateList","insert","oldSize","arguments$1","seqs","argument","iterateList","DONE","ListPrototype","removeBefore","level","originIndex","newChild","removingFirst","oldChild","editableVNode","removeAfter","sizeIndex","EMPTY_LIST","right","tailPos","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","origin","capacity","nodeHas","lowerNode","newLowerNode","rawIndex","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","EMPTY_ORDERED_MAP","emptyOrderedMap","_map","_list","updateOrderedMap","newMap","newList","makeOrderedMap","omap","toMap","IS_STACK_SYMBOL","isStack","maybeStack","Stack","emptyStack","pushAll","_head","peek","makeStack","EMPTY_STACK","StackPrototype","unshiftAll","IS_SET_SYMBOL","isSet","maybeSet","isOrderedSet","maybeOrderedSet","deepEqual","notAssociative","flipped","allEqual","bSize","mixin","ctor","methods","keyCopier","result$1","emptySet","fromKeys","keySeq","intersect","sets","SetPrototype","union","updateSet","didChanges","mapEntries","mapped","toRemove","subtract","OrderedSet","__make","__empty","EMPTY_SET","makeSet","EMPTY_RANGE","Range","_start","_end","_step","searchValue","possibleIndex","offsetValue","getIn$1","searchKeyPath","hasIn$1","toObject","useTuples","toOrderedMap","toOrderedSet","toSet","toStack","__toStringMapper","singleton","concatSeq","sum","concatFactory","returnValue","partition","isKeyedIter","groups","coerce","partitionFactory","findEntry","sideEffect","separator","joined","isFirst","reducer","initialReduction","reduceRight","butLast","countBy","grouper","countByFactory","entriesSequence","entryMapper","not","found","findKey","findLast","findLastEntry","findLastKey","first","flatMap","flatMapFactory","searchKey","groupBy","groupByFactory","hasIn","isSubset","isSuperset","keyOf","keyMapper","last","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","skip","amount","skipLast","skipWhile","skipUntil","takeLast","takeWhile","takeSequence","iterating","takeWhileFactory","takeUntil","ordered","murmurHashOfSize","hashMerge","hashCollection","CollectionPrototype","toJSON","chain","mapKeys","KeyedCollectionPrototype","removeNum","numArgs","spliced","findLastIndex","interpose","interposedSequence","interposeFactory","interleave","zipped","interleaved","zip","defaultZipper","zipWith","IndexedCollectionPrototype","SetCollectionPrototype","reduction","useFirst","emptyOrderedSet","EMPTY_ORDERED_SET","OrderedSetPrototype","makeOrderedSet","PairSorting","LeftThenRight","RightThenLeft","Record","defaultValues","hasInitialized","throwOnInvalidDefaultValues","RecordType","indices","RecordTypePrototype","_indices","_name","_defaultValues","warn","recordName","setProp","_values","RecordPrototype","recordSeq","newValues","makeRecord","getDescriptiveName","likeRecord","EMPTY_REPEAT","Repeat","times","_value","converter","fromJSWith","defaultConverter","parentValue","converted","transientSingleColumn","layoutFromWindow","listenerOptions","supportsPassiveEvents","userTouching","touchListener","isUserTouching","MARKERS_FETCH_REQUEST","MARKERS_FETCH_SUCCESS","MARKERS_FETCH_FAIL","MARKERS_SUBMIT_SUCCESS","synchronouslySubmitMarkers","accessToken","_buildParams","fetch","Request","keepalive","navigator","sendBeacon","formData","last_read_id","client","setRequestHeader","lastHomeId","lastNotificationId","home","debouncedSubmitMarkers","submitMarkersSuccess","immediate","flush","fetchMarkers","markers","fetchMarkersFail","domParser","makeEmojiMap","shortcode","display_name","trim","display_name_html","note_emojified","note","note_plain","unescapeHTML","fields","pair","name_emojified","value_emojified","value_plain","normalizeFilterResult","normalResult","normalOldStatus","normalStatus","search_index","contentHtml","spoilerHtml","translation","searchContent","media_attachments","att","oldItem","normalizeStatusTranslation","detected_source_language","provider","normalOldPoll","normalPoll","normalOption","own_votes","normalizePollOptionTranslation","normalizeAnnouncement","announcement","normalAnnouncement","settings","autoHideCW","extendStatics","__extends","__","__generator","thisArg","sent","trys","ops","verb","__spreadArray","il","__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","_c","__spreadProps","__async","__this","__arguments","generator","fulfilled","rejected","throw","composeWithDevTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","__REDUX_DEVTOOLS_EXTENSION__","baseProto","prepareAction","actionCreator","args","prepared","payload","MiddlewareArray","_super","species","prepend","EnhancerArray","freezeDraftable","curryGetDefaultMiddleware","thunk","middlewareArray","immutableCheck","serializableCheck","actionCreatorCheck","withExtraArgument","extraArgument","getDefaultMiddleware","IS_PRODUCTION","configureStore","rootReducer","curriedGetDefaultMiddleware","middleware","_f","devTools","_g","preloadedState","_h","enhancers","finalMiddleware","middlewareEnhancer","finalCompose","trace","defaultEnhancers","storeEnhancers","composedEnhancer","executeReducerBuilderCallback","builderCallback","defaultCaseReducer","actionsMap","actionMatchers","builder","addCase","typeOrActionCreator","addMatcher","matcher","addDefaultCase","createReducer","mapOrBuilderCallback","getInitialState","finalActionMatchers","finalDefaultCaseReducer","frozenInitialState_1","caseReducers","cr","previousState","caseReducer","draft","nanoid","random","commonProperties","RejectWithValue","FulfillWithMeta","miniSerializeError","simpleError","commonProperties_1","createAsyncThunk","createAsyncThunk2","typePrefix","payloadCreator","requestId","arg","requestStatus","serializeError","rejectedWithValue","aborted","AC","class_1","dispatchEvent","onabort","throwIfAborted","extra","abortReason","idGenerator","abortController","promise2","_a","_b","finalAction","conditionResult","abortedPromise","err_1","getPendingMeta","race","rejectWithValue","fulfillWithValue","dispatchConditionRejection","unwrap","unwrapResult","withTypes","alm","queueMicrotask","global","globalThis","promise","createQueueWithTimer","timeout","notify","_result","wasAnimating","currentVelocity","lastIdealStyle","lastIdealVelocity","propsStyle","onRest","id1","id2","unicodeToFilename","charCode","_objectSpread","SHOW","HIDE","RESET","_ref$scope","stylesToKeep","ReducedMotion","_interopRequire","_Motion","_StaggeredMotion","_TransitionMotion","_spring","_presets","presets","_stripStyle","stripStyle","_reorderKeys","reorderKeys","canvasProps","canvasRef","pixels","decode","ctx","imageData","ImageData","putImageData","MemoizedBlurhash","memo","BOOSTS_INIT_MODAL","BOOSTS_CHANGE_PRIVACY","initBoostModal","default_privacy","privacy","changeBoostPrivacy","trie","Trie","unicodeMapping","emojiFilenames","filename","darkEmoji","lightEmoji","emojiFilename","emojifyTextNode","customEmojis","fragment","DocumentFragment","unicode_emoji","search","rend","replacement","custom_emoji","static_url","shortCode","createTextNode","replaceChild","emojifyNode","TEXT_NODE","wrapper","innerHTML","buildCustomEmojis","short_names","emoticons","keywords","imageUrl","custom","customCategory","categoriesFromEmojis","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","webkitExitFullscreen","mozCancelFullScreen","webkitRequestFullscreen","mozRequestFullScreen","attachFullscreenListener","listener","detachFullscreenListener","defaultConfig","_presets2","noWobble","screen","matchMedia","passiveOptionAccessed","noop","onTouchStartInWindow","supportsTouchEvents","userAgent","maxTouchPoints","isIPad","secondPerFrame","destX","newV","newX","reusedTuple","vendors","suffix","raf","caf","queue","_now","cp","cancelled","handle","cancelAnimationFrame","reply","replyAll","reblog_private","cancel_reblog_private","cannot_reblog","replyConfirm","replyMessage","_performReply","handleReplyClick","askReplyConfirmation","confirm","onConfirm","handleFavouriteClick","_performReblog","handleReblogClick","onReblog","handleOpenClick","button","publicStatus","reblogPrivate","replyIcon","replyTitle","reblogTitle","makeMapStateToProps","getStatus","mapStateToProps","showReplyCount","replyButton","createThunkMiddleware","Visualizer","tickSize","setCanvas","setAudioContext","analyser","createAnalyser","smoothingTimeConstant","fftSize","getTickPoints","coords","rad","PI","cos","sin","drawTick","cx","cy","mainColor","x1","y1","x2","y2","dx1","dy1","dx2","dy2","gradient","createLinearGradient","lastColor","hex","alpha","hex2rgba","addColorStop","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","getTicks","radius","scaleCoefficient","ticks","bufferLength","frequencyBinCount","frequencyData","allScales","getByteFrequencyData","tick","coef","scale","pv","cv","clearRect","draw","coefficient","save","restore","download","super","_setDimensions","setAudioRef","audio","setCanvasRef","visualizer","audioContext","_initAudioContext","handleResize","resume","_renderCanvas","suspend","gainNode","gain","_pack","handleDownload","res","objectURL","click","revokeObjectURL","handleAudioKeyDown","foregroundColor","accentColor","cacheWidth","_clear","_draw","AudioContext","webkitAudioContext","createMediaElementSource","createGain","destination","_getCX","_getCY","_getAccentColor","_getRadius","_getScaleCoefficient","_getBackgroundColor","_getForegroundColor","crossOrigin","borderRadius","containerWidth","EMOJI_USE","_toPropertyKey","input","hint","prim","toPrimitive","formatProdErrorMessage","code","$$observable","observable","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","subscribe","isSubscribed","listeners","replaceReducer","nextReducer","outerSubscribe","observer","observeState","unsubscribe","combineReducers","reducers","reducerKeys","finalReducers","shapeAssertionError","finalReducerKeys","assertReducerShape","hasChanged","previousStateForKey","nextStateForKey","compose","applyMiddleware","middlewares","createStore","store","_dispatch","middlewareAPI","getBatch","ContextKey","gT","_gT$ContextKey","contextMap","realContext","ReactReduxContext","createReduxContextHook","notInitialized","refEquality","createSelectorHook","useReduxContext","equalityFnOrOptions","equalityFn","stabilityCheck","noopCheck","subscription","getServerState","globalStabilityCheck","globalNoopCheck","wrappedSelector","selectedState","addNestedSub","_objectWithoutPropertiesLoose","_excluded","pureFinalPropsSelectorFactory","mapDispatchToProps","mergeProps","stateProps","dispatchProps","mergedProps","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","hasRunAtLeastOnce","handleSubsequentCalls","nextOwnProps","propsChanged","stateChanged","dependsOnOwnProps","nextStateProps","statePropsChanged","handleNewState","wrapMapToPropsConstant","getConstant","constantSelector","getDependsOnOwnProps","mapToProps","wrapMapToPropsFunc","methodName","stateOrDispatch","createInvalidArgFactory","wrappedComponentName","defaultMergeProps","nullListeners","createSubscription","parentSub","subscriptionsAmount","selfSubscribed","handleChangeWrapper","onStateChange","trySubscribe","batch","createListenerCollection","tryUnsubscribe","cleanupListener","notifyNestedSubs","getListeners","useIsomorphicLayoutEffect","shallowEqual","objA","objB","keysA","keysB","NO_SUBSCRIPTION_ARRAY","captureWrapperProps","lastWrapperProps","lastChildProps","renderIsScheduled","wrapperProps","childPropsFromStoreUpdate","strictEqual","pure","areMergedPropsEqual","forwardRef","Context","initMapStateToProps","mapStateToPropsFactory","initMapDispatchToProps","actionCreators","boundActionCreators","bindActionCreators","mapDispatchToPropsFactory","initMergeProps","hasRunOnce","nextMergedProps","wrapMergePropsFunc","mergePropsFactory","shouldHandleStateChanges","WrappedComponent","selectorFactoryOptions","ConnectFunction","propsContext","reactReduxForwardedRef","ContextToUse","Consumer","contextValue","didStoreComeFromProps","didStoreComeFromContext","childPropsSelector","overriddenContextValue","isMounted","latestSubscriptionCallbackError","actualChildPropsSelector","subscribeForReact","reactListener","additionalSubscribeListener","didUnsubscribe","lastThrownError","checkForUpdates","latestStoreState","newChildProps","subscribeUpdates","effectFunc","effectArgs","actualChildProps","renderedWrappedComponent","Connect","forwarded","serverState","createStoreHook","createDispatchHook","useStore","useDispatch","newBatch","initializeConnect","gentle","wobbly","stiff","TERMINATING_ANIMATION_DURATION","ANIMATION_DURATION","PROGRESS_INCREASE","MAX_PROGRESS","UPDATE_TIME","_reactLifecyclesCompat","_propTypes","_createSuper","Derived","hasNativeReflectConstruct","construct","sham","_isNativeReflectConstruct","Super","NewTarget","_Component","reset","terminatingAnimationTimeoutId","newPercent","progressIncrease","simulateProgress","maxProgress","shouldStart","shouldStop","stop","clearInterval","progressIntervalId","updateTime","setInterval","showFastActions","terminatingAnimationDuration","isShown","customStyle","animationDuration","msTransition","MozTransition","OTransition","buildStyle","ConnectedLoadingBar","loadingBar","_SwipeableViews","webpackAsyncContext","req","__webpack_require__","pow","trunc","Uint8ClampedArray","V","unitInput","unitOutput","roundOutput","shortCodesToEmojiData","_skins","_categories","_short_names","emojisWithoutShortCodes","emojiCompressed","processEmojiMapData","emojiMapData","filenameData","_autoUnfoldCW","skip_unfold_regex","regex","autoUnfoldCW","setLoading","loop","playsInline","DIGIT_CHARACTERS","int","digit","decode83","re","matched_hashtag","skins","categories","_emojisWithoutShortCodes","_filenameData","searchData","unified","buildSearch","addToSearch","stringFromCodePoint","fromCodePoint","highSurrogate","lowSurrogate","codeUnits","codePoint","isFinite","RangeError","_JSON","COLONS_REGEX","SKINS","unifiedToNative","codePoints","getSanitizedData","skin_tone","skin_variations","skin","sanitize","emojiData","variations","skinKey","variationData","uniq","acc","uniqA","uniqB","originalPool","emojisList","emoticonsList","customEmojisList","emoticon","addCustomToPool","pool","emojiId","clearCustomEmojis","emojisToShowFilter","include","exclude","allResults","category","isIncluded","isExcluded","customIsIncluded","customIsExcluded","aPool","aIndex","charIndex","char","scores","sub","subIndex","score","compress","getDistance","p1","p2","clientX","clientY","ZoomableImage","zoomMatrix","fullScreen","rate","clientHeightFixed","translateX","translateY","zoomState","dragPosition","dragged","lockScroll","lockTranslate","removers","container","lastTouchEndTime","lastDistance","mouseWheelHandler","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","normalizeWheel","mouseDownHandler","cursor","userSelect","mouseMoveHandler","mouseUpHandler","removeProperty","handleTouchMove","distance","midpoint","getMidpoint","_MAX_SCALE","clamp","zoom","lastMidpoint","initZoomMatrix","handleZoomClick","setContainerRef","setImageRef","removeEventListeners","nextScale","nextScrollLeft","nextScrollTop","zoomButtonShouldHide","zoomButtonTitle","transformOrigin","draggable","loadPreviewCanvas","handleError","handleLoad","canvasContext","loadOriginalImage","_canvasContext","hasSize","clearPreviewCanvas","IDNA_PREFIX","part","punycode"],"mappings":"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ACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,aAAc,CACb,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,eAAgB,CACf,KACA,KAED,eAAgB,CACf,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,aAAc,CACb,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,iBAAkB,CACjB,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,aAAc,CACb,KACA,KAED,YAAa,CACZ,KACA,KAED,aAAc,CACb,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,YAAa,CACZ,KACA,KAED,aAAc,CACb,KACA,KAED,eAAgB,CACf,KACA,KAED,eAAgB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pB,IACKkwB,IACFlwB,EAAEquB,kBACF6B,IACF,GAEF,CAACA,IAGH,OACE9V,YAAA,OAAKlF,UAAU,OAAOzjB,MAAO,CAAE+3B,SAAU,kBAAa,EACnDtf,GACCkQ,YAAA,UACE5O,MAAOA,EACPqJ,OAAQA,EACRob,KAAK,SACL3yB,SAAU,EACV,aAAY04B,EACZznC,MAAOynC,EACPxD,KAAMA,EACNtC,QAASuuB,IAIbrkC,YAAA,SACEyI,IAAKA,EACLoN,KAAK,SACL3yB,SAAU,EACV,aAAY04B,EACZznC,MAAOynC,EACPxD,KAAMA,EACN8H,OAAK,EACLonE,MAAI,EACJzrE,UAAQ,EACR0rE,aAAW,EACXzxE,QAASuuB,EACTngB,aAAc5B,EACdjrC,MAAO,CAAE+3B,SAAUtf,EAAU,WAAa,SAAUivB,IAAK,EAAGD,KAAM,KAEhE,C,mCCnEV,wCAAM0oE,EAAmB,CACvB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAqBWpsE,EAA0BD,IACrC,OAAKA,GAPkBssE,EAZA7yG,KACvB,IACI8yG,EADA12G,EAAQ,EAGZ,IAAK,MAAM+V,KAAKnS,EACd8yG,EAAQF,EAAiBjsF,QAAQxU,GACjC/V,EAAgB,GAARA,EAAa02G,EAGvB,OAAO12G,CAAK,EAcI22G,CAASxsE,EAASl9B,MAAM,EAAG,IAXT,CAClCwI,EAAG9L,KAAKilB,IAAI,EAAG6nF,GAAO,IACtBzgG,EAAGrM,KAAKilB,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","file":"js/containers/media_container.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"LoadingBar\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar.LoadingBar;\n  }\n});\nObject.defineProperty(exports, \"loadingBarMiddleware\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_middleware[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"hideLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.hideLoading;\n  }\n});\nObject.defineProperty(exports, \"loadingBarReducer\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.loadingBarReducer;\n  }\n});\nObject.defineProperty(exports, \"resetLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.resetLoading;\n  }\n});\nObject.defineProperty(exports, \"showLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.showLoading;\n  }\n});\nObject.defineProperty(exports, \"ImmutableLoadingBar\", {\n  enumerable: true,\n  get: function get() {\n    return _immutable[\"default\"];\n  }\n});\nexports[\"default\"] = void 0;\nvar _loading_bar = _interopRequireWildcard(require(\"./loading_bar\"));\nvar _loading_bar_middleware = _interopRequireDefault(require(\"./loading_bar_middleware\"));\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\nvar _immutable = _interopRequireDefault(require(\"./immutable\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n  return cache;\n}\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n  var cache = _getRequireWildcardCache();\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj[\"default\"] = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nvar _default = _loading_bar[\"default\"];\nexports[\"default\"] = _default;","import { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  unexpectedTitle: { id: 'alert.unexpected.title', defaultMessage: 'Oops!' },\n  unexpectedMessage: { id: 'alert.unexpected.message', defaultMessage: 'An unexpected error occurred.' },\n  rateLimitedTitle: { id: 'alert.rate_limited.title', defaultMessage: 'Rate limited' },\n  rateLimitedMessage: { id: 'alert.rate_limited.message', defaultMessage: 'Please retry after {retry_time, time, medium}.' },\n});\n\nexport const ALERT_SHOW    = 'ALERT_SHOW';\nexport const ALERT_DISMISS = 'ALERT_DISMISS';\nexport const ALERT_CLEAR   = 'ALERT_CLEAR';\nexport const ALERT_NOOP    = 'ALERT_NOOP';\n\nexport const dismissAlert = alert => ({\n  type: ALERT_DISMISS,\n  alert,\n});\n\nexport const clearAlert = () => ({\n  type: ALERT_CLEAR,\n});\n\nexport const showAlert = alert => ({\n  type: ALERT_SHOW,\n  alert,\n});\n\nexport const showAlertForError = (error, skipNotFound = false) => {\n  if (error.response) {\n    const { data, status, statusText, headers } = error.response;\n\n    // Skip these errors as they are reflected in the UI\n    if (skipNotFound && (status === 404 || status === 410)) {\n      return { type: ALERT_NOOP };\n    }\n\n    // Rate limit errors\n    if (status === 429 && headers['x-ratelimit-reset']) {\n      return showAlert({\n        title: messages.rateLimitedTitle,\n        message: messages.rateLimitedMessage,\n        values: { 'retry_time': new Date(headers['x-ratelimit-reset']) },\n      });\n    }\n\n    return showAlert({\n      title: `${status}`,\n      message: data.error || statusText,\n    });\n  }\n\n  console.error(error);\n\n  return showAlert({\n    title: messages.unexpectedTitle,\n    message: messages.unexpectedMessage,\n  });\n};\n","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n  if (!match) {\n    return str;\n  }\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        // \"\n        escape = '&quot;';\n        break;\n      case 38:\n        // &\n        escape = '&amp;';\n        break;\n      case 39:\n        // '\n        escape = '&#39;';\n        break;\n      case 60:\n        // <\n        escape = '&lt;';\n        break;\n      case 62:\n        // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escape;\n  }\n  return lastIndex !== index ? html + str.substring(lastIndex, index) : html;\n}","'use strict';\n\nexports.__esModule = true;\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar _mapToZero = require('./mapToZero');\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\nvar _stripStyle = require('./stripStyle');\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\nvar _stepper3 = require('./stepper');\nvar _stepper4 = _interopRequireDefault(_stepper3);\nvar _mergeDiff = require('./mergeDiff');\nvar _mergeDiff2 = _interopRequireDefault(_mergeDiff);\nvar _performanceNow = require('performance-now');\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\nvar _raf = require('raf');\nvar _raf2 = _interopRequireDefault(_raf);\nvar _shouldStopAnimation = require('./shouldStopAnimation');\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\nvar _react = require('react');\nvar _react2 = _interopRequireDefault(_react);\nvar _propTypes = require('prop-types');\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar msPerFrame = 1000 / 60;\n\n// the children function & (potential) styles function asks as param an\n// Array<TransitionPlainStyle>, where each TransitionPlainStyle is of the format\n// {key: string, data?: any, style: PlainStyle}. However, the way we keep\n// internal states doesn't contain such a data structure (check the state and\n// TransitionMotionState). So when children function and others ask for such\n// data we need to generate them on the fly by combining mergedPropsStyles and\n// currentStyles/lastIdealStyles\nfunction rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {\n  // Copy the value to a `const` so that Flow understands that the const won't\n  // change and will be non-nullable in the callback below.\n  var cUnreadPropStyles = unreadPropStyles;\n  if (cUnreadPropStyles == null) {\n    return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n      return {\n        key: mergedPropsStyle.key,\n        data: mergedPropsStyle.data,\n        style: plainStyles[i]\n      };\n    });\n  }\n  return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n    for (var j = 0; j < cUnreadPropStyles.length; j++) {\n      if (cUnreadPropStyles[j].key === mergedPropsStyle.key) {\n        return {\n          key: cUnreadPropStyles[j].key,\n          data: cUnreadPropStyles[j].data,\n          style: plainStyles[i]\n        };\n      }\n    }\n    return {\n      key: mergedPropsStyle.key,\n      data: mergedPropsStyle.data,\n      style: plainStyles[i]\n    };\n  });\n}\nfunction shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {\n  if (mergedPropsStyles.length !== destStyles.length) {\n    return false;\n  }\n  for (var i = 0; i < mergedPropsStyles.length; i++) {\n    if (mergedPropsStyles[i].key !== destStyles[i].key) {\n      return false;\n    }\n  }\n\n  // we have the invariant that mergedPropsStyles and\n  // currentStyles/currentVelocities/last* are synced in terms of cells, see\n  // mergeAndSync comment for more info\n  for (var i = 0; i < mergedPropsStyles.length; i++) {\n    if (!_shouldStopAnimation2['default'](currentStyles[i], destStyles[i].style, currentVelocities[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// core key merging logic\n\n// things to do: say previously merged style is {a, b}, dest style (prop) is {b,\n// c}, previous current (interpolating) style is {a, b}\n// **invariant**: current[i] corresponds to merged[i] in terms of key\n\n// steps:\n// turn merged style into {a?, b, c}\n//    add c, value of c is destStyles.c\n//    maybe remove a, aka call willLeave(a), then merged is either {b, c} or {a, b, c}\n// turn current (interpolating) style from {a, b} into {a?, b, c}\n//    maybe remove a\n//    certainly add c, value of c is willEnter(c)\n// loop over merged and construct new current\n// dest doesn't change, that's owner's\nfunction mergeAndSync(willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {\n  var newMergedPropsStyles = _mergeDiff2['default'](oldMergedPropsStyles, destStyles, function (oldIndex, oldMergedPropsStyle) {\n    var leavingStyle = willLeave(oldMergedPropsStyle);\n    if (leavingStyle == null) {\n      didLeave({\n        key: oldMergedPropsStyle.key,\n        data: oldMergedPropsStyle.data\n      });\n      return null;\n    }\n    if (_shouldStopAnimation2['default'](oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {\n      didLeave({\n        key: oldMergedPropsStyle.key,\n        data: oldMergedPropsStyle.data\n      });\n      return null;\n    }\n    return {\n      key: oldMergedPropsStyle.key,\n      data: oldMergedPropsStyle.data,\n      style: leavingStyle\n    };\n  });\n  var newCurrentStyles = [];\n  var newCurrentVelocities = [];\n  var newLastIdealStyles = [];\n  var newLastIdealVelocities = [];\n  for (var i = 0; i < newMergedPropsStyles.length; i++) {\n    var newMergedPropsStyleCell = newMergedPropsStyles[i];\n    var foundOldIndex = null;\n    for (var j = 0; j < oldMergedPropsStyles.length; j++) {\n      if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {\n        foundOldIndex = j;\n        break;\n      }\n    }\n    // TODO: key search code\n    if (foundOldIndex == null) {\n      var plainStyle = willEnter(newMergedPropsStyleCell);\n      newCurrentStyles[i] = plainStyle;\n      newLastIdealStyles[i] = plainStyle;\n      var velocity = _mapToZero2['default'](newMergedPropsStyleCell.style);\n      newCurrentVelocities[i] = velocity;\n      newLastIdealVelocities[i] = velocity;\n    } else {\n      newCurrentStyles[i] = oldCurrentStyles[foundOldIndex];\n      newLastIdealStyles[i] = oldLastIdealStyles[foundOldIndex];\n      newCurrentVelocities[i] = oldCurrentVelocities[foundOldIndex];\n      newLastIdealVelocities[i] = oldLastIdealVelocities[foundOldIndex];\n    }\n  }\n  return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];\n}\nvar TransitionMotion = function (_React$Component) {\n  _inherits(TransitionMotion, _React$Component);\n  _createClass(TransitionMotion, null, [{\n    key: 'propTypes',\n    value: {\n      defaultStyles: _propTypes2['default'].arrayOf(_propTypes2['default'].shape({\n        key: _propTypes2['default'].string.isRequired,\n        data: _propTypes2['default'].any,\n        style: _propTypes2['default'].objectOf(_propTypes2['default'].number).isRequired\n      })),\n      styles: _propTypes2['default'].oneOfType([_propTypes2['default'].func, _propTypes2['default'].arrayOf(_propTypes2['default'].shape({\n        key: _propTypes2['default'].string.isRequired,\n        data: _propTypes2['default'].any,\n        style: _propTypes2['default'].objectOf(_propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].object])).isRequired\n      }))]).isRequired,\n      children: _propTypes2['default'].func.isRequired,\n      willEnter: _propTypes2['default'].func,\n      willLeave: _propTypes2['default'].func,\n      didLeave: _propTypes2['default'].func\n    },\n    enumerable: true\n  }, {\n    key: 'defaultProps',\n    value: {\n      willEnter: function willEnter(styleThatEntered) {\n        return _stripStyle2['default'](styleThatEntered.style);\n      },\n      // recall: returning null makes the current unmounting TransitionStyle\n      // disappear immediately\n      willLeave: function willLeave() {\n        return null;\n      },\n      didLeave: function didLeave() {}\n    },\n    enumerable: true\n  }]);\n  function TransitionMotion(props) {\n    var _this = this;\n    _classCallCheck(this, TransitionMotion);\n    _React$Component.call(this, props);\n    this.unmounting = false;\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyles = null;\n    this.clearUnreadPropStyle = function (unreadPropStyles) {\n      var _mergeAndSync = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, unreadPropStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);\n      var mergedPropsStyles = _mergeAndSync[0];\n      var currentStyles = _mergeAndSync[1];\n      var currentVelocities = _mergeAndSync[2];\n      var lastIdealStyles = _mergeAndSync[3];\n      var lastIdealVelocities = _mergeAndSync[4];\n      for (var i = 0; i < unreadPropStyles.length; i++) {\n        var unreadPropStyle = unreadPropStyles[i].style;\n        var dirty = false;\n        for (var key in unreadPropStyle) {\n          if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {\n            continue;\n          }\n          var styleValue = unreadPropStyle[key];\n          if (typeof styleValue === 'number') {\n            if (!dirty) {\n              dirty = true;\n              currentStyles[i] = _extends({}, currentStyles[i]);\n              currentVelocities[i] = _extends({}, currentVelocities[i]);\n              lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n              lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n              mergedPropsStyles[i] = {\n                key: mergedPropsStyles[i].key,\n                data: mergedPropsStyles[i].data,\n                style: _extends({}, mergedPropsStyles[i].style)\n              };\n            }\n            currentStyles[i][key] = styleValue;\n            currentVelocities[i][key] = 0;\n            lastIdealStyles[i][key] = styleValue;\n            lastIdealVelocities[i][key] = 0;\n            mergedPropsStyles[i].style[key] = styleValue;\n          }\n        }\n      }\n\n      // unlike the other 2 components, we can't detect staleness and optionally\n      // opt out of setState here. each style object's data might contain new\n      // stuff we're not/cannot compare\n      _this.setState({\n        currentStyles: currentStyles,\n        currentVelocities: currentVelocities,\n        mergedPropsStyles: mergedPropsStyles,\n        lastIdealStyles: lastIdealStyles,\n        lastIdealVelocities: lastIdealVelocities\n      });\n    };\n    this.startAnimationIfNecessary = function () {\n      if (_this.unmounting) {\n        return;\n      }\n\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        // https://github.com/chenglou/react-motion/pull/420\n        // > if execution passes the conditional if (this.unmounting), then\n        // executes async defaultRaf and after that component unmounts and after\n        // that the callback of defaultRaf is called, then setState will be called\n        // on unmounted component.\n        if (_this.unmounting) {\n          return;\n        }\n        var propStyles = _this.props.styles;\n        var destStyles = typeof propStyles === 'function' ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles;\n\n        // check if we need to animate in the first place\n        if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.accumulatedTime = 0;\n          return;\n        }\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n        var _mergeAndSync2 = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);\n        var newMergedPropsStyles = _mergeAndSync2[0];\n        var newCurrentStyles = _mergeAndSync2[1];\n        var newCurrentVelocities = _mergeAndSync2[2];\n        var newLastIdealStyles = _mergeAndSync2[3];\n        var newLastIdealVelocities = _mergeAndSync2[4];\n        for (var i = 0; i < newMergedPropsStyles.length; i++) {\n          var newMergedPropsStyle = newMergedPropsStyles[i].style;\n          var newCurrentStyle = {};\n          var newCurrentVelocity = {};\n          var newLastIdealStyle = {};\n          var newLastIdealVelocity = {};\n          for (var key in newMergedPropsStyle) {\n            if (!Object.prototype.hasOwnProperty.call(newMergedPropsStyle, key)) {\n              continue;\n            }\n            var styleValue = newMergedPropsStyle[key];\n            if (typeof styleValue === 'number') {\n              newCurrentStyle[key] = styleValue;\n              newCurrentVelocity[key] = 0;\n              newLastIdealStyle[key] = styleValue;\n              newLastIdealVelocity[key] = 0;\n            } else {\n              var newLastIdealStyleValue = newLastIdealStyles[i][key];\n              var newLastIdealVelocityValue = newLastIdealVelocities[i][key];\n              for (var j = 0; j < framesToCatchUp; j++) {\n                var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n                newLastIdealStyleValue = _stepper[0];\n                newLastIdealVelocityValue = _stepper[1];\n              }\n              var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n              var nextIdealX = _stepper2[0];\n              var nextIdealV = _stepper2[1];\n              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n              newLastIdealStyle[key] = newLastIdealStyleValue;\n              newLastIdealVelocity[key] = newLastIdealVelocityValue;\n            }\n          }\n          newLastIdealStyles[i] = newLastIdealStyle;\n          newLastIdealVelocities[i] = newLastIdealVelocity;\n          newCurrentStyles[i] = newCurrentStyle;\n          newCurrentVelocities[i] = newCurrentVelocity;\n        }\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n        _this.setState({\n          currentStyles: newCurrentStyles,\n          currentVelocities: newCurrentVelocities,\n          lastIdealStyles: newLastIdealStyles,\n          lastIdealVelocities: newLastIdealVelocities,\n          mergedPropsStyles: newMergedPropsStyles\n        });\n        _this.unreadPropStyles = null;\n        _this.startAnimationIfNecessary();\n      });\n    };\n    this.state = this.defaultState();\n  }\n  TransitionMotion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyles = _props.defaultStyles;\n    var styles = _props.styles;\n    var willEnter = _props.willEnter;\n    var willLeave = _props.willLeave;\n    var didLeave = _props.didLeave;\n    var destStyles = typeof styles === 'function' ? styles(defaultStyles) : styles;\n\n    // this is special. for the first time around, we don't have a comparison\n    // between last (no last) and current merged props. we'll compute last so:\n    // say default is {a, b} and styles (dest style) is {b, c}, we'll\n    // fabricate last as {a, b}\n    var oldMergedPropsStyles = undefined;\n    if (defaultStyles == null) {\n      oldMergedPropsStyles = destStyles;\n    } else {\n      oldMergedPropsStyles = defaultStyles.map(function (defaultStyleCell) {\n        // TODO: key search code\n        for (var i = 0; i < destStyles.length; i++) {\n          if (destStyles[i].key === defaultStyleCell.key) {\n            return destStyles[i];\n          }\n        }\n        return defaultStyleCell;\n      });\n    }\n    var oldCurrentStyles = defaultStyles == null ? destStyles.map(function (s) {\n      return _stripStyle2['default'](s.style);\n    }) : defaultStyles.map(function (s) {\n      return _stripStyle2['default'](s.style);\n    });\n    var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function (s) {\n      return _mapToZero2['default'](s.style);\n    }) : defaultStyles.map(function (s) {\n      return _mapToZero2['default'](s.style);\n    });\n    var _mergeAndSync3 = mergeAndSync(\n    // Because this is an old-style createReactClass component, Flow doesn't\n    // understand that the willEnter and willLeave props have default values\n    // and will always be present.\n    willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldCurrentStyles,\n    // oldLastIdealStyles really\n    oldCurrentVelocities);\n    var mergedPropsStyles = _mergeAndSync3[0];\n    var currentStyles = _mergeAndSync3[1];\n    var currentVelocities = _mergeAndSync3[2];\n    var lastIdealStyles = _mergeAndSync3[3];\n    var lastIdealVelocities = _mergeAndSync3[4];\n    // oldLastIdealVelocities really\n\n    return {\n      currentStyles: currentStyles,\n      currentVelocities: currentVelocities,\n      lastIdealStyles: lastIdealStyles,\n      lastIdealVelocities: lastIdealVelocities,\n      mergedPropsStyles: mergedPropsStyles\n    };\n  };\n\n  // after checking for unreadPropStyles != null, we manually go set the\n  // non-interpolating values (those that are a number, without a spring\n  // config)\n\n  TransitionMotion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n  TransitionMotion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyles) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyles);\n    }\n    var styles = props.styles;\n    if (typeof styles === 'function') {\n      this.unreadPropStyles = styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));\n    } else {\n      this.unreadPropStyles = styles;\n    }\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n  TransitionMotion.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.unmounting = true;\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n  TransitionMotion.prototype.render = function render() {\n    var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);\n    var renderedChildren = this.props.children(hydratedStyles);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n  return TransitionMotion;\n}(_react2['default'].Component);\nexports['default'] = TransitionMotion;\nmodule.exports = exports['default'];\n\n// list of styles, each containing interpolating values. Part of what's passed\n// to children function. Notice that this is\n// Array<ActualInterpolatingStyleObject>, without the wrapper that is {key: ...,\n// data: ... style: ActualInterpolatingStyleObject}. Only mergedPropsStyles\n// contains the key & data info (so that we only have a single source of truth\n// for these, and to save space). Check the comment for `rehydrateStyles` to\n// see how we regenerate the entirety of what's passed to children function\n\n// the array that keeps track of currently rendered stuff! Including stuff\n// that you've unmounted but that's still animating. This is where it lives\n\n// it's possible that currentStyle's value is stale: if props is immediately\n// changed from 0 to 400 to spring(0) again, the async currentStyle is still\n// at 0 (didn't have time to tick and interpolate even once). If we naively\n// compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n// In reality currentStyle should be 400","var _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n/**\n * This work is licensed under the W3C Software and Document License\n * (http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document).\n */\n\n(function () {\n  // Return early if we're not running inside of the browser.\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // Convenience function for converting NodeLists.\n  /** @type {typeof Array.prototype.slice} */\n  var slice = Array.prototype.slice;\n\n  /**\n   * IE has a non-standard name for \"matches\".\n   * @type {typeof Element.prototype.matches}\n   */\n  var matches = Element.prototype.matches || Element.prototype.msMatchesSelector;\n\n  /** @type {string} */\n  var _focusableElementsString = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'details', 'summary', 'iframe', 'object', 'embed', '[contenteditable]'].join(',');\n\n  /**\n   * `InertRoot` manages a single inert subtree, i.e. a DOM subtree whose root element has an `inert`\n   * attribute.\n   *\n   * Its main functions are:\n   *\n   * - to create and maintain a set of managed `InertNode`s, including when mutations occur in the\n   *   subtree. The `makeSubtreeUnfocusable()` method handles collecting `InertNode`s via registering\n   *   each focusable node in the subtree with the singleton `InertManager` which manages all known\n   *   focusable nodes within inert subtrees. `InertManager` ensures that a single `InertNode`\n   *   instance exists for each focusable node which has at least one inert root as an ancestor.\n   *\n   * - to notify all managed `InertNode`s when this subtree stops being inert (i.e. when the `inert`\n   *   attribute is removed from the root node). This is handled in the destructor, which calls the\n   *   `deregister` method on `InertManager` for each managed inert node.\n   */\n\n  var InertRoot = function () {\n    /**\n     * @param {!HTMLElement} rootElement The HTMLElement at the root of the inert subtree.\n     * @param {!InertManager} inertManager The global singleton InertManager object.\n     */\n    function InertRoot(rootElement, inertManager) {\n      _classCallCheck(this, InertRoot);\n\n      /** @type {!InertManager} */\n      this._inertManager = inertManager;\n\n      /** @type {!HTMLElement} */\n      this._rootElement = rootElement;\n\n      /**\n       * @type {!Set<!InertNode>}\n       * All managed focusable nodes in this InertRoot's subtree.\n       */\n      this._managedNodes = new Set();\n\n      // Make the subtree hidden from assistive technology\n      if (this._rootElement.hasAttribute('aria-hidden')) {\n        /** @type {?string} */\n        this._savedAriaHidden = this._rootElement.getAttribute('aria-hidden');\n      } else {\n        this._savedAriaHidden = null;\n      }\n      this._rootElement.setAttribute('aria-hidden', 'true');\n\n      // Make all focusable elements in the subtree unfocusable and add them to _managedNodes\n      this._makeSubtreeUnfocusable(this._rootElement);\n\n      // Watch for:\n      // - any additions in the subtree: make them unfocusable too\n      // - any removals from the subtree: remove them from this inert root's managed nodes\n      // - attribute changes: if `tabindex` is added, or removed from an intrinsically focusable\n      //   element, make that node a managed node.\n      this._observer = new MutationObserver(this._onMutation.bind(this));\n      this._observer.observe(this._rootElement, {\n        attributes: true,\n        childList: true,\n        subtree: true\n      });\n    }\n\n    /**\n     * Call this whenever this object is about to become obsolete.  This unwinds all of the state\n     * stored in this object and updates the state of all of the managed nodes.\n     */\n\n    _createClass(InertRoot, [{\n      key: 'destructor',\n      value: function destructor() {\n        this._observer.disconnect();\n        if (this._rootElement) {\n          if (this._savedAriaHidden !== null) {\n            this._rootElement.setAttribute('aria-hidden', this._savedAriaHidden);\n          } else {\n            this._rootElement.removeAttribute('aria-hidden');\n          }\n        }\n        this._managedNodes.forEach(function (inertNode) {\n          this._unmanageNode(inertNode.node);\n        }, this);\n\n        // Note we cast the nulls to the ANY type here because:\n        // 1) We want the class properties to be declared as non-null, or else we\n        //    need even more casts throughout this code. All bets are off if an\n        //    instance has been destroyed and a method is called.\n        // 2) We don't want to cast \"this\", because we want type-aware optimizations\n        //    to know which properties we're setting.\n        this._observer = /** @type {?} */null;\n        this._rootElement = /** @type {?} */null;\n        this._managedNodes = /** @type {?} */null;\n        this._inertManager = /** @type {?} */null;\n      }\n\n      /**\n       * @return {!Set<!InertNode>} A copy of this InertRoot's managed nodes set.\n       */\n    }, {\n      key: '_makeSubtreeUnfocusable',\n      /**\n       * @param {!Node} startNode\n       */\n      value: function _makeSubtreeUnfocusable(startNode) {\n        var _this2 = this;\n        composedTreeWalk(startNode, function (node) {\n          return _this2._visitNode(node);\n        });\n        var activeElement = document.activeElement;\n        if (!document.body.contains(startNode)) {\n          // startNode may be in shadow DOM, so find its nearest shadowRoot to get the activeElement.\n          var node = startNode;\n          /** @type {!ShadowRoot|undefined} */\n          var root = undefined;\n          while (node) {\n            if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n              root = /** @type {!ShadowRoot} */node;\n              break;\n            }\n            node = node.parentNode;\n          }\n          if (root) {\n            activeElement = root.activeElement;\n          }\n        }\n        if (startNode.contains(activeElement)) {\n          activeElement.blur();\n          // In IE11, if an element is already focused, and then set to tabindex=-1\n          // calling blur() will not actually move the focus.\n          // To work around this we call focus() on the body instead.\n          if (activeElement === document.activeElement) {\n            document.body.focus();\n          }\n        }\n      }\n\n      /**\n       * @param {!Node} node\n       */\n    }, {\n      key: '_visitNode',\n      value: function _visitNode(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n        var element = /** @type {!HTMLElement} */node;\n\n        // If a descendant inert root becomes un-inert, its descendants will still be inert because of\n        // this inert root, so all of its managed nodes need to be adopted by this InertRoot.\n        if (element !== this._rootElement && element.hasAttribute('inert')) {\n          this._adoptInertRoot(element);\n        }\n        if (matches.call(element, _focusableElementsString) || element.hasAttribute('tabindex')) {\n          this._manageNode(element);\n        }\n      }\n\n      /**\n       * Register the given node with this InertRoot and with InertManager.\n       * @param {!Node} node\n       */\n    }, {\n      key: '_manageNode',\n      value: function _manageNode(node) {\n        var inertNode = this._inertManager.register(node, this);\n        this._managedNodes.add(inertNode);\n      }\n\n      /**\n       * Unregister the given node with this InertRoot and with InertManager.\n       * @param {!Node} node\n       */\n    }, {\n      key: '_unmanageNode',\n      value: function _unmanageNode(node) {\n        var inertNode = this._inertManager.deregister(node, this);\n        if (inertNode) {\n          this._managedNodes['delete'](inertNode);\n        }\n      }\n\n      /**\n       * Unregister the entire subtree starting at `startNode`.\n       * @param {!Node} startNode\n       */\n    }, {\n      key: '_unmanageSubtree',\n      value: function _unmanageSubtree(startNode) {\n        var _this3 = this;\n        composedTreeWalk(startNode, function (node) {\n          return _this3._unmanageNode(node);\n        });\n      }\n\n      /**\n       * If a descendant node is found with an `inert` attribute, adopt its managed nodes.\n       * @param {!HTMLElement} node\n       */\n    }, {\n      key: '_adoptInertRoot',\n      value: function _adoptInertRoot(node) {\n        var inertSubroot = this._inertManager.getInertRoot(node);\n\n        // During initialisation this inert root may not have been registered yet,\n        // so register it now if need be.\n        if (!inertSubroot) {\n          this._inertManager.setInert(node, true);\n          inertSubroot = this._inertManager.getInertRoot(node);\n        }\n        inertSubroot.managedNodes.forEach(function (savedInertNode) {\n          this._manageNode(savedInertNode.node);\n        }, this);\n      }\n\n      /**\n       * Callback used when mutation observer detects subtree additions, removals, or attribute changes.\n       * @param {!Array<!MutationRecord>} records\n       * @param {!MutationObserver} self\n       */\n    }, {\n      key: '_onMutation',\n      value: function _onMutation(records, self) {\n        records.forEach(function (record) {\n          var target = /** @type {!HTMLElement} */record.target;\n          if (record.type === 'childList') {\n            // Manage added nodes\n            slice.call(record.addedNodes).forEach(function (node) {\n              this._makeSubtreeUnfocusable(node);\n            }, this);\n\n            // Un-manage removed nodes\n            slice.call(record.removedNodes).forEach(function (node) {\n              this._unmanageSubtree(node);\n            }, this);\n          } else if (record.type === 'attributes') {\n            if (record.attributeName === 'tabindex') {\n              // Re-initialise inert node if tabindex changes\n              this._manageNode(target);\n            } else if (target !== this._rootElement && record.attributeName === 'inert' && target.hasAttribute('inert')) {\n              // If a new inert root is added, adopt its managed nodes and make sure it knows about the\n              // already managed nodes from this inert subroot.\n              this._adoptInertRoot(target);\n              var inertSubroot = this._inertManager.getInertRoot(target);\n              this._managedNodes.forEach(function (managedNode) {\n                if (target.contains(managedNode.node)) {\n                  inertSubroot._manageNode(managedNode.node);\n                }\n              });\n            }\n          }\n        }, this);\n      }\n    }, {\n      key: 'managedNodes',\n      get: function get() {\n        return new Set(this._managedNodes);\n      }\n\n      /** @return {boolean} */\n    }, {\n      key: 'hasSavedAriaHidden',\n      get: function get() {\n        return this._savedAriaHidden !== null;\n      }\n\n      /** @param {?string} ariaHidden */\n    }, {\n      key: 'savedAriaHidden',\n      set: function set(ariaHidden) {\n        this._savedAriaHidden = ariaHidden;\n      }\n\n      /** @return {?string} */,\n\n      get: function get() {\n        return this._savedAriaHidden;\n      }\n    }]);\n    return InertRoot;\n  }();\n\n  /**\n   * `InertNode` initialises and manages a single inert node.\n   * A node is inert if it is a descendant of one or more inert root elements.\n   *\n   * On construction, `InertNode` saves the existing `tabindex` value for the node, if any, and\n   * either removes the `tabindex` attribute or sets it to `-1`, depending on whether the element\n   * is intrinsically focusable or not.\n   *\n   * `InertNode` maintains a set of `InertRoot`s which are descendants of this `InertNode`. When an\n   * `InertRoot` is destroyed, and calls `InertManager.deregister()`, the `InertManager` notifies the\n   * `InertNode` via `removeInertRoot()`, which in turn destroys the `InertNode` if no `InertRoot`s\n   * remain in the set. On destruction, `InertNode` reinstates the stored `tabindex` if one exists,\n   * or removes the `tabindex` attribute if the element is intrinsically focusable.\n   */\n\n  var InertNode = function () {\n    /**\n     * @param {!Node} node A focusable element to be made inert.\n     * @param {!InertRoot} inertRoot The inert root element associated with this inert node.\n     */\n    function InertNode(node, inertRoot) {\n      _classCallCheck(this, InertNode);\n\n      /** @type {!Node} */\n      this._node = node;\n\n      /** @type {boolean} */\n      this._overrodeFocusMethod = false;\n\n      /**\n       * @type {!Set<!InertRoot>} The set of descendant inert roots.\n       *    If and only if this set becomes empty, this node is no longer inert.\n       */\n      this._inertRoots = new Set([inertRoot]);\n\n      /** @type {?number} */\n      this._savedTabIndex = null;\n\n      /** @type {boolean} */\n      this._destroyed = false;\n\n      // Save any prior tabindex info and make this node untabbable\n      this.ensureUntabbable();\n    }\n\n    /**\n     * Call this whenever this object is about to become obsolete.\n     * This makes the managed node focusable again and deletes all of the previously stored state.\n     */\n\n    _createClass(InertNode, [{\n      key: 'destructor',\n      value: function destructor() {\n        this._throwIfDestroyed();\n        if (this._node && this._node.nodeType === Node.ELEMENT_NODE) {\n          var element = /** @type {!HTMLElement} */this._node;\n          if (this._savedTabIndex !== null) {\n            element.setAttribute('tabindex', this._savedTabIndex);\n          } else {\n            element.removeAttribute('tabindex');\n          }\n\n          // Use `delete` to restore native focus method.\n          if (this._overrodeFocusMethod) {\n            delete element.focus;\n          }\n        }\n\n        // See note in InertRoot.destructor for why we cast these nulls to ANY.\n        this._node = /** @type {?} */null;\n        this._inertRoots = /** @type {?} */null;\n        this._destroyed = true;\n      }\n\n      /**\n       * @type {boolean} Whether this object is obsolete because the managed node is no longer inert.\n       * If the object has been destroyed, any attempt to access it will cause an exception.\n       */\n    }, {\n      key: '_throwIfDestroyed',\n      /**\n       * Throw if user tries to access destroyed InertNode.\n       */\n      value: function _throwIfDestroyed() {\n        if (this.destroyed) {\n          throw new Error('Trying to access destroyed InertNode');\n        }\n      }\n\n      /** @return {boolean} */\n    }, {\n      key: 'ensureUntabbable',\n      /** Save the existing tabindex value and make the node untabbable and unfocusable */\n      value: function ensureUntabbable() {\n        if (this.node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n        var element = /** @type {!HTMLElement} */this.node;\n        if (matches.call(element, _focusableElementsString)) {\n          if ( /** @type {!HTMLElement} */element.tabIndex === -1 && this.hasSavedTabIndex) {\n            return;\n          }\n          if (element.hasAttribute('tabindex')) {\n            this._savedTabIndex = /** @type {!HTMLElement} */element.tabIndex;\n          }\n          element.setAttribute('tabindex', '-1');\n          if (element.nodeType === Node.ELEMENT_NODE) {\n            element.focus = function () {};\n            this._overrodeFocusMethod = true;\n          }\n        } else if (element.hasAttribute('tabindex')) {\n          this._savedTabIndex = /** @type {!HTMLElement} */element.tabIndex;\n          element.removeAttribute('tabindex');\n        }\n      }\n\n      /**\n       * Add another inert root to this inert node's set of managing inert roots.\n       * @param {!InertRoot} inertRoot\n       */\n    }, {\n      key: 'addInertRoot',\n      value: function addInertRoot(inertRoot) {\n        this._throwIfDestroyed();\n        this._inertRoots.add(inertRoot);\n      }\n\n      /**\n       * Remove the given inert root from this inert node's set of managing inert roots.\n       * If the set of managing inert roots becomes empty, this node is no longer inert,\n       * so the object should be destroyed.\n       * @param {!InertRoot} inertRoot\n       */\n    }, {\n      key: 'removeInertRoot',\n      value: function removeInertRoot(inertRoot) {\n        this._throwIfDestroyed();\n        this._inertRoots['delete'](inertRoot);\n        if (this._inertRoots.size === 0) {\n          this.destructor();\n        }\n      }\n    }, {\n      key: 'destroyed',\n      get: function get() {\n        return (/** @type {!InertNode} */this._destroyed\n        );\n      }\n    }, {\n      key: 'hasSavedTabIndex',\n      get: function get() {\n        return this._savedTabIndex !== null;\n      }\n\n      /** @return {!Node} */\n    }, {\n      key: 'node',\n      get: function get() {\n        this._throwIfDestroyed();\n        return this._node;\n      }\n\n      /** @param {?number} tabIndex */\n    }, {\n      key: 'savedTabIndex',\n      set: function set(tabIndex) {\n        this._throwIfDestroyed();\n        this._savedTabIndex = tabIndex;\n      }\n\n      /** @return {?number} */,\n\n      get: function get() {\n        this._throwIfDestroyed();\n        return this._savedTabIndex;\n      }\n    }]);\n    return InertNode;\n  }();\n\n  /**\n   * InertManager is a per-document singleton object which manages all inert roots and nodes.\n   *\n   * When an element becomes an inert root by having an `inert` attribute set and/or its `inert`\n   * property set to `true`, the `setInert` method creates an `InertRoot` object for the element.\n   * The `InertRoot` in turn registers itself as managing all of the element's focusable descendant\n   * nodes via the `register()` method. The `InertManager` ensures that a single `InertNode` instance\n   * is created for each such node, via the `_managedNodes` map.\n   */\n\n  var InertManager = function () {\n    /**\n     * @param {!Document} document\n     */\n    function InertManager(document) {\n      _classCallCheck(this, InertManager);\n      if (!document) {\n        throw new Error('Missing required argument; InertManager needs to wrap a document.');\n      }\n\n      /** @type {!Document} */\n      this._document = document;\n\n      /**\n       * All managed nodes known to this InertManager. In a map to allow looking up by Node.\n       * @type {!Map<!Node, !InertNode>}\n       */\n      this._managedNodes = new Map();\n\n      /**\n       * All inert roots known to this InertManager. In a map to allow looking up by Node.\n       * @type {!Map<!Node, !InertRoot>}\n       */\n      this._inertRoots = new Map();\n\n      /**\n       * Observer for mutations on `document.body`.\n       * @type {!MutationObserver}\n       */\n      this._observer = new MutationObserver(this._watchForInert.bind(this));\n\n      // Add inert style.\n      addInertStyle(document.head || document.body || document.documentElement);\n\n      // Wait for document to be loaded.\n      if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', this._onDocumentLoaded.bind(this));\n      } else {\n        this._onDocumentLoaded();\n      }\n    }\n\n    /**\n     * Set whether the given element should be an inert root or not.\n     * @param {!HTMLElement} root\n     * @param {boolean} inert\n     */\n\n    _createClass(InertManager, [{\n      key: 'setInert',\n      value: function setInert(root, inert) {\n        if (inert) {\n          if (this._inertRoots.has(root)) {\n            // element is already inert\n            return;\n          }\n          var inertRoot = new InertRoot(root, this);\n          root.setAttribute('inert', '');\n          this._inertRoots.set(root, inertRoot);\n          // If not contained in the document, it must be in a shadowRoot.\n          // Ensure inert styles are added there.\n          if (!this._document.body.contains(root)) {\n            var parent = root.parentNode;\n            while (parent) {\n              if (parent.nodeType === 11) {\n                addInertStyle(parent);\n              }\n              parent = parent.parentNode;\n            }\n          }\n        } else {\n          if (!this._inertRoots.has(root)) {\n            // element is already non-inert\n            return;\n          }\n          var _inertRoot = this._inertRoots.get(root);\n          _inertRoot.destructor();\n          this._inertRoots['delete'](root);\n          root.removeAttribute('inert');\n        }\n      }\n\n      /**\n       * Get the InertRoot object corresponding to the given inert root element, if any.\n       * @param {!Node} element\n       * @return {!InertRoot|undefined}\n       */\n    }, {\n      key: 'getInertRoot',\n      value: function getInertRoot(element) {\n        return this._inertRoots.get(element);\n      }\n\n      /**\n       * Register the given InertRoot as managing the given node.\n       * In the case where the node has a previously existing inert root, this inert root will\n       * be added to its set of inert roots.\n       * @param {!Node} node\n       * @param {!InertRoot} inertRoot\n       * @return {!InertNode} inertNode\n       */\n    }, {\n      key: 'register',\n      value: function register(node, inertRoot) {\n        var inertNode = this._managedNodes.get(node);\n        if (inertNode !== undefined) {\n          // node was already in an inert subtree\n          inertNode.addInertRoot(inertRoot);\n        } else {\n          inertNode = new InertNode(node, inertRoot);\n        }\n        this._managedNodes.set(node, inertNode);\n        return inertNode;\n      }\n\n      /**\n       * De-register the given InertRoot as managing the given inert node.\n       * Removes the inert root from the InertNode's set of managing inert roots, and remove the inert\n       * node from the InertManager's set of managed nodes if it is destroyed.\n       * If the node is not currently managed, this is essentially a no-op.\n       * @param {!Node} node\n       * @param {!InertRoot} inertRoot\n       * @return {?InertNode} The potentially destroyed InertNode associated with this node, if any.\n       */\n    }, {\n      key: 'deregister',\n      value: function deregister(node, inertRoot) {\n        var inertNode = this._managedNodes.get(node);\n        if (!inertNode) {\n          return null;\n        }\n        inertNode.removeInertRoot(inertRoot);\n        if (inertNode.destroyed) {\n          this._managedNodes['delete'](node);\n        }\n        return inertNode;\n      }\n\n      /**\n       * Callback used when document has finished loading.\n       */\n    }, {\n      key: '_onDocumentLoaded',\n      value: function _onDocumentLoaded() {\n        // Find all inert roots in document and make them actually inert.\n        var inertElements = slice.call(this._document.querySelectorAll('[inert]'));\n        inertElements.forEach(function (inertElement) {\n          this.setInert(inertElement, true);\n        }, this);\n\n        // Comment this out to use programmatic API only.\n        this._observer.observe(this._document.body || this._document.documentElement, {\n          attributes: true,\n          subtree: true,\n          childList: true\n        });\n      }\n\n      /**\n       * Callback used when mutation observer detects attribute changes.\n       * @param {!Array<!MutationRecord>} records\n       * @param {!MutationObserver} self\n       */\n    }, {\n      key: '_watchForInert',\n      value: function _watchForInert(records, self) {\n        var _this = this;\n        records.forEach(function (record) {\n          switch (record.type) {\n            case 'childList':\n              slice.call(record.addedNodes).forEach(function (node) {\n                if (node.nodeType !== Node.ELEMENT_NODE) {\n                  return;\n                }\n                var inertElements = slice.call(node.querySelectorAll('[inert]'));\n                if (matches.call(node, '[inert]')) {\n                  inertElements.unshift(node);\n                }\n                inertElements.forEach(function (inertElement) {\n                  this.setInert(inertElement, true);\n                }, _this);\n              }, _this);\n              break;\n            case 'attributes':\n              if (record.attributeName !== 'inert') {\n                return;\n              }\n              var target = /** @type {!HTMLElement} */record.target;\n              var inert = target.hasAttribute('inert');\n              _this.setInert(target, inert);\n              break;\n          }\n        }, this);\n      }\n    }]);\n    return InertManager;\n  }();\n\n  /**\n   * Recursively walk the composed tree from |node|.\n   * @param {!Node} node\n   * @param {(function (!HTMLElement))=} callback Callback to be called for each element traversed,\n   *     before descending into child nodes.\n   * @param {?ShadowRoot=} shadowRootAncestor The nearest ShadowRoot ancestor, if any.\n   */\n\n  function composedTreeWalk(node, callback, shadowRootAncestor) {\n    if (node.nodeType == Node.ELEMENT_NODE) {\n      var element = /** @type {!HTMLElement} */node;\n      if (callback) {\n        callback(element);\n      }\n\n      // Descend into node:\n      // If it has a ShadowRoot, ignore all child elements - these will be picked\n      // up by the <content> or <shadow> elements. Descend straight into the\n      // ShadowRoot.\n      var shadowRoot = /** @type {!HTMLElement} */element.shadowRoot;\n      if (shadowRoot) {\n        composedTreeWalk(shadowRoot, callback, shadowRoot);\n        return;\n      }\n\n      // If it is a <content> element, descend into distributed elements - these\n      // are elements from outside the shadow root which are rendered inside the\n      // shadow DOM.\n      if (element.localName == 'content') {\n        var content = /** @type {!HTMLContentElement} */element;\n        // Verifies if ShadowDom v0 is supported.\n        var distributedNodes = content.getDistributedNodes ? content.getDistributedNodes() : [];\n        for (var i = 0; i < distributedNodes.length; i++) {\n          composedTreeWalk(distributedNodes[i], callback, shadowRootAncestor);\n        }\n        return;\n      }\n\n      // If it is a <slot> element, descend into assigned nodes - these\n      // are elements from outside the shadow root which are rendered inside the\n      // shadow DOM.\n      if (element.localName == 'slot') {\n        var slot = /** @type {!HTMLSlotElement} */element;\n        // Verify if ShadowDom v1 is supported.\n        var _distributedNodes = slot.assignedNodes ? slot.assignedNodes({\n          flatten: true\n        }) : [];\n        for (var _i = 0; _i < _distributedNodes.length; _i++) {\n          composedTreeWalk(_distributedNodes[_i], callback, shadowRootAncestor);\n        }\n        return;\n      }\n    }\n\n    // If it is neither the parent of a ShadowRoot, a <content> element, a <slot>\n    // element, nor a <shadow> element recurse normally.\n    var child = node.firstChild;\n    while (child != null) {\n      composedTreeWalk(child, callback, shadowRootAncestor);\n      child = child.nextSibling;\n    }\n  }\n\n  /**\n   * Adds a style element to the node containing the inert specific styles\n   * @param {!Node} node\n   */\n  function addInertStyle(node) {\n    if (node.querySelector('style#inert-style, link#inert-style')) {\n      return;\n    }\n    var style = document.createElement('style');\n    style.setAttribute('id', 'inert-style');\n    style.textContent = '\\n' + '[inert] {\\n' + '  pointer-events: none;\\n' + '  cursor: default;\\n' + '}\\n' + '\\n' + '[inert], [inert] * {\\n' + '  -webkit-user-select: none;\\n' + '  -moz-user-select: none;\\n' + '  -ms-user-select: none;\\n' + '  user-select: none;\\n' + '}\\n';\n    node.appendChild(style);\n  }\n  if (!HTMLElement.prototype.hasOwnProperty('inert')) {\n    /** @type {!InertManager} */\n    var inertManager = new InertManager(document);\n    Object.defineProperty(HTMLElement.prototype, 'inert', {\n      enumerable: true,\n      /** @this {!HTMLElement} */\n      get: function get() {\n        return this.hasAttribute('inert');\n      },\n      /** @this {!HTMLElement} */\n      set: function set(inert) {\n        inertManager.setInert(this, inert);\n      }\n    });\n  }\n})();","/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n\nvar e = require(\"react\");\nfunction h(a, b) {\n  return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;\n}\nvar k = \"function\" === typeof Object.is ? Object.is : h,\n  l = e.useState,\n  m = e.useEffect,\n  n = e.useLayoutEffect,\n  p = e.useDebugValue;\nfunction q(a, b) {\n  var d = b(),\n    f = l({\n      inst: {\n        value: d,\n        getSnapshot: b\n      }\n    }),\n    c = f[0].inst,\n    g = f[1];\n  n(function () {\n    c.value = d;\n    c.getSnapshot = b;\n    r(c) && g({\n      inst: c\n    });\n  }, [a, d, b]);\n  m(function () {\n    r(c) && g({\n      inst: c\n    });\n    return a(function () {\n      r(c) && g({\n        inst: c\n      });\n    });\n  }, [a]);\n  p(d);\n  return d;\n}\nfunction r(a) {\n  var b = a.getSnapshot;\n  a = a.value;\n  try {\n    var d = b();\n    return !k(a, d);\n  } catch (f) {\n    return !0;\n  }\n}\nfunction t(a, b) {\n  return b();\n}\nvar u = \"undefined\" === typeof window || \"undefined\" === typeof window.document || \"undefined\" === typeof window.document.createElement ? t : q;\nexports.useSyncExternalStore = void 0 !== e.useSyncExternalStore ? e.useSyncExternalStore : u;","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n\nvar h = require(\"react\"),\n  n = require(\"use-sync-external-store/shim\");\nfunction p(a, b) {\n  return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;\n}\nvar q = \"function\" === typeof Object.is ? Object.is : p,\n  r = n.useSyncExternalStore,\n  t = h.useRef,\n  u = h.useEffect,\n  v = h.useMemo,\n  w = h.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (a, b, e, l, g) {\n  var c = t(null);\n  if (null === c.current) {\n    var f = {\n      hasValue: !1,\n      value: null\n    };\n    c.current = f;\n  } else f = c.current;\n  c = v(function () {\n    function a(a) {\n      if (!c) {\n        c = !0;\n        d = a;\n        a = l(a);\n        if (void 0 !== g && f.hasValue) {\n          var b = f.value;\n          if (g(b, a)) return k = b;\n        }\n        return k = a;\n      }\n      b = k;\n      if (q(d, a)) return b;\n      var e = l(a);\n      if (void 0 !== g && g(b, e)) return b;\n      d = a;\n      return k = e;\n    }\n    var c = !1,\n      d,\n      k,\n      m = void 0 === e ? null : e;\n    return [function () {\n      return a(b());\n    }, null === m ? void 0 : function () {\n      return a(m());\n    }];\n  }, [b, e, l, g]);\n  var d = r(a, c[0], c[1]);\n  u(function () {\n    f.hasValue = !0;\n    f.value = d;\n  }, [d]);\n  w(d);\n  return d;\n};","/**\n * @license React\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';\n\nvar b = Symbol.for(\"react.element\"),\n  c = Symbol.for(\"react.portal\"),\n  d = Symbol.for(\"react.fragment\"),\n  e = Symbol.for(\"react.strict_mode\"),\n  f = Symbol.for(\"react.profiler\"),\n  g = Symbol.for(\"react.provider\"),\n  h = Symbol.for(\"react.context\"),\n  k = Symbol.for(\"react.server_context\"),\n  l = Symbol.for(\"react.forward_ref\"),\n  m = Symbol.for(\"react.suspense\"),\n  n = Symbol.for(\"react.suspense_list\"),\n  p = Symbol.for(\"react.memo\"),\n  q = Symbol.for(\"react.lazy\"),\n  t = Symbol.for(\"react.offscreen\"),\n  u;\nu = Symbol.for(\"react.module.reference\");\nfunction v(a) {\n  if (\"object\" === typeof a && null !== a) {\n    var r = a.$$typeof;\n    switch (r) {\n      case b:\n        switch (a = a.type, a) {\n          case d:\n          case f:\n          case e:\n          case m:\n          case n:\n            return a;\n          default:\n            switch (a = a && a.$$typeof, a) {\n              case k:\n              case h:\n              case l:\n              case q:\n              case p:\n              case g:\n                return a;\n              default:\n                return r;\n            }\n        }\n      case c:\n        return r;\n    }\n  }\n}\nexports.ContextConsumer = h;\nexports.ContextProvider = g;\nexports.Element = b;\nexports.ForwardRef = l;\nexports.Fragment = d;\nexports.Lazy = q;\nexports.Memo = p;\nexports.Portal = c;\nexports.Profiler = f;\nexports.StrictMode = e;\nexports.Suspense = m;\nexports.SuspenseList = n;\nexports.isAsyncMode = function () {\n  return !1;\n};\nexports.isConcurrentMode = function () {\n  return !1;\n};\nexports.isContextConsumer = function (a) {\n  return v(a) === h;\n};\nexports.isContextProvider = function (a) {\n  return v(a) === g;\n};\nexports.isElement = function (a) {\n  return \"object\" === typeof a && null !== a && a.$$typeof === b;\n};\nexports.isForwardRef = function (a) {\n  return v(a) === l;\n};\nexports.isFragment = function (a) {\n  return v(a) === d;\n};\nexports.isLazy = function (a) {\n  return v(a) === q;\n};\nexports.isMemo = function (a) {\n  return v(a) === p;\n};\nexports.isPortal = function (a) {\n  return v(a) === c;\n};\nexports.isProfiler = function (a) {\n  return v(a) === f;\n};\nexports.isStrictMode = function (a) {\n  return v(a) === e;\n};\nexports.isSuspense = function (a) {\n  return v(a) === m;\n};\nexports.isSuspenseList = function (a) {\n  return v(a) === n;\n};\nexports.isValidElementType = function (a) {\n  return \"string\" === typeof a || \"function\" === typeof a || a === d || a === f || a === e || a === m || a === n || a === t || \"object\" === typeof a && null !== a && (a.$$typeof === q || a.$$typeof === p || a.$$typeof === g || a.$$typeof === h || a.$$typeof === l || a.$$typeof === u || void 0 !== a.getModuleId) ? !0 : !1;\n};\nexports.typeOf = v;","// Generated by CoffeeScript 1.12.2\n(function () {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n  if (typeof performance !== \"undefined\" && performance !== null && performance.now) {\n    module.exports = function () {\n      return performance.now();\n    };\n  } else if (typeof process !== \"undefined\" && process !== null && process.hrtime) {\n    module.exports = function () {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function () {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function () {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function () {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n}).call(this);","'use strict';\n\nexports.__esModule = true;\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar _mapToZero = require('./mapToZero');\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\nvar _stripStyle = require('./stripStyle');\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\nvar _stepper3 = require('./stepper');\nvar _stepper4 = _interopRequireDefault(_stepper3);\nvar _performanceNow = require('performance-now');\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\nvar _raf = require('raf');\nvar _raf2 = _interopRequireDefault(_raf);\nvar _shouldStopAnimation = require('./shouldStopAnimation');\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\nvar _react = require('react');\nvar _react2 = _interopRequireDefault(_react);\nvar _propTypes = require('prop-types');\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar msPerFrame = 1000 / 60;\nfunction shouldStopAnimationAll(currentStyles, styles, currentVelocities) {\n  for (var i = 0; i < currentStyles.length; i++) {\n    if (!_shouldStopAnimation2['default'](currentStyles[i], styles[i], currentVelocities[i])) {\n      return false;\n    }\n  }\n  return true;\n}\nvar StaggeredMotion = function (_React$Component) {\n  _inherits(StaggeredMotion, _React$Component);\n  _createClass(StaggeredMotion, null, [{\n    key: 'propTypes',\n    value: {\n      // TOOD: warn against putting a config in here\n      defaultStyles: _propTypes2['default'].arrayOf(_propTypes2['default'].objectOf(_propTypes2['default'].number)),\n      styles: _propTypes2['default'].func.isRequired,\n      children: _propTypes2['default'].func.isRequired\n    },\n    enumerable: true\n  }]);\n  function StaggeredMotion(props) {\n    var _this = this;\n    _classCallCheck(this, StaggeredMotion);\n    _React$Component.call(this, props);\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyles = null;\n    this.clearUnreadPropStyle = function (unreadPropStyles) {\n      var _state = _this.state;\n      var currentStyles = _state.currentStyles;\n      var currentVelocities = _state.currentVelocities;\n      var lastIdealStyles = _state.lastIdealStyles;\n      var lastIdealVelocities = _state.lastIdealVelocities;\n      var someDirty = false;\n      for (var i = 0; i < unreadPropStyles.length; i++) {\n        var unreadPropStyle = unreadPropStyles[i];\n        var dirty = false;\n        for (var key in unreadPropStyle) {\n          if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {\n            continue;\n          }\n          var styleValue = unreadPropStyle[key];\n          if (typeof styleValue === 'number') {\n            if (!dirty) {\n              dirty = true;\n              someDirty = true;\n              currentStyles[i] = _extends({}, currentStyles[i]);\n              currentVelocities[i] = _extends({}, currentVelocities[i]);\n              lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n              lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n            }\n            currentStyles[i][key] = styleValue;\n            currentVelocities[i][key] = 0;\n            lastIdealStyles[i][key] = styleValue;\n            lastIdealVelocities[i][key] = 0;\n          }\n        }\n      }\n      if (someDirty) {\n        _this.setState({\n          currentStyles: currentStyles,\n          currentVelocities: currentVelocities,\n          lastIdealStyles: lastIdealStyles,\n          lastIdealVelocities: lastIdealVelocities\n        });\n      }\n    };\n    this.startAnimationIfNecessary = function () {\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        var destStyles = _this.props.styles(_this.state.lastIdealStyles);\n\n        // check if we need to animate in the first place\n        if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities)) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.accumulatedTime = 0;\n          return;\n        }\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n        var newLastIdealStyles = [];\n        var newLastIdealVelocities = [];\n        var newCurrentStyles = [];\n        var newCurrentVelocities = [];\n        for (var i = 0; i < destStyles.length; i++) {\n          var destStyle = destStyles[i];\n          var newCurrentStyle = {};\n          var newCurrentVelocity = {};\n          var newLastIdealStyle = {};\n          var newLastIdealVelocity = {};\n          for (var key in destStyle) {\n            if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {\n              continue;\n            }\n            var styleValue = destStyle[key];\n            if (typeof styleValue === 'number') {\n              newCurrentStyle[key] = styleValue;\n              newCurrentVelocity[key] = 0;\n              newLastIdealStyle[key] = styleValue;\n              newLastIdealVelocity[key] = 0;\n            } else {\n              var newLastIdealStyleValue = _this.state.lastIdealStyles[i][key];\n              var newLastIdealVelocityValue = _this.state.lastIdealVelocities[i][key];\n              for (var j = 0; j < framesToCatchUp; j++) {\n                var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n                newLastIdealStyleValue = _stepper[0];\n                newLastIdealVelocityValue = _stepper[1];\n              }\n              var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n              var nextIdealX = _stepper2[0];\n              var nextIdealV = _stepper2[1];\n              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n              newLastIdealStyle[key] = newLastIdealStyleValue;\n              newLastIdealVelocity[key] = newLastIdealVelocityValue;\n            }\n          }\n          newCurrentStyles[i] = newCurrentStyle;\n          newCurrentVelocities[i] = newCurrentVelocity;\n          newLastIdealStyles[i] = newLastIdealStyle;\n          newLastIdealVelocities[i] = newLastIdealVelocity;\n        }\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n        _this.setState({\n          currentStyles: newCurrentStyles,\n          currentVelocities: newCurrentVelocities,\n          lastIdealStyles: newLastIdealStyles,\n          lastIdealVelocities: newLastIdealVelocities\n        });\n        _this.unreadPropStyles = null;\n        _this.startAnimationIfNecessary();\n      });\n    };\n    this.state = this.defaultState();\n  }\n  StaggeredMotion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyles = _props.defaultStyles;\n    var styles = _props.styles;\n    var currentStyles = defaultStyles || styles().map(_stripStyle2['default']);\n    var currentVelocities = currentStyles.map(function (currentStyle) {\n      return _mapToZero2['default'](currentStyle);\n    });\n    return {\n      currentStyles: currentStyles,\n      currentVelocities: currentVelocities,\n      lastIdealStyles: currentStyles,\n      lastIdealVelocities: currentVelocities\n    };\n  };\n  StaggeredMotion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n  StaggeredMotion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyles != null) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyles);\n    }\n    this.unreadPropStyles = props.styles(this.state.lastIdealStyles);\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n  StaggeredMotion.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n  StaggeredMotion.prototype.render = function render() {\n    var renderedChildren = this.props.children(this.state.currentStyles);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n  return StaggeredMotion;\n}(_react2['default'].Component);\nexports['default'] = StaggeredMotion;\nmodule.exports = exports['default'];\n\n// it's possible that currentStyle's value is stale: if props is immediately\n// changed from 0 to 400 to spring(0) again, the async currentStyle is still\n// at 0 (didn't have time to tick and interpolate even once). If we naively\n// compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n// In reality currentStyle should be 400\n\n// after checking for unreadPropStyles != null, we manually go set the\n// non-interpolating values (those that are a number, without a spring\n// config)","// core keys merging algorithm. If previous render's keys are [a, b], and the\n// next render's [c, b, d], what's the final merged keys and ordering?\n\n// - c and a must both be before b\n// - b before d\n// - ordering between a and c ambiguous\n\n// this reduces to merging two partially ordered lists (e.g. lists where not\n// every item has a definite ordering, like comparing a and c above). For the\n// ambiguous ordering we deterministically choose to place the next render's\n// item after the previous'; so c after a\n\n// this is called a topological sorting. Except the existing algorithms don't\n// work well with js bc of the amount of allocation, and isn't optimized for our\n// current use-case bc the runtime is linear in terms of edges (see wiki for\n// meaning), which is huge when two lists have many common elements\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = mergeDiff;\nfunction mergeDiff(prev, next, onRemove) {\n  // bookkeeping for easier access of a key's index below. This is 2 allocations +\n  // potentially triggering chrome hash map mode for objs (so it might be faster\n\n  var prevKeyIndex = {};\n  for (var i = 0; i < prev.length; i++) {\n    prevKeyIndex[prev[i].key] = i;\n  }\n  var nextKeyIndex = {};\n  for (var i = 0; i < next.length; i++) {\n    nextKeyIndex[next[i].key] = i;\n  }\n\n  // first, an overly elaborate way of merging prev and next, eliminating\n  // duplicates (in terms of keys). If there's dupe, keep the item in next).\n  // This way of writing it saves allocations\n  var ret = [];\n  for (var i = 0; i < next.length; i++) {\n    ret[i] = next[i];\n  }\n  for (var i = 0; i < prev.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(nextKeyIndex, prev[i].key)) {\n      // this is called my TM's `mergeAndSync`, which calls willLeave. We don't\n      // merge in keys that the user desires to kill\n      var fill = onRemove(i, prev[i]);\n      if (fill != null) {\n        ret.push(fill);\n      }\n    }\n  }\n\n  // now all the items all present. Core sorting logic to have the right order\n  return ret.sort(function (a, b) {\n    var nextOrderA = nextKeyIndex[a.key];\n    var nextOrderB = nextKeyIndex[b.key];\n    var prevOrderA = prevKeyIndex[a.key];\n    var prevOrderB = prevKeyIndex[b.key];\n    if (nextOrderA != null && nextOrderB != null) {\n      // both keys in next\n      return nextKeyIndex[a.key] - nextKeyIndex[b.key];\n    } else if (prevOrderA != null && prevOrderB != null) {\n      // both keys in prev\n      return prevKeyIndex[a.key] - prevKeyIndex[b.key];\n    } else if (nextOrderA != null) {\n      // key a in next, key b in prev\n\n      // how to determine the order between a and b? We find a \"pivot\" (term\n      // abuse), a key present in both prev and next, that is sandwiched between\n      // a and b. In the context of our above example, if we're comparing a and\n      // d, b's (the only) pivot\n      for (var i = 0; i < next.length; i++) {\n        var pivot = next[i].key;\n        if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {\n          continue;\n        }\n        if (nextOrderA < nextKeyIndex[pivot] && prevOrderB > prevKeyIndex[pivot]) {\n          return -1;\n        } else if (nextOrderA > nextKeyIndex[pivot] && prevOrderB < prevKeyIndex[pivot]) {\n          return 1;\n        }\n      }\n      // pluggable. default to: next bigger than prev\n      return 1;\n    }\n    // prevOrderA, nextOrderB\n    for (var i = 0; i < next.length; i++) {\n      var pivot = next[i].key;\n      if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {\n        continue;\n      }\n      if (nextOrderB < nextKeyIndex[pivot] && prevOrderA > prevKeyIndex[pivot]) {\n        return 1;\n      } else if (nextOrderB > nextKeyIndex[pivot] && prevOrderA < prevKeyIndex[pivot]) {\n        return -1;\n      }\n    }\n    // pluggable. default to: next bigger than prev\n    return -1;\n  });\n}\nmodule.exports = exports['default'];\n// to loop through and find a key's index each time), but I no longer care","'use strict';\n\nexports.__esModule = true;\nexports['default'] = reorderKeys;\nvar hasWarned = false;\nfunction reorderKeys() {\n  if (process.env.NODE_ENV === 'development') {\n    if (!hasWarned) {\n      hasWarned = true;\n      console.error('`reorderKeys` has been removed, since it is no longer needed for TransitionMotion\\'s new styles array API.');\n    }\n  }\n}\nmodule.exports = exports['default'];","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(prevProps, prevState);\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n  if (typeof Component.getDerivedStateFromProps !== 'function' && typeof prototype.getSnapshotBeforeUpdate !== 'function') {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (foundWillMountName !== null || foundWillReceivePropsName !== null || foundWillUpdateName !== null) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName = typeof Component.getDerivedStateFromProps === 'function' ? 'getDerivedStateFromProps()' : 'getSnapshotBeforeUpdate()';\n    throw Error('Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' + componentName + ' uses ' + newApiName + ' but also contains the following legacy lifecycles:' + (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') + (foundWillReceivePropsName !== null ? '\\n  ' + foundWillReceivePropsName : '') + (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') + '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' + 'https://fb.me/react-async-component-lifecycle-hooks');\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error('Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype');\n    }\n    prototype.componentWillUpdate = componentWillUpdate;\n    var componentDidUpdate = prototype.componentDidUpdate;\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(prevProps, prevState, maybeSnapshot) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag ? this.__reactInternalSnapshot : maybeSnapshot;\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n  return Component;\n}\nexport { polyfill };","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = loadingBarMiddleware;\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nvar defaultTypeSuffixes = ['PENDING', 'FULFILLED', 'REJECTED'];\nfunction loadingBarMiddleware() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var promiseTypeSuffixes = config.promiseTypeSuffixes || defaultTypeSuffixes;\n  var scope = config.scope || _loading_bar_ducks.DEFAULT_SCOPE;\n  return function (_ref) {\n    var dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type) {\n          var _promiseTypeSuffixes = _slicedToArray(promiseTypeSuffixes, 3),\n            PENDING = _promiseTypeSuffixes[0],\n            FULFILLED = _promiseTypeSuffixes[1],\n            REJECTED = _promiseTypeSuffixes[2];\n          var isPending = new RegExp(\"\".concat(PENDING, \"$\"), 'g');\n          var isFulfilled = new RegExp(\"\".concat(FULFILLED, \"$\"), 'g');\n          var isRejected = new RegExp(\"\".concat(REJECTED, \"$\"), 'g');\n          var actionScope = action.meta && action.meta.scope || action.scope || scope;\n          if (action.type.match(isPending)) {\n            dispatch((0, _loading_bar_ducks.showLoading)(actionScope));\n          } else if (action.type.match(isFulfilled) || action.type.match(isRejected)) {\n            dispatch((0, _loading_bar_ducks.hideLoading)(actionScope));\n          }\n        }\n        return next(action);\n      };\n    };\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _reactRedux = require(\"react-redux\");\nvar _loading_bar = require(\"./loading_bar\");\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\nvar mapImmutableStateToProps = function mapImmutableStateToProps(state, ownProps) {\n  return {\n    loading: state.get('loadingBar')[ownProps.scope || _loading_bar_ducks.DEFAULT_SCOPE]\n  };\n};\nvar _default = (0, _reactRedux.connect)(mapImmutableStateToProps)(_loading_bar.LoadingBar);\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDomTreeShapes = getDomTreeShapes;\nexports.findNativeHandler = findNativeHandler;\nexports.default = exports.SwipeableViewsContext = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _warning = _interopRequireDefault(require(\"warning\"));\nvar _reactSwipeableViewsCore = require(\"react-swipeable-views-core\");\nfunction addEventListener(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return {\n    remove: function remove() {\n      node.removeEventListener(event, handler, options);\n    }\n  };\n}\nvar styles = {\n  container: {\n    direction: 'ltr',\n    display: 'flex',\n    willChange: 'transform'\n  },\n  slide: {\n    width: '100%',\n    WebkitFlexShrink: 0,\n    flexShrink: 0,\n    overflow: 'auto'\n  }\n};\nvar axisProperties = {\n  root: {\n    x: {\n      overflowX: 'hidden'\n    },\n    'x-reverse': {\n      overflowX: 'hidden'\n    },\n    y: {\n      overflowY: 'hidden'\n    },\n    'y-reverse': {\n      overflowY: 'hidden'\n    }\n  },\n  flexDirection: {\n    x: 'row',\n    'x-reverse': 'row-reverse',\n    y: 'column',\n    'y-reverse': 'column-reverse'\n  },\n  transform: {\n    x: function x(translate) {\n      return \"translate(\".concat(-translate, \"%, 0)\");\n    },\n    'x-reverse': function xReverse(translate) {\n      return \"translate(\".concat(translate, \"%, 0)\");\n    },\n    y: function y(translate) {\n      return \"translate(0, \".concat(-translate, \"%)\");\n    },\n    'y-reverse': function yReverse(translate) {\n      return \"translate(0, \".concat(translate, \"%)\");\n    }\n  },\n  length: {\n    x: 'width',\n    'x-reverse': 'width',\n    y: 'height',\n    'y-reverse': 'height'\n  },\n  rotationMatrix: {\n    x: {\n      x: [1, 0],\n      y: [0, 1]\n    },\n    'x-reverse': {\n      x: [-1, 0],\n      y: [0, 1]\n    },\n    y: {\n      x: [0, 1],\n      y: [1, 0]\n    },\n    'y-reverse': {\n      x: [0, -1],\n      y: [1, 0]\n    }\n  },\n  scrollPosition: {\n    x: 'scrollLeft',\n    'x-reverse': 'scrollLeft',\n    y: 'scrollTop',\n    'y-reverse': 'scrollTop'\n  },\n  scrollLength: {\n    x: 'scrollWidth',\n    'x-reverse': 'scrollWidth',\n    y: 'scrollHeight',\n    'y-reverse': 'scrollHeight'\n  },\n  clientLength: {\n    x: 'clientWidth',\n    'x-reverse': 'clientWidth',\n    y: 'clientHeight',\n    'y-reverse': 'clientHeight'\n  }\n};\nfunction createTransition(property, options) {\n  var duration = options.duration,\n    easeFunction = options.easeFunction,\n    delay = options.delay;\n  return \"\".concat(property, \" \").concat(duration, \" \").concat(easeFunction, \" \").concat(delay);\n} // We are using a 2x2 rotation matrix.\n\nfunction applyRotationMatrix(touch, axis) {\n  var rotationMatrix = axisProperties.rotationMatrix[axis];\n  return {\n    pageX: rotationMatrix.x[0] * touch.pageX + rotationMatrix.x[1] * touch.pageY,\n    pageY: rotationMatrix.y[0] * touch.pageX + rotationMatrix.y[1] * touch.pageY\n  };\n}\nfunction adaptMouse(event) {\n  event.touches = [{\n    pageX: event.pageX,\n    pageY: event.pageY\n  }];\n  return event;\n}\nfunction getDomTreeShapes(element, rootNode) {\n  var domTreeShapes = [];\n  while (element && element !== rootNode && element !== document.body) {\n    // We reach a Swipeable View, no need to look higher in the dom tree.\n    if (element.hasAttribute('data-swipeable')) {\n      break;\n    }\n    var style = window.getComputedStyle(element);\n    if (\n    // Ignore the scroll children if the element is absolute positioned.\n    style.getPropertyValue('position') === 'absolute' ||\n    // Ignore the scroll children if the element has an overflowX hidden\n    style.getPropertyValue('overflow-x') === 'hidden') {\n      domTreeShapes = [];\n    } else if (element.clientWidth > 0 && element.scrollWidth > element.clientWidth || element.clientHeight > 0 && element.scrollHeight > element.clientHeight) {\n      // Ignore the nodes that have no width.\n      // Keep elements with a scroll\n      domTreeShapes.push({\n        element: element,\n        scrollWidth: element.scrollWidth,\n        scrollHeight: element.scrollHeight,\n        clientWidth: element.clientWidth,\n        clientHeight: element.clientHeight,\n        scrollLeft: element.scrollLeft,\n        scrollTop: element.scrollTop\n      });\n    }\n    element = element.parentNode;\n  }\n  return domTreeShapes;\n} // We can only have one node at the time claiming ownership for handling the swipe.\n// Otherwise, the UX would be confusing.\n// That's why we use a singleton here.\n\nvar nodeWhoClaimedTheScroll = null;\nfunction findNativeHandler(params) {\n  var domTreeShapes = params.domTreeShapes,\n    pageX = params.pageX,\n    startX = params.startX,\n    axis = params.axis;\n  return domTreeShapes.some(function (shape) {\n    // Determine if we are going backward or forward.\n    var goingForward = pageX >= startX;\n    if (axis === 'x' || axis === 'y') {\n      goingForward = !goingForward;\n    } // scrollTop is not always be an integer.\n    // https://github.com/jquery/api.jquery.com/issues/608\n\n    var scrollPosition = Math.round(shape[axisProperties.scrollPosition[axis]]);\n    var areNotAtStart = scrollPosition > 0;\n    var areNotAtEnd = scrollPosition + shape[axisProperties.clientLength[axis]] < shape[axisProperties.scrollLength[axis]];\n    if (goingForward && areNotAtEnd || !goingForward && areNotAtStart) {\n      nodeWhoClaimedTheScroll = shape.element;\n      return true;\n    }\n    return false;\n  });\n}\nvar SwipeableViewsContext = React.createContext();\nexports.SwipeableViewsContext = SwipeableViewsContext;\nif (process.env.NODE_ENV !== 'production') {\n  SwipeableViewsContext.displayName = 'SwipeableViewsContext';\n}\nvar SwipeableViews = /*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inherits2.default)(SwipeableViews, _React$Component);\n  function SwipeableViews(props) {\n    var _this;\n    (0, _classCallCheck2.default)(this, SwipeableViews);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SwipeableViews).call(this, props));\n    _this.rootNode = null;\n    _this.containerNode = null;\n    _this.ignoreNextScrollEvents = false;\n    _this.viewLength = 0;\n    _this.startX = 0;\n    _this.lastX = 0;\n    _this.vx = 0;\n    _this.startY = 0;\n    _this.isSwiping = undefined;\n    _this.started = false;\n    _this.startIndex = 0;\n    _this.transitionListener = null;\n    _this.touchMoveListener = null;\n    _this.activeSlide = null;\n    _this.indexCurrent = null;\n    _this.firstRenderTimeout = null;\n    _this.setRootNode = function (node) {\n      _this.rootNode = node;\n    };\n    _this.setContainerNode = function (node) {\n      _this.containerNode = node;\n    };\n    _this.setActiveSlide = function (node) {\n      _this.activeSlide = node;\n      _this.updateHeight();\n    };\n    _this.handleSwipeStart = function (event) {\n      var axis = _this.props.axis;\n      var touch = applyRotationMatrix(event.touches[0], axis);\n      _this.viewLength = _this.rootNode.getBoundingClientRect()[axisProperties.length[axis]];\n      _this.startX = touch.pageX;\n      _this.lastX = touch.pageX;\n      _this.vx = 0;\n      _this.startY = touch.pageY;\n      _this.isSwiping = undefined;\n      _this.started = true;\n      var computedStyle = window.getComputedStyle(_this.containerNode);\n      var transform = computedStyle.getPropertyValue('-webkit-transform') || computedStyle.getPropertyValue('transform');\n      if (transform && transform !== 'none') {\n        var transformValues = transform.split('(')[1].split(')')[0].split(',');\n        var rootStyle = window.getComputedStyle(_this.rootNode);\n        var tranformNormalized = applyRotationMatrix({\n          pageX: parseInt(transformValues[4], 10),\n          pageY: parseInt(transformValues[5], 10)\n        }, axis);\n        _this.startIndex = -tranformNormalized.pageX / (_this.viewLength - parseInt(rootStyle.paddingLeft, 10) - parseInt(rootStyle.paddingRight, 10)) || 0;\n      }\n    };\n    _this.handleSwipeMove = function (event) {\n      // The touch start event can be cancel.\n      // Makes sure we set a starting point.\n      if (!_this.started) {\n        _this.handleTouchStart(event);\n        return;\n      } // We are not supposed to hanlde this touch move.\n\n      if (nodeWhoClaimedTheScroll !== null && nodeWhoClaimedTheScroll !== _this.rootNode) {\n        return;\n      }\n      var _this$props = _this.props,\n        axis = _this$props.axis,\n        children = _this$props.children,\n        ignoreNativeScroll = _this$props.ignoreNativeScroll,\n        onSwitching = _this$props.onSwitching,\n        resistance = _this$props.resistance;\n      var touch = applyRotationMatrix(event.touches[0], axis); // We don't know yet.\n\n      if (_this.isSwiping === undefined) {\n        var dx = Math.abs(touch.pageX - _this.startX);\n        var dy = Math.abs(touch.pageY - _this.startY);\n        var isSwiping = dx > dy && dx > _reactSwipeableViewsCore.constant.UNCERTAINTY_THRESHOLD; // We let the parent handle the scroll.\n\n        if (!resistance && (axis === 'y' || axis === 'y-reverse') && (_this.indexCurrent === 0 && _this.startX < touch.pageX || _this.indexCurrent === React.Children.count(_this.props.children) - 1 && _this.startX > touch.pageX)) {\n          _this.isSwiping = false;\n          return;\n        } // We are likely to be swiping, let's prevent the scroll event.\n\n        if (dx > dy) {\n          event.preventDefault();\n        }\n        if (isSwiping === true || dy > _reactSwipeableViewsCore.constant.UNCERTAINTY_THRESHOLD) {\n          _this.isSwiping = isSwiping;\n          _this.startX = touch.pageX; // Shift the starting point.\n\n          return; // Let's wait the next touch event to move something.\n        }\n      }\n\n      if (_this.isSwiping !== true) {\n        return;\n      } // We are swiping, let's prevent the scroll event.\n\n      event.preventDefault(); // Low Pass filter.\n\n      _this.vx = _this.vx * 0.5 + (touch.pageX - _this.lastX) * 0.5;\n      _this.lastX = touch.pageX;\n      var _computeIndex = (0, _reactSwipeableViewsCore.computeIndex)({\n          children: children,\n          resistance: resistance,\n          pageX: touch.pageX,\n          startIndex: _this.startIndex,\n          startX: _this.startX,\n          viewLength: _this.viewLength\n        }),\n        index = _computeIndex.index,\n        startX = _computeIndex.startX; // Add support for native scroll elements.\n\n      if (nodeWhoClaimedTheScroll === null && !ignoreNativeScroll) {\n        var domTreeShapes = getDomTreeShapes(event.target, _this.rootNode);\n        var hasFoundNativeHandler = findNativeHandler({\n          domTreeShapes: domTreeShapes,\n          startX: _this.startX,\n          pageX: touch.pageX,\n          axis: axis\n        }); // We abort the touch move handler.\n\n        if (hasFoundNativeHandler) {\n          return;\n        }\n      } // We are moving toward the edges.\n\n      if (startX) {\n        _this.startX = startX;\n      } else if (nodeWhoClaimedTheScroll === null) {\n        nodeWhoClaimedTheScroll = _this.rootNode;\n      }\n      _this.setIndexCurrent(index);\n      var callback = function callback() {\n        if (onSwitching) {\n          onSwitching(index, 'move');\n        }\n      };\n      if (_this.state.displaySameSlide || !_this.state.isDragging) {\n        _this.setState({\n          displaySameSlide: false,\n          isDragging: true\n        }, callback);\n      }\n      callback();\n    };\n    _this.handleSwipeEnd = function () {\n      nodeWhoClaimedTheScroll = null; // The touch start event can be cancel.\n      // Makes sure that a starting point is set.\n\n      if (!_this.started) {\n        return;\n      }\n      _this.started = false;\n      if (_this.isSwiping !== true) {\n        return;\n      }\n      var indexLatest = _this.state.indexLatest;\n      var indexCurrent = _this.indexCurrent;\n      var delta = indexLatest - indexCurrent;\n      var indexNew; // Quick movement\n\n      if (Math.abs(_this.vx) > _this.props.threshold) {\n        if (_this.vx > 0) {\n          indexNew = Math.floor(indexCurrent);\n        } else {\n          indexNew = Math.ceil(indexCurrent);\n        }\n      } else if (Math.abs(delta) > _this.props.hysteresis) {\n        // Some hysteresis with indexLatest.\n        indexNew = delta > 0 ? Math.floor(indexCurrent) : Math.ceil(indexCurrent);\n      } else {\n        indexNew = indexLatest;\n      }\n      var indexMax = React.Children.count(_this.props.children) - 1;\n      if (indexNew < 0) {\n        indexNew = 0;\n      } else if (indexNew > indexMax) {\n        indexNew = indexMax;\n      }\n      _this.setIndexCurrent(indexNew);\n      _this.setState({\n        indexLatest: indexNew,\n        isDragging: false\n      }, function () {\n        if (_this.props.onSwitching) {\n          _this.props.onSwitching(indexNew, 'end');\n        }\n        if (_this.props.onChangeIndex && indexNew !== indexLatest) {\n          _this.props.onChangeIndex(indexNew, indexLatest, {\n            reason: 'swipe'\n          });\n        } // Manually calling handleTransitionEnd in that case as isn't otherwise.\n\n        if (indexCurrent === indexLatest) {\n          _this.handleTransitionEnd();\n        }\n      });\n    };\n    _this.handleTouchStart = function (event) {\n      if (_this.props.onTouchStart) {\n        _this.props.onTouchStart(event);\n      }\n      _this.handleSwipeStart(event);\n    };\n    _this.handleTouchEnd = function (event) {\n      if (_this.props.onTouchEnd) {\n        _this.props.onTouchEnd(event);\n      }\n      _this.handleSwipeEnd(event);\n    };\n    _this.handleMouseDown = function (event) {\n      if (_this.props.onMouseDown) {\n        _this.props.onMouseDown(event);\n      }\n      event.persist();\n      _this.handleSwipeStart(adaptMouse(event));\n    };\n    _this.handleMouseUp = function (event) {\n      if (_this.props.onMouseUp) {\n        _this.props.onMouseUp(event);\n      }\n      _this.handleSwipeEnd(adaptMouse(event));\n    };\n    _this.handleMouseLeave = function (event) {\n      if (_this.props.onMouseLeave) {\n        _this.props.onMouseLeave(event);\n      } // Filter out events\n\n      if (_this.started) {\n        _this.handleSwipeEnd(adaptMouse(event));\n      }\n    };\n    _this.handleMouseMove = function (event) {\n      if (_this.props.onMouseMove) {\n        _this.props.onMouseMove(event);\n      } // Filter out events\n\n      if (_this.started) {\n        _this.handleSwipeMove(adaptMouse(event));\n      }\n    };\n    _this.handleScroll = function (event) {\n      if (_this.props.onScroll) {\n        _this.props.onScroll(event);\n      } // Ignore events bubbling up.\n\n      if (event.target !== _this.rootNode) {\n        return;\n      }\n      if (_this.ignoreNextScrollEvents) {\n        _this.ignoreNextScrollEvents = false;\n        return;\n      }\n      var indexLatest = _this.state.indexLatest;\n      var indexNew = Math.ceil(event.target.scrollLeft / event.target.clientWidth) + indexLatest;\n      _this.ignoreNextScrollEvents = true; // Reset the scroll position.\n\n      event.target.scrollLeft = 0;\n      if (_this.props.onChangeIndex && indexNew !== indexLatest) {\n        _this.props.onChangeIndex(indexNew, indexLatest, {\n          reason: 'focus'\n        });\n      }\n    };\n    _this.updateHeight = function () {\n      if (_this.activeSlide !== null) {\n        var child = _this.activeSlide.children[0];\n        if (child !== undefined && child.offsetHeight !== undefined && _this.state.heightLatest !== child.offsetHeight) {\n          _this.setState({\n            heightLatest: child.offsetHeight\n          });\n        }\n      }\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _reactSwipeableViewsCore.checkIndexBounds)(props);\n    }\n    _this.state = {\n      indexLatest: props.index,\n      // Set to true as soon as the component is swiping.\n      // It's the state counter part of this.isSwiping.\n      isDragging: false,\n      // Help with SSR logic and lazy loading logic.\n      renderOnlyActive: !props.disableLazyLoading,\n      heightLatest: 0,\n      // Let the render method that we are going to display the same slide than previously.\n      displaySameSlide: true\n    };\n    _this.setIndexCurrent(props.index);\n    return _this;\n  }\n  (0, _createClass2.default)(SwipeableViews, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Subscribe to transition end events.\n      this.transitionListener = addEventListener(this.containerNode, 'transitionend', function (event) {\n        if (event.target !== _this2.containerNode) {\n          return;\n        }\n        _this2.handleTransitionEnd();\n      }); // Block the thread to handle that event.\n\n      this.touchMoveListener = addEventListener(this.rootNode, 'touchmove', function (event) {\n        // Handling touch events is disabled.\n        if (_this2.props.disabled) {\n          return;\n        }\n        _this2.handleSwipeMove(event);\n      }, {\n        passive: false\n      });\n      if (!this.props.disableLazyLoading) {\n        this.firstRenderTimeout = setTimeout(function () {\n          _this2.setState({\n            renderOnlyActive: false\n          });\n        }, 0);\n      } // Send all functions in an object if action param is set.\n\n      if (this.props.action) {\n        this.props.action({\n          updateHeight: this.updateHeight\n        });\n      }\n    } // eslint-disable-next-line camelcase,react/sort-comp\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var index = nextProps.index;\n      if (typeof index === 'number' && index !== this.props.index) {\n        if (process.env.NODE_ENV !== 'production') {\n          (0, _reactSwipeableViewsCore.checkIndexBounds)(nextProps);\n        }\n        this.setIndexCurrent(index);\n        this.setState({\n          // If true, we are going to change the children. We shoudn't animate it.\n          displaySameSlide: (0, _reactSwipeableViewsCore.getDisplaySameSlide)(this.props, nextProps),\n          indexLatest: index\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.transitionListener.remove();\n      this.touchMoveListener.remove();\n      clearTimeout(this.firstRenderTimeout);\n    }\n  }, {\n    key: \"getSwipeableViewsContext\",\n    value: function getSwipeableViewsContext() {\n      var _this3 = this;\n      return {\n        slideUpdateHeight: function slideUpdateHeight() {\n          _this3.updateHeight();\n        }\n      };\n    }\n  }, {\n    key: \"setIndexCurrent\",\n    value: function setIndexCurrent(indexCurrent) {\n      if (!this.props.animateTransitions && this.indexCurrent !== indexCurrent) {\n        this.handleTransitionEnd();\n      }\n      this.indexCurrent = indexCurrent;\n      if (this.containerNode) {\n        var axis = this.props.axis;\n        var transform = axisProperties.transform[axis](indexCurrent * 100);\n        this.containerNode.style.WebkitTransform = transform;\n        this.containerNode.style.transform = transform;\n      }\n    }\n  }, {\n    key: \"handleTransitionEnd\",\n    value: function handleTransitionEnd() {\n      if (!this.props.onTransitionEnd) {\n        return;\n      } // Filters out when changing the children\n\n      if (this.state.displaySameSlide) {\n        return;\n      } // The rest callback is triggered when swiping. It's just noise.\n      // We filter it out.\n\n      if (!this.state.isDragging) {\n        this.props.onTransitionEnd();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      var _this$props2 = this.props,\n        action = _this$props2.action,\n        animateHeight = _this$props2.animateHeight,\n        animateTransitions = _this$props2.animateTransitions,\n        axis = _this$props2.axis,\n        children = _this$props2.children,\n        containerStyleProp = _this$props2.containerStyle,\n        disabled = _this$props2.disabled,\n        disableLazyLoading = _this$props2.disableLazyLoading,\n        enableMouseEvents = _this$props2.enableMouseEvents,\n        hysteresis = _this$props2.hysteresis,\n        ignoreNativeScroll = _this$props2.ignoreNativeScroll,\n        index = _this$props2.index,\n        onChangeIndex = _this$props2.onChangeIndex,\n        onSwitching = _this$props2.onSwitching,\n        onTransitionEnd = _this$props2.onTransitionEnd,\n        resistance = _this$props2.resistance,\n        slideStyleProp = _this$props2.slideStyle,\n        slideClassName = _this$props2.slideClassName,\n        springConfig = _this$props2.springConfig,\n        style = _this$props2.style,\n        threshold = _this$props2.threshold,\n        other = (0, _objectWithoutProperties2.default)(_this$props2, [\"action\", \"animateHeight\", \"animateTransitions\", \"axis\", \"children\", \"containerStyle\", \"disabled\", \"disableLazyLoading\", \"enableMouseEvents\", \"hysteresis\", \"ignoreNativeScroll\", \"index\", \"onChangeIndex\", \"onSwitching\", \"onTransitionEnd\", \"resistance\", \"slideStyle\", \"slideClassName\", \"springConfig\", \"style\", \"threshold\"]);\n      var _this$state = this.state,\n        displaySameSlide = _this$state.displaySameSlide,\n        heightLatest = _this$state.heightLatest,\n        indexLatest = _this$state.indexLatest,\n        isDragging = _this$state.isDragging,\n        renderOnlyActive = _this$state.renderOnlyActive;\n      var touchEvents = !disabled ? {\n        onTouchStart: this.handleTouchStart,\n        onTouchEnd: this.handleTouchEnd\n      } : {};\n      var mouseEvents = !disabled && enableMouseEvents ? {\n        onMouseDown: this.handleMouseDown,\n        onMouseUp: this.handleMouseUp,\n        onMouseLeave: this.handleMouseLeave,\n        onMouseMove: this.handleMouseMove\n      } : {}; // There is no point to animate if we are already providing a height.\n\n      process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(!animateHeight || !containerStyleProp || !containerStyleProp.height, \"react-swipeable-view: You are setting animateHeight to true but you are\\nalso providing a custom height.\\nThe custom height has a higher priority than the animateHeight property.\\nSo animateHeight is most likely having no effect at all.\") : void 0;\n      var slideStyle = (0, _extends2.default)({}, styles.slide, slideStyleProp);\n      var transition;\n      var WebkitTransition;\n      if (isDragging || !animateTransitions || displaySameSlide) {\n        transition = 'all 0s ease 0s';\n        WebkitTransition = 'all 0s ease 0s';\n      } else {\n        transition = createTransition('transform', springConfig);\n        WebkitTransition = createTransition('-webkit-transform', springConfig);\n        if (heightLatest !== 0) {\n          var additionalTranstion = \", \".concat(createTransition('height', springConfig));\n          transition += additionalTranstion;\n          WebkitTransition += additionalTranstion;\n        }\n      }\n      var containerStyle = {\n        height: null,\n        WebkitFlexDirection: axisProperties.flexDirection[axis],\n        flexDirection: axisProperties.flexDirection[axis],\n        WebkitTransition: WebkitTransition,\n        transition: transition\n      }; // Apply the styles for SSR considerations\n\n      if (!renderOnlyActive) {\n        var transform = axisProperties.transform[axis](this.indexCurrent * 100);\n        containerStyle.WebkitTransform = transform;\n        containerStyle.transform = transform;\n      }\n      if (animateHeight) {\n        containerStyle.height = heightLatest;\n      }\n      return React.createElement(SwipeableViewsContext.Provider, {\n        value: this.getSwipeableViewsContext()\n      }, React.createElement(\"div\", (0, _extends2.default)({\n        ref: this.setRootNode,\n        style: (0, _extends2.default)({}, axisProperties.root[axis], style)\n      }, other, touchEvents, mouseEvents, {\n        onScroll: this.handleScroll\n      }), React.createElement(\"div\", {\n        ref: this.setContainerNode,\n        style: (0, _extends2.default)({}, containerStyle, styles.container, containerStyleProp),\n        className: \"react-swipeable-view-container\"\n      }, React.Children.map(children, function (child, indexChild) {\n        if (renderOnlyActive && indexChild !== indexLatest) {\n          return null;\n        }\n        process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(React.isValidElement(child), \"react-swipeable-view: one of the children provided is invalid: \".concat(child, \".\\n  We are expecting a valid React Element\")) : void 0;\n        var ref;\n        var hidden = true;\n        if (indexChild === indexLatest) {\n          hidden = false;\n          if (animateHeight) {\n            ref = _this4.setActiveSlide;\n            slideStyle.overflowY = 'hidden';\n          }\n        }\n        return React.createElement(\"div\", {\n          ref: ref,\n          style: slideStyle,\n          className: slideClassName,\n          \"aria-hidden\": hidden,\n          \"data-swipeable\": \"true\"\n        }, child);\n      }))));\n    }\n  }]);\n  return SwipeableViews;\n}(React.Component); // Added as an ads for people using the React dev tools in production.\n// So they know, the tool used to build the awesome UI they\n// are looking at/retro engineering.\n\nSwipeableViews.displayName = 'ReactSwipableView';\nSwipeableViews.defaultProps = {\n  animateHeight: false,\n  animateTransitions: true,\n  axis: 'x',\n  disabled: false,\n  disableLazyLoading: false,\n  enableMouseEvents: false,\n  hysteresis: 0.6,\n  ignoreNativeScroll: false,\n  index: 0,\n  threshold: 5,\n  springConfig: {\n    duration: '0.35s',\n    easeFunction: 'cubic-bezier(0.15, 0.3, 0.25, 1)',\n    delay: '0s'\n  },\n  resistance: false\n};\nvar _default = SwipeableViews;\nexports.default = _default;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"checkIndexBounds\", {\n  enumerable: true,\n  get: function get() {\n    return _checkIndexBounds.default;\n  }\n});\nObject.defineProperty(exports, \"computeIndex\", {\n  enumerable: true,\n  get: function get() {\n    return _computeIndex.default;\n  }\n});\nObject.defineProperty(exports, \"constant\", {\n  enumerable: true,\n  get: function get() {\n    return _constant.default;\n  }\n});\nObject.defineProperty(exports, \"getDisplaySameSlide\", {\n  enumerable: true,\n  get: function get() {\n    return _getDisplaySameSlide.default;\n  }\n});\nObject.defineProperty(exports, \"mod\", {\n  enumerable: true,\n  get: function get() {\n    return _mod.default;\n  }\n});\nvar _checkIndexBounds = _interopRequireDefault(require(\"./checkIndexBounds\"));\nvar _computeIndex = _interopRequireDefault(require(\"./computeIndex\"));\nvar _constant = _interopRequireDefault(require(\"./constant\"));\nvar _getDisplaySameSlide = _interopRequireDefault(require(\"./getDisplaySameSlide\"));\nvar _mod = _interopRequireDefault(require(\"./mod\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _warning = _interopRequireDefault(require(\"warning\"));\nvar checkIndexBounds = function checkIndexBounds(props) {\n  var index = props.index,\n    children = props.children;\n  var childrenCount = _react.default.Children.count(children);\n  process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(index >= 0 && index <= childrenCount, \"react-swipeable-view: the new index: \".concat(index, \" is out of bounds: [0-\").concat(childrenCount, \"].\")) : void 0;\n};\nvar _default = checkIndexBounds;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = computeIndex;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _constant = _interopRequireDefault(require(\"./constant\"));\nfunction computeIndex(params) {\n  var children = params.children,\n    startIndex = params.startIndex,\n    startX = params.startX,\n    pageX = params.pageX,\n    viewLength = params.viewLength,\n    resistance = params.resistance;\n  var indexMax = _react.default.Children.count(children) - 1;\n  var index = startIndex + (startX - pageX) / viewLength;\n  var newStartX;\n  if (!resistance) {\n    // Reset the starting point\n    if (index < 0) {\n      index = 0;\n      newStartX = (index - startIndex) * viewLength + pageX;\n    } else if (index > indexMax) {\n      index = indexMax;\n      newStartX = (index - startIndex) * viewLength + pageX;\n    }\n  } else if (index < 0) {\n    index = Math.exp(index * _constant.default.RESISTANCE_COEF) - 1;\n  } else if (index > indexMax) {\n    index = indexMax + 1 - Math.exp((indexMax - index) * _constant.default.RESISTANCE_COEF);\n  }\n  return {\n    index: index,\n    startX: newStartX\n  };\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar getDisplaySameSlide = function getDisplaySameSlide(props, nextProps) {\n  var displaySameSlide = false;\n  var getChildrenKey = function getChildrenKey(child) {\n    return child ? child.key : 'empty';\n  };\n  if (props.children.length && nextProps.children.length) {\n    var oldKeys = _react.default.Children.map(props.children, getChildrenKey);\n    var oldKey = oldKeys[props.index];\n    if (oldKey !== null && oldKey !== undefined) {\n      var newKeys = _react.default.Children.map(nextProps.children, getChildrenKey);\n      var newKey = newKeys[nextProps.index];\n      if (oldKey === newKey) {\n        displaySameSlide = true;\n      }\n    }\n  }\n  return displaySameSlide;\n};\nvar _default = getDisplaySameSlide;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n// Extended version of % with negative integer support.\nfunction mod(n, m) {\n  var q = n % m;\n  return q < 0 ? q + m : q;\n}\nvar _default = mod;\nexports.default = _default;","import { Component } from 'react';\n\nimport type { IntlShape } from 'react-intl';\nimport { injectIntl, defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  today: { id: 'relative_time.today', defaultMessage: 'today' },\n  just_now: { id: 'relative_time.just_now', defaultMessage: 'now' },\n  just_now_full: {\n    id: 'relative_time.full.just_now',\n    defaultMessage: 'just now',\n  },\n  seconds: { id: 'relative_time.seconds', defaultMessage: '{number}s' },\n  seconds_full: {\n    id: 'relative_time.full.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} ago',\n  },\n  minutes: { id: 'relative_time.minutes', defaultMessage: '{number}m' },\n  minutes_full: {\n    id: 'relative_time.full.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} ago',\n  },\n  hours: { id: 'relative_time.hours', defaultMessage: '{number}h' },\n  hours_full: {\n    id: 'relative_time.full.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} ago',\n  },\n  days: { id: 'relative_time.days', defaultMessage: '{number}d' },\n  days_full: {\n    id: 'relative_time.full.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} ago',\n  },\n  moments_remaining: {\n    id: 'time_remaining.moments',\n    defaultMessage: 'Moments remaining',\n  },\n  seconds_remaining: {\n    id: 'time_remaining.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} left',\n  },\n  minutes_remaining: {\n    id: 'time_remaining.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} left',\n  },\n  hours_remaining: {\n    id: 'time_remaining.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} left',\n  },\n  days_remaining: {\n    id: 'time_remaining.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} left',\n  },\n});\n\nconst dateFormatOptions = {\n  hour12: false,\n  year: 'numeric',\n  month: 'short',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit',\n} as const;\n\nconst shortDateFormatOptions = {\n  month: 'short',\n  day: 'numeric',\n} as const;\n\nconst SECOND = 1000;\nconst MINUTE = 1000 * 60;\nconst HOUR = 1000 * 60 * 60;\nconst DAY = 1000 * 60 * 60 * 24;\n\nconst MAX_DELAY = 2147483647;\n\nconst selectUnits = (delta: number) => {\n  const absDelta = Math.abs(delta);\n\n  if (absDelta < MINUTE) {\n    return 'second';\n  } else if (absDelta < HOUR) {\n    return 'minute';\n  } else if (absDelta < DAY) {\n    return 'hour';\n  }\n\n  return 'day';\n};\n\nconst getUnitDelay = (units: string) => {\n  switch (units) {\n    case 'second':\n      return SECOND;\n    case 'minute':\n      return MINUTE;\n    case 'hour':\n      return HOUR;\n    case 'day':\n      return DAY;\n    default:\n      return MAX_DELAY;\n  }\n};\n\nexport const timeAgoString = (\n  intl: IntlShape,\n  date: Date,\n  now: number,\n  year: number,\n  timeGiven: boolean,\n  short?: boolean,\n) => {\n  const delta = now - date.getTime();\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(\n      short ? messages.just_now : messages.just_now_full,\n    );\n  } else if (delta < 7 * DAY) {\n    if (delta < MINUTE) {\n      relativeTime = intl.formatMessage(\n        short ? messages.seconds : messages.seconds_full,\n        { number: Math.floor(delta / SECOND) },\n      );\n    } else if (delta < HOUR) {\n      relativeTime = intl.formatMessage(\n        short ? messages.minutes : messages.minutes_full,\n        { number: Math.floor(delta / MINUTE) },\n      );\n    } else if (delta < DAY) {\n      relativeTime = intl.formatMessage(\n        short ? messages.hours : messages.hours_full,\n        { number: Math.floor(delta / HOUR) },\n      );\n    } else {\n      relativeTime = intl.formatMessage(\n        short ? messages.days : messages.days_full,\n        { number: Math.floor(delta / DAY) },\n      );\n    }\n  } else if (date.getFullYear() === year) {\n    relativeTime = intl.formatDate(date, shortDateFormatOptions);\n  } else {\n    relativeTime = intl.formatDate(date, {\n      ...shortDateFormatOptions,\n      year: 'numeric',\n    });\n  }\n\n  return relativeTime;\n};\n\nconst timeRemainingString = (\n  intl: IntlShape,\n  date: Date,\n  now: number,\n  timeGiven = true,\n) => {\n  const delta = date.getTime() - now;\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(messages.moments_remaining);\n  } else if (delta < MINUTE) {\n    relativeTime = intl.formatMessage(messages.seconds_remaining, {\n      number: Math.floor(delta / SECOND),\n    });\n  } else if (delta < HOUR) {\n    relativeTime = intl.formatMessage(messages.minutes_remaining, {\n      number: Math.floor(delta / MINUTE),\n    });\n  } else if (delta < DAY) {\n    relativeTime = intl.formatMessage(messages.hours_remaining, {\n      number: Math.floor(delta / HOUR),\n    });\n  } else {\n    relativeTime = intl.formatMessage(messages.days_remaining, {\n      number: Math.floor(delta / DAY),\n    });\n  }\n\n  return relativeTime;\n};\n\ninterface Props {\n  intl: IntlShape;\n  timestamp: string;\n  year: number;\n  futureDate?: boolean;\n  short?: boolean;\n}\ninterface States {\n  now: number;\n}\nclass RelativeTimestamp extends Component<Props, States> {\n  state = {\n    now: Date.now(),\n  };\n\n  static defaultProps = {\n    year: new Date().getFullYear(),\n    short: true,\n  };\n\n  _timer: number | undefined;\n\n  shouldComponentUpdate(nextProps: Props, nextState: States) {\n    // As of right now the locale doesn't change without a new page load,\n    // but we might as well check in case that ever changes.\n    return (\n      this.props.timestamp !== nextProps.timestamp ||\n      this.props.intl.locale !== nextProps.intl.locale ||\n      this.state.now !== nextState.now\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (this.props.timestamp !== nextProps.timestamp) {\n      this.setState({ now: Date.now() });\n    }\n  }\n\n  componentDidMount() {\n    this._scheduleNextUpdate(this.props, this.state);\n  }\n\n  UNSAFE_componentWillUpdate(nextProps: Props, nextState: States) {\n    this._scheduleNextUpdate(nextProps, nextState);\n  }\n\n  componentWillUnmount() {\n    window.clearTimeout(this._timer);\n  }\n\n  _scheduleNextUpdate(props: Props, state: States) {\n    window.clearTimeout(this._timer);\n\n    const { timestamp } = props;\n    const delta = new Date(timestamp).getTime() - state.now;\n    const unitDelay = getUnitDelay(selectUnits(delta));\n    const unitRemainder = Math.abs(delta % unitDelay);\n    const updateInterval = 1000 * 10;\n    const delay =\n      delta < 0\n        ? Math.max(updateInterval, unitDelay - unitRemainder)\n        : Math.max(updateInterval, unitRemainder);\n\n    this._timer = window.setTimeout(() => {\n      this.setState({ now: Date.now() });\n    }, delay);\n  }\n\n  render() {\n    const { timestamp, intl, year, futureDate, short } = this.props;\n\n    const timeGiven = timestamp.includes('T');\n    const date = new Date(timestamp);\n    const relativeTime = futureDate\n      ? timeRemainingString(intl, date, this.state.now, timeGiven)\n      : timeAgoString(intl, date, this.state.now, year, timeGiven, short);\n\n    return (\n      <time\n        dateTime={timestamp}\n        title={intl.formatDate(date, dateFormatOptions)}\n      >\n        {relativeTime}\n      </time>\n    );\n  }\n}\n\nconst RelativeTimestampWithIntl = injectIntl(RelativeTimestamp);\n\nexport { RelativeTimestampWithIntl as RelativeTimestamp };\n","// @ts-check\n\n/**\n * @typedef Emoji\n * @property {string} shortcode\n * @property {string} static_url\n * @property {string} url\n */\n\n/**\n * @typedef AccountField\n * @property {string} name\n * @property {string} value\n * @property {string} verified_at\n */\n\n/**\n * @typedef Account\n * @property {string} acct\n * @property {string} avatar\n * @property {string} avatar_static\n * @property {boolean} bot\n * @property {string} created_at\n * @property {boolean=} discoverable\n * @property {string} display_name\n * @property {Emoji[]} emojis\n * @property {AccountField[]} fields\n * @property {number} followers_count\n * @property {number} following_count\n * @property {boolean} group\n * @property {string} header\n * @property {string} header_static\n * @property {string} id\n * @property {string=} last_status_at\n * @property {boolean} locked\n * @property {string} note\n * @property {number} statuses_count\n * @property {string} url\n * @property {string} username\n */\n\n/**\n * @typedef {[code: string, name: string, localName: string]} InitialStateLanguage\n */\n\n/**\n * @typedef InitialStateMeta\n * @property {string} access_token\n * @property {boolean=} advanced_layout\n * @property {boolean} auto_play_gif\n * @property {boolean} activity_api_enabled\n * @property {string} admin\n * @property {boolean=} boost_modal\n * @property {boolean=} favourite_modal\n * @property {boolean} crop_images\n * @property {boolean=} delete_modal\n * @property {boolean=} disable_swiping\n * @property {string=} disabled_account_id\n * @property {string} display_media\n * @property {string} domain\n * @property {boolean=} expand_spoilers\n * @property {boolean} limited_federation_mode\n * @property {string} locale\n * @property {string | null} mascot\n * @property {string=} me\n * @property {string=} moved_to_account_id\n * @property {string=} owner\n * @property {boolean} profile_directory\n * @property {boolean} registrations_open\n * @property {boolean} reduce_motion\n * @property {string} repository\n * @property {boolean} search_enabled\n * @property {boolean} trends_enabled\n * @property {boolean} single_user_mode\n * @property {string} source_url\n * @property {string} streaming_api_base_url\n * @property {boolean} timeline_preview\n * @property {string} title\n * @property {boolean} show_trends\n * @property {boolean} trends_as_landing_page\n * @property {boolean} unfollow_modal\n * @property {boolean} use_blurhash\n * @property {boolean=} use_pending_items\n * @property {string} version\n * @property {string} sso_redirect\n * @property {boolean} translation_enabled\n * @property {string} status_page_url\n * @property {boolean} system_emoji_font\n * @property {string} default_content_type\n */\n\n/** @type {string} */\nconst initialPath = document.querySelector(\"head meta[name=initialPath]\")?.getAttribute(\"content\") ?? '';\n/** @type {boolean} */\nexport const hasMultiColumnPath = initialPath === '/'\n  || initialPath === '/getting-started'\n  || initialPath.startsWith('/deck');\n\n/**\n * @typedef InitialState\n * @property {Record<string, Account>} accounts\n * @property {InitialStateLanguage[]} languages\n * @property {boolean=} critical_updates_pending\n * @property {InitialStateMeta} meta\n * @property {object} local_settings\n * @property {number} max_toot_chars\n * @property {number} poll_limits\n */\n\nconst element = document.getElementById('initial-state');\n/** @type {InitialState | undefined} */\nconst initialState = element?.textContent && JSON.parse(element.textContent);\n\n// Glitch-soc-specific local settings\nif (initialState) {\n  try {\n    // @ts-expect-error\n    initialState.local_settings = JSON.parse(localStorage.getItem('mastodon-settings'));\n  } catch (e) {\n    initialState.local_settings = {};\n  }\n}\n\n/**\n * @template {keyof InitialStateMeta} K\n * @param {K} prop\n * @returns {InitialStateMeta[K] | undefined}\n */\nconst getMeta = (prop) => initialState?.meta && initialState.meta[prop];\n\nexport const activityApiEnabled = getMeta('activity_api_enabled');\nexport const autoPlayGif = getMeta('auto_play_gif');\nexport const boostModal = getMeta('boost_modal');\nexport const cropImages = getMeta('crop_images');\nexport const deleteModal = getMeta('delete_modal');\nexport const disableSwiping = getMeta('disable_swiping');\nexport const disabledAccountId = getMeta('disabled_account_id');\nexport const displayMedia = getMeta('display_media');\nexport const domain = getMeta('domain');\nexport const expandSpoilers = getMeta('expand_spoilers');\nexport const forceSingleColumn = !getMeta('advanced_layout');\nexport const limitedFederationMode = getMeta('limited_federation_mode');\nexport const mascot = getMeta('mascot');\nexport const me = getMeta('me');\nexport const movedToAccountId = getMeta('moved_to_account_id');\nexport const owner = getMeta('owner');\nexport const profile_directory = getMeta('profile_directory');\nexport const reduceMotion = getMeta('reduce_motion');\nexport const registrationsOpen = getMeta('registrations_open');\nexport const repository = getMeta('repository');\nexport const searchEnabled = getMeta('search_enabled');\nexport const trendsEnabled = getMeta('trends_enabled');\nexport const showTrends = getMeta('show_trends');\nexport const singleUserMode = getMeta('single_user_mode');\nexport const source_url = getMeta('source_url');\nexport const timelinePreview = getMeta('timeline_preview');\nexport const title = getMeta('title');\nexport const trendsAsLanding = getMeta('trends_as_landing_page');\nexport const unfollowModal = getMeta('unfollow_modal');\nexport const useBlurhash = getMeta('use_blurhash');\nexport const usePendingItems = getMeta('use_pending_items');\nexport const version = getMeta('version');\nexport const languages = initialState?.languages;\nexport const criticalUpdatesPending = initialState?.critical_updates_pending;\nexport const statusPageUrl = getMeta('status_page_url');\nexport const sso_redirect = getMeta('sso_redirect');\n\n// Glitch-soc-specific settings\nexport const maxChars = (initialState && initialState.max_toot_chars) || 500;\nexport const favouriteModal = getMeta('favourite_modal');\nexport const pollLimits = (initialState && initialState.poll_limits);\nexport const defaultContentType = getMeta('default_content_type');\nexport const useSystemEmojiFont = getMeta('system_emoji_font');\n\nexport default initialState;\n","import { debounce } from 'lodash';\n\nimport api from '../api';\n\nimport { showAlertForError } from './alerts';\n\nexport const SETTING_CHANGE = 'SETTING_CHANGE';\nexport const SETTING_SAVE   = 'SETTING_SAVE';\n\nexport function changeSetting(path, value) {\n  return dispatch => {\n    dispatch({\n      type: SETTING_CHANGE,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nconst debouncedSave = debounce((dispatch, getState) => {\n  if (getState().getIn(['settings', 'saved'])) {\n    return;\n  }\n\n  const data = getState().get('settings').filter((_, path) => path !== 'saved').toJS();\n\n  api(getState).put('/api/web/settings', { data })\n    .then(() => dispatch({ type: SETTING_SAVE }))\n    .catch(error => dispatch(showAlertForError(error)));\n}, 5000, { trailing: true });\n\nexport function saveSettings() {\n  return (dispatch, getState) => debouncedSave(dispatch, getState);\n}\n","import ready from '../ready';\n\nexport let assetHost = '';\n\nready(() => {\n  const cdnHost = document.querySelector('meta[name=cdn-host]');\n  if (cdnHost) {\n    assetHost = cdnHost.content || '';\n  }\n});\n","import { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  unexpectedTitle: { id: 'alert.unexpected.title', defaultMessage: 'Oops!' },\n  unexpectedMessage: { id: 'alert.unexpected.message', defaultMessage: 'An unexpected error occurred.' },\n  rateLimitedTitle: { id: 'alert.rate_limited.title', defaultMessage: 'Rate limited' },\n  rateLimitedMessage: { id: 'alert.rate_limited.message', defaultMessage: 'Please retry after {retry_time, time, medium}.' },\n});\n\nexport const ALERT_SHOW    = 'ALERT_SHOW';\nexport const ALERT_DISMISS = 'ALERT_DISMISS';\nexport const ALERT_CLEAR   = 'ALERT_CLEAR';\nexport const ALERT_NOOP    = 'ALERT_NOOP';\n\nexport function dismissAlert(alert) {\n  return {\n    type: ALERT_DISMISS,\n    alert,\n  };\n}\n\nexport function clearAlert() {\n  return {\n    type: ALERT_CLEAR,\n  };\n}\n\nexport function showAlert(title = messages.unexpectedTitle, message = messages.unexpectedMessage, message_values = undefined) {\n  return {\n    type: ALERT_SHOW,\n    title,\n    message,\n    message_values,\n  };\n}\n\nexport function showAlertForError(error, skipNotFound = false) {\n  if (error.response) {\n    const { data, status, statusText, headers } = error.response;\n\n    if (skipNotFound && (status === 404 || status === 410)) {\n      // Skip these errors as they are reflected in the UI\n      return { type: ALERT_NOOP };\n    }\n\n    if (status === 429 && headers['x-ratelimit-reset']) {\n      const reset_date = new Date(headers['x-ratelimit-reset']);\n      return showAlert(messages.rateLimitedTitle, messages.rateLimitedMessage, { 'retry_time': reset_date });\n    }\n\n    let message = statusText;\n    let title   = `${status}`;\n\n    if (data.error) {\n      message = data.error;\n    }\n\n    return showAlert(title, message);\n  } else {\n    console.error(error);\n    return showAlert();\n  }\n}\n","import { Component } from 'react';\n\nimport type { IntlShape } from 'react-intl';\nimport { injectIntl, defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  today: { id: 'relative_time.today', defaultMessage: 'today' },\n  just_now: { id: 'relative_time.just_now', defaultMessage: 'now' },\n  just_now_full: {\n    id: 'relative_time.full.just_now',\n    defaultMessage: 'just now',\n  },\n  seconds: { id: 'relative_time.seconds', defaultMessage: '{number}s' },\n  seconds_full: {\n    id: 'relative_time.full.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} ago',\n  },\n  minutes: { id: 'relative_time.minutes', defaultMessage: '{number}m' },\n  minutes_full: {\n    id: 'relative_time.full.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} ago',\n  },\n  hours: { id: 'relative_time.hours', defaultMessage: '{number}h' },\n  hours_full: {\n    id: 'relative_time.full.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} ago',\n  },\n  days: { id: 'relative_time.days', defaultMessage: '{number}d' },\n  days_full: {\n    id: 'relative_time.full.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} ago',\n  },\n  moments_remaining: {\n    id: 'time_remaining.moments',\n    defaultMessage: 'Moments remaining',\n  },\n  seconds_remaining: {\n    id: 'time_remaining.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} left',\n  },\n  minutes_remaining: {\n    id: 'time_remaining.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} left',\n  },\n  hours_remaining: {\n    id: 'time_remaining.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} left',\n  },\n  days_remaining: {\n    id: 'time_remaining.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} left',\n  },\n});\n\nconst dateFormatOptions = {\n  hour12: false,\n  year: 'numeric',\n  month: 'short',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit',\n} as const;\n\nconst shortDateFormatOptions = {\n  month: 'short',\n  day: 'numeric',\n} as const;\n\nconst SECOND = 1000;\nconst MINUTE = 1000 * 60;\nconst HOUR = 1000 * 60 * 60;\nconst DAY = 1000 * 60 * 60 * 24;\n\nconst MAX_DELAY = 2147483647;\n\nconst selectUnits = (delta: number) => {\n  const absDelta = Math.abs(delta);\n\n  if (absDelta < MINUTE) {\n    return 'second';\n  } else if (absDelta < HOUR) {\n    return 'minute';\n  } else if (absDelta < DAY) {\n    return 'hour';\n  }\n\n  return 'day';\n};\n\nconst getUnitDelay = (units: string) => {\n  switch (units) {\n    case 'second':\n      return SECOND;\n    case 'minute':\n      return MINUTE;\n    case 'hour':\n      return HOUR;\n    case 'day':\n      return DAY;\n    default:\n      return MAX_DELAY;\n  }\n};\n\nexport const timeAgoString = (\n  intl: IntlShape,\n  date: Date,\n  now: number,\n  year: number,\n  timeGiven: boolean,\n  short?: boolean,\n) => {\n  const delta = now - date.getTime();\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(\n      short ? messages.just_now : messages.just_now_full,\n    );\n  } else if (delta < 7 * DAY) {\n    if (delta < MINUTE) {\n      relativeTime = intl.formatMessage(\n        short ? messages.seconds : messages.seconds_full,\n        { number: Math.floor(delta / SECOND) },\n      );\n    } else if (delta < HOUR) {\n      relativeTime = intl.formatMessage(\n        short ? messages.minutes : messages.minutes_full,\n        { number: Math.floor(delta / MINUTE) },\n      );\n    } else if (delta < DAY) {\n      relativeTime = intl.formatMessage(\n        short ? messages.hours : messages.hours_full,\n        { number: Math.floor(delta / HOUR) },\n      );\n    } else {\n      relativeTime = intl.formatMessage(\n        short ? messages.days : messages.days_full,\n        { number: Math.floor(delta / DAY) },\n      );\n    }\n  } else if (date.getFullYear() === year) {\n    relativeTime = intl.formatDate(date, shortDateFormatOptions);\n  } else {\n    relativeTime = intl.formatDate(date, {\n      ...shortDateFormatOptions,\n      year: 'numeric',\n    });\n  }\n\n  return relativeTime;\n};\n\nconst timeRemainingString = (\n  intl: IntlShape,\n  date: Date,\n  now: number,\n  timeGiven = true,\n) => {\n  const delta = date.getTime() - now;\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(messages.moments_remaining);\n  } else if (delta < MINUTE) {\n    relativeTime = intl.formatMessage(messages.seconds_remaining, {\n      number: Math.floor(delta / SECOND),\n    });\n  } else if (delta < HOUR) {\n    relativeTime = intl.formatMessage(messages.minutes_remaining, {\n      number: Math.floor(delta / MINUTE),\n    });\n  } else if (delta < DAY) {\n    relativeTime = intl.formatMessage(messages.hours_remaining, {\n      number: Math.floor(delta / HOUR),\n    });\n  } else {\n    relativeTime = intl.formatMessage(messages.days_remaining, {\n      number: Math.floor(delta / DAY),\n    });\n  }\n\n  return relativeTime;\n};\n\ninterface Props {\n  intl: IntlShape;\n  timestamp: string;\n  year: number;\n  futureDate?: boolean;\n  short?: boolean;\n}\ninterface States {\n  now: number;\n}\nclass RelativeTimestamp extends Component<Props, States> {\n  state = {\n    now: Date.now(),\n  };\n\n  static defaultProps = {\n    year: new Date().getFullYear(),\n    short: true,\n  };\n\n  _timer: number | undefined;\n\n  shouldComponentUpdate(nextProps: Props, nextState: States) {\n    // As of right now the locale doesn't change without a new page load,\n    // but we might as well check in case that ever changes.\n    return (\n      this.props.timestamp !== nextProps.timestamp ||\n      this.props.intl.locale !== nextProps.intl.locale ||\n      this.state.now !== nextState.now\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (this.props.timestamp !== nextProps.timestamp) {\n      this.setState({ now: Date.now() });\n    }\n  }\n\n  componentDidMount() {\n    this._scheduleNextUpdate(this.props, this.state);\n  }\n\n  UNSAFE_componentWillUpdate(nextProps: Props, nextState: States) {\n    this._scheduleNextUpdate(nextProps, nextState);\n  }\n\n  componentWillUnmount() {\n    window.clearTimeout(this._timer);\n  }\n\n  _scheduleNextUpdate(props: Props, state: States) {\n    window.clearTimeout(this._timer);\n\n    const { timestamp } = props;\n    const delta = new Date(timestamp).getTime() - state.now;\n    const unitDelay = getUnitDelay(selectUnits(delta));\n    const unitRemainder = Math.abs(delta % unitDelay);\n    const updateInterval = 1000 * 10;\n    const delay =\n      delta < 0\n        ? Math.max(updateInterval, unitDelay - unitRemainder)\n        : Math.max(updateInterval, unitRemainder);\n\n    this._timer = window.setTimeout(() => {\n      this.setState({ now: Date.now() });\n    }, delay);\n  }\n\n  render() {\n    const { timestamp, intl, year, futureDate, short } = this.props;\n\n    const timeGiven = timestamp.includes('T');\n    const date = new Date(timestamp);\n    const relativeTime = futureDate\n      ? timeRemainingString(intl, date, this.state.now, timeGiven)\n      : timeAgoString(intl, date, this.state.now, year, timeGiven, short);\n\n    return (\n      <time\n        dateTime={timestamp}\n        title={intl.formatDate(date, dateFormatOptions)}\n      >\n        {relativeTime}\n      </time>\n    );\n  }\n}\n\nconst RelativeTimestampWithIntl = injectIntl(RelativeTimestamp);\n\nexport { RelativeTimestampWithIntl as RelativeTimestamp };\n","import { debounce } from 'lodash';\n\nimport api from '../api';\n\nimport { showAlertForError } from './alerts';\n\nexport const SETTING_CHANGE = 'SETTING_CHANGE';\nexport const SETTING_SAVE   = 'SETTING_SAVE';\n\nexport function changeSetting(path, value) {\n  return dispatch => {\n    dispatch({\n      type: SETTING_CHANGE,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nconst debouncedSave = debounce((dispatch, getState) => {\n  if (getState().getIn(['settings', 'saved'])) {\n    return;\n  }\n\n  const data = getState().get('settings').filter((_, path) => path !== 'saved').toJS();\n\n  api().put('/api/web/settings', { data })\n    .then(() => dispatch({ type: SETTING_SAVE }))\n    .catch(error => dispatch(showAlertForError(error)));\n}, 5000, { trailing: true });\n\nexport function saveSettings() {\n  return (dispatch, getState) => debouncedSave(dispatch, getState);\n}\n","(function () {\n  var debug = false;\n  var root = this;\n  var EXIF = function (obj) {\n    if (obj instanceof EXIF) return obj;\n    if (!(this instanceof EXIF)) return new EXIF(obj);\n    this.EXIFwrapped = obj;\n  };\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = EXIF;\n    }\n    exports.EXIF = EXIF;\n  } else {\n    root.EXIF = EXIF;\n  }\n  var ExifTags = EXIF.Tags = {\n    // version tags\n    0x9000: \"ExifVersion\",\n    // EXIF version\n    0xA000: \"FlashpixVersion\",\n    // Flashpix format version\n\n    // colorspace tags\n    0xA001: \"ColorSpace\",\n    // Color space information tag\n\n    // image configuration\n    0xA002: \"PixelXDimension\",\n    // Valid width of meaningful image\n    0xA003: \"PixelYDimension\",\n    // Valid height of meaningful image\n    0x9101: \"ComponentsConfiguration\",\n    // Information about channels\n    0x9102: \"CompressedBitsPerPixel\",\n    // Compressed bits per pixel\n\n    // user information\n    0x927C: \"MakerNote\",\n    // Any desired information written by the manufacturer\n    0x9286: \"UserComment\",\n    // Comments by user\n\n    // related file\n    0xA004: \"RelatedSoundFile\",\n    // Name of related sound file\n\n    // date and time\n    0x9003: \"DateTimeOriginal\",\n    // Date and time when the original image was generated\n    0x9004: \"DateTimeDigitized\",\n    // Date and time when the image was stored digitally\n    0x9290: \"SubsecTime\",\n    // Fractions of seconds for DateTime\n    0x9291: \"SubsecTimeOriginal\",\n    // Fractions of seconds for DateTimeOriginal\n    0x9292: \"SubsecTimeDigitized\",\n    // Fractions of seconds for DateTimeDigitized\n\n    // picture-taking conditions\n    0x829A: \"ExposureTime\",\n    // Exposure time (in seconds)\n    0x829D: \"FNumber\",\n    // F number\n    0x8822: \"ExposureProgram\",\n    // Exposure program\n    0x8824: \"SpectralSensitivity\",\n    // Spectral sensitivity\n    0x8827: \"ISOSpeedRatings\",\n    // ISO speed rating\n    0x8828: \"OECF\",\n    // Optoelectric conversion factor\n    0x9201: \"ShutterSpeedValue\",\n    // Shutter speed\n    0x9202: \"ApertureValue\",\n    // Lens aperture\n    0x9203: \"BrightnessValue\",\n    // Value of brightness\n    0x9204: \"ExposureBias\",\n    // Exposure bias\n    0x9205: \"MaxApertureValue\",\n    // Smallest F number of lens\n    0x9206: \"SubjectDistance\",\n    // Distance to subject in meters\n    0x9207: \"MeteringMode\",\n    // Metering mode\n    0x9208: \"LightSource\",\n    // Kind of light source\n    0x9209: \"Flash\",\n    // Flash status\n    0x9214: \"SubjectArea\",\n    // Location and area of main subject\n    0x920A: \"FocalLength\",\n    // Focal length of the lens in mm\n    0xA20B: \"FlashEnergy\",\n    // Strobe energy in BCPS\n    0xA20C: \"SpatialFrequencyResponse\",\n    //\n    0xA20E: \"FocalPlaneXResolution\",\n    // Number of pixels in width direction per FocalPlaneResolutionUnit\n    0xA20F: \"FocalPlaneYResolution\",\n    // Number of pixels in height direction per FocalPlaneResolutionUnit\n    0xA210: \"FocalPlaneResolutionUnit\",\n    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n    0xA214: \"SubjectLocation\",\n    // Location of subject in image\n    0xA215: \"ExposureIndex\",\n    // Exposure index selected on camera\n    0xA217: \"SensingMethod\",\n    // Image sensor type\n    0xA300: \"FileSource\",\n    // Image source (3 == DSC)\n    0xA301: \"SceneType\",\n    // Scene type (1 == directly photographed)\n    0xA302: \"CFAPattern\",\n    // Color filter array geometric pattern\n    0xA401: \"CustomRendered\",\n    // Special processing\n    0xA402: \"ExposureMode\",\n    // Exposure mode\n    0xA403: \"WhiteBalance\",\n    // 1 = auto white balance, 2 = manual\n    0xA404: \"DigitalZoomRation\",\n    // Digital zoom ratio\n    0xA405: \"FocalLengthIn35mmFilm\",\n    // Equivalent foacl length assuming 35mm film camera (in mm)\n    0xA406: \"SceneCaptureType\",\n    // Type of scene\n    0xA407: \"GainControl\",\n    // Degree of overall image gain adjustment\n    0xA408: \"Contrast\",\n    // Direction of contrast processing applied by camera\n    0xA409: \"Saturation\",\n    // Direction of saturation processing applied by camera\n    0xA40A: \"Sharpness\",\n    // Direction of sharpness processing applied by camera\n    0xA40B: \"DeviceSettingDescription\",\n    //\n    0xA40C: \"SubjectDistanceRange\",\n    // Distance to subject\n\n    // other tags\n    0xA005: \"InteroperabilityIFDPointer\",\n    0xA420: \"ImageUniqueID\" // Identifier assigned uniquely to each image\n  };\n\n  var TiffTags = EXIF.TiffTags = {\n    0x0100: \"ImageWidth\",\n    0x0101: \"ImageHeight\",\n    0x8769: \"ExifIFDPointer\",\n    0x8825: \"GPSInfoIFDPointer\",\n    0xA005: \"InteroperabilityIFDPointer\",\n    0x0102: \"BitsPerSample\",\n    0x0103: \"Compression\",\n    0x0106: \"PhotometricInterpretation\",\n    0x0112: \"Orientation\",\n    0x0115: \"SamplesPerPixel\",\n    0x011C: \"PlanarConfiguration\",\n    0x0212: \"YCbCrSubSampling\",\n    0x0213: \"YCbCrPositioning\",\n    0x011A: \"XResolution\",\n    0x011B: \"YResolution\",\n    0x0128: \"ResolutionUnit\",\n    0x0111: \"StripOffsets\",\n    0x0116: \"RowsPerStrip\",\n    0x0117: \"StripByteCounts\",\n    0x0201: \"JPEGInterchangeFormat\",\n    0x0202: \"JPEGInterchangeFormatLength\",\n    0x012D: \"TransferFunction\",\n    0x013E: \"WhitePoint\",\n    0x013F: \"PrimaryChromaticities\",\n    0x0211: \"YCbCrCoefficients\",\n    0x0214: \"ReferenceBlackWhite\",\n    0x0132: \"DateTime\",\n    0x010E: \"ImageDescription\",\n    0x010F: \"Make\",\n    0x0110: \"Model\",\n    0x0131: \"Software\",\n    0x013B: \"Artist\",\n    0x8298: \"Copyright\"\n  };\n  var GPSTags = EXIF.GPSTags = {\n    0x0000: \"GPSVersionID\",\n    0x0001: \"GPSLatitudeRef\",\n    0x0002: \"GPSLatitude\",\n    0x0003: \"GPSLongitudeRef\",\n    0x0004: \"GPSLongitude\",\n    0x0005: \"GPSAltitudeRef\",\n    0x0006: \"GPSAltitude\",\n    0x0007: \"GPSTimeStamp\",\n    0x0008: \"GPSSatellites\",\n    0x0009: \"GPSStatus\",\n    0x000A: \"GPSMeasureMode\",\n    0x000B: \"GPSDOP\",\n    0x000C: \"GPSSpeedRef\",\n    0x000D: \"GPSSpeed\",\n    0x000E: \"GPSTrackRef\",\n    0x000F: \"GPSTrack\",\n    0x0010: \"GPSImgDirectionRef\",\n    0x0011: \"GPSImgDirection\",\n    0x0012: \"GPSMapDatum\",\n    0x0013: \"GPSDestLatitudeRef\",\n    0x0014: \"GPSDestLatitude\",\n    0x0015: \"GPSDestLongitudeRef\",\n    0x0016: \"GPSDestLongitude\",\n    0x0017: \"GPSDestBearingRef\",\n    0x0018: \"GPSDestBearing\",\n    0x0019: \"GPSDestDistanceRef\",\n    0x001A: \"GPSDestDistance\",\n    0x001B: \"GPSProcessingMethod\",\n    0x001C: \"GPSAreaInformation\",\n    0x001D: \"GPSDateStamp\",\n    0x001E: \"GPSDifferential\"\n  };\n\n  // EXIF 2.3 Spec\n  var IFD1Tags = EXIF.IFD1Tags = {\n    0x0100: \"ImageWidth\",\n    0x0101: \"ImageHeight\",\n    0x0102: \"BitsPerSample\",\n    0x0103: \"Compression\",\n    0x0106: \"PhotometricInterpretation\",\n    0x0111: \"StripOffsets\",\n    0x0112: \"Orientation\",\n    0x0115: \"SamplesPerPixel\",\n    0x0116: \"RowsPerStrip\",\n    0x0117: \"StripByteCounts\",\n    0x011A: \"XResolution\",\n    0x011B: \"YResolution\",\n    0x011C: \"PlanarConfiguration\",\n    0x0128: \"ResolutionUnit\",\n    0x0201: \"JpegIFOffset\",\n    // When image format is JPEG, this value show offset to JPEG data stored.(aka \"ThumbnailOffset\" or \"JPEGInterchangeFormat\")\n    0x0202: \"JpegIFByteCount\",\n    // When image format is JPEG, this value shows data size of JPEG image (aka \"ThumbnailLength\" or \"JPEGInterchangeFormatLength\")\n    0x0211: \"YCbCrCoefficients\",\n    0x0212: \"YCbCrSubSampling\",\n    0x0213: \"YCbCrPositioning\",\n    0x0214: \"ReferenceBlackWhite\"\n  };\n  var StringValues = EXIF.StringValues = {\n    ExposureProgram: {\n      0: \"Not defined\",\n      1: \"Manual\",\n      2: \"Normal program\",\n      3: \"Aperture priority\",\n      4: \"Shutter priority\",\n      5: \"Creative program\",\n      6: \"Action program\",\n      7: \"Portrait mode\",\n      8: \"Landscape mode\"\n    },\n    MeteringMode: {\n      0: \"Unknown\",\n      1: \"Average\",\n      2: \"CenterWeightedAverage\",\n      3: \"Spot\",\n      4: \"MultiSpot\",\n      5: \"Pattern\",\n      6: \"Partial\",\n      255: \"Other\"\n    },\n    LightSource: {\n      0: \"Unknown\",\n      1: \"Daylight\",\n      2: \"Fluorescent\",\n      3: \"Tungsten (incandescent light)\",\n      4: \"Flash\",\n      9: \"Fine weather\",\n      10: \"Cloudy weather\",\n      11: \"Shade\",\n      12: \"Daylight fluorescent (D 5700 - 7100K)\",\n      13: \"Day white fluorescent (N 4600 - 5400K)\",\n      14: \"Cool white fluorescent (W 3900 - 4500K)\",\n      15: \"White fluorescent (WW 3200 - 3700K)\",\n      17: \"Standard light A\",\n      18: \"Standard light B\",\n      19: \"Standard light C\",\n      20: \"D55\",\n      21: \"D65\",\n      22: \"D75\",\n      23: \"D50\",\n      24: \"ISO studio tungsten\",\n      255: \"Other\"\n    },\n    Flash: {\n      0x0000: \"Flash did not fire\",\n      0x0001: \"Flash fired\",\n      0x0005: \"Strobe return light not detected\",\n      0x0007: \"Strobe return light detected\",\n      0x0009: \"Flash fired, compulsory flash mode\",\n      0x000D: \"Flash fired, compulsory flash mode, return light not detected\",\n      0x000F: \"Flash fired, compulsory flash mode, return light detected\",\n      0x0010: \"Flash did not fire, compulsory flash mode\",\n      0x0018: \"Flash did not fire, auto mode\",\n      0x0019: \"Flash fired, auto mode\",\n      0x001D: \"Flash fired, auto mode, return light not detected\",\n      0x001F: \"Flash fired, auto mode, return light detected\",\n      0x0020: \"No flash function\",\n      0x0041: \"Flash fired, red-eye reduction mode\",\n      0x0045: \"Flash fired, red-eye reduction mode, return light not detected\",\n      0x0047: \"Flash fired, red-eye reduction mode, return light detected\",\n      0x0049: \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n      0x004D: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n      0x004F: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n      0x0059: \"Flash fired, auto mode, red-eye reduction mode\",\n      0x005D: \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n      0x005F: \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n    },\n    SensingMethod: {\n      1: \"Not defined\",\n      2: \"One-chip color area sensor\",\n      3: \"Two-chip color area sensor\",\n      4: \"Three-chip color area sensor\",\n      5: \"Color sequential area sensor\",\n      7: \"Trilinear sensor\",\n      8: \"Color sequential linear sensor\"\n    },\n    SceneCaptureType: {\n      0: \"Standard\",\n      1: \"Landscape\",\n      2: \"Portrait\",\n      3: \"Night scene\"\n    },\n    SceneType: {\n      1: \"Directly photographed\"\n    },\n    CustomRendered: {\n      0: \"Normal process\",\n      1: \"Custom process\"\n    },\n    WhiteBalance: {\n      0: \"Auto white balance\",\n      1: \"Manual white balance\"\n    },\n    GainControl: {\n      0: \"None\",\n      1: \"Low gain up\",\n      2: \"High gain up\",\n      3: \"Low gain down\",\n      4: \"High gain down\"\n    },\n    Contrast: {\n      0: \"Normal\",\n      1: \"Soft\",\n      2: \"Hard\"\n    },\n    Saturation: {\n      0: \"Normal\",\n      1: \"Low saturation\",\n      2: \"High saturation\"\n    },\n    Sharpness: {\n      0: \"Normal\",\n      1: \"Soft\",\n      2: \"Hard\"\n    },\n    SubjectDistanceRange: {\n      0: \"Unknown\",\n      1: \"Macro\",\n      2: \"Close view\",\n      3: \"Distant view\"\n    },\n    FileSource: {\n      3: \"DSC\"\n    },\n    Components: {\n      0: \"\",\n      1: \"Y\",\n      2: \"Cb\",\n      3: \"Cr\",\n      4: \"R\",\n      5: \"G\",\n      6: \"B\"\n    }\n  };\n  function addEvent(element, event, handler) {\n    if (element.addEventListener) {\n      element.addEventListener(event, handler, false);\n    } else if (element.attachEvent) {\n      element.attachEvent(\"on\" + event, handler);\n    }\n  }\n  function imageHasData(img) {\n    return !!img.exifdata;\n  }\n  function base64ToArrayBuffer(base64, contentType) {\n    contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n    base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n    var binary = atob(base64);\n    var len = binary.length;\n    var buffer = new ArrayBuffer(len);\n    var view = new Uint8Array(buffer);\n    for (var i = 0; i < len; i++) {\n      view[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n  }\n  function objectURLToBlob(url, callback) {\n    var http = new XMLHttpRequest();\n    http.open(\"GET\", url, true);\n    http.responseType = \"blob\";\n    http.onload = function (e) {\n      if (this.status == 200 || this.status === 0) {\n        callback(this.response);\n      }\n    };\n    http.send();\n  }\n  function getImageData(img, callback) {\n    function handleBinaryFile(binFile) {\n      var data = findEXIFinJPEG(binFile);\n      img.exifdata = data || {};\n      var iptcdata = findIPTCinJPEG(binFile);\n      img.iptcdata = iptcdata || {};\n      if (EXIF.isXmpEnabled) {\n        var xmpdata = findXMPinJPEG(binFile);\n        img.xmpdata = xmpdata || {};\n      }\n      if (callback) {\n        callback.call(img);\n      }\n    }\n    if (img.src) {\n      if (/^data\\:/i.test(img.src)) {\n        // Data URI\n        var arrayBuffer = base64ToArrayBuffer(img.src);\n        handleBinaryFile(arrayBuffer);\n      } else if (/^blob\\:/i.test(img.src)) {\n        // Object URL\n        var fileReader = new FileReader();\n        fileReader.onload = function (e) {\n          handleBinaryFile(e.target.result);\n        };\n        objectURLToBlob(img.src, function (blob) {\n          fileReader.readAsArrayBuffer(blob);\n        });\n      } else {\n        var http = new XMLHttpRequest();\n        http.onload = function () {\n          if (this.status == 200 || this.status === 0) {\n            handleBinaryFile(http.response);\n          } else {\n            throw \"Could not load image\";\n          }\n          http = null;\n        };\n        http.open(\"GET\", img.src, true);\n        http.responseType = \"arraybuffer\";\n        http.send(null);\n      }\n    } else if (self.FileReader && (img instanceof self.Blob || img instanceof self.File)) {\n      var fileReader = new FileReader();\n      fileReader.onload = function (e) {\n        if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n        handleBinaryFile(e.target.result);\n      };\n      fileReader.readAsArrayBuffer(img);\n    }\n  }\n  function findEXIFinJPEG(file) {\n    var dataView = new DataView(file);\n    if (debug) console.log(\"Got file of length \" + file.byteLength);\n    if (dataView.getUint8(0) != 0xFF || dataView.getUint8(1) != 0xD8) {\n      if (debug) console.log(\"Not a valid JPEG\");\n      return false; // not a valid jpeg\n    }\n\n    var offset = 2,\n      length = file.byteLength,\n      marker;\n    while (offset < length) {\n      if (dataView.getUint8(offset) != 0xFF) {\n        if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n        return false; // not a valid marker, something is wrong\n      }\n\n      marker = dataView.getUint8(offset + 1);\n      if (debug) console.log(marker);\n\n      // we could implement handling for other markers here,\n      // but we're only looking for 0xFFE1 for EXIF data\n\n      if (marker == 225) {\n        if (debug) console.log(\"Found 0xFFE1 marker\");\n        return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\n        // offset += 2 + file.getShortAt(offset+2, true);\n      } else {\n        offset += 2 + dataView.getUint16(offset + 2);\n      }\n    }\n  }\n  function findIPTCinJPEG(file) {\n    var dataView = new DataView(file);\n    if (debug) console.log(\"Got file of length \" + file.byteLength);\n    if (dataView.getUint8(0) != 0xFF || dataView.getUint8(1) != 0xD8) {\n      if (debug) console.log(\"Not a valid JPEG\");\n      return false; // not a valid jpeg\n    }\n\n    var offset = 2,\n      length = file.byteLength;\n    var isFieldSegmentStart = function (dataView, offset) {\n      return dataView.getUint8(offset) === 0x38 && dataView.getUint8(offset + 1) === 0x42 && dataView.getUint8(offset + 2) === 0x49 && dataView.getUint8(offset + 3) === 0x4D && dataView.getUint8(offset + 4) === 0x04 && dataView.getUint8(offset + 5) === 0x04;\n    };\n    while (offset < length) {\n      if (isFieldSegmentStart(dataView, offset)) {\n        // Get the length of the name header (which is padded to an even number of bytes)\n        var nameHeaderLength = dataView.getUint8(offset + 7);\n        if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n        // Check for pre photoshop 6 format\n        if (nameHeaderLength === 0) {\n          // Always 4\n          nameHeaderLength = 4;\n        }\n        var startOffset = offset + 8 + nameHeaderLength;\n        var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n        return readIPTCData(file, startOffset, sectionLength);\n        break;\n      }\n\n      // Not the marker, continue searching\n      offset++;\n    }\n  }\n  var IptcFieldMap = {\n    0x78: 'caption',\n    0x6E: 'credit',\n    0x19: 'keywords',\n    0x37: 'dateCreated',\n    0x50: 'byline',\n    0x55: 'bylineTitle',\n    0x7A: 'captionWriter',\n    0x69: 'headline',\n    0x74: 'copyright',\n    0x0F: 'category'\n  };\n  function readIPTCData(file, startOffset, sectionLength) {\n    var dataView = new DataView(file);\n    var data = {};\n    var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n    var segmentStartPos = startOffset;\n    while (segmentStartPos < startOffset + sectionLength) {\n      if (dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos + 1) === 0x02) {\n        segmentType = dataView.getUint8(segmentStartPos + 2);\n        if (segmentType in IptcFieldMap) {\n          dataSize = dataView.getInt16(segmentStartPos + 3);\n          segmentSize = dataSize + 5;\n          fieldName = IptcFieldMap[segmentType];\n          fieldValue = getStringFromDB(dataView, segmentStartPos + 5, dataSize);\n          // Check if we already stored a value with this name\n          if (data.hasOwnProperty(fieldName)) {\n            // Value already stored with this name, create multivalue field\n            if (data[fieldName] instanceof Array) {\n              data[fieldName].push(fieldValue);\n            } else {\n              data[fieldName] = [data[fieldName], fieldValue];\n            }\n          } else {\n            data[fieldName] = fieldValue;\n          }\n        }\n      }\n      segmentStartPos++;\n    }\n    return data;\n  }\n  function readTags(file, tiffStart, dirStart, strings, bigEnd) {\n    var entries = file.getUint16(dirStart, !bigEnd),\n      tags = {},\n      entryOffset,\n      tag,\n      i;\n    for (i = 0; i < entries; i++) {\n      entryOffset = dirStart + i * 12 + 2;\n      tag = strings[file.getUint16(entryOffset, !bigEnd)];\n      if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n      tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n    }\n    return tags;\n  }\n  function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n    var type = file.getUint16(entryOffset + 2, !bigEnd),\n      numValues = file.getUint32(entryOffset + 4, !bigEnd),\n      valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart,\n      offset,\n      vals,\n      val,\n      n,\n      numerator,\n      denominator;\n    switch (type) {\n      case 1: // byte, 8-bit unsigned int\n      case 7:\n        // undefined, 8-bit byte, value depending on field\n        if (numValues == 1) {\n          return file.getUint8(entryOffset + 8, !bigEnd);\n        } else {\n          offset = numValues > 4 ? valueOffset : entryOffset + 8;\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getUint8(offset + n);\n          }\n          return vals;\n        }\n      case 2:\n        // ascii, 8-bit byte\n        offset = numValues > 4 ? valueOffset : entryOffset + 8;\n        return getStringFromDB(file, offset, numValues - 1);\n      case 3:\n        // short, 16 bit int\n        if (numValues == 1) {\n          return file.getUint16(entryOffset + 8, !bigEnd);\n        } else {\n          offset = numValues > 2 ? valueOffset : entryOffset + 8;\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\n          }\n          return vals;\n        }\n      case 4:\n        // long, 32 bit int\n        if (numValues == 1) {\n          return file.getUint32(entryOffset + 8, !bigEnd);\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\n          }\n          return vals;\n        }\n      case 5:\n        // rational = two long values, first is numerator, second is denominator\n        if (numValues == 1) {\n          numerator = file.getUint32(valueOffset, !bigEnd);\n          denominator = file.getUint32(valueOffset + 4, !bigEnd);\n          val = new Number(numerator / denominator);\n          val.numerator = numerator;\n          val.denominator = denominator;\n          return val;\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);\n            denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\n            vals[n] = new Number(numerator / denominator);\n            vals[n].numerator = numerator;\n            vals[n].denominator = denominator;\n          }\n          return vals;\n        }\n      case 9:\n        // slong, 32 bit signed int\n        if (numValues == 1) {\n          return file.getInt32(entryOffset + 8, !bigEnd);\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\n          }\n          return vals;\n        }\n      case 10:\n        // signed rational, two slongs, first is numerator, second is denominator\n        if (numValues == 1) {\n          return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset + 4, !bigEnd);\n        } else {\n          vals = [];\n          for (n = 0; n < numValues; n++) {\n            vals[n] = file.getInt32(valueOffset + 8 * n, !bigEnd) / file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\n          }\n          return vals;\n        }\n    }\n  }\n\n  /**\n  * Given an IFD (Image File Directory) start offset\n  * returns an offset to next IFD or 0 if it's the last IFD.\n  */\n  function getNextIFDOffset(dataView, dirStart, bigEnd) {\n    //the first 2bytes means the number of directory entries contains in this IFD\n    var entries = dataView.getUint16(dirStart, !bigEnd);\n\n    // After last directory entry, there is a 4bytes of data,\n    // it means an offset to next IFD.\n    // If its value is '0x00000000', it means this is the last IFD and there is no linked IFD.\n\n    return dataView.getUint32(dirStart + 2 + entries * 12, !bigEnd); // each entry is 12 bytes long\n  }\n\n  function readThumbnailImage(dataView, tiffStart, firstIFDOffset, bigEnd) {\n    // get the IFD1 offset\n    var IFD1OffsetPointer = getNextIFDOffset(dataView, tiffStart + firstIFDOffset, bigEnd);\n    if (!IFD1OffsetPointer) {\n      // console.log('******** IFD1Offset is empty, image thumb not found ********');\n      return {};\n    } else if (IFD1OffsetPointer > dataView.byteLength) {\n      // this should not happen\n      // console.log('******** IFD1Offset is outside the bounds of the DataView ********');\n      return {};\n    }\n    // console.log('*******  thumbnail IFD offset (IFD1) is: %s', IFD1OffsetPointer);\n\n    var thumbTags = readTags(dataView, tiffStart, tiffStart + IFD1OffsetPointer, IFD1Tags, bigEnd);\n\n    // EXIF 2.3 specification for JPEG format thumbnail\n\n    // If the value of Compression(0x0103) Tag in IFD1 is '6', thumbnail image format is JPEG.\n    // Most of Exif image uses JPEG format for thumbnail. In that case, you can get offset of thumbnail\n    // by JpegIFOffset(0x0201) Tag in IFD1, size of thumbnail by JpegIFByteCount(0x0202) Tag.\n    // Data format is ordinary JPEG format, starts from 0xFFD8 and ends by 0xFFD9. It seems that\n    // JPEG format and 160x120pixels of size are recommended thumbnail format for Exif2.1 or later.\n\n    if (thumbTags['Compression']) {\n      // console.log('Thumbnail image found!');\n\n      switch (thumbTags['Compression']) {\n        case 6:\n          // console.log('Thumbnail image format is JPEG');\n          if (thumbTags.JpegIFOffset && thumbTags.JpegIFByteCount) {\n            // extract the thumbnail\n            var tOffset = tiffStart + thumbTags.JpegIFOffset;\n            var tLength = thumbTags.JpegIFByteCount;\n            thumbTags['blob'] = new Blob([new Uint8Array(dataView.buffer, tOffset, tLength)], {\n              type: 'image/jpeg'\n            });\n          }\n          break;\n        case 1:\n          console.log(\"Thumbnail image format is TIFF, which is not implemented.\");\n          break;\n        default:\n          console.log(\"Unknown thumbnail image format '%s'\", thumbTags['Compression']);\n      }\n    } else if (thumbTags['PhotometricInterpretation'] == 2) {\n      console.log(\"Thumbnail image format is RGB, which is not implemented.\");\n    }\n    return thumbTags;\n  }\n  function getStringFromDB(buffer, start, length) {\n    var outstr = \"\";\n    for (n = start; n < start + length; n++) {\n      outstr += String.fromCharCode(buffer.getUint8(n));\n    }\n    return outstr;\n  }\n  function readEXIFData(file, start) {\n    if (getStringFromDB(file, start, 4) != \"Exif\") {\n      if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n      return false;\n    }\n    var bigEnd,\n      tags,\n      tag,\n      exifData,\n      gpsData,\n      tiffOffset = start + 6;\n\n    // test for TIFF validity and endianness\n    if (file.getUint16(tiffOffset) == 0x4949) {\n      bigEnd = false;\n    } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n      bigEnd = true;\n    } else {\n      if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n      return false;\n    }\n    if (file.getUint16(tiffOffset + 2, !bigEnd) != 0x002A) {\n      if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n      return false;\n    }\n    var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\n    if (firstIFDOffset < 0x00000008) {\n      if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset + 4, !bigEnd));\n      return false;\n    }\n    tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n    if (tags.ExifIFDPointer) {\n      exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n      for (tag in exifData) {\n        switch (tag) {\n          case \"LightSource\":\n          case \"Flash\":\n          case \"MeteringMode\":\n          case \"ExposureProgram\":\n          case \"SensingMethod\":\n          case \"SceneCaptureType\":\n          case \"SceneType\":\n          case \"CustomRendered\":\n          case \"WhiteBalance\":\n          case \"GainControl\":\n          case \"Contrast\":\n          case \"Saturation\":\n          case \"Sharpness\":\n          case \"SubjectDistanceRange\":\n          case \"FileSource\":\n            exifData[tag] = StringValues[tag][exifData[tag]];\n            break;\n          case \"ExifVersion\":\n          case \"FlashpixVersion\":\n            exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n            break;\n          case \"ComponentsConfiguration\":\n            exifData[tag] = StringValues.Components[exifData[tag][0]] + StringValues.Components[exifData[tag][1]] + StringValues.Components[exifData[tag][2]] + StringValues.Components[exifData[tag][3]];\n            break;\n        }\n        tags[tag] = exifData[tag];\n      }\n    }\n    if (tags.GPSInfoIFDPointer) {\n      gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n      for (tag in gpsData) {\n        switch (tag) {\n          case \"GPSVersionID\":\n            gpsData[tag] = gpsData[tag][0] + \".\" + gpsData[tag][1] + \".\" + gpsData[tag][2] + \".\" + gpsData[tag][3];\n            break;\n        }\n        tags[tag] = gpsData[tag];\n      }\n    }\n\n    // extract thumbnail\n    tags['thumbnail'] = readThumbnailImage(file, tiffOffset, firstIFDOffset, bigEnd);\n    return tags;\n  }\n  function findXMPinJPEG(file) {\n    if (!('DOMParser' in self)) {\n      // console.warn('XML parsing not supported without DOMParser');\n      return;\n    }\n    var dataView = new DataView(file);\n    if (debug) console.log(\"Got file of length \" + file.byteLength);\n    if (dataView.getUint8(0) != 0xFF || dataView.getUint8(1) != 0xD8) {\n      if (debug) console.log(\"Not a valid JPEG\");\n      return false; // not a valid jpeg\n    }\n\n    var offset = 2,\n      length = file.byteLength,\n      dom = new DOMParser();\n    while (offset < length - 4) {\n      if (getStringFromDB(dataView, offset, 4) == \"http\") {\n        var startOffset = offset - 1;\n        var sectionLength = dataView.getUint16(offset - 2) - 1;\n        var xmpString = getStringFromDB(dataView, startOffset, sectionLength);\n        var xmpEndIndex = xmpString.indexOf('xmpmeta>') + 8;\n        xmpString = xmpString.substring(xmpString.indexOf('<x:xmpmeta'), xmpEndIndex);\n        var indexOfXmp = xmpString.indexOf('x:xmpmeta') + 10;\n        //Many custom written programs embed xmp/xml without any namespace. Following are some of them.\n        //Without these namespaces, XML is thought to be invalid by parsers\n        xmpString = xmpString.slice(0, indexOfXmp) + 'xmlns:Iptc4xmpCore=\"http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/\" ' + 'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' + 'xmlns:tiff=\"http://ns.adobe.com/tiff/1.0/\" ' + 'xmlns:plus=\"http://schemas.android.com/apk/lib/com.google.android.gms.plus\" ' + 'xmlns:ext=\"http://www.gettyimages.com/xsltExtension/1.0\" ' + 'xmlns:exif=\"http://ns.adobe.com/exif/1.0/\" ' + 'xmlns:stEvt=\"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#\" ' + 'xmlns:stRef=\"http://ns.adobe.com/xap/1.0/sType/ResourceRef#\" ' + 'xmlns:crs=\"http://ns.adobe.com/camera-raw-settings/1.0/\" ' + 'xmlns:xapGImg=\"http://ns.adobe.com/xap/1.0/g/img/\" ' + 'xmlns:Iptc4xmpExt=\"http://iptc.org/std/Iptc4xmpExt/2008-02-29/\" ' + xmpString.slice(indexOfXmp);\n        var domDocument = dom.parseFromString(xmpString, 'text/xml');\n        return xml2Object(domDocument);\n      } else {\n        offset++;\n      }\n    }\n  }\n  function xml2json(xml) {\n    var json = {};\n    if (xml.nodeType == 1) {\n      // element node\n      if (xml.attributes.length > 0) {\n        json['@attributes'] = {};\n        for (var j = 0; j < xml.attributes.length; j++) {\n          var attribute = xml.attributes.item(j);\n          json['@attributes'][attribute.nodeName] = attribute.nodeValue;\n        }\n      }\n    } else if (xml.nodeType == 3) {\n      // text node\n      return xml.nodeValue;\n    }\n\n    // deal with children\n    if (xml.hasChildNodes()) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes.item(i);\n        var nodeName = child.nodeName;\n        if (json[nodeName] == null) {\n          json[nodeName] = xml2json(child);\n        } else {\n          if (json[nodeName].push == null) {\n            var old = json[nodeName];\n            json[nodeName] = [];\n            json[nodeName].push(old);\n          }\n          json[nodeName].push(xml2json(child));\n        }\n      }\n    }\n    return json;\n  }\n  function xml2Object(xml) {\n    try {\n      var obj = {};\n      if (xml.children.length > 0) {\n        for (var i = 0; i < xml.children.length; i++) {\n          var item = xml.children.item(i);\n          var attributes = item.attributes;\n          for (var idx in attributes) {\n            var itemAtt = attributes[idx];\n            var dataKey = itemAtt.nodeName;\n            var dataValue = itemAtt.nodeValue;\n            if (dataKey !== undefined) {\n              obj[dataKey] = dataValue;\n            }\n          }\n          var nodeName = item.nodeName;\n          if (typeof obj[nodeName] == \"undefined\") {\n            obj[nodeName] = xml2json(item);\n          } else {\n            if (typeof obj[nodeName].push == \"undefined\") {\n              var old = obj[nodeName];\n              obj[nodeName] = [];\n              obj[nodeName].push(old);\n            }\n            obj[nodeName].push(xml2json(item));\n          }\n        }\n      } else {\n        obj = xml.textContent;\n      }\n      return obj;\n    } catch (e) {\n      console.log(e.message);\n    }\n  }\n  EXIF.enableXmp = function () {\n    EXIF.isXmpEnabled = true;\n  };\n  EXIF.disableXmp = function () {\n    EXIF.isXmpEnabled = false;\n  };\n  EXIF.getData = function (img, callback) {\n    if ((self.Image && img instanceof self.Image || self.HTMLImageElement && img instanceof self.HTMLImageElement) && !img.complete) return false;\n    if (!imageHasData(img)) {\n      getImageData(img, callback);\n    } else {\n      if (callback) {\n        callback.call(img);\n      }\n    }\n    return true;\n  };\n  EXIF.getTag = function (img, tag) {\n    if (!imageHasData(img)) return;\n    return img.exifdata[tag];\n  };\n  EXIF.getIptcTag = function (img, tag) {\n    if (!imageHasData(img)) return;\n    return img.iptcdata[tag];\n  };\n  EXIF.getAllTags = function (img) {\n    if (!imageHasData(img)) return {};\n    var a,\n      data = img.exifdata,\n      tags = {};\n    for (a in data) {\n      if (data.hasOwnProperty(a)) {\n        tags[a] = data[a];\n      }\n    }\n    return tags;\n  };\n  EXIF.getAllIptcTags = function (img) {\n    if (!imageHasData(img)) return {};\n    var a,\n      data = img.iptcdata,\n      tags = {};\n    for (a in data) {\n      if (data.hasOwnProperty(a)) {\n        tags[a] = data[a];\n      }\n    }\n    return tags;\n  };\n  EXIF.pretty = function (img) {\n    if (!imageHasData(img)) return \"\";\n    var a,\n      data = img.exifdata,\n      strPretty = \"\";\n    for (a in data) {\n      if (data.hasOwnProperty(a)) {\n        if (typeof data[a] == \"object\") {\n          if (data[a] instanceof Number) {\n            strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n          } else {\n            strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n          }\n        } else {\n          strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n        }\n      }\n    }\n    return strPretty;\n  };\n  EXIF.readFromBinaryFile = function (file) {\n    return findEXIFinJPEG(file);\n  };\n  if (typeof define === 'function' && define.amd) {\n    define('exif-js', [], function () {\n      return EXIF;\n    });\n  }\n}).call(this);","import { useCallback, useState } from 'react';\n\nimport { TransitionMotion, spring } from 'react-motion';\n\nimport { reduceMotion } from '../initial_state';\n\nimport { ShortNumber } from './short_number';\n\ninterface Props {\n  value: number;\n}\nexport const AnimatedNumber: React.FC<Props> = ({ value }) => {\n  const [previousValue, setPreviousValue] = useState(value);\n  const [direction, setDirection] = useState<1 | -1>(1);\n\n  if (previousValue !== value) {\n    setPreviousValue(value);\n    setDirection(value > previousValue ? 1 : -1);\n  }\n\n  const willEnter = useCallback(() => ({ y: -1 * direction }), [direction]);\n  const willLeave = useCallback(\n    () => ({ y: spring(1 * direction, { damping: 35, stiffness: 400 }) }),\n    [direction],\n  );\n\n  if (reduceMotion) {\n    return <ShortNumber value={value} />;\n  }\n\n  const styles = [\n    {\n      key: `${value}`,\n      data: value,\n      style: { y: spring(0, { damping: 35, stiffness: 400 }) },\n    },\n  ];\n\n  return (\n    <TransitionMotion\n      styles={styles}\n      willEnter={willEnter}\n      willLeave={willLeave}\n    >\n      {(items) => (\n        <span className='animated-number'>\n          {items.map(({ key, data, style }) => (\n            <span\n              key={key}\n              style={{\n                position: direction * style.y > 0 ? 'absolute' : 'static',\n                transform: `translateY(${style.y * 100}%)`,\n              }}\n            >\n              <ShortNumber value={data as number} />\n            </span>\n          ))}\n        </span>\n      )}\n    </TransitionMotion>\n  );\n};\n","export const toServerSideType = (columnType: string) => {\n  switch (columnType) {\n    case 'home':\n    case 'notifications':\n    case 'public':\n    case 'thread':\n    case 'account':\n      return columnType;\n    default:\n      if (columnType.includes('list:')) {\n        return 'home';\n      } else {\n        return 'public'; // community, account, hashtag\n      }\n  }\n};\n","import { useCallback, useState } from 'react';\nimport * as React from 'react';\n\nimport { TransitionMotion, spring } from 'react-motion';\n\nimport { reduceMotion } from '../initial_state';\n\nimport { ShortNumber } from './short_number';\n\nconst obfuscatedCount = (count: number) => {\n  if (count < 0) {\n    return 0;\n  } else if (count <= 1) {\n    return count;\n  } else {\n    return '1+';\n  }\n};\n\ninterface Props {\n  value: number;\n  obfuscate?: boolean;\n}\nexport const AnimatedNumber: React.FC<Props> = ({ value, obfuscate }) => {\n  const [previousValue, setPreviousValue] = useState(value);\n  const [direction, setDirection] = useState<1 | -1>(1);\n\n  if (previousValue !== value) {\n    setPreviousValue(value);\n    setDirection(value > previousValue ? 1 : -1);\n  }\n\n  const willEnter = useCallback(() => ({ y: -1 * direction }), [direction]);\n  const willLeave = useCallback(\n    () => ({ y: spring(1 * direction, { damping: 35, stiffness: 400 }) }),\n    [direction],\n  );\n\n  if (reduceMotion) {\n    return obfuscate ? (\n      <>{obfuscatedCount(value)}</>\n    ) : (\n      <ShortNumber value={value} />\n    );\n  }\n\n  const styles = [\n    {\n      key: `${value}`,\n      data: value,\n      style: { y: spring(0, { damping: 35, stiffness: 400 }) },\n    },\n  ];\n\n  return (\n    <TransitionMotion\n      styles={styles}\n      willEnter={willEnter}\n      willLeave={willLeave}\n    >\n      {(items) => (\n        <span className='animated-number'>\n          {items.map(({ key, data, style }) => (\n            <span\n              key={key}\n              style={{\n                position: direction * style.y > 0 ? 'absolute' : 'static',\n                transform: `translateY(${style.y * 100}%)`,\n              }}\n            >\n              {obfuscate ? (\n                obfuscatedCount(data as number)\n              ) : (\n                <ShortNumber value={data as number} />\n              )}\n            </span>\n          ))}\n        </span>\n      )}\n    </TransitionMotion>\n  );\n};\n","import { List as ImmutableList, Map as ImmutableMap } from 'immutable';\nimport { createSelector } from 'reselect';\n\nimport { toServerSideType } from 'mastodon/utils/filters';\n\nimport { me } from '../initial_state';\n\nconst getAccountBase         = (state, id) => state.getIn(['accounts', id], null);\nconst getAccountCounters     = (state, id) => state.getIn(['accounts_counters', id], null);\nconst getAccountRelationship = (state, id) => state.getIn(['relationships', id], null);\nconst getAccountMoved        = (state, id) => state.getIn(['accounts', state.getIn(['accounts', id, 'moved'])]);\n\nexport const makeGetAccount = () => {\n  return createSelector([getAccountBase, getAccountCounters, getAccountRelationship, getAccountMoved], (base, counters, relationship, moved) => {\n    if (base === null) {\n      return null;\n    }\n\n    return base.merge(counters).withMutations(map => {\n      map.set('relationship', relationship);\n      map.set('moved', moved);\n    });\n  });\n};\n\nconst getFilters = (state, { contextType }) => {\n  if (!contextType) return null;\n\n  const serverSideType = toServerSideType(contextType);\n  const now = new Date();\n\n  return state.get('filters').filter((filter) => filter.get('context').includes(serverSideType) && (filter.get('expires_at') === null || filter.get('expires_at') > now));\n};\n\nexport const makeGetStatus = () => {\n  return createSelector(\n    [\n      (state, { id }) => state.getIn(['statuses', id]),\n      (state, { id }) => state.getIn(['statuses', state.getIn(['statuses', id, 'reblog'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', id, 'account'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', state.getIn(['statuses', id, 'reblog']), 'account'])]),\n      getFilters,\n    ],\n\n    (statusBase, statusReblog, accountBase, accountReblog, filters) => {\n      if (!statusBase || statusBase.get('isLoading')) {\n        return null;\n      }\n\n      if (statusReblog) {\n        statusReblog = statusReblog.set('account', accountReblog);\n      } else {\n        statusReblog = null;\n      }\n\n      let filtered = false;\n      if ((accountReblog || accountBase).get('id') !== me && filters) {\n        let filterResults = statusReblog?.get('filtered') || statusBase.get('filtered') || ImmutableList();\n        if (filterResults.some((result) => filters.getIn([result.get('filter'), 'filter_action']) === 'hide')) {\n          return null;\n        }\n        filterResults = filterResults.filter(result => filters.has(result.get('filter')));\n        if (!filterResults.isEmpty()) {\n          filtered = filterResults.map(result => filters.getIn([result.get('filter'), 'title']));\n        }\n      }\n\n      return statusBase.withMutations(map => {\n        map.set('reblog', statusReblog);\n        map.set('account', accountBase);\n        map.set('matched_filters', filtered);\n      });\n    },\n  );\n};\n\nexport const makeGetPictureInPicture = () => {\n  return createSelector([\n    (state, { id }) => state.get('picture_in_picture').statusId === id,\n    (state) => state.getIn(['meta', 'layout']) !== 'mobile',\n  ], (inUse, available) => ImmutableMap({\n    inUse: inUse && available,\n    available,\n  }));\n};\n\nconst ALERT_DEFAULTS = {\n  dismissAfter: 5000,\n  style: false,\n};\n\nexport const getAlerts = createSelector(state => state.get('alerts'), alerts =>\n  alerts.map(item => ({\n    ...ALERT_DEFAULTS,\n    ...item,\n  })).toArray());\n\nexport const makeGetNotification = () => createSelector([\n  (_, base)             => base,\n  (state, _, accountId) => state.getIn(['accounts', accountId]),\n], (base, account) => base.set('account', account));\n\nexport const makeGetReport = () => createSelector([\n  (_, base) => base,\n  (state, _, targetAccountId) => state.getIn(['accounts', targetAccountId]),\n], (base, targetAccount) => base.set('target_account', targetAccount));\n\nexport const getAccountGallery = createSelector([\n  (state, id) => state.getIn(['timelines', `account:${id}:media`, 'items'], ImmutableList()),\n  state       => state.get('statuses'),\n  (state, id) => state.getIn(['accounts', id]),\n], (statusIds, statuses, account) => {\n  let medias = ImmutableList();\n\n  statusIds.forEach(statusId => {\n    const status = statuses.get(statusId).set('account', account);\n    medias = medias.concat(status.get('media_attachments').map(media => media.set('status', status)));\n  });\n\n  return medias;\n});\n\nexport const getAccountHidden = createSelector([\n  (state, id) => state.getIn(['accounts', id, 'hidden']),\n  (state, id) => state.getIn(['relationships', id, 'following']) || state.getIn(['relationships', id, 'requested']),\n  (state, id) => id === me,\n], (hidden, followingOrRequested, isSelf) => {\n  return hidden && !(isSelf || followingOrRequested);\n});\n\nexport const getStatusList = createSelector([\n  (state, type) => state.getIn(['status_lists', type, 'items']),\n], (items) => items.toList());\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\nfunction padLeft(str, num) {\n  while (str.length < num) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n\nexports.unicodeToUnifiedName = (str) => {\n  let output = '';\n\n  for (let i = 0; i < str.length; i += 2) {\n    if (i > 0) {\n      output += '-';\n    }\n\n    output += padLeft(str.codePointAt(i).toString(16).toUpperCase(), 4);\n  }\n\n  return output;\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport 'wicg-inert';\nimport { multiply } from 'color-blend';\nimport { createBrowserHistory } from 'history';\n\nexport default class ModalRoot extends PureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    onClose: PropTypes.func.isRequired,\n    backgroundColor: PropTypes.shape({\n      r: PropTypes.number,\n      g: PropTypes.number,\n      b: PropTypes.number,\n    }),\n    ignoreFocus: PropTypes.bool,\n  };\n\n  activeElement = this.props.children ? document.activeElement : null;\n\n  handleKeyUp = (e) => {\n    if ((e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27)\n         && !!this.props.children) {\n      this.props.onClose();\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Tab') {\n      const focusable = Array.from(this.node.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])')).filter((x) => window.getComputedStyle(x).display !== 'none');\n      const index = focusable.indexOf(e.target);\n\n      let element;\n\n      if (e.shiftKey) {\n        element = focusable[index - 1] || focusable[focusable.length - 1];\n      } else {\n        element = focusable[index + 1] || focusable[0];\n      }\n\n      if (element) {\n        element.focus();\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keyup', this.handleKeyUp, false);\n    window.addEventListener('keydown', this.handleKeyDown, false);\n    this.history = this.context.router ? this.context.router.history : createBrowserHistory();\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!!nextProps.children && !this.props.children) {\n      this.activeElement = document.activeElement;\n\n      this.getSiblings().forEach(sibling => sibling.setAttribute('inert', true));\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (!this.props.children && !!prevProps.children) {\n      this.getSiblings().forEach(sibling => sibling.removeAttribute('inert'));\n\n      // Because of the wicg-inert polyfill, the activeElement may not be\n      // immediately selectable, we have to wait for observers to run, as\n      // described in https://github.com/WICG/inert#performance-and-gotchas\n      Promise.resolve().then(() => {\n        if (!this.props.ignoreFocus) {\n          this.activeElement.focus({ preventScroll: true });\n        }\n        this.activeElement = null;\n      }).catch(console.error);\n\n      this._handleModalClose();\n    }\n    if (this.props.children && !prevProps.children) {\n      this._handleModalOpen();\n    }\n    if (this.props.children) {\n      this._ensureHistoryBuffer();\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp);\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  _handleModalOpen () {\n    this._modalHistoryKey = Date.now();\n    this.unlistenHistory = this.history.listen((_, action) => {\n      if (action === 'POP') {\n        this.props.onClose();\n      }\n    });\n  }\n\n  _handleModalClose () {\n    if (this.unlistenHistory) {\n      this.unlistenHistory();\n    }\n    const { state } = this.history.location;\n    if (state && state.mastodonModalKey === this._modalHistoryKey) {\n      this.history.goBack();\n    }\n  }\n\n  _ensureHistoryBuffer () {\n    const { pathname, state } = this.history.location;\n    if (!state || state.mastodonModalKey !== this._modalHistoryKey) {\n      this.history.push(pathname, { ...state, mastodonModalKey: this._modalHistoryKey });\n    }\n  }\n\n  getSiblings = () => {\n    return Array(...this.node.parentElement.childNodes).filter(node => node !== this.node);\n  };\n\n  setRef = ref => {\n    this.node = ref;\n  };\n\n  render () {\n    const { children, onClose } = this.props;\n    const visible = !!children;\n\n    if (!visible) {\n      return (\n        <div className='modal-root' ref={this.setRef} style={{ opacity: 0 }} />\n      );\n    }\n\n    let backgroundColor = null;\n\n    if (this.props.backgroundColor) {\n      backgroundColor = multiply({ ...this.props.backgroundColor, a: 1 }, { r: 0, g: 0, b: 0, a: 0.7 });\n    }\n\n    return (\n      <div className='modal-root' ref={this.setRef}>\n        <div style={{ pointerEvents: visible ? 'auto' : 'none' }}>\n          <div role='presentation' className='modal-root__overlay' onClick={onClose} style={{ backgroundColor: backgroundColor ? `rgba(${backgroundColor.r}, ${backgroundColor.g}, ${backgroundColor.b}, 0.7)` : null }} />\n          <div role='dialog' className='modal-root__container'>{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import { isMobile } from '../is_mobile';\n\n/** @type {number | null} */\nlet cachedScrollbarWidth = null;\n\n/**\n * @returns {number}\n */\nconst getActualScrollbarWidth = () => {\n  const outer = document.createElement('div');\n  outer.style.visibility = 'hidden';\n  outer.style.overflow = 'scroll';\n  document.body.appendChild(outer);\n\n  const inner = document.createElement('div');\n  outer.appendChild(inner);\n\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n\n  return scrollbarWidth;\n};\n\n/**\n * @returns {number}\n */\nexport const getScrollbarWidth = () => {\n  if (cachedScrollbarWidth !== null) {\n    return cachedScrollbarWidth;\n  }\n\n  const scrollbarWidth = isMobile(window.innerWidth) ? 0 : getActualScrollbarWidth();\n  cachedScrollbarWidth = scrollbarWidth;\n\n  return scrollbarWidth;\n};\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport escapeTextContentForBrowser from 'escape-html';\nimport spring from 'react-motion/lib/spring';\n\nimport { Icon }  from 'mastodon/components/icon';\nimport emojify from 'mastodon/features/emoji/emoji';\nimport Motion from 'mastodon/features/ui/util/optional_motion';\n\nimport { RelativeTimestamp } from './relative_timestamp';\n\nconst messages = defineMessages({\n  closed: {\n    id: 'poll.closed',\n    defaultMessage: 'Closed',\n  },\n  voted: {\n    id: 'poll.voted',\n    defaultMessage: 'You voted for this answer',\n  },\n  votes: {\n    id: 'poll.votes',\n    defaultMessage: '{votes, plural, one {# vote} other {# votes}}',\n  },\n});\n\nconst makeEmojiMap = record => record.get('emojis').reduce((obj, emoji) => {\n  obj[`:${emoji.get('shortcode')}:`] = emoji.toJS();\n  return obj;\n}, {});\n\nclass Poll extends ImmutablePureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    poll: ImmutablePropTypes.map,\n    lang: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n    disabled: PropTypes.bool,\n    refresh: PropTypes.func,\n    onVote: PropTypes.func,\n  };\n\n  state = {\n    selected: {},\n    expired: null,\n  };\n\n  static getDerivedStateFromProps (props, state) {\n    const { poll } = props;\n    const expires_at = poll.get('expires_at');\n    const expired = poll.get('expired') || expires_at !== null && (new Date(expires_at)).getTime() < Date.now();\n    return (expired === state.expired) ? null : { expired };\n  }\n\n  componentDidMount () {\n    this._setupTimer();\n  }\n\n  componentDidUpdate () {\n    this._setupTimer();\n  }\n\n  componentWillUnmount () {\n    clearTimeout(this._timer);\n  }\n\n  _setupTimer () {\n    const { poll } = this.props;\n    clearTimeout(this._timer);\n    if (!this.state.expired) {\n      const delay = (new Date(poll.get('expires_at'))).getTime() - Date.now();\n      this._timer = setTimeout(() => {\n        this.setState({ expired: true });\n      }, delay);\n    }\n  }\n\n  _toggleOption = value => {\n    if (this.props.poll.get('multiple')) {\n      const tmp = { ...this.state.selected };\n      if (tmp[value]) {\n        delete tmp[value];\n      } else {\n        tmp[value] = true;\n      }\n      this.setState({ selected: tmp });\n    } else {\n      const tmp = {};\n      tmp[value] = true;\n      this.setState({ selected: tmp });\n    }\n  };\n\n  handleOptionChange = ({ target: { value } }) => {\n    this._toggleOption(value);\n  };\n\n  handleOptionKeyPress = (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this._toggleOption(e.target.getAttribute('data-index'));\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  handleVote = () => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.props.onVote(Object.keys(this.state.selected));\n  };\n\n  handleRefresh = () => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.props.refresh();\n  };\n\n  handleReveal = () => {\n    this.setState({ revealed: true });\n  };\n\n  renderOption (option, optionIndex, showResults) {\n    const { poll, lang, disabled, intl } = this.props;\n    const pollVotesCount  = poll.get('voters_count') || poll.get('votes_count');\n    const percent         = pollVotesCount === 0 ? 0 : (option.get('votes_count') / pollVotesCount) * 100;\n    const leading         = poll.get('options').filterNot(other => other.get('title') === option.get('title')).every(other => option.get('votes_count') >= other.get('votes_count'));\n    const active          = !!this.state.selected[`${optionIndex}`];\n    const voted           = option.get('voted') || (poll.get('own_votes') && poll.get('own_votes').includes(optionIndex));\n\n    const title = option.getIn(['translation', 'title']) || option.get('title');\n    let titleHtml = option.getIn(['translation', 'titleHtml']) || option.get('titleHtml');\n\n    if (!titleHtml) {\n      const emojiMap = makeEmojiMap(poll);\n      titleHtml = emojify(escapeTextContentForBrowser(title), emojiMap);\n    }\n\n    return (\n      <li key={option.get('title')}>\n        <label className={classNames('poll__option', { selectable: !showResults })}>\n          <input\n            name='vote-options'\n            type={poll.get('multiple') ? 'checkbox' : 'radio'}\n            value={optionIndex}\n            checked={active}\n            onChange={this.handleOptionChange}\n            disabled={disabled}\n          />\n\n          {!showResults && (\n            <span\n              className={classNames('poll__input', { checkbox: poll.get('multiple'), active })}\n              tabIndex={0}\n              role={poll.get('multiple') ? 'checkbox' : 'radio'}\n              onKeyPress={this.handleOptionKeyPress}\n              aria-checked={active}\n              aria-label={title}\n              lang={lang}\n              data-index={optionIndex}\n            />\n          )}\n          {showResults && (\n            <span\n              className='poll__number'\n              title={intl.formatMessage(messages.votes, {\n                votes: option.get('votes_count'),\n              })}\n            >\n              {Math.round(percent)}%\n            </span>\n          )}\n\n          <span\n            className='poll__option__text translate'\n            lang={lang}\n            dangerouslySetInnerHTML={{ __html: titleHtml }}\n          />\n\n          {!!voted && <span className='poll__voted'>\n            <Icon id='check' className='poll__voted__mark' title={intl.formatMessage(messages.voted)} />\n          </span>}\n        </label>\n\n        {showResults && (\n          <Motion defaultStyle={{ width: 0 }} style={{ width: spring(percent, { stiffness: 180, damping: 12 }) }}>\n            {({ width }) =>\n              <span className={classNames('poll__chart', { leading })} style={{ width: `${width}%` }} />\n            }\n          </Motion>\n        )}\n      </li>\n    );\n  }\n\n  render () {\n    const { poll, intl } = this.props;\n    const { revealed, expired } = this.state;\n\n    if (!poll) {\n      return null;\n    }\n\n    const timeRemaining = expired ? intl.formatMessage(messages.closed) : <RelativeTimestamp timestamp={poll.get('expires_at')} futureDate />;\n    const showResults   = poll.get('voted') || revealed || expired;\n    const disabled      = this.props.disabled || Object.entries(this.state.selected).every(item => !item);\n\n    let votesCount = null;\n\n    if (poll.get('voters_count') !== null && poll.get('voters_count') !== undefined) {\n      votesCount = <FormattedMessage id='poll.total_people' defaultMessage='{count, plural, one {# person} other {# people}}' values={{ count: poll.get('voters_count') }} />;\n    } else {\n      votesCount = <FormattedMessage id='poll.total_votes' defaultMessage='{count, plural, one {# vote} other {# votes}}' values={{ count: poll.get('votes_count') }} />;\n    }\n\n    return (\n      <div className='poll'>\n        <ul>\n          {poll.get('options').map((option, i) => this.renderOption(option, i, showResults))}\n        </ul>\n\n        <div className='poll__footer'>\n          {!showResults && <button className='button button-secondary' disabled={disabled || !this.context.identity.signedIn} onClick={this.handleVote}><FormattedMessage id='poll.vote' defaultMessage='Vote' /></button>}\n          {!showResults && <><button className='poll__link' onClick={this.handleReveal}><FormattedMessage id='poll.reveal' defaultMessage='See results' /></button>  </>}\n          {showResults && !this.props.disabled && <><button className='poll__link' onClick={this.handleRefresh}><FormattedMessage id='poll.refresh' defaultMessage='Refresh' /></button>  </>}\n          {votesCount}\n          {poll.get('expires_at') && <>  {timeRemaining}</>}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Poll);\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport ReactSwipeableViews from 'react-swipeable-views';\n\nimport { getAverageFromBlurhash } from 'mastodon/blurhash';\nimport { GIFV } from 'mastodon/components/gifv';\nimport { Icon }  from 'mastodon/components/icon';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport Footer from 'mastodon/features/picture_in_picture/components/footer';\nimport Video from 'mastodon/features/video';\nimport { disableSwiping } from 'mastodon/initial_state';\n\nimport ImageLoader from './image_loader';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n  previous: { id: 'lightbox.previous', defaultMessage: 'Previous' },\n  next: { id: 'lightbox.next', defaultMessage: 'Next' },\n});\n\nclass MediaModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.list.isRequired,\n    statusId: PropTypes.string,\n    lang: PropTypes.string,\n    index: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    onChangeBackgroundColor: PropTypes.func.isRequired,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n  };\n\n  state = {\n    index: null,\n    navigationHidden: false,\n    zoomButtonHidden: false,\n  };\n\n  handleSwipe = (index) => {\n    this.setState({ index: index % this.props.media.size });\n  };\n\n  handleTransitionEnd = () => {\n    this.setState({\n      zoomButtonHidden: false,\n    });\n  };\n\n  handleNextClick = () => {\n    this.setState({\n      index: (this.getIndex() + 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handlePrevClick = () => {\n    this.setState({\n      index: (this.props.media.size + this.getIndex() - 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleChangeIndex = (e) => {\n    const index = Number(e.currentTarget.getAttribute('data-index'));\n\n    this.setState({\n      index: index % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    switch(e.key) {\n    case 'ArrowLeft':\n      this.handlePrevClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    case 'ArrowRight':\n      this.handleNextClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keydown', this.handleKeyDown, false);\n\n    this._sendBackgroundColor();\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevState.index !== this.state.index) {\n      this._sendBackgroundColor();\n    }\n  }\n\n  _sendBackgroundColor () {\n    const { media, onChangeBackgroundColor } = this.props;\n    const index = this.getIndex();\n    const blurhash = media.getIn([index, 'blurhash']);\n\n    if (blurhash) {\n      const backgroundColor = getAverageFromBlurhash(blurhash);\n      onChangeBackgroundColor(backgroundColor);\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    this.props.onChangeBackgroundColor(null);\n  }\n\n  getIndex () {\n    return this.state.index !== null ? this.state.index : this.props.index;\n  }\n\n  toggleNavigation = () => {\n    this.setState(prevState => ({\n      navigationHidden: !prevState.navigationHidden,\n    }));\n  };\n\n  render () {\n    const { media, statusId, lang, intl, onClose } = this.props;\n    const { navigationHidden } = this.state;\n\n    const index = this.getIndex();\n\n    const leftNav  = media.size > 1 && <button tabIndex={0} className='media-modal__nav media-modal__nav--left' onClick={this.handlePrevClick} aria-label={intl.formatMessage(messages.previous)}><Icon id='chevron-left' fixedWidth /></button>;\n    const rightNav = media.size > 1 && <button tabIndex={0} className='media-modal__nav  media-modal__nav--right' onClick={this.handleNextClick} aria-label={intl.formatMessage(messages.next)}><Icon id='chevron-right' fixedWidth /></button>;\n\n    const content = media.map((image) => {\n      const width  = image.getIn(['meta', 'original', 'width']) || null;\n      const height = image.getIn(['meta', 'original', 'height']) || null;\n      const description = image.getIn(['translation', 'description']) || image.get('description');\n\n      if (image.get('type') === 'image') {\n        return (\n          <ImageLoader\n            previewSrc={image.get('preview_url')}\n            src={image.get('url')}\n            width={width}\n            height={height}\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n            onClick={this.toggleNavigation}\n            zoomButtonHidden={this.state.zoomButtonHidden}\n          />\n        );\n      } else if (image.get('type') === 'video') {\n        const { currentTime, autoPlay, volume } = this.props;\n\n        return (\n          <Video\n            preview={image.get('preview_url')}\n            blurhash={image.get('blurhash')}\n            src={image.get('url')}\n            width={image.get('width')}\n            height={image.get('height')}\n            frameRate={image.getIn(['meta', 'original', 'frame_rate'])}\n            aspectRatio={`${image.getIn(['meta', 'original', 'width'])} / ${image.getIn(['meta', 'original', 'height'])}`}\n            currentTime={currentTime || 0}\n            autoPlay={autoPlay || false}\n            volume={volume || 1}\n            onCloseVideo={onClose}\n            detailed\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n          />\n        );\n      } else if (image.get('type') === 'gifv') {\n        return (\n          <GIFV\n            src={image.get('url')}\n            width={width}\n            height={height}\n            key={image.get('url')}\n            alt={description}\n            lang={lang}\n            onClick={this.toggleNavigation}\n          />\n        );\n      }\n\n      return null;\n    }).toArray();\n\n    // you can't use 100vh, because the viewport height is taller\n    // than the visible part of the document in some mobile\n    // browsers when it's address bar is visible.\n    // https://developers.google.com/web/updates/2016/12/url-bar-resizing\n    const swipeableViewsStyle = {\n      width: '100%',\n      height: '100%',\n    };\n\n    const containerStyle = {\n      alignItems: 'center', // center vertically\n    };\n\n    const navigationClassName = classNames('media-modal__navigation', {\n      'media-modal__navigation--hidden': navigationHidden,\n    });\n\n    let pagination;\n\n    if (media.size > 1) {\n      pagination = media.map((item, i) => (\n        <button key={i} className={classNames('media-modal__page-dot', { active: i === index })} data-index={i} onClick={this.handleChangeIndex}>\n          {i + 1}\n        </button>\n      ));\n    }\n\n    return (\n      <div className='modal-root__modal media-modal'>\n        <div className='media-modal__closer' role='presentation' onClick={onClose} >\n          <ReactSwipeableViews\n            style={swipeableViewsStyle}\n            containerStyle={containerStyle}\n            onChangeIndex={this.handleSwipe}\n            onTransitionEnd={this.handleTransitionEnd}\n            index={index}\n            disabled={disableSwiping}\n          >\n            {content}\n          </ReactSwipeableViews>\n        </div>\n\n        <div className={navigationClassName}>\n          <IconButton className='media-modal__close' title={intl.formatMessage(messages.close)} icon='times' onClick={onClose} size={40} />\n\n          {leftNav}\n          {rightNav}\n\n          <div className='media-modal__overlay'>\n            {pagination && <ul className='media-modal__pagination'>{pagination}</ul>}\n            {statusId && <Footer statusId={statusId} withOpenButton onClose={onClose} />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(MediaModal);\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\nfunction padLeft(str, num) {\n  while (str.length < num) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n\nexports.unicodeToUnifiedName = (str) => {\n  let output = '';\n\n  for (let i = 0; i < str.length; i += 2) {\n    if (i > 0) {\n      output += '-';\n    }\n\n    output += padLeft(str.codePointAt(i).toString(16).toUpperCase(), 4);\n  }\n\n  return output;\n};\n","export interface LocaleData {\n  locale: string;\n  messages: Record<string, string>;\n}\n\nlet loadedLocale: LocaleData | undefined;\n\nexport function setLocale(locale: LocaleData) {\n  loadedLocale = locale;\n}\n\nexport function getLocale(): LocaleData {\n  if (!loadedLocale) {\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error('getLocale() called before any locale has been set');\n    } else {\n      return { locale: 'unknown', messages: {} };\n    }\n  }\n\n  return loadedLocale;\n}\n\nexport function isLocaleLoaded() {\n  return !!loadedLocale;\n}\n","import { Semaphore } from 'async-mutex';\n\nimport type { LocaleData } from './global_locale';\nimport { isLocaleLoaded, setLocale } from './global_locale';\n\nconst localeLoadingSemaphore = new Semaphore(1);\n\nexport async function loadLocale() {\n  // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing -- we want to match empty strings\n  const locale = document.querySelector<HTMLElement>('html')?.lang || 'en';\n\n  // We use a Semaphore here so only one thing can try to load the locales at\n  // the same time. If one tries to do it while its in progress, it will wait\n  // for the initial load to finish before it is resumed (and will see that locale\n  // data is already loaded)\n  await localeLoadingSemaphore.runExclusive(async () => {\n    // if the locale is already set, then do nothing\n    if (isLocaleLoaded()) return;\n\n    const localeData = (await import(\n      /* webpackMode: \"lazy\" */\n      /* webpackChunkName: \"locales/vanilla/[request]\" */\n      /* webpackInclude: /\\.json$/ */\n      /* webpackPreload: true */\n      `mastodon/locales/${locale}.json`\n    )) as LocaleData['messages'];\n\n    setLocale({ messages: localeData, locale });\n  });\n}\n","import { useEffect, useState } from 'react';\n\nimport { IntlProvider as BaseIntlProvider } from 'react-intl';\n\nimport { getLocale, isLocaleLoaded } from './global_locale';\nimport { loadLocale } from './load_locale';\n\nfunction onProviderError(error: unknown) {\n  // Silent the error, like upstream does\n  if (process.env.NODE_ENV === 'production') return;\n\n  // This browser does not advertise Intl support for this locale, we only print a warning\n  // As-per the spec, the browser should select the best matching locale\n  if (\n    error &&\n    typeof error === 'object' &&\n    error instanceof Error &&\n    error.message.match('MISSING_DATA')\n  ) {\n    console.warn(error.message);\n  }\n\n  console.error(error);\n}\n\nexport const IntlProvider: React.FC<\n  Omit<React.ComponentProps<typeof BaseIntlProvider>, 'locale' | 'messages'>\n> = ({ children, ...props }) => {\n  const [localeLoaded, setLocaleLoaded] = useState(false);\n\n  useEffect(() => {\n    async function loadLocaleData() {\n      if (!isLocaleLoaded()) {\n        await loadLocale();\n      }\n\n      setLocaleLoaded(true);\n    }\n    void loadLocaleData();\n  }, []);\n\n  if (!localeLoaded) return null;\n\n  const { locale, messages } = getLocale();\n\n  return (\n    <BaseIntlProvider\n      locale={locale}\n      messages={messages}\n      onError={onProviderError}\n      textComponent='span'\n      {...props}\n    >\n      {children}\n    </BaseIntlProvider>\n  );\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport 'wicg-inert';\nimport { multiply } from 'color-blend';\nimport { createBrowserHistory } from 'history';\n\nexport default class ModalRoot extends PureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    onClose: PropTypes.func.isRequired,\n    backgroundColor: PropTypes.shape({\n      r: PropTypes.number,\n      g: PropTypes.number,\n      b: PropTypes.number,\n    }),\n    noEsc: PropTypes.bool,\n    ignoreFocus: PropTypes.bool,\n  };\n\n  activeElement = this.props.children ? document.activeElement : null;\n\n  handleKeyUp = (e) => {\n    if ((e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27)\n         && !!this.props.children && !this.props.noEsc) {\n      this.props.onClose();\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Tab') {\n      const focusable = Array.from(this.node.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])')).filter((x) => window.getComputedStyle(x).display !== 'none');\n      const index = focusable.indexOf(e.target);\n\n      let element;\n\n      if (e.shiftKey) {\n        element = focusable[index - 1] || focusable[focusable.length - 1];\n      } else {\n        element = focusable[index + 1] || focusable[0];\n      }\n\n      if (element) {\n        element.focus();\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keyup', this.handleKeyUp, false);\n    window.addEventListener('keydown', this.handleKeyDown, false);\n    this.history = this.context.router ? this.context.router.history : createBrowserHistory();\n\n    if (this.props.children) {\n      this._handleModalOpen();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!!nextProps.children && !this.props.children) {\n      this.activeElement = document.activeElement;\n\n      this.getSiblings().forEach(sibling => sibling.setAttribute('inert', true));\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (!this.props.children && !!prevProps.children) {\n      this.getSiblings().forEach(sibling => sibling.removeAttribute('inert'));\n\n      // Because of the wicg-inert polyfill, the activeElement may not be\n      // immediately selectable, we have to wait for observers to run, as\n      // described in https://github.com/WICG/inert#performance-and-gotchas\n      Promise.resolve().then(() => {\n        if (!this.props.ignoreFocus) {\n          this.activeElement.focus({ preventScroll: true });\n        }\n        this.activeElement = null;\n      }).catch(console.error);\n\n      this._handleModalClose();\n    }\n    if (this.props.children && !prevProps.children) {\n      this._handleModalOpen();\n    }\n    if (this.props.children) {\n      this._ensureHistoryBuffer();\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp);\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  _handleModalOpen () {\n    this._modalHistoryKey = Date.now();\n    this.unlistenHistory = this.history.listen((_, action) => {\n      if (action === 'POP') {\n        this.props.onClose();\n      }\n    });\n  }\n\n  _handleModalClose () {\n    this.unlistenHistory();\n\n    const { state } = this.history.location;\n    if (state && state.mastodonModalKey === this._modalHistoryKey) {\n      this.history.goBack();\n    }\n  }\n\n  _ensureHistoryBuffer () {\n    const { pathname, state } = this.history.location;\n    if (!state || state.mastodonModalKey !== this._modalHistoryKey) {\n      this.history.push(pathname, { ...state, mastodonModalKey: this._modalHistoryKey });\n    }\n  }\n\n  getSiblings = () => {\n    return Array(...this.node.parentElement.childNodes).filter(node => node !== this.node);\n  };\n\n  setRef = ref => {\n    this.node = ref;\n  };\n\n  render () {\n    const { children, onClose } = this.props;\n    const visible = !!children;\n\n    if (!visible) {\n      return (\n        <div className='modal-root' ref={this.setRef} style={{ opacity: 0 }} />\n      );\n    }\n\n    let backgroundColor = null;\n\n    if (this.props.backgroundColor) {\n      backgroundColor = multiply({ ...this.props.backgroundColor, a: 1 }, { r: 0, g: 0, b: 0, a: 0.7 });\n    }\n\n    return (\n      <div className='modal-root' ref={this.setRef}>\n        <div style={{ pointerEvents: visible ? 'auto' : 'none' }}>\n          <div role='presentation' className='modal-root__overlay' onClick={onClose} style={{ backgroundColor: backgroundColor ? `rgba(${backgroundColor.r}, ${backgroundColor.g}, ${backgroundColor.b}, 0.7)` : null }} />\n          <div role='dialog' className='modal-root__container'>{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","/** @type {number | null} */\nlet cachedScrollbarWidth = null;\n\n/**\n * @returns {number}\n */\nconst getActualScrollbarWidth = () => {\n  const outer = document.createElement('div');\n  outer.style.visibility = 'hidden';\n  outer.style.overflow = 'scroll';\n  document.body.appendChild(outer);\n\n  const inner = document.createElement('div');\n  outer.appendChild(inner);\n\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n\n  return scrollbarWidth;\n};\n\n/**\n * @returns {number}\n */\nexport const getScrollbarWidth = () => {\n  if (cachedScrollbarWidth !== null) {\n    return cachedScrollbarWidth;\n  }\n\n  const scrollbarWidth = getActualScrollbarWidth();\n  cachedScrollbarWidth = scrollbarWidth;\n\n  return scrollbarWidth;\n};\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport ReactSwipeableViews from 'react-swipeable-views';\n\nimport { getAverageFromBlurhash } from 'flavours/glitch/blurhash';\nimport { GIFV } from 'flavours/glitch/components/gifv';\nimport { Icon } from 'flavours/glitch/components/icon';\nimport { IconButton } from 'flavours/glitch/components/icon_button';\nimport Footer from 'flavours/glitch/features/picture_in_picture/components/footer';\nimport Video from 'flavours/glitch/features/video';\nimport { disableSwiping } from 'flavours/glitch/initial_state';\n\nimport ImageLoader from './image_loader';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n  previous: { id: 'lightbox.previous', defaultMessage: 'Previous' },\n  next: { id: 'lightbox.next', defaultMessage: 'Next' },\n});\n\nclass MediaModal extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    media: ImmutablePropTypes.list.isRequired,\n    statusId: PropTypes.string,\n    lang: PropTypes.string,\n    index: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    onChangeBackgroundColor: PropTypes.func.isRequired,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n  };\n\n  state = {\n    index: null,\n    navigationHidden: false,\n    zoomButtonHidden: false,\n  };\n\n  handleSwipe = (index) => {\n    this.setState({ index: index % this.props.media.size });\n  };\n\n  handleTransitionEnd = () => {\n    this.setState({\n      zoomButtonHidden: false,\n    });\n  };\n\n  handleNextClick = () => {\n    this.setState({\n      index: (this.getIndex() + 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handlePrevClick = () => {\n    this.setState({\n      index: (this.props.media.size + this.getIndex() - 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleChangeIndex = (e) => {\n    const index = Number(e.currentTarget.getAttribute('data-index'));\n\n    this.setState({\n      index: index % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    switch(e.key) {\n    case 'ArrowLeft':\n      this.handlePrevClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    case 'ArrowRight':\n      this.handleNextClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keydown', this.handleKeyDown, false);\n    this._sendBackgroundColor();\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this.handleKeyDown);\n    this.props.onChangeBackgroundColor(null);\n  }\n\n  getIndex () {\n    return this.state.index !== null ? this.state.index : this.props.index;\n  }\n\n  toggleNavigation = () => {\n    this.setState(prevState => ({\n      navigationHidden: !prevState.navigationHidden,\n    }));\n  };\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevState.index !== this.state.index) {\n      this._sendBackgroundColor();\n    }\n  }\n\n  _sendBackgroundColor () {\n    const { media, onChangeBackgroundColor } = this.props;\n    const index = this.getIndex();\n    const blurhash = media.getIn([index, 'blurhash']);\n\n    if (blurhash) {\n      const backgroundColor = getAverageFromBlurhash(blurhash);\n      onChangeBackgroundColor(backgroundColor);\n    }\n  }\n\n  render () {\n    const { media, statusId, lang, intl, onClose } = this.props;\n    const { navigationHidden } = this.state;\n\n    const index = this.getIndex();\n\n    const leftNav  = media.size > 1 && <button tabIndex={0} className='media-modal__nav media-modal__nav--left' onClick={this.handlePrevClick} aria-label={intl.formatMessage(messages.previous)}><Icon id='chevron-left' fixedWidth /></button>;\n    const rightNav = media.size > 1 && <button tabIndex={0} className='media-modal__nav  media-modal__nav--right' onClick={this.handleNextClick} aria-label={intl.formatMessage(messages.next)}><Icon id='chevron-right' fixedWidth /></button>;\n\n    const content = media.map((image) => {\n      const width  = image.getIn(['meta', 'original', 'width']) || null;\n      const height = image.getIn(['meta', 'original', 'height']) || null;\n      const description = image.getIn(['translation', 'description']) || image.get('description');\n\n      if (image.get('type') === 'image') {\n        return (\n          <ImageLoader\n            previewSrc={image.get('preview_url')}\n            src={image.get('url')}\n            width={width}\n            height={height}\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n            onClick={this.toggleNavigation}\n            zoomButtonHidden={this.state.zoomButtonHidden}\n          />\n        );\n      } else if (image.get('type') === 'video') {\n        const { currentTime, autoPlay, volume } = this.props;\n\n        return (\n          <Video\n            preview={image.get('preview_url')}\n            blurhash={image.get('blurhash')}\n            src={image.get('url')}\n            width={image.get('width')}\n            height={image.get('height')}\n            frameRate={image.getIn(['meta', 'original', 'frame_rate'])}\n            currentTime={currentTime || 0}\n            autoPlay={autoPlay || false}\n            volume={volume || 1}\n            onCloseVideo={onClose}\n            detailed\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n          />\n        );\n      } else if (image.get('type') === 'gifv') {\n        return (\n          <GIFV\n            src={image.get('url')}\n            width={width}\n            height={height}\n            key={image.get('url')}\n            alt={description}\n            lang={lang}\n            onClick={this.toggleNavigation}\n          />\n        );\n      }\n\n      return null;\n    }).toArray();\n\n    // you can't use 100vh, because the viewport height is taller\n    // than the visible part of the document in some mobile\n    // browsers when it's address bar is visible.\n    // https://developers.google.com/web/updates/2016/12/url-bar-resizing\n    const swipeableViewsStyle = {\n      width: '100%',\n      height: '100%',\n    };\n\n    const containerStyle = {\n      alignItems: 'center', // center vertically\n    };\n\n    const navigationClassName = classNames('media-modal__navigation', {\n      'media-modal__navigation--hidden': navigationHidden,\n    });\n\n    let pagination;\n\n    if (media.size > 1) {\n      pagination = media.map((item, i) => (\n        <button key={i} className={classNames('media-modal__page-dot', { active: i === index })} data-index={i} onClick={this.handleChangeIndex}>\n          {i + 1}\n        </button>\n      ));\n    }\n\n    return (\n      <div className='modal-root__modal media-modal'>\n        <div className='media-modal__closer' role='presentation' onClick={onClose} >\n          <ReactSwipeableViews\n            style={swipeableViewsStyle}\n            containerStyle={containerStyle}\n            onChangeIndex={this.handleSwipe}\n            onTransitionEnd={this.handleTransitionEnd}\n            index={index}\n            disabled={disableSwiping}\n          >\n            {content}\n          </ReactSwipeableViews>\n        </div>\n\n        <div className={navigationClassName}>\n          <IconButton className='media-modal__close' title={intl.formatMessage(messages.close)} icon='times' onClick={onClose} size={40} />\n\n          {leftNav}\n          {rightNav}\n\n          <div className='media-modal__overlay'>\n            {pagination && <ul className='media-modal__pagination'>{pagination}</ul>}\n            {statusId && <Footer statusId={statusId} withOpenButton onClose={onClose} />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(MediaModal);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle } from 'lodash';\n\nimport { Blurhash } from 'mastodon/components/blurhash';\nimport { Icon }  from 'mastodon/components/icon';\n\nimport { displayMedia, useBlurhash } from '../../initial_state';\nimport { isFullscreen, requestFullscreen, exitFullscreen } from '../ui/util/fullscreen';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  hide: { id: 'video.hide', defaultMessage: 'Hide video' },\n  expand: { id: 'video.expand', defaultMessage: 'Expand video' },\n  close: { id: 'video.close', defaultMessage: 'Close video' },\n  fullscreen: { id: 'video.fullscreen', defaultMessage: 'Full screen' },\n  exit_fullscreen: { id: 'video.exit_fullscreen', defaultMessage: 'Exit full screen' },\n});\n\nexport const formatTime = secondsNum => {\n  let hours   = Math.floor(secondsNum / 3600);\n  let minutes = Math.floor((secondsNum - (hours * 3600)) / 60);\n  let seconds = secondsNum - (hours * 3600) - (minutes * 60);\n\n  if (hours   < 10) hours   = '0' + hours;\n  if (minutes < 10) minutes = '0' + minutes;\n  if (seconds < 10) seconds = '0' + seconds;\n\n  return (hours === '00' ? '' : `${hours}:`) + `${minutes}:${seconds}`;\n};\n\nexport const findElementPosition = el => {\n  let box;\n\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n\n  if (!box) {\n    return {\n      left: 0,\n      top: 0,\n    };\n  }\n\n  const docEl = document.documentElement;\n  const body  = document.body;\n\n  const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n  const left       = (box.left + scrollLeft) - clientLeft;\n\n  const clientTop = docEl.clientTop || body.clientTop || 0;\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const top       = (box.top + scrollTop) - clientTop;\n\n  return {\n    left: Math.round(left),\n    top: Math.round(top),\n  };\n};\n\nexport const getPointerPosition = (el, event) => {\n  const position = {};\n  const box = findElementPosition(el);\n  const boxW = el.offsetWidth;\n  const boxH = el.offsetHeight;\n  const boxY = box.top;\n  const boxX = box.left;\n\n  let pageY = event.pageY;\n  let pageX = event.pageX;\n\n  if (event.changedTouches) {\n    pageX = event.changedTouches[0].pageX;\n    pageY = event.changedTouches[0].pageY;\n  }\n\n  position.y = Math.max(0, Math.min(1, (pageY - boxY) / boxH));\n  position.x = Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n\n  return position;\n};\n\nexport const fileNameFromURL = str => {\n  const url      = new URL(str);\n  const pathname = url.pathname;\n  const index    = pathname.lastIndexOf('/');\n\n  return pathname.slice(index + 1);\n};\n\nclass Video extends PureComponent {\n\n  static propTypes = {\n    preview: PropTypes.string,\n    frameRate: PropTypes.string,\n    aspectRatio: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    sensitive: PropTypes.bool,\n    currentTime: PropTypes.number,\n    onOpenVideo: PropTypes.func,\n    onCloseVideo: PropTypes.func,\n    detailed: PropTypes.bool,\n    editable: PropTypes.bool,\n    alwaysVisible: PropTypes.bool,\n    visible: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    deployPictureInPicture: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    componentIndex: PropTypes.number,\n    autoFocus: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    frameRate: '25',\n  };\n\n  state = {\n    currentTime: 0,\n    duration: 0,\n    volume: 0.5,\n    paused: true,\n    dragging: false,\n    fullscreen: false,\n    hovered: false,\n    muted: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  setPlayerRef = c => {\n    this.player = c;\n  };\n\n  setVideoRef = c => {\n    this.video = c;\n\n    if (this.video) {\n      this.setState({ volume: this.video.volume, muted: this.video.muted });\n    }\n  };\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  handleClickRoot = e => e.stopPropagation();\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n    this._updateTime();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n  };\n\n  _updateTime () {\n    requestAnimationFrame(() => {\n      if (!this.video) return;\n\n      this.handleTimeUpdate();\n\n      if (!this.state.paused) {\n        this._updateTime();\n      }\n    });\n  }\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.video.currentTime,\n      duration:this.video.duration,\n    });\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        this.video.volume = x;\n        this.video.muted = this.state.muted;\n      });\n    }\n  }, 15);\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.video.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.video.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.video.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  seekBy (time) {\n    const currentTime = this.video.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleVideoKeyDown = e => {\n    // On the video element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    const frameTime = 1 / this.getFrameRate();\n\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'f':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleFullscreen();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    case ',':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-frameTime);\n      break;\n    case '.':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(frameTime);\n      break;\n    }\n\n    // If we are in fullscreen mode, we don't want any hotkeys\n    // interacting with the UI that's not visible\n\n    if (this.state.fullscreen) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (e.key === 'Escape') {\n        exitFullscreen();\n      }\n    }\n  };\n\n  togglePlay = () => {\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.video.play());\n    } else {\n      this.setState({ paused: true }, () => this.video.pause());\n    }\n  };\n\n  toggleFullscreen = () => {\n    if (isFullscreen()) {\n      exitFullscreen();\n    } else {\n      requestFullscreen(this.player);\n    }\n  };\n\n  componentDidMount () {\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    if (!this.state.paused && this.video && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('video', {\n        src: this.props.src,\n        currentTime: this.video.currentTime,\n        muted: this.video.muted,\n        volume: this.video.volume,\n      });\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevState.revealed && !this.state.revealed && this.video) {\n      this.video.pause();\n    }\n  }\n\n  handleScroll = throttle(() => {\n    if (!this.video) {\n      return;\n    }\n\n    const { top, height } = this.video.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.video.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('video', {\n          src: this.props.src,\n          currentTime: this.video.currentTime,\n          muted: this.video.muted,\n          volume: this.video.volume,\n        });\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleFullscreenChange = () => {\n    this.setState({ fullscreen: isFullscreen() });\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  toggleMute = () => {\n    const muted = !(this.video.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      this.video.volume = this.state.volume;\n      this.video.muted = this.state.muted;\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleLoadedData = () => {\n    const { currentTime, volume, muted, autoPlay } = this.props;\n\n    if (currentTime) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (volume !== undefined) {\n      this.video.volume = volume;\n    }\n\n    if (muted !== undefined) {\n      this.video.muted = muted;\n    }\n\n    if (autoPlay) {\n      this.video.play();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.video.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.video.buffered.end(lastTimeRange) / this.video.duration * 100) });\n    }\n  };\n\n  handleVolumeChange = () => {\n    this.setState({ volume: this.video.volume, muted: this.video.muted });\n  };\n\n  handleOpenVideo = () => {\n    this.video.pause();\n\n    this.props.onOpenVideo(this.props.lang, {\n      startTime: this.video.currentTime,\n      autoPlay: !this.state.paused,\n      defaultVolume: this.state.volume,\n      componentIndex: this.props.componentIndex,\n    });\n  };\n\n  handleCloseVideo = () => {\n    this.video.pause();\n    this.props.onCloseVideo();\n  };\n\n  getFrameRate () {\n    if (this.props.frameRate && isNaN(this.props.frameRate)) {\n      // The frame rate is returned as a fraction string so we\n      // need to convert it to a number\n\n      return this.props.frameRate.split('/').reduce((p, c) => p / c);\n    }\n\n    return this.props.frameRate;\n  }\n\n  render () {\n    const { preview, src, aspectRatio, onOpenVideo, onCloseVideo, intl, alt, lang, detailed, sensitive, editable, blurhash, autoFocus } = this.props;\n    const { currentTime, duration, volume, buffer, dragging, paused, fullscreen, hovered, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    let preload;\n\n    if (this.props.currentTime || fullscreen || dragging) {\n      preload = 'auto';\n    } else if (detailed) {\n      preload = 'metadata';\n    } else {\n      preload = 'none';\n    }\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    // The outer wrapper is necessary to avoid reflowing the layout when going into full screen\n    return (\n      <div style={{ aspectRatio }}>\n        <div\n          role='menuitem'\n          className={classNames('video-player', { inactive: !revealed, detailed, fullscreen, editable })}\n          style={{ aspectRatio }}\n          ref={this.setPlayerRef}\n          onMouseEnter={this.handleMouseEnter}\n          onMouseLeave={this.handleMouseLeave}\n          onClick={this.handleClickRoot}\n          onKeyDown={this.handleKeyDown}\n          tabIndex={0}\n        >\n          <Blurhash\n            hash={blurhash}\n            className={classNames('media-gallery__preview', {\n              'media-gallery__preview--hidden': revealed,\n            })}\n            dummy={!useBlurhash}\n          />\n\n          {(revealed || editable) && <video\n            ref={this.setVideoRef}\n            src={src}\n            poster={preview}\n            preload={preload}\n            role='button'\n            tabIndex={0}\n            aria-label={alt}\n            title={alt}\n            lang={lang}\n            volume={volume}\n            onClick={this.togglePlay}\n            onKeyDown={this.handleVideoKeyDown}\n            onPlay={this.handlePlay}\n            onPause={this.handlePause}\n            onLoadedData={this.handleLoadedData}\n            onProgress={this.handleProgress}\n            onVolumeChange={this.handleVolumeChange}\n            style={{ width: '100%' }}\n          />}\n\n          <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n            <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n              <span className='spoiler-button__overlay__label'>\n                {warning}\n                <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n              </span>\n            </button>\n          </div>\n\n          <div className={classNames('video-player__controls', { active: paused || hovered })}>\n            <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n              <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n              <div className='video-player__seek__progress' style={{ width: `${progress}%` }} />\n\n              <span\n                className={classNames('video-player__seek__handle', { active: dragging })}\n                tabIndex={0}\n                style={{ left: `${progress}%` }}\n                onKeyDown={this.handleVideoKeyDown}\n              />\n            </div>\n\n            <div className='video-player__buttons-bar'>\n              <div className='video-player__buttons left'>\n                <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay} autoFocus={autoFocus}><Icon id={paused ? 'play' : 'pause'} fixedWidth /></button>\n                <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} fixedWidth /></button>\n\n                <div className={classNames('video-player__volume', { active: this.state.hovered })} onMouseDown={this.handleVolumeMouseDown} ref={this.setVolumeRef}>\n                  <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%` }} />\n\n                  <span\n                    className={classNames('video-player__volume__handle')}\n                    tabIndex={0}\n                    style={{ left: `${muted ? 0 : volume * 100}%` }}\n                  />\n                </div>\n\n                {(detailed || fullscreen) && (\n                  <span className='video-player__time'>\n                    <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                    <span className='video-player__time-sep'>/</span>\n                    <span className='video-player__time-total'>{formatTime(Math.floor(duration))}</span>\n                  </span>\n                )}\n              </div>\n\n              <div className='video-player__buttons right'>\n                {(!onCloseVideo && !editable && !fullscreen && !this.props.alwaysVisible) && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' fixedWidth /></button>}\n                {(!fullscreen && onOpenVideo) && <button type='button' title={intl.formatMessage(messages.expand)} aria-label={intl.formatMessage(messages.expand)} className='player-button' onClick={this.handleOpenVideo}><Icon id='expand' fixedWidth /></button>}\n                {onCloseVideo && <button type='button' title={intl.formatMessage(messages.close)} aria-label={intl.formatMessage(messages.close)} className='player-button' onClick={this.handleCloseVideo}><Icon id='compress' fixedWidth /></button>}\n                <button type='button' title={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} aria-label={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} className='player-button' onClick={this.toggleFullscreen}><Icon id={fullscreen ? 'compress' : 'arrows-alt'} fixedWidth /></button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Video);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle } from 'lodash';\n\nimport { Blurhash } from 'flavours/glitch/components/blurhash';\nimport { Icon } from 'flavours/glitch/components/icon';\nimport { displayMedia, useBlurhash } from 'flavours/glitch/initial_state';\n\nimport { isFullscreen, requestFullscreen, exitFullscreen } from '../ui/util/fullscreen';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  hide: { id: 'video.hide', defaultMessage: 'Hide video' },\n  expand: { id: 'video.expand', defaultMessage: 'Expand video' },\n  close: { id: 'video.close', defaultMessage: 'Close video' },\n  fullscreen: { id: 'video.fullscreen', defaultMessage: 'Full screen' },\n  exit_fullscreen: { id: 'video.exit_fullscreen', defaultMessage: 'Exit full screen' },\n});\n\nexport const formatTime = secondsNum => {\n  let hours   = Math.floor(secondsNum / 3600);\n  let minutes = Math.floor((secondsNum - (hours * 3600)) / 60);\n  let seconds = secondsNum - (hours * 3600) - (minutes * 60);\n\n  if (hours   < 10) hours   = '0' + hours;\n  if (minutes < 10) minutes = '0' + minutes;\n  if (seconds < 10) seconds = '0' + seconds;\n\n  return (hours === '00' ? '' : `${hours}:`) + `${minutes}:${seconds}`;\n};\n\nexport const findElementPosition = el => {\n  let box;\n\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n\n  if (!box) {\n    return {\n      left: 0,\n      top: 0,\n    };\n  }\n\n  const docEl = document.documentElement;\n  const body  = document.body;\n\n  const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n  const left       = (box.left + scrollLeft) - clientLeft;\n\n  const clientTop = docEl.clientTop || body.clientTop || 0;\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const top       = (box.top + scrollTop) - clientTop;\n\n  return {\n    left: Math.round(left),\n    top: Math.round(top),\n  };\n};\n\nexport const getPointerPosition = (el, event) => {\n  const position = {};\n  const box = findElementPosition(el);\n  const boxW = el.offsetWidth;\n  const boxH = el.offsetHeight;\n  const boxY = box.top;\n  const boxX = box.left;\n\n  let pageY = event.pageY;\n  let pageX = event.pageX;\n\n  if (event.changedTouches) {\n    pageX = event.changedTouches[0].pageX;\n    pageY = event.changedTouches[0].pageY;\n  }\n\n  position.y = Math.max(0, Math.min(1, (pageY - boxY) / boxH));\n  position.x = Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n\n  return position;\n};\n\nexport const fileNameFromURL = str => {\n  const url      = new URL(str);\n  const pathname = url.pathname;\n  const index    = pathname.lastIndexOf('/');\n\n  return pathname.slice(index + 1);\n};\n\nclass Video extends PureComponent {\n\n  static propTypes = {\n    preview: PropTypes.string,\n    frameRate: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    sensitive: PropTypes.bool,\n    currentTime: PropTypes.number,\n    onOpenVideo: PropTypes.func,\n    onCloseVideo: PropTypes.func,\n    detailed: PropTypes.bool,\n    inline: PropTypes.bool,\n    editable: PropTypes.bool,\n    alwaysVisible: PropTypes.bool,\n    visible: PropTypes.bool,\n    letterbox: PropTypes.bool,\n    fullwidth: PropTypes.bool,\n    preventPlayback: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    deployPictureInPicture: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    componentIndex: PropTypes.number,\n    autoFocus: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    frameRate: '25',\n  };\n\n  state = {\n    currentTime: 0,\n    duration: 0,\n    volume: 0.5,\n    paused: true,\n    dragging: false,\n    fullscreen: false,\n    hovered: false,\n    muted: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  setPlayerRef = c => {\n    this.player = c;\n  };\n\n  setVideoRef = c => {\n    this.video = c;\n\n    if (this.video) {\n      this.setState({ volume: this.video.volume, muted: this.video.muted });\n    }\n  };\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  handleClickRoot = e => e.stopPropagation();\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n    this._updateTime();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n  };\n\n  _updateTime () {\n    requestAnimationFrame(() => {\n      if (!this.video) return;\n\n      this.handleTimeUpdate();\n\n      if (!this.state.paused) {\n        this._updateTime();\n      }\n    });\n  }\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.video.currentTime,\n      duration:this.video.duration,\n    });\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        this.video.volume = x;\n        this.video.muted = this.state.muted;\n      });\n    }\n  }, 15);\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.video.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.video.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.video.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  seekBy (time) {\n    const currentTime = this.video.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleVideoKeyDown = e => {\n    // On the video element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    const frameTime = 1 / this.getFrameRate();\n\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'f':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleFullscreen();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    case ',':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-frameTime);\n      break;\n    case '.':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(frameTime);\n      break;\n    }\n\n    // If we are in fullscreen mode, we don't want any hotkeys\n    // interacting with the UI that's not visible\n\n    if (this.state.fullscreen) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (e.key === 'Escape') {\n        exitFullscreen();\n      }\n    }\n  };\n\n  togglePlay = () => {\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.video.play());\n    } else {\n      this.setState({ paused: true }, () => this.video.pause());\n    }\n  };\n\n  toggleFullscreen = () => {\n    if (isFullscreen()) {\n      exitFullscreen();\n    } else {\n      requestFullscreen(this.player);\n    }\n  };\n\n  componentDidMount () {\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    if (!this.state.paused && this.video && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('video', {\n        src: this.props.src,\n        currentTime: this.video.currentTime,\n        muted: this.video.muted,\n        volume: this.video.volume,\n      });\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.video && this.state.revealed && this.props.preventPlayback && !prevProps.preventPlayback) {\n      this.video.pause();\n    }\n  }\n\n  handleScroll = throttle(() => {\n    if (!this.video) {\n      return;\n    }\n\n    const { top, height } = this.video.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.video.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('video', {\n          src: this.props.src,\n          currentTime: this.video.currentTime,\n          muted: this.video.muted,\n          volume: this.video.volume,\n        });\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleFullscreenChange = () => {\n    this.setState({ fullscreen: isFullscreen() });\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  toggleMute = () => {\n    const muted = !(this.video.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      this.video.volume = this.state.volume;\n      this.video.muted = this.state.muted;\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.state.revealed) {\n      this.setState({ paused: true });\n    }\n\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleLoadedData = () => {\n    const { currentTime, volume, muted, autoPlay } = this.props;\n\n    if (currentTime) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (volume !== undefined) {\n      this.video.volume = volume;\n    }\n\n    if (muted !== undefined) {\n      this.video.muted = muted;\n    }\n\n    if (autoPlay) {\n      this.video.play();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.video.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.video.buffered.end(lastTimeRange) / this.video.duration * 100) });\n    }\n  };\n\n  handleVolumeChange = () => {\n    this.setState({ volume: this.video.volume, muted: this.video.muted });\n  };\n\n  handleOpenVideo = () => {\n    this.video.pause();\n\n    this.props.onOpenVideo(this.props.lang, {\n      startTime: this.video.currentTime,\n      autoPlay: !this.state.paused,\n      defaultVolume: this.state.volume,\n      componentIndex: this.props.componentIndex,\n    });\n  };\n\n  handleCloseVideo = () => {\n    this.video.pause();\n    this.props.onCloseVideo();\n  };\n\n  getFrameRate () {\n    if (this.props.frameRate && isNaN(this.props.frameRate)) {\n      // The frame rate is returned as a fraction string so we\n      // need to convert it to a number\n\n      return this.props.frameRate.split('/').reduce((p, c) => p / c);\n    }\n\n    return this.props.frameRate;\n  }\n\n  render () {\n    const { preview, src, inline, onOpenVideo, onCloseVideo, intl, alt, lang, letterbox, fullwidth, detailed, sensitive, editable, blurhash, autoFocus } = this.props;\n    const { currentTime, duration, volume, buffer, dragging, paused, fullscreen, hovered, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    const playerStyle = {};\n\n    if (inline) {\n      playerStyle.aspectRatio = '16 / 9';\n    }\n\n    let preload;\n\n    if (this.props.currentTime || fullscreen || dragging) {\n      preload = 'auto';\n    } else if (detailed) {\n      preload = 'metadata';\n    } else {\n      preload = 'none';\n    }\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    return (\n      <div\n        role='menuitem'\n        className={classNames('video-player', { inactive: !revealed, detailed, inline: inline && !fullscreen, fullscreen, editable, letterbox, 'full-width': fullwidth })}\n        style={playerStyle}\n        ref={this.setPlayerRef}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        onClick={this.handleClickRoot}\n        onKeyDown={this.handleKeyDown}\n        tabIndex={0}\n      >\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n\n        {(revealed || editable) && <video\n          ref={this.setVideoRef}\n          src={src}\n          poster={preview}\n          preload={preload}\n          role='button'\n          tabIndex={0}\n          aria-label={alt}\n          title={alt}\n          lang={lang}\n          volume={volume}\n          onClick={this.togglePlay}\n          onKeyDown={this.handleVideoKeyDown}\n          onPlay={this.handlePlay}\n          onPause={this.handlePause}\n          onLoadedData={this.handleLoadedData}\n          onProgress={this.handleProgress}\n          onVolumeChange={this.handleVolumeChange}\n          style={{ ...playerStyle, width: '100%' }}\n        />}\n\n        <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n          <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n            <span className='spoiler-button__overlay__label'>\n              {warning}\n              <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n            </span>\n          </button>\n        </div>\n\n        <div className={classNames('video-player__controls', { active: paused || hovered })}>\n          <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n            <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n            <div className='video-player__seek__progress' style={{ width: `${progress}%` }} />\n\n            <span\n              className={classNames('video-player__seek__handle', { active: dragging })}\n              tabIndex={0}\n              style={{ left: `${progress}%` }}\n              onKeyDown={this.handleVideoKeyDown}\n            />\n          </div>\n\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay} autoFocus={autoFocus}><Icon id={paused ? 'play' : 'pause'} fixedWidth /></button>\n              <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} fixedWidth /></button>\n\n              <div className={classNames('video-player__volume', { active: this.state.hovered })} onMouseDown={this.handleVolumeMouseDown} ref={this.setVolumeRef}>\n                <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%` }} />\n\n                <span\n                  className={classNames('video-player__volume__handle')}\n                  tabIndex={0}\n                  style={{ left: `${muted ? 0 : volume * 100}%` }}\n                />\n              </div>\n\n              {(detailed || fullscreen) && (\n                <span className='video-player__time'>\n                  <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                  <span className='video-player__time-sep'>/</span>\n                  <span className='video-player__time-total'>{formatTime(Math.floor(duration))}</span>\n                </span>\n              )}\n            </div>\n\n            <div className='video-player__buttons right'>\n              {(!onCloseVideo && !editable && !fullscreen && !this.props.alwaysVisible) && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' fixedWidth /></button>}\n              {(!fullscreen && onOpenVideo) && <button type='button' title={intl.formatMessage(messages.expand)} aria-label={intl.formatMessage(messages.expand)} className='player-button' onClick={this.handleOpenVideo}><Icon id='expand' fixedWidth /></button>}\n              {onCloseVideo && <button type='button' title={intl.formatMessage(messages.close)} aria-label={intl.formatMessage(messages.close)} className='player-button' onClick={this.handleCloseVideo}><Icon id='compress' fixedWidth /></button>}\n              <button type='button' title={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} aria-label={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} className='player-button' onClick={this.toggleFullscreen}><Icon id={fullscreen ? 'compress' : 'arrows-alt'} fixedWidth /></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Video);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { fromJS } from 'immutable';\n\nimport { ImmutableHashtag as Hashtag } from 'flavours/glitch/components/hashtag';\nimport MediaGallery from 'flavours/glitch/components/media_gallery';\nimport ModalRoot from 'flavours/glitch/components/modal_root';\nimport Poll from 'flavours/glitch/components/poll';\nimport Audio from 'flavours/glitch/features/audio';\nimport Card from 'flavours/glitch/features/status/components/card';\nimport MediaModal from 'flavours/glitch/features/ui/components/media_modal';\nimport Video from 'flavours/glitch/features/video';\nimport { IntlProvider } from 'flavours/glitch/locales';\nimport { getScrollbarWidth } from 'flavours/glitch/utils/scrollbar';\n\nconst MEDIA_COMPONENTS = { MediaGallery, Video, Card, Poll, Hashtag, Audio };\n\nexport default class MediaContainer extends PureComponent {\n\n  static propTypes = {\n    components: PropTypes.object.isRequired,\n  };\n\n  state = {\n    media: null,\n    index: null,\n    lang: null,\n    time: null,\n    backgroundColor: null,\n    options: null,\n  };\n\n  handleOpenMedia = (media, index, lang) => {\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media, index, lang });\n  };\n\n  handleOpenVideo = (lang, options) => {\n    const { components } = this.props;\n    const { media } = JSON.parse(components[options.componentIndex].getAttribute('data-props'));\n    const mediaList = fromJS(media);\n\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media: mediaList, lang, options });\n  };\n\n  handleCloseMedia = () => {\n    document.body.classList.remove('with-modals--active');\n    document.documentElement.style.marginRight = '0';\n\n    this.setState({\n      media: null,\n      index: null,\n      time: null,\n      backgroundColor: null,\n      options: null,\n    });\n  };\n\n  setBackgroundColor = color => {\n    this.setState({ backgroundColor: color });\n  };\n\n  render () {\n    const { components } = this.props;\n\n    let handleOpenVideo;\n\n    // Don't offer to expand the video in a lightbox if we're in a frame\n    if (window.self === window.top) {\n      handleOpenVideo = this.handleOpenVideo;\n    }\n\n    return (\n      <IntlProvider>\n        <>\n          {[].map.call(components, (component, i) => {\n            const componentName = component.getAttribute('data-component');\n            const Component = MEDIA_COMPONENTS[componentName];\n            const { media, card, poll, hashtag, ...props } = JSON.parse(component.getAttribute('data-props'));\n\n            Object.assign(props, {\n              ...(media   ? { media:   fromJS(media)   } : {}),\n              ...(card    ? { card:    fromJS(card)    } : {}),\n              ...(poll    ? { poll:    fromJS(poll)    } : {}),\n              ...(hashtag ? { hashtag: fromJS(hashtag) } : {}),\n\n              ...(componentName === 'Video' ? {\n                componentIndex: i,\n                onOpenVideo: handleOpenVideo,\n              } : {\n                onOpenMedia: this.handleOpenMedia,\n              }),\n            });\n\n            return createPortal(\n              <Component {...props} key={`media-${i}`} />,\n              component,\n            );\n          })}\n\n          <ModalRoot backgroundColor={this.state.backgroundColor} onClose={this.handleCloseMedia}>\n            {this.state.media && (\n              <MediaModal\n                media={this.state.media}\n                index={this.state.index || 0}\n                lang={this.state.lang}\n                currentTime={this.state.options?.startTime}\n                autoPlay={this.state.options?.autoPlay}\n                volume={this.state.options?.defaultVolume}\n                onClose={this.handleCloseMedia}\n                onChangeBackgroundColor={this.setBackgroundColor}\n              />\n            )}\n          </ModalRoot>\n        </>\n      </IntlProvider>\n    );\n  }\n\n}\n","import { List as ImmutableList, Map as ImmutableMap } from 'immutable';\nimport { createSelector } from 'reselect';\n\nimport { me } from 'flavours/glitch/initial_state';\nimport { toServerSideType } from 'flavours/glitch/utils/filters';\n\nconst getAccountBase         = (state, id) => state.getIn(['accounts', id], null);\nconst getAccountCounters     = (state, id) => state.getIn(['accounts_counters', id], null);\nconst getAccountRelationship = (state, id) => state.getIn(['relationships', id], null);\nconst getAccountMoved        = (state, id) => state.getIn(['accounts', state.getIn(['accounts', id, 'moved'])]);\n\nexport const makeGetAccount = () => {\n  return createSelector([getAccountBase, getAccountCounters, getAccountRelationship, getAccountMoved], (base, counters, relationship, moved) => {\n    if (base === null) {\n      return null;\n    }\n\n    return base.merge(counters).withMutations(map => {\n      map.set('relationship', relationship);\n      map.set('moved', moved);\n    });\n  });\n};\n\nconst getFilters = (state, { contextType }) => {\n  if (!contextType) return null;\n\n  const serverSideType = toServerSideType(contextType);\n  const now = new Date();\n\n  return state.get('filters').filter((filter) => filter.get('context').includes(serverSideType) && (filter.get('expires_at') === null || filter.get('expires_at') > now));\n};\n\nexport const makeGetStatus = () => {\n  return createSelector(\n    [\n      (state, { id }) => state.getIn(['statuses', id]),\n      (state, { id }) => state.getIn(['statuses', state.getIn(['statuses', id, 'reblog'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', id, 'account'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', state.getIn(['statuses', id, 'reblog']), 'account'])]),\n      getFilters,\n    ],\n\n    (statusBase, statusReblog, accountBase, accountReblog, filters) => {\n      if (!statusBase || statusBase.get('isLoading')) {\n        return null;\n      }\n\n      let filtered = false;\n      if ((accountReblog || accountBase).get('id') !== me && filters) {\n        let filterResults = statusReblog?.get('filtered') || statusBase.get('filtered') || ImmutableList();\n        if (filterResults.some((result) => filters.getIn([result.get('filter'), 'filter_action']) === 'hide')) {\n          return null;\n        }\n        filterResults = filterResults.filter(result => filters.has(result.get('filter')));\n        if (!filterResults.isEmpty()) {\n          filtered = filterResults.map(result => filters.getIn([result.get('filter'), 'title']));\n        }\n      }\n\n      if (statusReblog) {\n        statusReblog = statusReblog.set('account', accountReblog);\n        statusReblog = statusReblog.set('matched_filters', filtered);\n      } else {\n        statusReblog = null;\n      }\n\n      return statusBase.withMutations(map => {\n        map.set('reblog', statusReblog);\n        map.set('account', accountBase);\n        map.set('matched_filters', filtered);\n      });\n    },\n  );\n};\n\nexport const makeGetPictureInPicture = () => {\n  return createSelector([\n    (state, { id }) => state.get('picture_in_picture').statusId === id,\n    (state) => state.getIn(['meta', 'layout']) !== 'mobile',\n  ], (inUse, available) => ImmutableMap({\n    inUse: inUse && available,\n    available,\n  }));\n};\n\nconst getAlertsBase = state => state.get('alerts');\n\nexport const getAlerts = createSelector([getAlertsBase], (base) => {\n  let arr = [];\n\n  base.forEach(item => {\n    arr.push({\n      message: item.get('message'),\n      message_values: item.get('message_values'),\n      title: item.get('title'),\n      key: item.get('key'),\n      dismissAfter: 5000,\n      barStyle: {\n        zIndex: 200,\n      },\n    });\n  });\n\n  return arr;\n});\n\nexport const makeGetNotification = () => createSelector([\n  (_, base)             => base,\n  (state, _, accountId) => state.getIn(['accounts', accountId]),\n], (base, account) => base.set('account', account));\n\nexport const makeGetReport = () => createSelector([\n  (_, base) => base,\n  (state, _, targetAccountId) => state.getIn(['accounts', targetAccountId]),\n], (base, targetAccount) => base.set('target_account', targetAccount));\n\nexport const getAccountGallery = createSelector([\n  (state, id) => state.getIn(['timelines', `account:${id}:media`, 'items'], ImmutableList()),\n  state       => state.get('statuses'),\n  (state, id) => state.getIn(['accounts', id]),\n], (statusIds, statuses, account) => {\n  let medias = ImmutableList();\n\n  statusIds.forEach(statusId => {\n    const status = statuses.get(statusId);\n    medias = medias.concat(status.get('media_attachments').map(media => media.set('status', status).set('account', account)));\n  });\n\n  return medias;\n});\n\nexport const getAccountHidden = createSelector([\n  (state, id) => state.getIn(['accounts', id, 'hidden']),\n  (state, id) => state.getIn(['relationships', id, 'following']) || state.getIn(['relationships', id, 'requested']),\n  (state, id) => id === me,\n], (hidden, followingOrRequested, isSelf) => {\n  return hidden && !(isSelf || followingOrRequested);\n});\n\nexport const getStatusList = createSelector([\n  (state, type) => state.getIn(['status_lists', type, 'items']),\n], (items) => items.toList());\n","export default class Settings {\n\n  constructor(keyBase = null) {\n    this.keyBase = keyBase;\n  }\n\n  generateKey(id) {\n    return this.keyBase ? [this.keyBase, `id${id}`].join('.') : id;\n  }\n\n  set(id, data) {\n    const key = this.generateKey(id);\n    try {\n      const encodedData = JSON.stringify(data);\n      localStorage.setItem(key, encodedData);\n      return data;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  get(id) {\n    const key = this.generateKey(id);\n    try {\n      const rawData = localStorage.getItem(key);\n      return JSON.parse(rawData);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  remove(id) {\n    const data = this.get(id);\n    if (data) {\n      const key = this.generateKey(id);\n      try {\n        localStorage.removeItem(key);\n      } catch (e) {\n      }\n    }\n    return data;\n  }\n\n}\n\nexport const pushNotificationsSetting = new Settings('mastodon_push_notification_data');\nexport const tagHistory = new Settings('mastodon_tag_history');\nexport const bannerSettings = new Settings('mastodon_banner_settings');\nexport const searchHistory = new Settings('mastodon_search_history');","export default class Settings {\n\n  constructor(keyBase = null) {\n    this.keyBase = keyBase;\n  }\n\n  generateKey(id) {\n    return this.keyBase ? [this.keyBase, `id${id}`].join('.') : id;\n  }\n\n  set(id, data) {\n    const key = this.generateKey(id);\n    try {\n      const encodedData = JSON.stringify(data);\n      localStorage.setItem(key, encodedData);\n      return data;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  get(id) {\n    const key = this.generateKey(id);\n    try {\n      const rawData = localStorage.getItem(key);\n      return JSON.parse(rawData);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  remove(id) {\n    const data = this.get(id);\n    if (data) {\n      const key = this.generateKey(id);\n      try {\n        localStorage.removeItem(key);\n      } catch (e) {\n      }\n    }\n    return data;\n  }\n\n}\n\nexport const pushNotificationsSetting = new Settings('mastodon_push_notification_data');\nexport const tagHistory = new Settings('mastodon_tag_history');\nexport const bannerSettings = new Settings('mastodon_banner_settings');\nexport const searchHistory = new Settings('mastodon_search_history');","/**\n * This is a straight rip-off of the React.js ReactPropTypes.js proptype validators,\n * modified to make it possible to validate Immutable.js data.\n *     ImmutableTypes.listOf is patterned after React.PropTypes.arrayOf, but for Immutable.List\n *     ImmutableTypes.shape  is based on React.PropTypes.shape, but for any Immutable.Iterable\n */\n\"use strict\";\n\nvar Immutable = require(\"immutable\");\nvar ANONYMOUS = \"<<anonymous>>\";\nvar ImmutablePropTypes;\nif (process.env.NODE_ENV !== \"production\") {\n  ImmutablePropTypes = {\n    listOf: createListOfTypeChecker,\n    mapOf: createMapOfTypeChecker,\n    orderedMapOf: createOrderedMapOfTypeChecker,\n    setOf: createSetOfTypeChecker,\n    orderedSetOf: createOrderedSetOfTypeChecker,\n    stackOf: createStackOfTypeChecker,\n    iterableOf: createIterableOfTypeChecker,\n    recordOf: createRecordOfTypeChecker,\n    shape: createShapeChecker,\n    contains: createShapeChecker,\n    mapContains: createMapContainsChecker,\n    orderedMapContains: createOrderedMapContainsChecker,\n    // Primitive Types\n    list: createImmutableTypeChecker(\"List\", Immutable.List.isList),\n    map: createImmutableTypeChecker(\"Map\", Immutable.Map.isMap),\n    orderedMap: createImmutableTypeChecker(\"OrderedMap\", Immutable.OrderedMap.isOrderedMap),\n    set: createImmutableTypeChecker(\"Set\", Immutable.Set.isSet),\n    orderedSet: createImmutableTypeChecker(\"OrderedSet\", Immutable.OrderedSet.isOrderedSet),\n    stack: createImmutableTypeChecker(\"Stack\", Immutable.Stack.isStack),\n    seq: createImmutableTypeChecker(\"Seq\", Immutable.Seq.isSeq),\n    record: createImmutableTypeChecker(\"Record\", function (isRecord) {\n      return isRecord instanceof Immutable.Record;\n    }),\n    iterable: createImmutableTypeChecker(\"Iterable\", Immutable.Iterable.isIterable)\n  };\n} else {\n  var productionTypeChecker = function productionTypeChecker() {\n    invariant(false, \"ImmutablePropTypes type checking code is stripped in production.\");\n  };\n  productionTypeChecker.isRequired = productionTypeChecker;\n  var getProductionTypeChecker = function getProductionTypeChecker() {\n    return productionTypeChecker;\n  };\n  ImmutablePropTypes = {\n    listOf: getProductionTypeChecker,\n    mapOf: getProductionTypeChecker,\n    orderedMapOf: getProductionTypeChecker,\n    setOf: getProductionTypeChecker,\n    orderedSetOf: getProductionTypeChecker,\n    stackOf: getProductionTypeChecker,\n    iterableOf: getProductionTypeChecker,\n    recordOf: getProductionTypeChecker,\n    shape: getProductionTypeChecker,\n    contains: getProductionTypeChecker,\n    mapContains: getProductionTypeChecker,\n    orderedMapContains: getProductionTypeChecker,\n    // Primitive Types\n    list: productionTypeChecker,\n    map: productionTypeChecker,\n    orderedMap: productionTypeChecker,\n    set: productionTypeChecker,\n    orderedSet: productionTypeChecker,\n    stack: productionTypeChecker,\n    seq: productionTypeChecker,\n    record: productionTypeChecker,\n    iterable: productionTypeChecker\n  };\n}\nImmutablePropTypes.iterable.indexed = createIterableSubclassTypeChecker(\"Indexed\", Immutable.Iterable.isIndexed);\nImmutablePropTypes.iterable.keyed = createIterableSubclassTypeChecker(\"Keyed\", Immutable.Iterable.isKeyed);\nfunction getPropType(propValue) {\n  var propType = typeof propValue;\n  if (Array.isArray(propValue)) {\n    return \"array\";\n  }\n  if (propValue instanceof RegExp) {\n    // Old webkits (at least until Android 4.0) return 'function' rather than\n    // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n    // passes PropTypes.object.\n    return \"object\";\n  }\n  if (propValue instanceof Immutable.Iterable) {\n    return \"Immutable.\" + propValue.toSource().split(\" \")[0];\n  }\n  return propType;\n}\nfunction createChainableTypeChecker(validate) {\n  function checkType(isRequired, props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 6 ? _len - 6 : 0), _key = 6; _key < _len; _key++) {\n      rest[_key - 6] = arguments[_key];\n    }\n    propFullName = propFullName || propName;\n    componentName = componentName || ANONYMOUS;\n    if (props[propName] == null) {\n      var locationName = location;\n      if (isRequired) {\n        return new Error(\"Required \" + locationName + \" `\" + propFullName + \"` was not specified in \" + (\"`\" + componentName + \"`.\"));\n      }\n    } else {\n      return validate.apply(undefined, [props, propName, componentName, location, propFullName].concat(rest));\n    }\n  }\n  var chainedCheckType = checkType.bind(null, false);\n  chainedCheckType.isRequired = checkType.bind(null, true);\n  return chainedCheckType;\n}\nfunction createImmutableTypeChecker(immutableClassName, immutableClassTypeValidator) {\n  function validate(props, propName, componentName, location, propFullName) {\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var propType = getPropType(propValue);\n      return new Error(\"Invalid \" + location + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected `\" + immutableClassName + \"`.\"));\n    }\n    return null;\n  }\n  return createChainableTypeChecker(validate);\n}\nfunction createIterableSubclassTypeChecker(subclassName, validator) {\n  return createImmutableTypeChecker(\"Iterable.\" + subclassName, function (propValue) {\n    return Immutable.Iterable.isIterable(propValue) && validator(propValue);\n  });\n}\nfunction createIterableTypeChecker(typeChecker, immutableClassName, immutableClassTypeValidator) {\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var locationName = location;\n      var propType = getPropType(propValue);\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type \" + (\"`\" + propType + \"` supplied to `\" + componentName + \"`, expected an Immutable.js \" + immutableClassName + \".\"));\n    }\n    if (typeof typeChecker !== \"function\") {\n      return new Error(\"Invalid typeChecker supplied to `\" + componentName + \"` \" + (\"for propType `\" + propFullName + \"`, expected a function.\"));\n    }\n    var propValues = propValue.valueSeq().toArray();\n    for (var i = 0, len = propValues.length; i < len; i++) {\n      var error = typeChecker.apply(undefined, [propValues, i, componentName, location, \"\" + propFullName + \"[\" + i + \"]\"].concat(rest));\n      if (error instanceof Error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\nfunction createKeysTypeChecker(typeChecker) {\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n    var propValue = props[propName];\n    if (typeof typeChecker !== \"function\") {\n      return new Error(\"Invalid keysTypeChecker (optional second argument) supplied to `\" + componentName + \"` \" + (\"for propType `\" + propFullName + \"`, expected a function.\"));\n    }\n    var keys = propValue.keySeq().toArray();\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var error = typeChecker.apply(undefined, [keys, i, componentName, location, \"\" + propFullName + \" -> key(\" + keys[i] + \")\"].concat(rest));\n      if (error instanceof Error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\nfunction createListOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"List\", Immutable.List.isList);\n}\nfunction createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, immutableClassName, immutableClassTypeValidator) {\n  function validate() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return createIterableTypeChecker(valuesTypeChecker, immutableClassName, immutableClassTypeValidator).apply(undefined, args) || keysTypeChecker && createKeysTypeChecker(keysTypeChecker).apply(undefined, args);\n  }\n  return createChainableTypeChecker(validate);\n}\nfunction createMapOfTypeChecker(valuesTypeChecker, keysTypeChecker) {\n  return createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, \"Map\", Immutable.Map.isMap);\n}\nfunction createOrderedMapOfTypeChecker(valuesTypeChecker, keysTypeChecker) {\n  return createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, \"OrderedMap\", Immutable.OrderedMap.isOrderedMap);\n}\nfunction createSetOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Set\", Immutable.Set.isSet);\n}\nfunction createOrderedSetOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"OrderedSet\", Immutable.OrderedSet.isOrderedSet);\n}\nfunction createStackOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Stack\", Immutable.Stack.isStack);\n}\nfunction createIterableOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Iterable\", Immutable.Iterable.isIterable);\n}\nfunction createRecordOfTypeChecker(recordKeys) {\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n    var propValue = props[propName];\n    if (!(propValue instanceof Immutable.Record)) {\n      var propType = getPropType(propValue);\n      var locationName = location;\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected an Immutable.js Record.\"));\n    }\n    for (var key in recordKeys) {\n      var checker = recordKeys[key];\n      if (!checker) {\n        continue;\n      }\n      var mutablePropValue = propValue.toObject();\n      var error = checker.apply(undefined, [mutablePropValue, key, componentName, location, \"\" + propFullName + \".\" + key].concat(rest));\n      if (error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\n// there is some irony in the fact that shapeTypes is a standard hash and not an immutable collection\nfunction createShapeTypeChecker(shapeTypes) {\n  var immutableClassName = arguments[1] === undefined ? \"Iterable\" : arguments[1];\n  var immutableClassTypeValidator = arguments[2] === undefined ? Immutable.Iterable.isIterable : arguments[2];\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var propType = getPropType(propValue);\n      var locationName = location;\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected an Immutable.js \" + immutableClassName + \".\"));\n    }\n    var mutablePropValue = propValue.toObject();\n    for (var key in shapeTypes) {\n      var checker = shapeTypes[key];\n      if (!checker) {\n        continue;\n      }\n      var error = checker.apply(undefined, [mutablePropValue, key, componentName, location, \"\" + propFullName + \".\" + key].concat(rest));\n      if (error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\nfunction createShapeChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes);\n}\nfunction createMapContainsChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes, \"Map\", Immutable.Map.isMap);\n}\nfunction createOrderedMapContainsChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes, \"OrderedMap\", Immutable.OrderedMap.isOrderedMap);\n}\nmodule.exports = ImmutablePropTypes;","import React from 'react';\nimport { is } from 'immutable';\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nvar NOT_SET = {};\nfunction isMapLike(collection) {\n  return collection !== null && _typeof(collection) === 'object' && typeof collection.get === 'function' && typeof collection.has === 'function';\n}\nfunction isInvalid(collection) {\n  return collection === null || collection === undefined;\n}\nfunction get(collection, key, notSetValue) {\n  if (isInvalid(collection)) {\n    return notSetValue;\n  }\n  if (isMapLike(collection)) {\n    return collection.has(key) ? collection.get(key) : notSetValue;\n  }\n  return hasOwnProperty.call(collection, key) ? collection[key] : notSetValue;\n}\nfunction getIn(collection, keyPath, notSetValue) {\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\nfunction check(config) {\n  var prev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var next = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var checkItem = createChecker(prev, next);\n  var checklist = config || Object.keys(_objectSpread2({}, next, {}, prev));\n  return checklist.every(checkItem);\n}\nfunction createChecker(prev, next) {\n  return function (name) {\n    if (typeof name === 'string') {\n      return is(next[name], prev[name]);\n    } else if (Array.isArray(name)) {\n      return is(getIn(next, name), getIn(prev, name));\n    }\n    throw new TypeError('Invalid key: expected Array or string: ' + name);\n  };\n}\nvar ImmutablePureComponent = /*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImmutablePureComponent, _React$Component);\n  function ImmutablePureComponent() {\n    _classCallCheck(this, ImmutablePureComponent);\n    return _possibleConstructorReturn(this, _getPrototypeOf(ImmutablePureComponent).apply(this, arguments));\n  }\n  _createClass(ImmutablePureComponent, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var nextState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return !check(this.updateOnProps, this.props, nextProps, 'updateOnProps') || !check(this.updateOnStates, this.state, nextState, 'updateOnStates');\n    }\n  }]);\n  return ImmutablePureComponent;\n}(React.Component);\nfunction immutableMemo(Component, updateOnProps) {\n  return /*#__PURE__*/React.memo(Component, function (prev, next) {\n    return check(updateOnProps, prev, next, 'immutableMemo');\n  });\n}\nexport default ImmutablePureComponent;\nexport { ImmutablePureComponent, immutableMemo };","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { fromJS } from 'immutable';\n\nimport { ImmutableHashtag as Hashtag } from 'mastodon/components/hashtag';\nimport MediaGallery from 'mastodon/components/media_gallery';\nimport ModalRoot from 'mastodon/components/modal_root';\nimport Poll from 'mastodon/components/poll';\nimport Audio from 'mastodon/features/audio';\nimport Card from 'mastodon/features/status/components/card';\nimport MediaModal from 'mastodon/features/ui/components/media_modal';\nimport Video from 'mastodon/features/video';\nimport { IntlProvider } from 'mastodon/locales';\nimport { getScrollbarWidth } from 'mastodon/utils/scrollbar';\n\nconst MEDIA_COMPONENTS = { MediaGallery, Video, Card, Poll, Hashtag, Audio };\n\nexport default class MediaContainer extends PureComponent {\n\n  static propTypes = {\n    components: PropTypes.object.isRequired,\n  };\n\n  state = {\n    media: null,\n    index: null,\n    lang: null,\n    time: null,\n    backgroundColor: null,\n    options: null,\n  };\n\n  handleOpenMedia = (media, index, lang) => {\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media, index, lang });\n  };\n\n  handleOpenVideo = (lang, options) => {\n    const { components } = this.props;\n    const { media } = JSON.parse(components[options.componentIndex].getAttribute('data-props'));\n    const mediaList = fromJS(media);\n\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media: mediaList, lang, options });\n  };\n\n  handleCloseMedia = () => {\n    document.body.classList.remove('with-modals--active');\n    document.documentElement.style.marginRight = '0';\n\n    this.setState({\n      media: null,\n      index: null,\n      time: null,\n      backgroundColor: null,\n      options: null,\n    });\n  };\n\n  setBackgroundColor = color => {\n    this.setState({ backgroundColor: color });\n  };\n\n  render () {\n    const { components } = this.props;\n\n    let handleOpenVideo;\n\n    // Don't offer to expand the video in a lightbox if we're in a frame\n    if (window.self === window.top) {\n      handleOpenVideo = this.handleOpenVideo;\n    }\n\n    return (\n      <IntlProvider>\n        <>\n          {[].map.call(components, (component, i) => {\n            const componentName = component.getAttribute('data-component');\n            const Component = MEDIA_COMPONENTS[componentName];\n            const { media, card, poll, hashtag, ...props } = JSON.parse(component.getAttribute('data-props'));\n\n            Object.assign(props, {\n              ...(media   ? { media:   fromJS(media)   } : {}),\n              ...(card    ? { card:    fromJS(card)    } : {}),\n              ...(poll    ? { poll:    fromJS(poll)    } : {}),\n              ...(hashtag ? { hashtag: fromJS(hashtag) } : {}),\n\n              ...(componentName === 'Video' ? {\n                componentIndex: i,\n                onOpenVideo: handleOpenVideo,\n              } : {\n                onOpenMedia: this.handleOpenMedia,\n              }),\n            });\n\n            return createPortal(\n              <Component {...props} key={`media-${i}`} />,\n              component,\n            );\n          })}\n\n          <ModalRoot backgroundColor={this.state.backgroundColor} onClose={this.handleCloseMedia}>\n            {this.state.media && (\n              <MediaModal\n                media={this.state.media}\n                index={this.state.index || 0}\n                lang={this.state.lang}\n                currentTime={this.state.options?.startTime}\n                autoPlay={this.state.options?.autoPlay}\n                volume={this.state.options?.defaultVolume}\n                onClose={this.handleCloseMedia}\n                onChangeBackgroundColor={this.setBackgroundColor}\n              />\n            )}\n          </ModalRoot>\n        </>\n      </IntlProvider>\n    );\n  }\n\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedAccount, importFetchedAccounts } from './importer';\n\nexport const ACCOUNT_FETCH_REQUEST = 'ACCOUNT_FETCH_REQUEST';\nexport const ACCOUNT_FETCH_SUCCESS = 'ACCOUNT_FETCH_SUCCESS';\nexport const ACCOUNT_FETCH_FAIL    = 'ACCOUNT_FETCH_FAIL';\n\nexport const ACCOUNT_LOOKUP_REQUEST = 'ACCOUNT_LOOKUP_REQUEST';\nexport const ACCOUNT_LOOKUP_SUCCESS = 'ACCOUNT_LOOKUP_SUCCESS';\nexport const ACCOUNT_LOOKUP_FAIL    = 'ACCOUNT_LOOKUP_FAIL';\n\nexport const ACCOUNT_FOLLOW_REQUEST = 'ACCOUNT_FOLLOW_REQUEST';\nexport const ACCOUNT_FOLLOW_SUCCESS = 'ACCOUNT_FOLLOW_SUCCESS';\nexport const ACCOUNT_FOLLOW_FAIL    = 'ACCOUNT_FOLLOW_FAIL';\n\nexport const ACCOUNT_UNFOLLOW_REQUEST = 'ACCOUNT_UNFOLLOW_REQUEST';\nexport const ACCOUNT_UNFOLLOW_SUCCESS = 'ACCOUNT_UNFOLLOW_SUCCESS';\nexport const ACCOUNT_UNFOLLOW_FAIL    = 'ACCOUNT_UNFOLLOW_FAIL';\n\nexport const ACCOUNT_BLOCK_REQUEST = 'ACCOUNT_BLOCK_REQUEST';\nexport const ACCOUNT_BLOCK_SUCCESS = 'ACCOUNT_BLOCK_SUCCESS';\nexport const ACCOUNT_BLOCK_FAIL    = 'ACCOUNT_BLOCK_FAIL';\n\nexport const ACCOUNT_UNBLOCK_REQUEST = 'ACCOUNT_UNBLOCK_REQUEST';\nexport const ACCOUNT_UNBLOCK_SUCCESS = 'ACCOUNT_UNBLOCK_SUCCESS';\nexport const ACCOUNT_UNBLOCK_FAIL    = 'ACCOUNT_UNBLOCK_FAIL';\n\nexport const ACCOUNT_MUTE_REQUEST = 'ACCOUNT_MUTE_REQUEST';\nexport const ACCOUNT_MUTE_SUCCESS = 'ACCOUNT_MUTE_SUCCESS';\nexport const ACCOUNT_MUTE_FAIL    = 'ACCOUNT_MUTE_FAIL';\n\nexport const ACCOUNT_UNMUTE_REQUEST = 'ACCOUNT_UNMUTE_REQUEST';\nexport const ACCOUNT_UNMUTE_SUCCESS = 'ACCOUNT_UNMUTE_SUCCESS';\nexport const ACCOUNT_UNMUTE_FAIL    = 'ACCOUNT_UNMUTE_FAIL';\n\nexport const ACCOUNT_PIN_REQUEST = 'ACCOUNT_PIN_REQUEST';\nexport const ACCOUNT_PIN_SUCCESS = 'ACCOUNT_PIN_SUCCESS';\nexport const ACCOUNT_PIN_FAIL    = 'ACCOUNT_PIN_FAIL';\n\nexport const ACCOUNT_UNPIN_REQUEST = 'ACCOUNT_UNPIN_REQUEST';\nexport const ACCOUNT_UNPIN_SUCCESS = 'ACCOUNT_UNPIN_SUCCESS';\nexport const ACCOUNT_UNPIN_FAIL    = 'ACCOUNT_UNPIN_FAIL';\n\nexport const FOLLOWERS_FETCH_REQUEST = 'FOLLOWERS_FETCH_REQUEST';\nexport const FOLLOWERS_FETCH_SUCCESS = 'FOLLOWERS_FETCH_SUCCESS';\nexport const FOLLOWERS_FETCH_FAIL    = 'FOLLOWERS_FETCH_FAIL';\n\nexport const FOLLOWERS_EXPAND_REQUEST = 'FOLLOWERS_EXPAND_REQUEST';\nexport const FOLLOWERS_EXPAND_SUCCESS = 'FOLLOWERS_EXPAND_SUCCESS';\nexport const FOLLOWERS_EXPAND_FAIL    = 'FOLLOWERS_EXPAND_FAIL';\n\nexport const FOLLOWING_FETCH_REQUEST = 'FOLLOWING_FETCH_REQUEST';\nexport const FOLLOWING_FETCH_SUCCESS = 'FOLLOWING_FETCH_SUCCESS';\nexport const FOLLOWING_FETCH_FAIL    = 'FOLLOWING_FETCH_FAIL';\n\nexport const FOLLOWING_EXPAND_REQUEST = 'FOLLOWING_EXPAND_REQUEST';\nexport const FOLLOWING_EXPAND_SUCCESS = 'FOLLOWING_EXPAND_SUCCESS';\nexport const FOLLOWING_EXPAND_FAIL    = 'FOLLOWING_EXPAND_FAIL';\n\nexport const RELATIONSHIPS_FETCH_REQUEST = 'RELATIONSHIPS_FETCH_REQUEST';\nexport const RELATIONSHIPS_FETCH_SUCCESS = 'RELATIONSHIPS_FETCH_SUCCESS';\nexport const RELATIONSHIPS_FETCH_FAIL    = 'RELATIONSHIPS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_FETCH_REQUEST = 'FOLLOW_REQUESTS_FETCH_REQUEST';\nexport const FOLLOW_REQUESTS_FETCH_SUCCESS = 'FOLLOW_REQUESTS_FETCH_SUCCESS';\nexport const FOLLOW_REQUESTS_FETCH_FAIL    = 'FOLLOW_REQUESTS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_EXPAND_REQUEST = 'FOLLOW_REQUESTS_EXPAND_REQUEST';\nexport const FOLLOW_REQUESTS_EXPAND_SUCCESS = 'FOLLOW_REQUESTS_EXPAND_SUCCESS';\nexport const FOLLOW_REQUESTS_EXPAND_FAIL    = 'FOLLOW_REQUESTS_EXPAND_FAIL';\n\nexport const FOLLOW_REQUEST_AUTHORIZE_REQUEST = 'FOLLOW_REQUEST_AUTHORIZE_REQUEST';\nexport const FOLLOW_REQUEST_AUTHORIZE_SUCCESS = 'FOLLOW_REQUEST_AUTHORIZE_SUCCESS';\nexport const FOLLOW_REQUEST_AUTHORIZE_FAIL    = 'FOLLOW_REQUEST_AUTHORIZE_FAIL';\n\nexport const FOLLOW_REQUEST_REJECT_REQUEST = 'FOLLOW_REQUEST_REJECT_REQUEST';\nexport const FOLLOW_REQUEST_REJECT_SUCCESS = 'FOLLOW_REQUEST_REJECT_SUCCESS';\nexport const FOLLOW_REQUEST_REJECT_FAIL    = 'FOLLOW_REQUEST_REJECT_FAIL';\n\nexport const PINNED_ACCOUNTS_FETCH_REQUEST = 'PINNED_ACCOUNTS_FETCH_REQUEST';\nexport const PINNED_ACCOUNTS_FETCH_SUCCESS = 'PINNED_ACCOUNTS_FETCH_SUCCESS';\nexport const PINNED_ACCOUNTS_FETCH_FAIL    = 'PINNED_ACCOUNTS_FETCH_FAIL';\n\nexport const PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST  = 'PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST';\nexport const PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS  = 'PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS';\nexport const PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL     = 'PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL';\n\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR  = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR';\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE';\n\nexport const PINNED_ACCOUNTS_EDITOR_RESET = 'PINNED_ACCOUNTS_EDITOR_RESET';\n\n\nexport const ACCOUNT_REVEAL = 'ACCOUNT_REVEAL';\n\nexport function fetchAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchRelationships([id]));\n\n    if (getState().getIn(['accounts', id], null) !== null) {\n      return;\n    }\n\n    dispatch(fetchAccountRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}`).then(response => {\n      dispatch(importFetchedAccount(response.data));\n    }).then(() => {\n      dispatch(fetchAccountSuccess());\n    }).catch(error => {\n      dispatch(fetchAccountFail(id, error));\n    });\n  };\n}\n\nexport const lookupAccount = acct => (dispatch, getState) => {\n  dispatch(lookupAccountRequest(acct));\n\n  api(getState).get('/api/v1/accounts/lookup', { params: { acct } }).then(response => {\n    dispatch(fetchRelationships([response.data.id]));\n    dispatch(importFetchedAccount(response.data));\n    dispatch(lookupAccountSuccess());\n  }).catch(error => {\n    dispatch(lookupAccountFail(acct, error));\n  });\n};\n\nexport const lookupAccountRequest = (acct) => ({\n  type: ACCOUNT_LOOKUP_REQUEST,\n  acct,\n});\n\nexport const lookupAccountSuccess = () => ({\n  type: ACCOUNT_LOOKUP_SUCCESS,\n});\n\nexport const lookupAccountFail = (acct, error) => ({\n  type: ACCOUNT_LOOKUP_FAIL,\n  acct,\n  error,\n  skipAlert: true,\n});\n\nexport function fetchAccountRequest(id) {\n  return {\n    type: ACCOUNT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchAccountSuccess() {\n  return {\n    type: ACCOUNT_FETCH_SUCCESS,\n  };\n}\n\nexport function fetchAccountFail(id, error) {\n  return {\n    type: ACCOUNT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function followAccount(id, options = { reblogs: true }) {\n  return (dispatch, getState) => {\n    const alreadyFollowing = getState().getIn(['relationships', id, 'following']);\n    const locked = getState().getIn(['accounts', id, 'locked'], false);\n\n    dispatch(followAccountRequest(id, locked));\n\n    api(getState).post(`/api/v1/accounts/${id}/follow`, options).then(response => {\n      dispatch(followAccountSuccess(response.data, alreadyFollowing));\n    }).catch(error => {\n      dispatch(followAccountFail(error, locked));\n    });\n  };\n}\n\nexport function unfollowAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unfollowAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unfollow`).then(response => {\n      dispatch(unfollowAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(unfollowAccountFail(error));\n    });\n  };\n}\n\nexport function followAccountRequest(id, locked) {\n  return {\n    type: ACCOUNT_FOLLOW_REQUEST,\n    id,\n    locked,\n    skipLoading: true,\n  };\n}\n\nexport function followAccountSuccess(relationship, alreadyFollowing) {\n  return {\n    type: ACCOUNT_FOLLOW_SUCCESS,\n    relationship,\n    alreadyFollowing,\n    skipLoading: true,\n  };\n}\n\nexport function followAccountFail(error, locked) {\n  return {\n    type: ACCOUNT_FOLLOW_FAIL,\n    error,\n    locked,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNFOLLOW_REQUEST,\n    id,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_UNFOLLOW_SUCCESS,\n    relationship,\n    statuses,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountFail(error) {\n  return {\n    type: ACCOUNT_UNFOLLOW_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function blockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(blockAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/block`).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(blockAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(blockAccountFail(id, error));\n    });\n  };\n}\n\nexport function unblockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unblockAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unblock`).then(response => {\n      dispatch(unblockAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unblockAccountFail(id, error));\n    });\n  };\n}\n\nexport function blockAccountRequest(id) {\n  return {\n    type: ACCOUNT_BLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function blockAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_BLOCK_SUCCESS,\n    relationship,\n    statuses,\n  };\n}\n\nexport function blockAccountFail(error) {\n  return {\n    type: ACCOUNT_BLOCK_FAIL,\n    error,\n  };\n}\n\nexport function unblockAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNBLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function unblockAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNBLOCK_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unblockAccountFail(error) {\n  return {\n    type: ACCOUNT_UNBLOCK_FAIL,\n    error,\n  };\n}\n\n\nexport function muteAccount(id, notifications, duration=0) {\n  return (dispatch, getState) => {\n    dispatch(muteAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/mute`, { notifications, duration }).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(muteAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(muteAccountFail(id, error));\n    });\n  };\n}\n\nexport function unmuteAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unmuteAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unmute`).then(response => {\n      dispatch(unmuteAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unmuteAccountFail(id, error));\n    });\n  };\n}\n\nexport function muteAccountRequest(id) {\n  return {\n    type: ACCOUNT_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_MUTE_SUCCESS,\n    relationship,\n    statuses,\n  };\n}\n\nexport function muteAccountFail(error) {\n  return {\n    type: ACCOUNT_MUTE_FAIL,\n    error,\n  };\n}\n\nexport function unmuteAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNMUTE_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unmuteAccountFail(error) {\n  return {\n    type: ACCOUNT_UNMUTE_FAIL,\n    error,\n  };\n}\n\n\nexport function fetchFollowers(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowersRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}/followers`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowersFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowers(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'followers', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowersRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowersFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFollowing(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowingRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}/following`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowingFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowingRequest(id) {\n  return {\n    type: FOLLOWING_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowing(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'following', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowingRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowingFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowingRequest(id) {\n  return {\n    type: FOLLOWING_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchRelationships(accountIds) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const loadedRelationships = state.get('relationships');\n    const newAccountIds = accountIds.filter(id => loadedRelationships.get(id, null) === null);\n    const signedIn = !!state.getIn(['meta', 'me']);\n\n    if (!signedIn || newAccountIds.length === 0) {\n      return;\n    }\n\n    dispatch(fetchRelationshipsRequest(newAccountIds));\n\n    api(getState).get(`/api/v1/accounts/relationships?${newAccountIds.map(id => `id[]=${id}`).join('&')}`).then(response => {\n      dispatch(fetchRelationshipsSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchRelationshipsFail(error));\n    });\n  };\n}\n\nexport function fetchRelationshipsRequest(ids) {\n  return {\n    type: RELATIONSHIPS_FETCH_REQUEST,\n    ids,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsSuccess(relationships) {\n  return {\n    type: RELATIONSHIPS_FETCH_SUCCESS,\n    relationships,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsFail(error) {\n  return {\n    type: RELATIONSHIPS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipNotFound: true,\n  };\n}\n\nexport function fetchFollowRequests() {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowRequestsRequest());\n\n    api(getState).get('/api/v1/follow_requests').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(fetchFollowRequestsFail(error)));\n  };\n}\n\nexport function fetchFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowRequests() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'follow_requests', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowRequestsRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(expandFollowRequestsFail(error)));\n  };\n}\n\nexport function expandFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function authorizeFollowRequest(id) {\n  return (dispatch, getState) => {\n    dispatch(authorizeFollowRequestRequest(id));\n\n    api(getState)\n      .post(`/api/v1/follow_requests/${id}/authorize`)\n      .then(() => dispatch(authorizeFollowRequestSuccess(id)))\n      .catch(error => dispatch(authorizeFollowRequestFail(id, error)));\n  };\n}\n\nexport function authorizeFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_REQUEST,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestSuccess(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_SUCCESS,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_FAIL,\n    id,\n    error,\n  };\n}\n\n\nexport function rejectFollowRequest(id) {\n  return (dispatch, getState) => {\n    dispatch(rejectFollowRequestRequest(id));\n\n    api(getState)\n      .post(`/api/v1/follow_requests/${id}/reject`)\n      .then(() => dispatch(rejectFollowRequestSuccess(id)))\n      .catch(error => dispatch(rejectFollowRequestFail(id, error)));\n  };\n}\n\nexport function rejectFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_REQUEST,\n    id,\n  };\n}\n\nexport function rejectFollowRequestSuccess(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_SUCCESS,\n    id,\n  };\n}\n\nexport function rejectFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pinAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(pinAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/pin`).then(response => {\n      dispatch(pinAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(pinAccountFail(error));\n    });\n  };\n}\n\nexport function unpinAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unpinAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unpin`).then(response => {\n      dispatch(unpinAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unpinAccountFail(error));\n    });\n  };\n}\n\nexport function pinAccountRequest(id) {\n  return {\n    type: ACCOUNT_PIN_REQUEST,\n    id,\n  };\n}\n\nexport function pinAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_PIN_SUCCESS,\n    relationship,\n  };\n}\n\nexport function pinAccountFail(error) {\n  return {\n    type: ACCOUNT_PIN_FAIL,\n    error,\n  };\n}\n\nexport function unpinAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNPIN_REQUEST,\n    id,\n  };\n}\n\nexport function unpinAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNPIN_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unpinAccountFail(error) {\n  return {\n    type: ACCOUNT_UNPIN_FAIL,\n    error,\n  };\n}\n\nexport const revealAccount = id => ({\n  type: ACCOUNT_REVEAL,\n  id,\n});\n\nexport function fetchPinnedAccounts() {\n  return (dispatch, getState) => {\n    dispatch(fetchPinnedAccountsRequest());\n\n    api(getState).get('/api/v1/endorsements', { params: { limit: 0 } }).then(response => {\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchPinnedAccountsSuccess(response.data));\n    }).catch(err => dispatch(fetchPinnedAccountsFail(err)));\n  };\n}\n\nexport function fetchPinnedAccountsRequest() {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedAccountsSuccess(accounts, next) {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchPinnedAccountsFail(error) {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function fetchPinnedAccountsSuggestions(q) {\n  return (dispatch, getState) => {\n    dispatch(fetchPinnedAccountsSuggestionsRequest());\n\n    const params = {\n      q,\n      resolve: false,\n      limit: 4,\n      following: true,\n    };\n\n    api(getState).get('/api/v1/accounts/search', { params }).then(response => {\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchPinnedAccountsSuggestionsSuccess(q, response.data));\n    }).catch(err => dispatch(fetchPinnedAccountsSuggestionsFail(err)));\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsRequest() {\n  return {\n    type: PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsSuccess(query, accounts) {\n  return {\n    type: PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS,\n    query,\n    accounts,\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsFail(error) {\n  return {\n    type: PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function clearPinnedAccountsSuggestions() {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR,\n  };\n}\n\nexport function changePinnedAccountsSuggestions(value) {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE,\n    value,\n  };\n}\n\nexport function resetPinnedAccountsEditor() {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_RESET,\n  };\n}\n\n","import EXIF from 'exif-js';\n\nconst MAX_IMAGE_PIXELS = 2073600; // 1920x1080px\n\nconst _browser_quirks = {};\n\n// Some browsers will automatically draw images respecting their EXIF orientation\n// while others won't, and the safest way to detect that is to examine how it\n// is done on a known image.\n// See https://github.com/w3c/csswg-drafts/issues/4666\n// and https://github.com/blueimp/JavaScript-Load-Image/commit/1e4df707821a0afcc11ea0720ee403b8759f3881\nconst dropOrientationIfNeeded = (orientation) => new Promise(resolve => {\n  switch (_browser_quirks['image-orientation-automatic']) {\n  case true:\n    resolve(1);\n    break;\n  case false:\n    resolve(orientation);\n    break;\n  default:\n    // black 2x1 JPEG, with the following meta information set:\n    // - EXIF Orientation: 6 (Rotated 90 CCW)\n    const testImageURL =\n      'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n      'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n      'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n      'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\n      'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\n      'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\n    const img = new Image();\n    img.onload = () => {\n      const automatic = (img.width === 1 && img.height === 2);\n      _browser_quirks['image-orientation-automatic'] = automatic;\n      resolve(automatic ? 1 : orientation);\n    };\n    img.onerror = () => {\n      _browser_quirks['image-orientation-automatic'] = false;\n      resolve(orientation);\n    };\n    img.src = testImageURL;\n  }\n});\n\n// Some browsers don't allow reading from a canvas and instead return all-white\n// or randomized data. Use a pre-defined image to check if reading the canvas\n// works.\nconst checkCanvasReliability = () => new Promise((resolve, reject) => {\n  switch(_browser_quirks['canvas-read-unreliable']) {\n  case true:\n    reject('Canvas reading unreliable');\n    break;\n  case false:\n    resolve();\n    break;\n  default:\n    // 22 GIF with white, red, green and blue pixels\n    const testImageURL =\n      'data:image/gif;base64,R0lGODdhAgACAKEDAAAA//8AAAD/AP///ywAAAAAAgACAAACA1wEBQA7';\n    const refData =\n      [255, 255, 255, 255,  255, 0, 0, 255,  0, 255, 0, 255,  0, 0, 255, 255];\n    const img = new Image();\n    img.onload = () => {\n      const canvas  = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      context.drawImage(img, 0, 0, 2, 2);\n      const imageData = context.getImageData(0, 0, 2, 2);\n      if (imageData.data.every((x, i) => refData[i] === x)) {\n        _browser_quirks['canvas-read-unreliable'] = false;\n        resolve();\n      } else {\n        _browser_quirks['canvas-read-unreliable'] = true;\n        reject('Canvas reading unreliable');\n      }\n    };\n    img.onerror = () => {\n      _browser_quirks['canvas-read-unreliable'] = true;\n      reject('Failed to load test image');\n    };\n    img.src = testImageURL;\n  }\n});\n\nconst getImageUrl = inputFile => new Promise((resolve, reject) => {\n  if (window.URL && URL.createObjectURL) {\n    try {\n      resolve(URL.createObjectURL(inputFile));\n    } catch (error) {\n      reject(error);\n    }\n    return;\n  }\n\n  const reader = new FileReader();\n  reader.onerror = (...args) => reject(...args);\n  reader.onload  = ({ target }) => resolve(target.result);\n\n  reader.readAsDataURL(inputFile);\n});\n\nconst loadImage = inputFile => new Promise((resolve, reject) => {\n  getImageUrl(inputFile).then(url => {\n    const img = new Image();\n\n    img.onerror = (...args) => reject(...args);\n    img.onload  = () => resolve(img);\n\n    img.src = url;\n  }).catch(reject);\n});\n\nconst getOrientation = (img, type = 'image/png') => new Promise(resolve => {\n  if (!['image/jpeg', 'image/webp'].includes(type)) {\n    resolve(1);\n    return;\n  }\n\n  EXIF.getData(img, () => {\n    const orientation = EXIF.getTag(img, 'Orientation');\n    if (orientation !== 1) {\n      dropOrientationIfNeeded(orientation).then(resolve).catch(() => resolve(orientation));\n    } else {\n      resolve(orientation);\n    }\n  });\n});\n\nconst processImage = (img, { width, height, orientation, type = 'image/png' }) => new Promise(resolve => {\n  const canvas  = document.createElement('canvas');\n\n  if (4 < orientation && orientation < 9) {\n    canvas.width  = height;\n    canvas.height = width;\n  } else {\n    canvas.width  = width;\n    canvas.height = height;\n  }\n\n  const context = canvas.getContext('2d');\n\n  switch (orientation) {\n  case 2: context.transform(-1, 0, 0, 1, width, 0); break;\n  case 3: context.transform(-1, 0, 0, -1, width, height); break;\n  case 4: context.transform(1, 0, 0, -1, 0, height); break;\n  case 5: context.transform(0, 1, 1, 0, 0, 0); break;\n  case 6: context.transform(0, 1, -1, 0, height, 0); break;\n  case 7: context.transform(0, -1, -1, 0, height, width); break;\n  case 8: context.transform(0, -1, 1, 0, 0, width); break;\n  }\n\n  context.drawImage(img, 0, 0, width, height);\n\n  canvas.toBlob(resolve, type);\n});\n\nconst resizeImage = (img, type = 'image/png') => new Promise((resolve, reject) => {\n  const { width, height } = img;\n\n  const newWidth  = Math.round(Math.sqrt(MAX_IMAGE_PIXELS * (width / height)));\n  const newHeight = Math.round(Math.sqrt(MAX_IMAGE_PIXELS * (height / width)));\n\n  checkCanvasReliability()\n    .then(getOrientation(img, type))\n    .then(orientation => processImage(img, {\n      width: newWidth,\n      height: newHeight,\n      orientation,\n      type,\n    }))\n    .then(resolve)\n    .catch(reject);\n});\n\nconst resizeFile = (inputFile) => new Promise((resolve) => {\n  if (!inputFile.type.match(/image.*/) || inputFile.type === 'image/gif') {\n    resolve(inputFile);\n    return;\n  }\n\n  loadImage(inputFile).then(img => {\n    if (img.width * img.height < MAX_IMAGE_PIXELS) {\n      resolve(inputFile);\n      return;\n    }\n\n    resizeImage(img, inputFile.type)\n      .then(resolve)\n      .catch(() => resolve(inputFile));\n  }).catch(() => resolve(inputFile));\n});\n\nexport default resizeFile;\n","import { defineMessages } from 'react-intl';\n\nimport axios from 'axios';\nimport { throttle } from 'lodash';\n\nimport api from 'flavours/glitch/api';\nimport { search as emojiSearch } from 'flavours/glitch/features/emoji/emoji_mart_search_light';\nimport { tagHistory } from 'flavours/glitch/settings';\nimport { recoverHashtags } from 'flavours/glitch/utils/hashtag';\nimport resizeImage from 'flavours/glitch/utils/resize_image';\n\nimport { showAlert, showAlertForError } from './alerts';\nimport { useEmoji } from './emojis';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { openModal } from './modal';\nimport { updateTimeline } from './timelines';\n\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsAccountsController;\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsTagsController;\n\nexport const COMPOSE_CHANGE          = 'COMPOSE_CHANGE';\nexport const COMPOSE_CYCLE_ELEFRIEND = 'COMPOSE_CYCLE_ELEFRIEND';\nexport const COMPOSE_SUBMIT_REQUEST  = 'COMPOSE_SUBMIT_REQUEST';\nexport const COMPOSE_SUBMIT_SUCCESS  = 'COMPOSE_SUBMIT_SUCCESS';\nexport const COMPOSE_SUBMIT_FAIL     = 'COMPOSE_SUBMIT_FAIL';\nexport const COMPOSE_REPLY           = 'COMPOSE_REPLY';\nexport const COMPOSE_REPLY_CANCEL    = 'COMPOSE_REPLY_CANCEL';\nexport const COMPOSE_DIRECT          = 'COMPOSE_DIRECT';\nexport const COMPOSE_MENTION         = 'COMPOSE_MENTION';\nexport const COMPOSE_RESET           = 'COMPOSE_RESET';\n\nexport const COMPOSE_UPLOAD_REQUEST    = 'COMPOSE_UPLOAD_REQUEST';\nexport const COMPOSE_UPLOAD_SUCCESS    = 'COMPOSE_UPLOAD_SUCCESS';\nexport const COMPOSE_UPLOAD_FAIL       = 'COMPOSE_UPLOAD_FAIL';\nexport const COMPOSE_UPLOAD_PROGRESS   = 'COMPOSE_UPLOAD_PROGRESS';\nexport const COMPOSE_UPLOAD_PROCESSING = 'COMPOSE_UPLOAD_PROCESSING';\nexport const COMPOSE_UPLOAD_UNDO       = 'COMPOSE_UPLOAD_UNDO';\n\nexport const THUMBNAIL_UPLOAD_REQUEST  = 'THUMBNAIL_UPLOAD_REQUEST';\nexport const THUMBNAIL_UPLOAD_SUCCESS  = 'THUMBNAIL_UPLOAD_SUCCESS';\nexport const THUMBNAIL_UPLOAD_FAIL     = 'THUMBNAIL_UPLOAD_FAIL';\nexport const THUMBNAIL_UPLOAD_PROGRESS = 'THUMBNAIL_UPLOAD_PROGRESS';\n\nexport const COMPOSE_SUGGESTIONS_CLEAR = 'COMPOSE_SUGGESTIONS_CLEAR';\nexport const COMPOSE_SUGGESTIONS_READY = 'COMPOSE_SUGGESTIONS_READY';\nexport const COMPOSE_SUGGESTION_SELECT = 'COMPOSE_SUGGESTION_SELECT';\nexport const COMPOSE_SUGGESTION_IGNORE = 'COMPOSE_SUGGESTION_IGNORE';\nexport const COMPOSE_SUGGESTION_TAGS_UPDATE = 'COMPOSE_SUGGESTION_TAGS_UPDATE';\n\nexport const COMPOSE_TAG_HISTORY_UPDATE = 'COMPOSE_TAG_HISTORY_UPDATE';\n\nexport const COMPOSE_MOUNT   = 'COMPOSE_MOUNT';\nexport const COMPOSE_UNMOUNT = 'COMPOSE_UNMOUNT';\n\nexport const COMPOSE_ADVANCED_OPTIONS_CHANGE = 'COMPOSE_ADVANCED_OPTIONS_CHANGE';\nexport const COMPOSE_SENSITIVITY_CHANGE  = 'COMPOSE_SENSITIVITY_CHANGE';\nexport const COMPOSE_SPOILERNESS_CHANGE  = 'COMPOSE_SPOILERNESS_CHANGE';\nexport const COMPOSE_SPOILER_TEXT_CHANGE = 'COMPOSE_SPOILER_TEXT_CHANGE';\nexport const COMPOSE_VISIBILITY_CHANGE   = 'COMPOSE_VISIBILITY_CHANGE';\nexport const COMPOSE_LISTABILITY_CHANGE  = 'COMPOSE_LISTABILITY_CHANGE';\nexport const COMPOSE_CONTENT_TYPE_CHANGE = 'COMPOSE_CONTENT_TYPE_CHANGE';\nexport const COMPOSE_LANGUAGE_CHANGE     = 'COMPOSE_LANGUAGE_CHANGE';\n\nexport const COMPOSE_EMOJI_INSERT = 'COMPOSE_EMOJI_INSERT';\n\nexport const COMPOSE_UPLOAD_CHANGE_REQUEST     = 'COMPOSE_UPLOAD_UPDATE_REQUEST';\nexport const COMPOSE_UPLOAD_CHANGE_SUCCESS     = 'COMPOSE_UPLOAD_UPDATE_SUCCESS';\nexport const COMPOSE_UPLOAD_CHANGE_FAIL        = 'COMPOSE_UPLOAD_UPDATE_FAIL';\n\nexport const COMPOSE_DOODLE_SET        = 'COMPOSE_DOODLE_SET';\n\nexport const COMPOSE_POLL_ADD             = 'COMPOSE_POLL_ADD';\nexport const COMPOSE_POLL_REMOVE          = 'COMPOSE_POLL_REMOVE';\nexport const COMPOSE_POLL_OPTION_ADD      = 'COMPOSE_POLL_OPTION_ADD';\nexport const COMPOSE_POLL_OPTION_CHANGE   = 'COMPOSE_POLL_OPTION_CHANGE';\nexport const COMPOSE_POLL_OPTION_REMOVE   = 'COMPOSE_POLL_OPTION_REMOVE';\nexport const COMPOSE_POLL_SETTINGS_CHANGE = 'COMPOSE_POLL_SETTINGS_CHANGE';\n\nexport const INIT_MEDIA_EDIT_MODAL = 'INIT_MEDIA_EDIT_MODAL';\n\nexport const COMPOSE_CHANGE_MEDIA_DESCRIPTION = 'COMPOSE_CHANGE_MEDIA_DESCRIPTION';\nexport const COMPOSE_CHANGE_MEDIA_FOCUS       = 'COMPOSE_CHANGE_MEDIA_FOCUS';\n\nexport const COMPOSE_SET_STATUS = 'COMPOSE_SET_STATUS';\n\nconst messages = defineMessages({\n  uploadErrorLimit: { id: 'upload_error.limit', defaultMessage: 'File upload limit exceeded.' },\n  uploadErrorPoll:  { id: 'upload_error.poll', defaultMessage: 'File upload not allowed with polls.' },\n});\n\nexport const ensureComposeIsVisible = (getState, routerHistory) => {\n  if (!getState().getIn(['compose', 'mounted'])) {\n    routerHistory.push('/publish');\n  }\n};\n\nexport function setComposeToStatus(status, text, spoiler_text, content_type) {\n  return{\n    type: COMPOSE_SET_STATUS,\n    status,\n    text,\n    spoiler_text,\n    content_type,\n  };\n}\n\nexport function changeCompose(text) {\n  return {\n    type: COMPOSE_CHANGE,\n    text: text,\n  };\n}\n\nexport function cycleElefriendCompose() {\n  return {\n    type: COMPOSE_CYCLE_ELEFRIEND,\n  };\n}\n\nexport function replyCompose(status, routerHistory) {\n  return (dispatch, getState) => {\n    const prependCWRe = getState().getIn(['local_settings', 'prepend_cw_re']);\n    dispatch({\n      type: COMPOSE_REPLY,\n      status: status,\n      prependCWRe: prependCWRe,\n    });\n\n    ensureComposeIsVisible(getState, routerHistory);\n  };\n}\n\nexport function cancelReplyCompose() {\n  return {\n    type: COMPOSE_REPLY_CANCEL,\n  };\n}\n\nexport function resetCompose() {\n  return {\n    type: COMPOSE_RESET,\n  };\n}\n\nexport function mentionCompose(account, routerHistory) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_MENTION,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState, routerHistory);\n  };\n}\n\nexport function directCompose(account, routerHistory) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_DIRECT,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState, routerHistory);\n  };\n}\n\nexport function submitCompose(routerHistory) {\n  return function (dispatch, getState) {\n    let status     = getState().getIn(['compose', 'text'], '');\n    const media    = getState().getIn(['compose', 'media_attachments']);\n    const statusId = getState().getIn(['compose', 'id'], null);\n    const spoilers = getState().getIn(['compose', 'spoiler']) || getState().getIn(['local_settings', 'always_show_spoilers_field']);\n    let spoilerText = spoilers ? getState().getIn(['compose', 'spoiler_text'], '') : '';\n\n    if ((!status || !status.length) && media.size === 0) {\n      return;\n    }\n\n    if (getState().getIn(['compose', 'advanced_options', 'do_not_federate'])) {\n      status = status + ' ';\n    }\n\n    dispatch(submitComposeRequest());\n\n    // If we're editing a post with media attachments, those have not\n    // necessarily been changed on the server. Do it now in the same\n    // API call.\n    let media_attributes;\n    if (statusId !== null) {\n      media_attributes = media.map(item => {\n        let focus;\n\n        if (item.getIn(['meta', 'focus'])) {\n          focus = `${item.getIn(['meta', 'focus', 'x']).toFixed(2)},${item.getIn(['meta', 'focus', 'y']).toFixed(2)}`;\n        }\n\n        return {\n          id: item.get('id'),\n          description: item.get('description'),\n          focus,\n        };\n      });\n    }\n\n    api(getState).request({\n      url: statusId === null ? '/api/v1/statuses' : `/api/v1/statuses/${statusId}`,\n      method: statusId === null ? 'post' : 'put',\n      data: {\n        status,\n        content_type: getState().getIn(['compose', 'content_type']),\n        in_reply_to_id: getState().getIn(['compose', 'in_reply_to'], null),\n        media_ids: media.map(item => item.get('id')),\n        media_attributes,\n        sensitive: getState().getIn(['compose', 'sensitive']) || (spoilerText.length > 0 && media.size !== 0),\n        spoiler_text: spoilerText,\n        visibility: getState().getIn(['compose', 'privacy']),\n        poll: getState().getIn(['compose', 'poll'], null),\n        language: getState().getIn(['compose', 'language']),\n      },\n      headers: {\n        'Idempotency-Key': getState().getIn(['compose', 'idempotencyKey']),\n      },\n    }).then(function (response) {\n      if (routerHistory\n          && (routerHistory.location.pathname === '/publish' || routerHistory.location.pathname === '/statuses/new')\n          && window.history.state\n          && !getState().getIn(['compose', 'advanced_options', 'threaded_mode'])) {\n        routerHistory.goBack();\n      }\n\n      dispatch(insertIntoTagHistory(response.data.tags, status));\n      dispatch(submitComposeSuccess({ ...response.data }));\n\n      //  If the response has no data then we can't do anything else.\n      if (!response.data) {\n        return;\n      }\n\n      // To make the app more responsive, immediately get the status into the columns\n\n      const insertIfOnline = (timelineId) => {\n        const timeline = getState().getIn(['timelines', timelineId]);\n\n        if (timeline && timeline.get('items').size > 0 && timeline.getIn(['items', 0]) !== null && timeline.get('online')) {\n          dispatch(updateTimeline(timelineId, { ...response.data }));\n        }\n      };\n\n      if (statusId) {\n        dispatch(importFetchedStatus({ ...response.data }));\n      }\n\n      if (statusId === null) {\n        insertIfOnline('home');\n      }\n\n      if (statusId === null && response.data.in_reply_to_id === null && response.data.visibility === 'public') {\n        insertIfOnline('community');\n        if (!response.data.local_only) {\n          insertIfOnline('public');\n        }\n      } else if (statusId === null && response.data.visibility === 'direct') {\n        insertIfOnline('direct');\n      }\n    }).catch(function (error) {\n      dispatch(submitComposeFail(error));\n    });\n  };\n}\n\nexport function submitComposeRequest() {\n  return {\n    type: COMPOSE_SUBMIT_REQUEST,\n  };\n}\n\nexport function submitComposeSuccess(status) {\n  return {\n    type: COMPOSE_SUBMIT_SUCCESS,\n    status: status,\n  };\n}\n\nexport function submitComposeFail(error) {\n  return {\n    type: COMPOSE_SUBMIT_FAIL,\n    error: error,\n  };\n}\n\nexport function doodleSet(options) {\n  return {\n    type: COMPOSE_DOODLE_SET,\n    options: options,\n  };\n}\n\nexport function uploadCompose(files) {\n  return function (dispatch, getState) {\n    const uploadLimit = 4;\n    const media  = getState().getIn(['compose', 'media_attachments']);\n    const pending  = getState().getIn(['compose', 'pending_media_attachments']);\n    const progress = new Array(files.length).fill(0);\n    let total = Array.from(files).reduce((a, v) => a + v.size, 0);\n\n    if (files.length + media.size + pending > uploadLimit) {\n      dispatch(showAlert(undefined, messages.uploadErrorLimit));\n      return;\n    }\n\n    if (getState().getIn(['compose', 'poll'])) {\n      dispatch(showAlert(undefined, messages.uploadErrorPoll));\n      return;\n    }\n\n    dispatch(uploadComposeRequest());\n\n    for (const [i, f] of Array.from(files).entries()) {\n      if (media.size + i > 3) break;\n\n      resizeImage(f).then(file => {\n        const data = new FormData();\n        data.append('file', file);\n        // Account for disparity in size of original image and resized data\n        total += file.size - f.size;\n\n        return api(getState).post('/api/v2/media', data, {\n          onUploadProgress: function({ loaded }){\n            progress[i] = loaded;\n            dispatch(uploadComposeProgress(progress.reduce((a, v) => a + v, 0), total));\n          },\n        }).then(({ status, data }) => {\n          // If server-side processing of the media attachment has not completed yet,\n          // poll the server until it is, before showing the media attachment as uploaded\n\n          if (status === 200) {\n            dispatch(uploadComposeSuccess(data, f));\n          } else if (status === 202) {\n            dispatch(uploadComposeProcessing());\n\n            let tryCount = 1;\n\n            const poll = () => {\n              api(getState).get(`/api/v1/media/${data.id}`).then(response => {\n                if (response.status === 200) {\n                  dispatch(uploadComposeSuccess(response.data, f));\n                } else if (response.status === 206) {\n                  const retryAfter = (Math.log2(tryCount) || 1) * 1000;\n                  tryCount += 1;\n                  setTimeout(() => poll(), retryAfter);\n                }\n              }).catch(error => dispatch(uploadComposeFail(error)));\n            };\n\n            poll();\n          }\n        });\n      }).catch(error => dispatch(uploadComposeFail(error)));\n    }\n  };\n}\n\nexport const uploadComposeProcessing = () => ({\n  type: COMPOSE_UPLOAD_PROCESSING,\n});\n\nexport const uploadThumbnail = (id, file) => (dispatch, getState) => {\n  dispatch(uploadThumbnailRequest());\n\n  const total = file.size;\n  const data = new FormData();\n\n  data.append('thumbnail', file);\n\n  api(getState).put(`/api/v1/media/${id}`, data, {\n    onUploadProgress: ({ loaded }) => {\n      dispatch(uploadThumbnailProgress(loaded, total));\n    },\n  }).then(({ data }) => {\n    dispatch(uploadThumbnailSuccess(data));\n  }).catch(error => {\n    dispatch(uploadThumbnailFail(id, error));\n  });\n};\n\nexport const uploadThumbnailRequest = () => ({\n  type: THUMBNAIL_UPLOAD_REQUEST,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailProgress = (loaded, total) => ({\n  type: THUMBNAIL_UPLOAD_PROGRESS,\n  loaded,\n  total,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailSuccess = media => ({\n  type: THUMBNAIL_UPLOAD_SUCCESS,\n  media,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailFail = error => ({\n  type: THUMBNAIL_UPLOAD_FAIL,\n  error,\n  skipLoading: true,\n});\n\nexport function initMediaEditModal(id) {\n  return dispatch => {\n    dispatch({\n      type: INIT_MEDIA_EDIT_MODAL,\n      id,\n    });\n\n    dispatch(openModal({\n      modalType: 'FOCAL_POINT',\n      modalProps: { id },\n    }));\n  };\n}\n\nexport function onChangeMediaDescription(description) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n    description,\n  };\n}\n\nexport function onChangeMediaFocus(focusX, focusY) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_FOCUS,\n    focusX,\n    focusY,\n  };\n}\n\nexport function changeUploadCompose(id, params) {\n  return (dispatch, getState) => {\n    dispatch(changeUploadComposeRequest());\n\n    let media = getState().getIn(['compose', 'media_attachments']).find((item) => item.get('id') === id);\n\n    // Editing already-attached media is deferred to editing the post itself.\n    // For simplicity's sake, fake an API reply.\n    if (media && !media.get('unattached')) {\n      const { focus, ...other } = params;\n      const data = { ...media.toJS(), ...other };\n\n      if (focus) {\n        const [x, y] = focus.split(',');\n        data.meta = { focus: { x: parseFloat(x), y: parseFloat(y) } };\n      }\n\n      dispatch(changeUploadComposeSuccess(data, true));\n    } else {\n      api(getState).put(`/api/v1/media/${id}`, params).then(response => {\n        dispatch(changeUploadComposeSuccess(response.data, false));\n      }).catch(error => {\n        dispatch(changeUploadComposeFail(id, error));\n      });\n    }\n  };\n}\n\nexport function changeUploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeSuccess(media, attached) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_SUCCESS,\n    media: media,\n    attached: attached,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeProgress(loaded, total) {\n  return {\n    type: COMPOSE_UPLOAD_PROGRESS,\n    loaded: loaded,\n    total: total,\n  };\n}\n\nexport function uploadComposeSuccess(media, file) {\n  return {\n    type: COMPOSE_UPLOAD_SUCCESS,\n    media: media,\n    file: file,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function undoUploadCompose(media_id) {\n  return {\n    type: COMPOSE_UPLOAD_UNDO,\n    media_id: media_id,\n  };\n}\n\nexport function clearComposeSuggestions() {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n  return {\n    type: COMPOSE_SUGGESTIONS_CLEAR,\n  };\n}\n\nconst fetchComposeSuggestionsAccounts = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n\n  fetchComposeSuggestionsAccountsController = new AbortController();\n\n  api(getState).get('/api/v1/accounts/search', {\n    signal: fetchComposeSuggestionsAccountsController.signal,\n\n    params: {\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(response => {\n    dispatch(importFetchedAccounts(response.data));\n    dispatch(readyComposeSuggestionsAccounts(token, response.data));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsAccountsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nconst fetchComposeSuggestionsEmojis = (dispatch, getState, token) => {\n  const results = emojiSearch(token.replace(':', ''), { maxResults: 5 });\n  dispatch(readyComposeSuggestionsEmojis(token, results));\n};\n\nconst fetchComposeSuggestionsTags = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsTagsController) {\n    fetchComposeSuggestionsTagsController.abort();\n  }\n\n  dispatch(updateSuggestionTags(token));\n\n  fetchComposeSuggestionsTagsController = new AbortController();\n\n  api(getState).get('/api/v2/search', {\n    signal: fetchComposeSuggestionsTagsController.signal,\n\n    params: {\n      type: 'hashtags',\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(({ data }) => {\n    dispatch(readyComposeSuggestionsTags(token, data.hashtags));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsTagsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nexport function fetchComposeSuggestions(token) {\n  return (dispatch, getState) => {\n    switch (token[0]) {\n    case ':':\n      fetchComposeSuggestionsEmojis(dispatch, getState, token);\n      break;\n    case '#':\n      fetchComposeSuggestionsTags(dispatch, getState, token);\n      break;\n    default:\n      fetchComposeSuggestionsAccounts(dispatch, getState, token);\n      break;\n    }\n  };\n}\n\nexport function readyComposeSuggestionsEmojis(token, emojis) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    emojis,\n  };\n}\n\nexport function readyComposeSuggestionsAccounts(token, accounts) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    accounts,\n  };\n}\n\nexport const readyComposeSuggestionsTags = (token, tags) => ({\n  type: COMPOSE_SUGGESTIONS_READY,\n  token,\n  tags,\n});\n\nexport function selectComposeSuggestion(position, token, suggestion, path) {\n  return (dispatch, getState) => {\n    let completion;\n    if (suggestion.type === 'emoji') {\n      dispatch(useEmoji(suggestion));\n      completion = suggestion.native || suggestion.colons;\n    } else if (suggestion.type === 'hashtag') {\n      completion = `#${suggestion.name}`;\n    } else if (suggestion.type === 'account') {\n      completion = '@' + getState().getIn(['accounts', suggestion.id, 'acct']);\n    }\n\n    // We don't want to replace hashtags that vary only in case due to accessibility, but we need to fire off an event so that\n    // the suggestions are dismissed and the cursor moves forward.\n    if (suggestion.type !== 'hashtag' || token.slice(1).localeCompare(suggestion.name, undefined, { sensitivity: 'accent' }) !== 0) {\n      dispatch({\n        type: COMPOSE_SUGGESTION_SELECT,\n        position,\n        token,\n        completion,\n        path,\n      });\n    } else {\n      dispatch({\n        type: COMPOSE_SUGGESTION_IGNORE,\n        position,\n        token,\n        completion,\n        path,\n      });\n    }\n  };\n}\n\nexport function updateSuggestionTags(token) {\n  return {\n    type: COMPOSE_SUGGESTION_TAGS_UPDATE,\n    token,\n  };\n}\n\nexport function updateTagHistory(tags) {\n  return {\n    type: COMPOSE_TAG_HISTORY_UPDATE,\n    tags,\n  };\n}\n\nexport function hydrateCompose() {\n  return (dispatch, getState) => {\n    const me = getState().getIn(['meta', 'me']);\n    const history = tagHistory.get(me);\n\n    if (history !== null) {\n      dispatch(updateTagHistory(history));\n    }\n  };\n}\n\nfunction insertIntoTagHistory(recognizedTags, text) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const oldHistory = state.getIn(['compose', 'tagHistory']);\n    const me = state.getIn(['meta', 'me']);\n    const names = recoverHashtags(recognizedTags, text);\n    const intersectedOldHistory = oldHistory.filter(name => names.findIndex(newName => newName.toLowerCase() === name.toLowerCase()) === -1);\n\n    names.push(...intersectedOldHistory.toJS());\n\n    const newHistory = names.slice(0, 1000);\n\n    tagHistory.set(me, newHistory);\n    dispatch(updateTagHistory(newHistory));\n  };\n}\n\nexport function mountCompose() {\n  return {\n    type: COMPOSE_MOUNT,\n  };\n}\n\nexport function unmountCompose() {\n  return {\n    type: COMPOSE_UNMOUNT,\n  };\n}\n\nexport function changeComposeAdvancedOption(option, value) {\n  return {\n    option,\n    type: COMPOSE_ADVANCED_OPTIONS_CHANGE,\n    value,\n  };\n}\n\nexport function changeComposeSensitivity() {\n  return {\n    type: COMPOSE_SENSITIVITY_CHANGE,\n  };\n}\n\nexport const changeComposeLanguage = language => ({\n  type: COMPOSE_LANGUAGE_CHANGE,\n  language,\n});\n\nexport function changeComposeSpoilerness() {\n  return {\n    type: COMPOSE_SPOILERNESS_CHANGE,\n  };\n}\n\nexport function changeComposeSpoilerText(text) {\n  return {\n    type: COMPOSE_SPOILER_TEXT_CHANGE,\n    text,\n  };\n}\n\nexport function changeComposeVisibility(value) {\n  return {\n    type: COMPOSE_VISIBILITY_CHANGE,\n    value,\n  };\n}\n\nexport function changeComposeContentType(value) {\n  return {\n    type: COMPOSE_CONTENT_TYPE_CHANGE,\n    value,\n  };\n}\n\nexport function insertEmojiCompose(position, emoji) {\n  return {\n    type: COMPOSE_EMOJI_INSERT,\n    position,\n    emoji,\n  };\n}\n\nexport function addPoll() {\n  return {\n    type: COMPOSE_POLL_ADD,\n  };\n}\n\nexport function removePoll() {\n  return {\n    type: COMPOSE_POLL_REMOVE,\n  };\n}\n\nexport function addPollOption(title) {\n  return {\n    type: COMPOSE_POLL_OPTION_ADD,\n    title,\n  };\n}\n\nexport function changePollOption(index, title) {\n  return {\n    type: COMPOSE_POLL_OPTION_CHANGE,\n    index,\n    title,\n  };\n}\n\nexport function removePollOption(index) {\n  return {\n    type: COMPOSE_POLL_OPTION_REMOVE,\n    index,\n  };\n}\n\nexport function changePollSettings(expiresIn, isMultiple) {\n  return {\n    type: COMPOSE_POLL_SETTINGS_CHANGE,\n    expiresIn,\n    isMultiple,\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedAccount, importFetchedAccounts } from './importer';\n\nexport const ACCOUNT_FETCH_REQUEST = 'ACCOUNT_FETCH_REQUEST';\nexport const ACCOUNT_FETCH_SUCCESS = 'ACCOUNT_FETCH_SUCCESS';\nexport const ACCOUNT_FETCH_FAIL    = 'ACCOUNT_FETCH_FAIL';\n\nexport const ACCOUNT_LOOKUP_REQUEST = 'ACCOUNT_LOOKUP_REQUEST';\nexport const ACCOUNT_LOOKUP_SUCCESS = 'ACCOUNT_LOOKUP_SUCCESS';\nexport const ACCOUNT_LOOKUP_FAIL    = 'ACCOUNT_LOOKUP_FAIL';\n\nexport const ACCOUNT_FOLLOW_REQUEST = 'ACCOUNT_FOLLOW_REQUEST';\nexport const ACCOUNT_FOLLOW_SUCCESS = 'ACCOUNT_FOLLOW_SUCCESS';\nexport const ACCOUNT_FOLLOW_FAIL    = 'ACCOUNT_FOLLOW_FAIL';\n\nexport const ACCOUNT_UNFOLLOW_REQUEST = 'ACCOUNT_UNFOLLOW_REQUEST';\nexport const ACCOUNT_UNFOLLOW_SUCCESS = 'ACCOUNT_UNFOLLOW_SUCCESS';\nexport const ACCOUNT_UNFOLLOW_FAIL    = 'ACCOUNT_UNFOLLOW_FAIL';\n\nexport const ACCOUNT_BLOCK_REQUEST = 'ACCOUNT_BLOCK_REQUEST';\nexport const ACCOUNT_BLOCK_SUCCESS = 'ACCOUNT_BLOCK_SUCCESS';\nexport const ACCOUNT_BLOCK_FAIL    = 'ACCOUNT_BLOCK_FAIL';\n\nexport const ACCOUNT_UNBLOCK_REQUEST = 'ACCOUNT_UNBLOCK_REQUEST';\nexport const ACCOUNT_UNBLOCK_SUCCESS = 'ACCOUNT_UNBLOCK_SUCCESS';\nexport const ACCOUNT_UNBLOCK_FAIL    = 'ACCOUNT_UNBLOCK_FAIL';\n\nexport const ACCOUNT_MUTE_REQUEST = 'ACCOUNT_MUTE_REQUEST';\nexport const ACCOUNT_MUTE_SUCCESS = 'ACCOUNT_MUTE_SUCCESS';\nexport const ACCOUNT_MUTE_FAIL    = 'ACCOUNT_MUTE_FAIL';\n\nexport const ACCOUNT_UNMUTE_REQUEST = 'ACCOUNT_UNMUTE_REQUEST';\nexport const ACCOUNT_UNMUTE_SUCCESS = 'ACCOUNT_UNMUTE_SUCCESS';\nexport const ACCOUNT_UNMUTE_FAIL    = 'ACCOUNT_UNMUTE_FAIL';\n\nexport const ACCOUNT_PIN_REQUEST = 'ACCOUNT_PIN_REQUEST';\nexport const ACCOUNT_PIN_SUCCESS = 'ACCOUNT_PIN_SUCCESS';\nexport const ACCOUNT_PIN_FAIL    = 'ACCOUNT_PIN_FAIL';\n\nexport const ACCOUNT_UNPIN_REQUEST = 'ACCOUNT_UNPIN_REQUEST';\nexport const ACCOUNT_UNPIN_SUCCESS = 'ACCOUNT_UNPIN_SUCCESS';\nexport const ACCOUNT_UNPIN_FAIL    = 'ACCOUNT_UNPIN_FAIL';\n\nexport const FOLLOWERS_FETCH_REQUEST = 'FOLLOWERS_FETCH_REQUEST';\nexport const FOLLOWERS_FETCH_SUCCESS = 'FOLLOWERS_FETCH_SUCCESS';\nexport const FOLLOWERS_FETCH_FAIL    = 'FOLLOWERS_FETCH_FAIL';\n\nexport const FOLLOWERS_EXPAND_REQUEST = 'FOLLOWERS_EXPAND_REQUEST';\nexport const FOLLOWERS_EXPAND_SUCCESS = 'FOLLOWERS_EXPAND_SUCCESS';\nexport const FOLLOWERS_EXPAND_FAIL    = 'FOLLOWERS_EXPAND_FAIL';\n\nexport const FOLLOWING_FETCH_REQUEST = 'FOLLOWING_FETCH_REQUEST';\nexport const FOLLOWING_FETCH_SUCCESS = 'FOLLOWING_FETCH_SUCCESS';\nexport const FOLLOWING_FETCH_FAIL    = 'FOLLOWING_FETCH_FAIL';\n\nexport const FOLLOWING_EXPAND_REQUEST = 'FOLLOWING_EXPAND_REQUEST';\nexport const FOLLOWING_EXPAND_SUCCESS = 'FOLLOWING_EXPAND_SUCCESS';\nexport const FOLLOWING_EXPAND_FAIL    = 'FOLLOWING_EXPAND_FAIL';\n\nexport const RELATIONSHIPS_FETCH_REQUEST = 'RELATIONSHIPS_FETCH_REQUEST';\nexport const RELATIONSHIPS_FETCH_SUCCESS = 'RELATIONSHIPS_FETCH_SUCCESS';\nexport const RELATIONSHIPS_FETCH_FAIL    = 'RELATIONSHIPS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_FETCH_REQUEST = 'FOLLOW_REQUESTS_FETCH_REQUEST';\nexport const FOLLOW_REQUESTS_FETCH_SUCCESS = 'FOLLOW_REQUESTS_FETCH_SUCCESS';\nexport const FOLLOW_REQUESTS_FETCH_FAIL    = 'FOLLOW_REQUESTS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_EXPAND_REQUEST = 'FOLLOW_REQUESTS_EXPAND_REQUEST';\nexport const FOLLOW_REQUESTS_EXPAND_SUCCESS = 'FOLLOW_REQUESTS_EXPAND_SUCCESS';\nexport const FOLLOW_REQUESTS_EXPAND_FAIL    = 'FOLLOW_REQUESTS_EXPAND_FAIL';\n\nexport const FOLLOW_REQUEST_AUTHORIZE_REQUEST = 'FOLLOW_REQUEST_AUTHORIZE_REQUEST';\nexport const FOLLOW_REQUEST_AUTHORIZE_SUCCESS = 'FOLLOW_REQUEST_AUTHORIZE_SUCCESS';\nexport const FOLLOW_REQUEST_AUTHORIZE_FAIL    = 'FOLLOW_REQUEST_AUTHORIZE_FAIL';\n\nexport const FOLLOW_REQUEST_REJECT_REQUEST = 'FOLLOW_REQUEST_REJECT_REQUEST';\nexport const FOLLOW_REQUEST_REJECT_SUCCESS = 'FOLLOW_REQUEST_REJECT_SUCCESS';\nexport const FOLLOW_REQUEST_REJECT_FAIL    = 'FOLLOW_REQUEST_REJECT_FAIL';\n\nexport const ACCOUNT_REVEAL = 'ACCOUNT_REVEAL';\n\nexport function fetchAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchRelationships([id]));\n    dispatch(fetchAccountRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}`).then(response => {\n      dispatch(importFetchedAccount(response.data));\n      dispatch(fetchAccountSuccess());\n    }).catch(error => {\n      dispatch(fetchAccountFail(id, error));\n    });\n  };\n}\n\nexport const lookupAccount = acct => (dispatch, getState) => {\n  dispatch(lookupAccountRequest(acct));\n\n  api(getState).get('/api/v1/accounts/lookup', { params: { acct } }).then(response => {\n    dispatch(fetchRelationships([response.data.id]));\n    dispatch(importFetchedAccount(response.data));\n    dispatch(lookupAccountSuccess());\n  }).catch(error => {\n    dispatch(lookupAccountFail(acct, error));\n  });\n};\n\nexport const lookupAccountRequest = (acct) => ({\n  type: ACCOUNT_LOOKUP_REQUEST,\n  acct,\n});\n\nexport const lookupAccountSuccess = () => ({\n  type: ACCOUNT_LOOKUP_SUCCESS,\n});\n\nexport const lookupAccountFail = (acct, error) => ({\n  type: ACCOUNT_LOOKUP_FAIL,\n  acct,\n  error,\n  skipAlert: true,\n});\n\nexport function fetchAccountRequest(id) {\n  return {\n    type: ACCOUNT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchAccountSuccess() {\n  return {\n    type: ACCOUNT_FETCH_SUCCESS,\n  };\n}\n\nexport function fetchAccountFail(id, error) {\n  return {\n    type: ACCOUNT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function followAccount(id, options = { reblogs: true }) {\n  return (dispatch, getState) => {\n    const alreadyFollowing = getState().getIn(['relationships', id, 'following']);\n    const locked = getState().getIn(['accounts', id, 'locked'], false);\n\n    dispatch(followAccountRequest(id, locked));\n\n    api(getState).post(`/api/v1/accounts/${id}/follow`, options).then(response => {\n      dispatch(followAccountSuccess(response.data, alreadyFollowing));\n    }).catch(error => {\n      dispatch(followAccountFail(error, locked));\n    });\n  };\n}\n\nexport function unfollowAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unfollowAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unfollow`).then(response => {\n      dispatch(unfollowAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(unfollowAccountFail(error));\n    });\n  };\n}\n\nexport function followAccountRequest(id, locked) {\n  return {\n    type: ACCOUNT_FOLLOW_REQUEST,\n    id,\n    locked,\n    skipLoading: true,\n  };\n}\n\nexport function followAccountSuccess(relationship, alreadyFollowing) {\n  return {\n    type: ACCOUNT_FOLLOW_SUCCESS,\n    relationship,\n    alreadyFollowing,\n    skipLoading: true,\n  };\n}\n\nexport function followAccountFail(error, locked) {\n  return {\n    type: ACCOUNT_FOLLOW_FAIL,\n    error,\n    locked,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNFOLLOW_REQUEST,\n    id,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_UNFOLLOW_SUCCESS,\n    relationship,\n    statuses,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountFail(error) {\n  return {\n    type: ACCOUNT_UNFOLLOW_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function blockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(blockAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/block`).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(blockAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(blockAccountFail(id, error));\n    });\n  };\n}\n\nexport function unblockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unblockAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unblock`).then(response => {\n      dispatch(unblockAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unblockAccountFail(id, error));\n    });\n  };\n}\n\nexport function blockAccountRequest(id) {\n  return {\n    type: ACCOUNT_BLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function blockAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_BLOCK_SUCCESS,\n    relationship,\n    statuses,\n  };\n}\n\nexport function blockAccountFail(error) {\n  return {\n    type: ACCOUNT_BLOCK_FAIL,\n    error,\n  };\n}\n\nexport function unblockAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNBLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function unblockAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNBLOCK_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unblockAccountFail(error) {\n  return {\n    type: ACCOUNT_UNBLOCK_FAIL,\n    error,\n  };\n}\n\n\nexport function muteAccount(id, notifications, duration=0) {\n  return (dispatch, getState) => {\n    dispatch(muteAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/mute`, { notifications, duration }).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(muteAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(muteAccountFail(id, error));\n    });\n  };\n}\n\nexport function unmuteAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unmuteAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unmute`).then(response => {\n      dispatch(unmuteAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unmuteAccountFail(id, error));\n    });\n  };\n}\n\nexport function muteAccountRequest(id) {\n  return {\n    type: ACCOUNT_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_MUTE_SUCCESS,\n    relationship,\n    statuses,\n  };\n}\n\nexport function muteAccountFail(error) {\n  return {\n    type: ACCOUNT_MUTE_FAIL,\n    error,\n  };\n}\n\nexport function unmuteAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNMUTE_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unmuteAccountFail(error) {\n  return {\n    type: ACCOUNT_UNMUTE_FAIL,\n    error,\n  };\n}\n\n\nexport function fetchFollowers(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowersRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}/followers`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowersFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowers(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'followers', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowersRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowersFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFollowing(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowingRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}/following`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowingFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowingRequest(id) {\n  return {\n    type: FOLLOWING_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowing(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'following', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowingRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowingFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowingRequest(id) {\n  return {\n    type: FOLLOWING_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchRelationships(accountIds) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const loadedRelationships = state.get('relationships');\n    const newAccountIds = accountIds.filter(id => loadedRelationships.get(id, null) === null);\n    const signedIn = !!state.getIn(['meta', 'me']);\n\n    if (!signedIn || newAccountIds.length === 0) {\n      return;\n    }\n\n    dispatch(fetchRelationshipsRequest(newAccountIds));\n\n    api(getState).get(`/api/v1/accounts/relationships?${newAccountIds.map(id => `id[]=${id}`).join('&')}`).then(response => {\n      dispatch(fetchRelationshipsSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchRelationshipsFail(error));\n    });\n  };\n}\n\nexport function fetchRelationshipsRequest(ids) {\n  return {\n    type: RELATIONSHIPS_FETCH_REQUEST,\n    ids,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsSuccess(relationships) {\n  return {\n    type: RELATIONSHIPS_FETCH_SUCCESS,\n    relationships,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsFail(error) {\n  return {\n    type: RELATIONSHIPS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipNotFound: true,\n  };\n}\n\nexport function fetchFollowRequests() {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowRequestsRequest());\n\n    api(getState).get('/api/v1/follow_requests').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(fetchFollowRequestsFail(error)));\n  };\n}\n\nexport function fetchFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowRequests() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'follow_requests', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowRequestsRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(expandFollowRequestsFail(error)));\n  };\n}\n\nexport function expandFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function authorizeFollowRequest(id) {\n  return (dispatch, getState) => {\n    dispatch(authorizeFollowRequestRequest(id));\n\n    api(getState)\n      .post(`/api/v1/follow_requests/${id}/authorize`)\n      .then(() => dispatch(authorizeFollowRequestSuccess(id)))\n      .catch(error => dispatch(authorizeFollowRequestFail(id, error)));\n  };\n}\n\nexport function authorizeFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_REQUEST,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestSuccess(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_SUCCESS,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_FAIL,\n    id,\n    error,\n  };\n}\n\n\nexport function rejectFollowRequest(id) {\n  return (dispatch, getState) => {\n    dispatch(rejectFollowRequestRequest(id));\n\n    api(getState)\n      .post(`/api/v1/follow_requests/${id}/reject`)\n      .then(() => dispatch(rejectFollowRequestSuccess(id)))\n      .catch(error => dispatch(rejectFollowRequestFail(id, error)));\n  };\n}\n\nexport function rejectFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_REQUEST,\n    id,\n  };\n}\n\nexport function rejectFollowRequestSuccess(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_SUCCESS,\n    id,\n  };\n}\n\nexport function rejectFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pinAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(pinAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/pin`).then(response => {\n      dispatch(pinAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(pinAccountFail(error));\n    });\n  };\n}\n\nexport function unpinAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unpinAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unpin`).then(response => {\n      dispatch(unpinAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unpinAccountFail(error));\n    });\n  };\n}\n\nexport function pinAccountRequest(id) {\n  return {\n    type: ACCOUNT_PIN_REQUEST,\n    id,\n  };\n}\n\nexport function pinAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_PIN_SUCCESS,\n    relationship,\n  };\n}\n\nexport function pinAccountFail(error) {\n  return {\n    type: ACCOUNT_PIN_FAIL,\n    error,\n  };\n}\n\nexport function unpinAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNPIN_REQUEST,\n    id,\n  };\n}\n\nexport function unpinAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNPIN_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unpinAccountFail(error) {\n  return {\n    type: ACCOUNT_UNPIN_FAIL,\n    error,\n  };\n}\n\nexport const revealAccount = id => ({\n  type: ACCOUNT_REVEAL,\n  id,\n});\n","import { defineMessages } from 'react-intl';\n\nimport axios from 'axios';\nimport { throttle } from 'lodash';\n\nimport api from 'mastodon/api';\nimport { search as emojiSearch } from 'mastodon/features/emoji/emoji_mart_search_light';\nimport { tagHistory } from 'mastodon/settings';\n\nimport { showAlert, showAlertForError } from './alerts';\nimport { useEmoji } from './emojis';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { openModal } from './modal';\nimport { updateTimeline } from './timelines';\n\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsAccountsController;\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsTagsController;\n\nexport const COMPOSE_CHANGE          = 'COMPOSE_CHANGE';\nexport const COMPOSE_SUBMIT_REQUEST  = 'COMPOSE_SUBMIT_REQUEST';\nexport const COMPOSE_SUBMIT_SUCCESS  = 'COMPOSE_SUBMIT_SUCCESS';\nexport const COMPOSE_SUBMIT_FAIL     = 'COMPOSE_SUBMIT_FAIL';\nexport const COMPOSE_REPLY           = 'COMPOSE_REPLY';\nexport const COMPOSE_REPLY_CANCEL    = 'COMPOSE_REPLY_CANCEL';\nexport const COMPOSE_DIRECT          = 'COMPOSE_DIRECT';\nexport const COMPOSE_MENTION         = 'COMPOSE_MENTION';\nexport const COMPOSE_RESET           = 'COMPOSE_RESET';\n\nexport const COMPOSE_UPLOAD_REQUEST    = 'COMPOSE_UPLOAD_REQUEST';\nexport const COMPOSE_UPLOAD_SUCCESS    = 'COMPOSE_UPLOAD_SUCCESS';\nexport const COMPOSE_UPLOAD_FAIL       = 'COMPOSE_UPLOAD_FAIL';\nexport const COMPOSE_UPLOAD_PROGRESS   = 'COMPOSE_UPLOAD_PROGRESS';\nexport const COMPOSE_UPLOAD_PROCESSING = 'COMPOSE_UPLOAD_PROCESSING';\nexport const COMPOSE_UPLOAD_UNDO       = 'COMPOSE_UPLOAD_UNDO';\n\nexport const THUMBNAIL_UPLOAD_REQUEST  = 'THUMBNAIL_UPLOAD_REQUEST';\nexport const THUMBNAIL_UPLOAD_SUCCESS  = 'THUMBNAIL_UPLOAD_SUCCESS';\nexport const THUMBNAIL_UPLOAD_FAIL     = 'THUMBNAIL_UPLOAD_FAIL';\nexport const THUMBNAIL_UPLOAD_PROGRESS = 'THUMBNAIL_UPLOAD_PROGRESS';\n\nexport const COMPOSE_SUGGESTIONS_CLEAR = 'COMPOSE_SUGGESTIONS_CLEAR';\nexport const COMPOSE_SUGGESTIONS_READY = 'COMPOSE_SUGGESTIONS_READY';\nexport const COMPOSE_SUGGESTION_SELECT = 'COMPOSE_SUGGESTION_SELECT';\nexport const COMPOSE_SUGGESTION_IGNORE = 'COMPOSE_SUGGESTION_IGNORE';\nexport const COMPOSE_SUGGESTION_TAGS_UPDATE = 'COMPOSE_SUGGESTION_TAGS_UPDATE';\n\nexport const COMPOSE_TAG_HISTORY_UPDATE = 'COMPOSE_TAG_HISTORY_UPDATE';\n\nexport const COMPOSE_MOUNT   = 'COMPOSE_MOUNT';\nexport const COMPOSE_UNMOUNT = 'COMPOSE_UNMOUNT';\n\nexport const COMPOSE_SENSITIVITY_CHANGE  = 'COMPOSE_SENSITIVITY_CHANGE';\nexport const COMPOSE_SPOILERNESS_CHANGE  = 'COMPOSE_SPOILERNESS_CHANGE';\nexport const COMPOSE_SPOILER_TEXT_CHANGE = 'COMPOSE_SPOILER_TEXT_CHANGE';\nexport const COMPOSE_VISIBILITY_CHANGE   = 'COMPOSE_VISIBILITY_CHANGE';\nexport const COMPOSE_COMPOSING_CHANGE    = 'COMPOSE_COMPOSING_CHANGE';\nexport const COMPOSE_LANGUAGE_CHANGE     = 'COMPOSE_LANGUAGE_CHANGE';\n\nexport const COMPOSE_EMOJI_INSERT = 'COMPOSE_EMOJI_INSERT';\n\nexport const COMPOSE_UPLOAD_CHANGE_REQUEST     = 'COMPOSE_UPLOAD_UPDATE_REQUEST';\nexport const COMPOSE_UPLOAD_CHANGE_SUCCESS     = 'COMPOSE_UPLOAD_UPDATE_SUCCESS';\nexport const COMPOSE_UPLOAD_CHANGE_FAIL        = 'COMPOSE_UPLOAD_UPDATE_FAIL';\n\nexport const COMPOSE_POLL_ADD             = 'COMPOSE_POLL_ADD';\nexport const COMPOSE_POLL_REMOVE          = 'COMPOSE_POLL_REMOVE';\nexport const COMPOSE_POLL_OPTION_ADD      = 'COMPOSE_POLL_OPTION_ADD';\nexport const COMPOSE_POLL_OPTION_CHANGE   = 'COMPOSE_POLL_OPTION_CHANGE';\nexport const COMPOSE_POLL_OPTION_REMOVE   = 'COMPOSE_POLL_OPTION_REMOVE';\nexport const COMPOSE_POLL_SETTINGS_CHANGE = 'COMPOSE_POLL_SETTINGS_CHANGE';\n\nexport const INIT_MEDIA_EDIT_MODAL = 'INIT_MEDIA_EDIT_MODAL';\n\nexport const COMPOSE_CHANGE_MEDIA_DESCRIPTION = 'COMPOSE_CHANGE_MEDIA_DESCRIPTION';\nexport const COMPOSE_CHANGE_MEDIA_FOCUS       = 'COMPOSE_CHANGE_MEDIA_FOCUS';\n\nexport const COMPOSE_SET_STATUS = 'COMPOSE_SET_STATUS';\nexport const COMPOSE_FOCUS = 'COMPOSE_FOCUS';\n\nconst messages = defineMessages({\n  uploadErrorLimit: { id: 'upload_error.limit', defaultMessage: 'File upload limit exceeded.' },\n  uploadErrorPoll:  { id: 'upload_error.poll', defaultMessage: 'File upload not allowed with polls.' },\n  open: { id: 'compose.published.open', defaultMessage: 'Open' },\n  published: { id: 'compose.published.body', defaultMessage: 'Post published.' },\n  saved: { id: 'compose.saved.body', defaultMessage: 'Post saved.' },\n});\n\nexport const ensureComposeIsVisible = (getState, routerHistory) => {\n  if (!getState().getIn(['compose', 'mounted'])) {\n    routerHistory.push('/publish');\n  }\n};\n\nexport function setComposeToStatus(status, text, spoiler_text) {\n  return{\n    type: COMPOSE_SET_STATUS,\n    status,\n    text,\n    spoiler_text,\n  };\n}\n\nexport function changeCompose(text) {\n  return {\n    type: COMPOSE_CHANGE,\n    text: text,\n  };\n}\n\nexport function replyCompose(status, routerHistory) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_REPLY,\n      status: status,\n    });\n\n    ensureComposeIsVisible(getState, routerHistory);\n  };\n}\n\nexport function cancelReplyCompose() {\n  return {\n    type: COMPOSE_REPLY_CANCEL,\n  };\n}\n\nexport function resetCompose() {\n  return {\n    type: COMPOSE_RESET,\n  };\n}\n\nexport const focusCompose = (routerHistory, defaultText) => (dispatch, getState) => {\n  dispatch({\n    type: COMPOSE_FOCUS,\n    defaultText,\n  });\n\n  ensureComposeIsVisible(getState, routerHistory);\n};\n\nexport function mentionCompose(account, routerHistory) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_MENTION,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState, routerHistory);\n  };\n}\n\nexport function directCompose(account, routerHistory) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_DIRECT,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState, routerHistory);\n  };\n}\n\nexport function submitCompose(routerHistory) {\n  return function (dispatch, getState) {\n    const status   = getState().getIn(['compose', 'text'], '');\n    const media    = getState().getIn(['compose', 'media_attachments']);\n    const statusId = getState().getIn(['compose', 'id'], null);\n\n    if ((!status || !status.length) && media.size === 0) {\n      return;\n    }\n\n    dispatch(submitComposeRequest());\n\n    // If we're editing a post with media attachments, those have not\n    // necessarily been changed on the server. Do it now in the same\n    // API call.\n    let media_attributes;\n    if (statusId !== null) {\n      media_attributes = media.map(item => {\n        let focus;\n\n        if (item.getIn(['meta', 'focus'])) {\n          focus = `${item.getIn(['meta', 'focus', 'x']).toFixed(2)},${item.getIn(['meta', 'focus', 'y']).toFixed(2)}`;\n        }\n\n        return {\n          id: item.get('id'),\n          description: item.get('description'),\n          focus,\n        };\n      });\n    }\n\n    api(getState).request({\n      url: statusId === null ? '/api/v1/statuses' : `/api/v1/statuses/${statusId}`,\n      method: statusId === null ? 'post' : 'put',\n      data: {\n        status,\n        in_reply_to_id: getState().getIn(['compose', 'in_reply_to'], null),\n        media_ids: media.map(item => item.get('id')),\n        media_attributes,\n        sensitive: getState().getIn(['compose', 'sensitive']),\n        spoiler_text: getState().getIn(['compose', 'spoiler']) ? getState().getIn(['compose', 'spoiler_text'], '') : '',\n        visibility: getState().getIn(['compose', 'privacy']),\n        poll: getState().getIn(['compose', 'poll'], null),\n        language: getState().getIn(['compose', 'language']),\n      },\n      headers: {\n        'Idempotency-Key': getState().getIn(['compose', 'idempotencyKey']),\n      },\n    }).then(function (response) {\n      if (routerHistory && (routerHistory.location.pathname === '/publish' || routerHistory.location.pathname === '/statuses/new') && window.history.state) {\n        routerHistory.goBack();\n      }\n\n      dispatch(insertIntoTagHistory(response.data.tags, status));\n      dispatch(submitComposeSuccess({ ...response.data }));\n\n      // To make the app more responsive, immediately push the status\n      // into the columns\n      const insertIfOnline = timelineId => {\n        const timeline = getState().getIn(['timelines', timelineId]);\n\n        if (timeline && timeline.get('items').size > 0 && timeline.getIn(['items', 0]) !== null && timeline.get('online')) {\n          dispatch(updateTimeline(timelineId, { ...response.data }));\n        }\n      };\n\n      if (statusId) {\n        dispatch(importFetchedStatus({ ...response.data }));\n      }\n\n      if (statusId === null && response.data.visibility !== 'direct') {\n        insertIfOnline('home');\n      }\n\n      if (statusId === null && response.data.in_reply_to_id === null && response.data.visibility === 'public') {\n        insertIfOnline('community');\n        if (!response.data.local_only) {\n          insertIfOnline('public');\n        }\n        insertIfOnline(`account:${response.data.account.id}`);\n      }\n\n      dispatch(showAlert({\n        message: statusId === null ? messages.published : messages.saved,\n        action: messages.open,\n        dismissAfter: 10000,\n        onClick: () => routerHistory.push(`/@${response.data.account.username}/${response.data.id}`),\n      }));\n    }).catch(function (error) {\n      dispatch(submitComposeFail(error));\n    });\n  };\n}\n\nexport function submitComposeRequest() {\n  return {\n    type: COMPOSE_SUBMIT_REQUEST,\n  };\n}\n\nexport function submitComposeSuccess(status) {\n  return {\n    type: COMPOSE_SUBMIT_SUCCESS,\n    status: status,\n  };\n}\n\nexport function submitComposeFail(error) {\n  return {\n    type: COMPOSE_SUBMIT_FAIL,\n    error: error,\n  };\n}\n\nexport function uploadCompose(files) {\n  return function (dispatch, getState) {\n    const uploadLimit = 4;\n    const media = getState().getIn(['compose', 'media_attachments']);\n    const pending = getState().getIn(['compose', 'pending_media_attachments']);\n    const progress = new Array(files.length).fill(0);\n\n    let total = Array.from(files).reduce((a, v) => a + v.size, 0);\n\n    if (files.length + media.size + pending > uploadLimit) {\n      dispatch(showAlert({ message: messages.uploadErrorLimit }));\n      return;\n    }\n\n    if (getState().getIn(['compose', 'poll'])) {\n      dispatch(showAlert({ message: messages.uploadErrorPoll }));\n      return;\n    }\n\n    dispatch(uploadComposeRequest());\n\n    for (const [i, file] of Array.from(files).entries()) {\n      if (media.size + i > 3) break;\n\n      const data = new FormData();\n      data.append('file', file);\n\n      api(getState).post('/api/v2/media', data, {\n        onUploadProgress: function({ loaded }){\n          progress[i] = loaded;\n          dispatch(uploadComposeProgress(progress.reduce((a, v) => a + v, 0), total));\n        },\n      }).then(({ status, data }) => {\n        // If server-side processing of the media attachment has not completed yet,\n        // poll the server until it is, before showing the media attachment as uploaded\n\n        if (status === 200) {\n          dispatch(uploadComposeSuccess(data, file));\n        } else if (status === 202) {\n          dispatch(uploadComposeProcessing());\n\n          let tryCount = 1;\n\n          const poll = () => {\n            api(getState).get(`/api/v1/media/${data.id}`).then(response => {\n              if (response.status === 200) {\n                dispatch(uploadComposeSuccess(response.data, file));\n              } else if (response.status === 206) {\n                const retryAfter = (Math.log2(tryCount) || 1) * 1000;\n                tryCount += 1;\n                setTimeout(() => poll(), retryAfter);\n              }\n            }).catch(error => dispatch(uploadComposeFail(error)));\n          };\n\n          poll();\n        }\n      }).catch(error => dispatch(uploadComposeFail(error)));\n    }\n  };\n}\n\nexport const uploadComposeProcessing = () => ({\n  type: COMPOSE_UPLOAD_PROCESSING,\n});\n\nexport const uploadThumbnail = (id, file) => (dispatch, getState) => {\n  dispatch(uploadThumbnailRequest());\n\n  const total = file.size;\n  const data = new FormData();\n\n  data.append('thumbnail', file);\n\n  api(getState).put(`/api/v1/media/${id}`, data, {\n    onUploadProgress: ({ loaded }) => {\n      dispatch(uploadThumbnailProgress(loaded, total));\n    },\n  }).then(({ data }) => {\n    dispatch(uploadThumbnailSuccess(data));\n  }).catch(error => {\n    dispatch(uploadThumbnailFail(id, error));\n  });\n};\n\nexport const uploadThumbnailRequest = () => ({\n  type: THUMBNAIL_UPLOAD_REQUEST,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailProgress = (loaded, total) => ({\n  type: THUMBNAIL_UPLOAD_PROGRESS,\n  loaded,\n  total,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailSuccess = media => ({\n  type: THUMBNAIL_UPLOAD_SUCCESS,\n  media,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailFail = error => ({\n  type: THUMBNAIL_UPLOAD_FAIL,\n  error,\n  skipLoading: true,\n});\n\nexport function initMediaEditModal(id) {\n  return dispatch => {\n    dispatch({\n      type: INIT_MEDIA_EDIT_MODAL,\n      id,\n    });\n\n    dispatch(openModal({\n      modalType: 'FOCAL_POINT',\n      modalProps: { id },\n    }));\n  };\n}\n\nexport function onChangeMediaDescription(description) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n    description,\n  };\n}\n\nexport function onChangeMediaFocus(focusX, focusY) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_FOCUS,\n    focusX,\n    focusY,\n  };\n}\n\nexport function changeUploadCompose(id, params) {\n  return (dispatch, getState) => {\n    dispatch(changeUploadComposeRequest());\n\n    let media = getState().getIn(['compose', 'media_attachments']).find((item) => item.get('id') === id);\n\n    // Editing already-attached media is deferred to editing the post itself.\n    // For simplicity's sake, fake an API reply.\n    if (media && !media.get('unattached')) {\n      const { focus, ...other } = params;\n      const data = { ...media.toJS(), ...other };\n\n      if (focus) {\n        const [x, y] = focus.split(',');\n        data.meta = { focus: { x: parseFloat(x), y: parseFloat(y) } };\n      }\n\n      dispatch(changeUploadComposeSuccess(data, true));\n    } else {\n      api(getState).put(`/api/v1/media/${id}`, params).then(response => {\n        dispatch(changeUploadComposeSuccess(response.data, false));\n      }).catch(error => {\n        dispatch(changeUploadComposeFail(id, error));\n      });\n    }\n  };\n}\n\nexport function changeUploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeSuccess(media, attached) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_SUCCESS,\n    media: media,\n    attached: attached,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeProgress(loaded, total) {\n  return {\n    type: COMPOSE_UPLOAD_PROGRESS,\n    loaded: loaded,\n    total: total,\n  };\n}\n\nexport function uploadComposeSuccess(media, file) {\n  return {\n    type: COMPOSE_UPLOAD_SUCCESS,\n    media: media,\n    file: file,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function undoUploadCompose(media_id) {\n  return {\n    type: COMPOSE_UPLOAD_UNDO,\n    media_id: media_id,\n  };\n}\n\nexport function clearComposeSuggestions() {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n  return {\n    type: COMPOSE_SUGGESTIONS_CLEAR,\n  };\n}\n\nconst fetchComposeSuggestionsAccounts = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n\n  fetchComposeSuggestionsAccountsController = new AbortController();\n\n  api(getState).get('/api/v1/accounts/search', {\n    signal: fetchComposeSuggestionsAccountsController.signal,\n\n    params: {\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(response => {\n    dispatch(importFetchedAccounts(response.data));\n    dispatch(readyComposeSuggestionsAccounts(token, response.data));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsAccountsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nconst fetchComposeSuggestionsEmojis = (dispatch, getState, token) => {\n  const results = emojiSearch(token.replace(':', ''), { maxResults: 5 });\n  dispatch(readyComposeSuggestionsEmojis(token, results));\n};\n\nconst fetchComposeSuggestionsTags = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsTagsController) {\n    fetchComposeSuggestionsTagsController.abort();\n  }\n\n  dispatch(updateSuggestionTags(token));\n\n  fetchComposeSuggestionsTagsController = new AbortController();\n\n  api(getState).get('/api/v2/search', {\n    signal: fetchComposeSuggestionsTagsController.signal,\n\n    params: {\n      type: 'hashtags',\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n      exclude_unreviewed: true,\n    },\n  }).then(({ data }) => {\n    dispatch(readyComposeSuggestionsTags(token, data.hashtags));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsTagsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nexport function fetchComposeSuggestions(token) {\n  return (dispatch, getState) => {\n    switch (token[0]) {\n    case ':':\n      fetchComposeSuggestionsEmojis(dispatch, getState, token);\n      break;\n    case '#':\n      fetchComposeSuggestionsTags(dispatch, getState, token);\n      break;\n    default:\n      fetchComposeSuggestionsAccounts(dispatch, getState, token);\n      break;\n    }\n  };\n}\n\nexport function readyComposeSuggestionsEmojis(token, emojis) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    emojis,\n  };\n}\n\nexport function readyComposeSuggestionsAccounts(token, accounts) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    accounts,\n  };\n}\n\nexport const readyComposeSuggestionsTags = (token, tags) => ({\n  type: COMPOSE_SUGGESTIONS_READY,\n  token,\n  tags,\n});\n\nexport function selectComposeSuggestion(position, token, suggestion, path) {\n  return (dispatch, getState) => {\n    let completion, startPosition;\n\n    if (suggestion.type === 'emoji') {\n      completion    = suggestion.native || suggestion.colons;\n      startPosition = position - 1;\n\n      dispatch(useEmoji(suggestion));\n    } else if (suggestion.type === 'hashtag') {\n      completion    = `#${suggestion.name}`;\n      startPosition = position - 1;\n    } else if (suggestion.type === 'account') {\n      completion    = getState().getIn(['accounts', suggestion.id, 'acct']);\n      startPosition = position;\n    }\n\n    // We don't want to replace hashtags that vary only in case due to accessibility, but we need to fire off an event so that\n    // the suggestions are dismissed and the cursor moves forward.\n    if (suggestion.type !== 'hashtag' || token.slice(1).localeCompare(suggestion.name, undefined, { sensitivity: 'accent' }) !== 0) {\n      dispatch({\n        type: COMPOSE_SUGGESTION_SELECT,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    } else {\n      dispatch({\n        type: COMPOSE_SUGGESTION_IGNORE,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    }\n  };\n}\n\nexport function updateSuggestionTags(token) {\n  return {\n    type: COMPOSE_SUGGESTION_TAGS_UPDATE,\n    token,\n  };\n}\n\nexport function updateTagHistory(tags) {\n  return {\n    type: COMPOSE_TAG_HISTORY_UPDATE,\n    tags,\n  };\n}\n\nexport function hydrateCompose() {\n  return (dispatch, getState) => {\n    const me = getState().getIn(['meta', 'me']);\n    const history = tagHistory.get(me);\n\n    if (history !== null) {\n      dispatch(updateTagHistory(history));\n    }\n  };\n}\n\nfunction insertIntoTagHistory(recognizedTags, text) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const oldHistory = state.getIn(['compose', 'tagHistory']);\n    const me = state.getIn(['meta', 'me']);\n\n    // FIXME: Matching input hashtags with recognized hashtags has become more\n    // complicated because of new normalization rules, it's no longer just\n    // a case sensitivity issue\n    const names = recognizedTags.map(tag => {\n      const matches = text.match(new RegExp(`#${tag.name}`, 'i'));\n\n      if (matches && matches.length > 0) {\n        return matches[0].slice(1);\n      } else {\n        return tag.name;\n      }\n    });\n\n    const intersectedOldHistory = oldHistory.filter(name => names.findIndex(newName => newName.toLowerCase() === name.toLowerCase()) === -1);\n\n    names.push(...intersectedOldHistory.toJS());\n\n    const newHistory = names.slice(0, 1000);\n\n    tagHistory.set(me, newHistory);\n    dispatch(updateTagHistory(newHistory));\n  };\n}\n\nexport function mountCompose() {\n  return {\n    type: COMPOSE_MOUNT,\n  };\n}\n\nexport function unmountCompose() {\n  return {\n    type: COMPOSE_UNMOUNT,\n  };\n}\n\nexport function changeComposeSensitivity() {\n  return {\n    type: COMPOSE_SENSITIVITY_CHANGE,\n  };\n}\n\nexport const changeComposeLanguage = language => ({\n  type: COMPOSE_LANGUAGE_CHANGE,\n  language,\n});\n\nexport function changeComposeSpoilerness() {\n  return {\n    type: COMPOSE_SPOILERNESS_CHANGE,\n  };\n}\n\nexport function changeComposeSpoilerText(text) {\n  return {\n    type: COMPOSE_SPOILER_TEXT_CHANGE,\n    text,\n  };\n}\n\nexport function changeComposeVisibility(value) {\n  return {\n    type: COMPOSE_VISIBILITY_CHANGE,\n    value,\n  };\n}\n\nexport function insertEmojiCompose(position, emoji, needsSpace) {\n  return {\n    type: COMPOSE_EMOJI_INSERT,\n    position,\n    emoji,\n    needsSpace,\n  };\n}\n\nexport function changeComposing(value) {\n  return {\n    type: COMPOSE_COMPOSING_CHANGE,\n    value,\n  };\n}\n\nexport function addPoll() {\n  return {\n    type: COMPOSE_POLL_ADD,\n  };\n}\n\nexport function removePoll() {\n  return {\n    type: COMPOSE_POLL_REMOVE,\n  };\n}\n\nexport function addPollOption(title) {\n  return {\n    type: COMPOSE_POLL_OPTION_ADD,\n    title,\n  };\n}\n\nexport function changePollOption(index, title) {\n  return {\n    type: COMPOSE_POLL_OPTION_CHANGE,\n    index,\n    title,\n  };\n}\n\nexport function removePollOption(index) {\n  return {\n    type: COMPOSE_POLL_OPTION_REMOVE,\n    index,\n  };\n}\n\nexport function changePollSettings(expiresIn, isMultiple) {\n  return {\n    type: COMPOSE_POLL_SETTINGS_CHANGE,\n    expiresIn,\n    isMultiple,\n  };\n}\n","import { normalizeAccount, normalizeStatus, normalizePoll } from './normalizer';\n\nexport const ACCOUNT_IMPORT  = 'ACCOUNT_IMPORT';\nexport const ACCOUNTS_IMPORT = 'ACCOUNTS_IMPORT';\nexport const STATUS_IMPORT   = 'STATUS_IMPORT';\nexport const STATUSES_IMPORT = 'STATUSES_IMPORT';\nexport const POLLS_IMPORT    = 'POLLS_IMPORT';\nexport const FILTERS_IMPORT  = 'FILTERS_IMPORT';\n\nfunction pushUnique(array, object) {\n  if (array.every(element => element.id !== object.id)) {\n    array.push(object);\n  }\n}\n\nexport function importAccount(account) {\n  return { type: ACCOUNT_IMPORT, account };\n}\n\nexport function importAccounts(accounts) {\n  return { type: ACCOUNTS_IMPORT, accounts };\n}\n\nexport function importStatus(status) {\n  return { type: STATUS_IMPORT, status };\n}\n\nexport function importStatuses(statuses) {\n  return { type: STATUSES_IMPORT, statuses };\n}\n\nexport function importFilters(filters) {\n  return { type: FILTERS_IMPORT, filters };\n}\n\nexport function importPolls(polls) {\n  return { type: POLLS_IMPORT, polls };\n}\n\nexport function importFetchedAccount(account) {\n  return importFetchedAccounts([account]);\n}\n\nexport function importFetchedAccounts(accounts) {\n  const normalAccounts = [];\n\n  function processAccount(account) {\n    pushUnique(normalAccounts, normalizeAccount(account));\n\n    if (account.moved) {\n      processAccount(account.moved);\n    }\n  }\n\n  accounts.forEach(processAccount);\n\n  return importAccounts(normalAccounts);\n}\n\nexport function importFetchedStatus(status) {\n  return importFetchedStatuses([status]);\n}\n\nexport function importFetchedStatuses(statuses) {\n  return (dispatch, getState) => {\n    const accounts = [];\n    const normalStatuses = [];\n    const polls = [];\n    const filters = [];\n\n    function processStatus(status) {\n      pushUnique(normalStatuses, normalizeStatus(status, getState().getIn(['statuses', status.id]), getState().get('local_settings')));\n      pushUnique(accounts, status.account);\n\n      if (status.filtered) {\n        status.filtered.forEach(result => pushUnique(filters, result.filter));\n      }\n\n      if (status.reblog && status.reblog.id) {\n        processStatus(status.reblog);\n      }\n\n      if (status.poll && status.poll.id) {\n        pushUnique(polls, normalizePoll(status.poll, getState().getIn(['polls', status.poll.id])));\n      }\n    }\n\n    statuses.forEach(processStatus);\n\n    dispatch(importPolls(polls));\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importStatuses(normalStatuses));\n    dispatch(importFilters(filters));\n  };\n}\n\nexport function importFetchedPoll(poll) {\n  return (dispatch, getState) => {\n    dispatch(importPolls([normalizePoll(poll, getState().getIn(['polls', poll.id]))]));\n  };\n}\n","import { normalizeAccount, normalizeStatus, normalizePoll } from './normalizer';\n\nexport const ACCOUNT_IMPORT  = 'ACCOUNT_IMPORT';\nexport const ACCOUNTS_IMPORT = 'ACCOUNTS_IMPORT';\nexport const STATUS_IMPORT   = 'STATUS_IMPORT';\nexport const STATUSES_IMPORT = 'STATUSES_IMPORT';\nexport const POLLS_IMPORT    = 'POLLS_IMPORT';\nexport const FILTERS_IMPORT  = 'FILTERS_IMPORT';\n\nfunction pushUnique(array, object) {\n  if (array.every(element => element.id !== object.id)) {\n    array.push(object);\n  }\n}\n\nexport function importAccount(account) {\n  return { type: ACCOUNT_IMPORT, account };\n}\n\nexport function importAccounts(accounts) {\n  return { type: ACCOUNTS_IMPORT, accounts };\n}\n\nexport function importStatus(status) {\n  return { type: STATUS_IMPORT, status };\n}\n\nexport function importStatuses(statuses) {\n  return { type: STATUSES_IMPORT, statuses };\n}\n\nexport function importFilters(filters) {\n  return { type: FILTERS_IMPORT, filters };\n}\n\nexport function importPolls(polls) {\n  return { type: POLLS_IMPORT, polls };\n}\n\nexport function importFetchedAccount(account) {\n  return importFetchedAccounts([account]);\n}\n\nexport function importFetchedAccounts(accounts) {\n  const normalAccounts = [];\n\n  function processAccount(account) {\n    pushUnique(normalAccounts, normalizeAccount(account));\n\n    if (account.moved) {\n      processAccount(account.moved);\n    }\n  }\n\n  accounts.forEach(processAccount);\n\n  return importAccounts(normalAccounts);\n}\n\nexport function importFetchedStatus(status) {\n  return importFetchedStatuses([status]);\n}\n\nexport function importFetchedStatuses(statuses) {\n  return (dispatch, getState) => {\n    const accounts = [];\n    const normalStatuses = [];\n    const polls = [];\n    const filters = [];\n\n    function processStatus(status) {\n      pushUnique(normalStatuses, normalizeStatus(status, getState().getIn(['statuses', status.id])));\n      pushUnique(accounts, status.account);\n\n      if (status.filtered) {\n        status.filtered.forEach(result => pushUnique(filters, result.filter));\n      }\n\n      if (status.reblog && status.reblog.id) {\n        processStatus(status.reblog);\n      }\n\n      if (status.poll && status.poll.id) {\n        pushUnique(polls, normalizePoll(status.poll, getState().getIn(['polls', status.poll.id])));\n      }\n    }\n\n    statuses.forEach(processStatus);\n\n    dispatch(importPolls(polls));\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importStatuses(normalStatuses));\n    dispatch(importFilters(filters));\n  };\n}\n\nexport function importFetchedPoll(poll) {\n  return (dispatch, getState) => {\n    dispatch(importPolls([normalizePoll(poll, getState().getIn(['polls', poll.id]))]));\n  };\n}\n","import * as React from 'react';\n\nimport classNames from 'classnames';\n\ninterface Props extends React.HTMLAttributes<HTMLImageElement> {\n  id: string;\n  className?: string;\n  fixedWidth?: boolean;\n  children?: never;\n}\n\nexport const Icon: React.FC<Props> = ({\n  id,\n  className,\n  fixedWidth,\n  ...other\n}) => (\n  <i\n    className={classNames('fa', `fa-${id}`, className, { 'fa-fw': fixedWidth })}\n    {...other}\n  />\n);\n","import classNames from 'classnames';\n\ninterface Props extends React.HTMLAttributes<HTMLImageElement> {\n  id: string;\n  className?: string;\n  fixedWidth?: boolean;\n  children?: never;\n}\n\nexport const Icon: React.FC<Props> = ({\n  id,\n  className,\n  fixedWidth,\n  ...other\n}) => (\n  <i\n    className={classNames('fa', `fa-${id}`, className, { 'fa-fw': fixedWidth })}\n    {...other}\n  />\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ModalProps } from 'flavours/glitch/reducers/modal';\n\nimport type { MODAL_COMPONENTS } from '../features/ui/components/modal_root';\n\nexport type ModalType = keyof typeof MODAL_COMPONENTS;\n\ninterface OpenModalPayload {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\nexport const openModal = createAction<OpenModalPayload>('MODAL_OPEN');\n\ninterface CloseModalPayload {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nexport const closeModal = createAction<CloseModalPayload>('MODAL_CLOSE');\n","import * as React from 'react';\n\nimport classNames from 'classnames';\n\nimport { AnimatedNumber } from './animated_number';\nimport { Icon } from './icon';\n\ninterface Props {\n  className?: string;\n  title: string;\n  icon: string;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onMouseDown?: React.MouseEventHandler<HTMLButtonElement>;\n  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement>;\n  onKeyPress?: React.KeyboardEventHandler<HTMLButtonElement>;\n  size: number;\n  active: boolean;\n  expanded?: boolean;\n  style?: React.CSSProperties;\n  activeStyle?: React.CSSProperties;\n  disabled: boolean;\n  inverted?: boolean;\n  animate: boolean;\n  overlay: boolean;\n  tabIndex: number;\n  label?: string;\n  counter?: number;\n  obfuscateCount?: boolean;\n  href?: string;\n  ariaHidden: boolean;\n}\ninterface States {\n  activate: boolean;\n  deactivate: boolean;\n}\nexport class IconButton extends React.PureComponent<Props, States> {\n  static defaultProps = {\n    size: 18,\n    active: false,\n    disabled: false,\n    animate: false,\n    overlay: false,\n    tabIndex: 0,\n    ariaHidden: false,\n  };\n\n  state = {\n    activate: false,\n    deactivate: false,\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (!nextProps.animate) return;\n\n    if (this.props.active && !nextProps.active) {\n      this.setState({ activate: false, deactivate: true });\n    } else if (!this.props.active && nextProps.active) {\n      this.setState({ activate: true, deactivate: false });\n    }\n  }\n\n  handleClick: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    e.preventDefault();\n\n    if (!this.props.disabled && this.props.onClick != null) {\n      this.props.onClick(e);\n    }\n  };\n\n  handleKeyPress: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (this.props.onKeyPress && !this.props.disabled) {\n      this.props.onKeyPress(e);\n    }\n  };\n\n  handleMouseDown: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onMouseDown) {\n      this.props.onMouseDown(e);\n    }\n  };\n\n  handleKeyDown: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  };\n\n  render() {\n    // Hack required for some icons which have an overriden size\n    let containerSize = '1.28571429em';\n    if (this.props.style?.fontSize) {\n      containerSize = `${this.props.size * 1.28571429}px`;\n    }\n\n    const style = {\n      fontSize: `${this.props.size}px`,\n      height: containerSize,\n      lineHeight: `${this.props.size}px`,\n      ...this.props.style,\n      ...(this.props.active ? this.props.activeStyle : {}),\n    };\n    if (!this.props.label) {\n      style.width = containerSize;\n    } else {\n      style.textAlign = 'left';\n    }\n\n    const {\n      active,\n      className,\n      disabled,\n      expanded,\n      icon,\n      inverted,\n      overlay,\n      tabIndex,\n      title,\n      counter,\n      obfuscateCount,\n      href,\n      ariaHidden,\n    } = this.props;\n\n    const { activate, deactivate } = this.state;\n\n    const classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined',\n    });\n\n    if (typeof counter !== 'undefined') {\n      style.width = 'auto';\n    }\n\n    let contents = (\n      <>\n        <Icon id={icon} fixedWidth aria-hidden='true' />{' '}\n        {typeof counter !== 'undefined' && (\n          <span className='icon-button__counter'>\n            <AnimatedNumber value={counter} obfuscate={obfuscateCount} />\n          </span>\n        )}\n        {this.props.label}\n      </>\n    );\n\n    if (href != null) {\n      contents = (\n        <a href={href} target='_blank' rel='noopener noreferrer'>\n          {contents}\n        </a>\n      );\n    }\n\n    return (\n      <button\n        type='button'\n        aria-label={title}\n        aria-expanded={expanded}\n        aria-hidden={ariaHidden}\n        title={title}\n        className={classes}\n        onClick={this.handleClick}\n        onMouseDown={this.handleMouseDown}\n        onKeyDown={this.handleKeyDown}\n        onKeyPress={this.handleKeyPress}\n        style={style}\n        tabIndex={tabIndex}\n        disabled={disabled}\n      >\n        {contents}\n      </button>\n    );\n  }\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ModalProps } from 'mastodon/reducers/modal';\n\nimport type { MODAL_COMPONENTS } from '../features/ui/components/modal_root';\n\nexport type ModalType = keyof typeof MODAL_COMPONENTS;\n\ninterface OpenModalPayload {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\nexport const openModal = createAction<OpenModalPayload>('MODAL_OPEN');\n\ninterface CloseModalPayload {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nexport const closeModal = createAction<CloseModalPayload>('MODAL_CLOSE');\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport api, { getLinks } from 'flavours/glitch/api';\nimport { compareId } from 'flavours/glitch/compare_id';\nimport { usePendingItems as preferPendingItems } from 'flavours/glitch/initial_state';\nimport { toServerSideType } from 'flavours/glitch/utils/filters';\n\nimport { importFetchedStatus, importFetchedStatuses } from './importer';\nimport { submitMarkers } from './markers';\n\nexport const TIMELINE_UPDATE  = 'TIMELINE_UPDATE';\nexport const TIMELINE_DELETE  = 'TIMELINE_DELETE';\nexport const TIMELINE_CLEAR   = 'TIMELINE_CLEAR';\n\nexport const TIMELINE_EXPAND_REQUEST = 'TIMELINE_EXPAND_REQUEST';\nexport const TIMELINE_EXPAND_SUCCESS = 'TIMELINE_EXPAND_SUCCESS';\nexport const TIMELINE_EXPAND_FAIL    = 'TIMELINE_EXPAND_FAIL';\n\nexport const TIMELINE_SCROLL_TOP   = 'TIMELINE_SCROLL_TOP';\nexport const TIMELINE_LOAD_PENDING = 'TIMELINE_LOAD_PENDING';\nexport const TIMELINE_DISCONNECT   = 'TIMELINE_DISCONNECT';\nexport const TIMELINE_CONNECT      = 'TIMELINE_CONNECT';\n\nexport const TIMELINE_MARK_AS_PARTIAL = 'TIMELINE_MARK_AS_PARTIAL';\n\nexport const loadPending = timeline => ({\n  type: TIMELINE_LOAD_PENDING,\n  timeline,\n});\n\nexport function updateTimeline(timeline, status, accept) {\n  return (dispatch, getState) => {\n    if (typeof accept === 'function' && !accept(status)) {\n      return;\n    }\n\n    if (getState().getIn(['timelines', timeline, 'isPartial'])) {\n      // Prevent new items from being added to a partial timeline,\n      // since it will be reloaded anyway\n\n      return;\n    }\n\n    let filtered = false;\n\n    if (status.filtered) {\n      const contextType = toServerSideType(timeline);\n      const filters = status.filtered.filter(result => result.filter.context.includes(contextType));\n\n      filtered = filters.length > 0;\n    }\n\n    dispatch(importFetchedStatus(status));\n\n    dispatch({\n      type: TIMELINE_UPDATE,\n      timeline,\n      status,\n      usePendingItems: preferPendingItems,\n      filtered,\n    });\n\n    if (timeline === 'home') {\n      dispatch(submitMarkers());\n    }\n  };\n}\n\nexport function deleteFromTimelines(id) {\n  return (dispatch, getState) => {\n    const accountId  = getState().getIn(['statuses', id, 'account']);\n    const references = getState().get('statuses').filter(status => status.get('reblog') === id).map(status => status.get('id'));\n    const reblogOf   = getState().getIn(['statuses', id, 'reblog'], null);\n\n    dispatch({\n      type: TIMELINE_DELETE,\n      id,\n      accountId,\n      references,\n      reblogOf,\n    });\n  };\n}\n\nexport function clearTimeline(timeline) {\n  return (dispatch) => {\n    dispatch({ type: TIMELINE_CLEAR, timeline });\n  };\n}\n\nconst noOp = () => {};\n\nconst parseTags = (tags = {}, mode) => {\n  return (tags[mode] || []).map((tag) => {\n    return tag.value;\n  });\n};\n\nexport function expandTimeline(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const isLoadingMore = !!params.max_id;\n\n    if (timeline.get('isLoading')) {\n      done();\n      return;\n    }\n\n    if (!params.max_id && !params.pinned && (timeline.get('items', ImmutableList()).size + timeline.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = timeline.getIn(['pendingItems', 0]);\n      const b = timeline.getIn(['items', 0]);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandTimelineRequest(timelineId, isLoadingMore));\n\n    api(getState).get(path, { params }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandTimelineSuccess(timelineId, response.data, next ? next.uri : null, response.status === 206, isLoadingRecent, isLoadingMore, isLoadingRecent && preferPendingItems));\n\n      if (timelineId === 'home') {\n        dispatch(submitMarkers());\n      }\n    }).catch(error => {\n      dispatch(expandTimelineFail(timelineId, error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function fillTimelineGaps(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const items = timeline.get('items');\n    const nullIndexes = items.map((statusId, index) => statusId === null ? index : null);\n    const gaps = nullIndexes.map(index => index > 0 ? items.get(index - 1) : null);\n\n    // Only expand at most two gaps to avoid doing too many requests\n    done = gaps.take(2).reduce((done, maxId) => {\n      return (() => dispatch(expandTimeline(timelineId, path, { ...params, maxId }, done)));\n    }, done);\n\n    done();\n  };\n}\n\nexport const expandHomeTimeline            = ({ maxId } = {}, done = noOp) => expandTimeline('home', '/api/v1/timelines/home', { max_id: maxId }, done);\nexport const expandPublicTimeline          = ({ maxId, onlyMedia, onlyRemote, allowLocalOnly } = {}, done = noOp) => expandTimeline(`public${onlyRemote ? ':remote' : (allowLocalOnly ? ':allow_local_only' : '')}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, allow_local_only: !!allowLocalOnly, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandCommunityTimeline       = ({ maxId, onlyMedia } = {}, done = noOp) => expandTimeline(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandDirectTimeline          = ({ maxId } = {}, done = noOp) => expandTimeline('direct', '/api/v1/timelines/direct', { max_id: maxId }, done);\nexport const expandAccountTimeline         = (accountId, { maxId, withReplies, tagged } = {}) => expandTimeline(`account:${accountId}${withReplies ? ':with_replies' : ''}${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { exclude_replies: !withReplies, exclude_reblogs: withReplies, tagged, max_id: maxId });\nexport const expandAccountFeaturedTimeline = (accountId, { tagged } = {}) => expandTimeline(`account:${accountId}:pinned`, `/api/v1/accounts/${accountId}/statuses`, { pinned: true, tagged });\nexport const expandAccountMediaTimeline    = (accountId, { maxId } = {}) => expandTimeline(`account:${accountId}:media`, `/api/v1/accounts/${accountId}/statuses`, { max_id: maxId, only_media: true, limit: 40 });\nexport const expandListTimeline            = (id, { maxId } = {}, done = noOp) => expandTimeline(`list:${id}`, `/api/v1/timelines/list/${id}`, { max_id: maxId }, done);\nexport const expandHashtagTimeline         = (hashtag, { maxId, tags, local } = {}, done = noOp) => {\n  return expandTimeline(`hashtag:${hashtag}${local ? ':local' : ''}`, `/api/v1/timelines/tag/${hashtag}`, {\n    max_id: maxId,\n    any:    parseTags(tags, 'any'),\n    all:    parseTags(tags, 'all'),\n    none:   parseTags(tags, 'none'),\n    local:  local,\n  }, done);\n};\n\nexport const fillHomeTimelineGaps      = (done = noOp) => fillTimelineGaps('home', '/api/v1/timelines/home', {}, done);\nexport const fillPublicTimelineGaps    = ({ onlyMedia, onlyRemote, allowLocalOnly } = {}, done = noOp) => fillTimelineGaps(`public${onlyRemote ? ':remote' : (allowLocalOnly ? ':allow_local_only' : '')}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, only_media: !!onlyMedia, allow_local_only: !!allowLocalOnly }, done);\nexport const fillCommunityTimelineGaps = ({ onlyMedia } = {}, done = noOp) => fillTimelineGaps(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, only_media: !!onlyMedia }, done);\nexport const fillListTimelineGaps      = (id, done = noOp) => fillTimelineGaps(`list:${id}`, `/api/v1/timelines/list/${id}`, {}, done);\n\nexport function expandTimelineRequest(timeline, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_REQUEST,\n    timeline,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineSuccess(timeline, statuses, next, partial, isLoadingRecent, isLoadingMore, usePendingItems) {\n  return {\n    type: TIMELINE_EXPAND_SUCCESS,\n    timeline,\n    statuses,\n    next,\n    partial,\n    isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineFail(timeline, error, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_FAIL,\n    timeline,\n    error,\n    skipLoading: !isLoadingMore,\n    skipNotFound: timeline.startsWith('account:'),\n  };\n}\n\nexport function scrollTopTimeline(timeline, top) {\n  return {\n    type: TIMELINE_SCROLL_TOP,\n    timeline,\n    top,\n  };\n}\n\nexport function connectTimeline(timeline) {\n  return {\n    type: TIMELINE_CONNECT,\n    timeline,\n    usePendingItems: preferPendingItems,\n  };\n}\n\nexport const disconnectTimeline = timeline => ({\n  type: TIMELINE_DISCONNECT,\n  timeline,\n  usePendingItems: preferPendingItems,\n});\n\nexport const markAsPartial = timeline => ({\n  type: TIMELINE_MARK_AS_PARTIAL,\n  timeline,\n});\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport api, { getLinks } from 'mastodon/api';\nimport { compareId } from 'mastodon/compare_id';\nimport { usePendingItems as preferPendingItems } from 'mastodon/initial_state';\n\nimport { importFetchedStatus, importFetchedStatuses } from './importer';\nimport { submitMarkers } from './markers';\n\nexport const TIMELINE_UPDATE  = 'TIMELINE_UPDATE';\nexport const TIMELINE_DELETE  = 'TIMELINE_DELETE';\nexport const TIMELINE_CLEAR   = 'TIMELINE_CLEAR';\n\nexport const TIMELINE_EXPAND_REQUEST = 'TIMELINE_EXPAND_REQUEST';\nexport const TIMELINE_EXPAND_SUCCESS = 'TIMELINE_EXPAND_SUCCESS';\nexport const TIMELINE_EXPAND_FAIL    = 'TIMELINE_EXPAND_FAIL';\n\nexport const TIMELINE_SCROLL_TOP   = 'TIMELINE_SCROLL_TOP';\nexport const TIMELINE_LOAD_PENDING = 'TIMELINE_LOAD_PENDING';\nexport const TIMELINE_DISCONNECT   = 'TIMELINE_DISCONNECT';\nexport const TIMELINE_CONNECT      = 'TIMELINE_CONNECT';\n\nexport const TIMELINE_MARK_AS_PARTIAL = 'TIMELINE_MARK_AS_PARTIAL';\n\nexport const loadPending = timeline => ({\n  type: TIMELINE_LOAD_PENDING,\n  timeline,\n});\n\nexport function updateTimeline(timeline, status, accept) {\n  return (dispatch, getState) => {\n    if (typeof accept === 'function' && !accept(status)) {\n      return;\n    }\n\n    if (getState().getIn(['timelines', timeline, 'isPartial'])) {\n      // Prevent new items from being added to a partial timeline,\n      // since it will be reloaded anyway\n\n      return;\n    }\n\n    dispatch(importFetchedStatus(status));\n\n    dispatch({\n      type: TIMELINE_UPDATE,\n      timeline,\n      status,\n      usePendingItems: preferPendingItems,\n    });\n\n    if (timeline === 'home') {\n      dispatch(submitMarkers());\n    }\n  };\n}\n\nexport function deleteFromTimelines(id) {\n  return (dispatch, getState) => {\n    const accountId  = getState().getIn(['statuses', id, 'account']);\n    const references = getState().get('statuses').filter(status => status.get('reblog') === id).map(status => status.get('id'));\n    const reblogOf   = getState().getIn(['statuses', id, 'reblog'], null);\n\n    dispatch({\n      type: TIMELINE_DELETE,\n      id,\n      accountId,\n      references,\n      reblogOf,\n    });\n  };\n}\n\nexport function clearTimeline(timeline) {\n  return (dispatch) => {\n    dispatch({ type: TIMELINE_CLEAR, timeline });\n  };\n}\n\nconst noOp = () => {};\n\nconst parseTags = (tags = {}, mode) => {\n  return (tags[mode] || []).map((tag) => {\n    return tag.value;\n  });\n};\n\nexport function expandTimeline(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const isLoadingMore = !!params.max_id;\n\n    if (timeline.get('isLoading')) {\n      done();\n      return;\n    }\n\n    if (!params.max_id && !params.pinned && (timeline.get('items', ImmutableList()).size + timeline.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = timeline.getIn(['pendingItems', 0]);\n      const b = timeline.getIn(['items', 0]);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandTimelineRequest(timelineId, isLoadingMore));\n\n    api(getState).get(path, { params }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandTimelineSuccess(timelineId, response.data, next ? next.uri : null, response.status === 206, isLoadingRecent, isLoadingMore, isLoadingRecent && preferPendingItems));\n\n      if (timelineId === 'home') {\n        dispatch(submitMarkers());\n      }\n    }).catch(error => {\n      dispatch(expandTimelineFail(timelineId, error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function fillTimelineGaps(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const items = timeline.get('items');\n    const nullIndexes = items.map((statusId, index) => statusId === null ? index : null);\n    const gaps = nullIndexes.map(index => index > 0 ? items.get(index - 1) : null);\n\n    // Only expand at most two gaps to avoid doing too many requests\n    done = gaps.take(2).reduce((done, maxId) => {\n      return (() => dispatch(expandTimeline(timelineId, path, { ...params, maxId }, done)));\n    }, done);\n\n    done();\n  };\n}\n\nexport const expandHomeTimeline            = ({ maxId } = {}, done = noOp) => expandTimeline('home', '/api/v1/timelines/home', { max_id: maxId }, done);\nexport const expandPublicTimeline          = ({ maxId, onlyMedia, onlyRemote } = {}, done = noOp) => expandTimeline(`public${onlyRemote ? ':remote' : ''}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandCommunityTimeline       = ({ maxId, onlyMedia } = {}, done = noOp) => expandTimeline(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandAccountTimeline         = (accountId, { maxId, withReplies, tagged } = {}) => expandTimeline(`account:${accountId}${withReplies ? ':with_replies' : ''}${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { exclude_replies: !withReplies, exclude_reblogs: withReplies, tagged, max_id: maxId });\nexport const expandAccountFeaturedTimeline = (accountId, { tagged } = {}) => expandTimeline(`account:${accountId}:pinned${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { pinned: true, tagged });\nexport const expandAccountMediaTimeline    = (accountId, { maxId } = {}) => expandTimeline(`account:${accountId}:media`, `/api/v1/accounts/${accountId}/statuses`, { max_id: maxId, only_media: true, limit: 40 });\nexport const expandListTimeline            = (id, { maxId } = {}, done = noOp) => expandTimeline(`list:${id}`, `/api/v1/timelines/list/${id}`, { max_id: maxId }, done);\nexport const expandHashtagTimeline         = (hashtag, { maxId, tags, local } = {}, done = noOp) => {\n  return expandTimeline(`hashtag:${hashtag}${local ? ':local' : ''}`, `/api/v1/timelines/tag/${hashtag}`, {\n    max_id: maxId,\n    any:    parseTags(tags, 'any'),\n    all:    parseTags(tags, 'all'),\n    none:   parseTags(tags, 'none'),\n    local:  local,\n  }, done);\n};\n\nexport const fillHomeTimelineGaps      = (done = noOp) => fillTimelineGaps('home', '/api/v1/timelines/home', {}, done);\nexport const fillPublicTimelineGaps    = ({ onlyMedia, onlyRemote } = {}, done = noOp) => fillTimelineGaps(`public${onlyRemote ? ':remote' : ''}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, only_media: !!onlyMedia }, done);\nexport const fillCommunityTimelineGaps = ({ onlyMedia } = {}, done = noOp) => fillTimelineGaps(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, only_media: !!onlyMedia }, done);\nexport const fillListTimelineGaps      = (id, done = noOp) => fillTimelineGaps(`list:${id}`, `/api/v1/timelines/list/${id}`, {}, done);\n\nexport function expandTimelineRequest(timeline, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_REQUEST,\n    timeline,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineSuccess(timeline, statuses, next, partial, isLoadingRecent, isLoadingMore, usePendingItems) {\n  return {\n    type: TIMELINE_EXPAND_SUCCESS,\n    timeline,\n    statuses,\n    next,\n    partial,\n    isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineFail(timeline, error, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_FAIL,\n    timeline,\n    error,\n    skipLoading: !isLoadingMore,\n    skipNotFound: timeline.startsWith('account:'),\n  };\n}\n\nexport function scrollTopTimeline(timeline, top) {\n  return {\n    type: TIMELINE_SCROLL_TOP,\n    timeline,\n    top,\n  };\n}\n\nexport function connectTimeline(timeline) {\n  return {\n    type: TIMELINE_CONNECT,\n    timeline,\n    usePendingItems: preferPendingItems,\n  };\n}\n\nexport const disconnectTimeline = timeline => ({\n  type: TIMELINE_DISCONNECT,\n  timeline,\n  usePendingItems: preferPendingItems,\n});\n\nexport const markAsPartial = timeline => ({\n  type: TIMELINE_MARK_AS_PARTIAL,\n  timeline,\n});\n","// Cache implementation based on Erik Rasmussen's `lru-memoize`:\n// https://github.com/erikras/lru-memoize\nvar NOT_FOUND = 'NOT_FOUND';\nfunction createSingletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n      return NOT_FOUND;\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    },\n    getEntries: function getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear: function clear() {\n      entry = undefined;\n    }\n  };\n}\nfunction createLruCache(maxSize, equals) {\n  var entries = [];\n  function get(key) {\n    var cacheIndex = entries.findIndex(function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n      return entry.value;\n    } // No entry found in cache, return sentinel\n\n    return NOT_FOUND;\n  }\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      // TODO Is unshift slow?\n      entries.unshift({\n        key: key,\n        value: value\n      });\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n  function getEntries() {\n    return entries;\n  }\n  function clear() {\n    entries = [];\n  }\n  return {\n    get: get,\n    put: put,\n    getEntries: getEntries,\n    clear: clear\n  };\n}\nexport var defaultEqualityCheck = function defaultEqualityCheck(a, b) {\n  return a === b;\n};\nexport function createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n    var length = prev.length;\n    for (var i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\n// defaultMemoize now supports a configurable cache size with LRU behavior,\n// and optional comparison of the result value with existing values\nexport function defaultMemoize(func, equalityCheckOrOptions) {\n  var providedOptions = typeof equalityCheckOrOptions === 'object' ? equalityCheckOrOptions : {\n    equalityCheck: equalityCheckOrOptions\n  };\n  var _providedOptions$equa = providedOptions.equalityCheck,\n    equalityCheck = _providedOptions$equa === void 0 ? defaultEqualityCheck : _providedOptions$equa,\n    _providedOptions$maxS = providedOptions.maxSize,\n    maxSize = _providedOptions$maxS === void 0 ? 1 : _providedOptions$maxS,\n    resultEqualityCheck = providedOptions.resultEqualityCheck;\n  var comparator = createCacheKeyComparator(equalityCheck);\n  var cache = maxSize === 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator); // we reference arguments instead of spreading them for performance reasons\n\n  function memoized() {\n    var value = cache.get(arguments);\n    if (value === NOT_FOUND) {\n      // @ts-ignore\n      value = func.apply(null, arguments);\n      if (resultEqualityCheck) {\n        var entries = cache.getEntries();\n        var matchingEntry = entries.find(function (entry) {\n          return resultEqualityCheck(entry.value, value);\n        });\n        if (matchingEntry) {\n          value = matchingEntry.value;\n        }\n      }\n      cache.put(arguments, value);\n    }\n    return value;\n  }\n  memoized.clearCache = function () {\n    return cache.clear();\n  };\n  return memoized;\n}","import { defaultMemoize, defaultEqualityCheck } from './defaultMemoize';\nexport { defaultMemoize, defaultEqualityCheck };\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep === 'function' ? \"function \" + (dep.name || 'unnamed') + \"()\" : typeof dep;\n    }).join(', ');\n    throw new Error(\"createSelector expects all input-selectors to be functions, but received the following types: [\" + dependencyTypes + \"]\");\n  }\n  return dependencies;\n}\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptionsFromArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptionsFromArgs[_key - 1] = arguments[_key];\n  }\n  var createSelector = function createSelector() {\n    for (var _len2 = arguments.length, funcs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n    var _recomputations = 0;\n    var _lastResult; // Due to the intricacies of rest params, we can't do an optional arg after `...funcs`.\n    // So, start by declaring the default value here.\n    // (And yes, the words 'memoize' and 'options' appear too many times in this next sequence.)\n\n    var directlyPassedOptions = {\n      memoizeOptions: undefined\n    }; // Normally, the result func or \"output selector\" is the last arg\n\n    var resultFunc = funcs.pop(); // If the result func is actually an _object_, assume it's our options object\n\n    if (typeof resultFunc === 'object') {\n      directlyPassedOptions = resultFunc; // and pop the real result func off\n\n      resultFunc = funcs.pop();\n    }\n    if (typeof resultFunc !== 'function') {\n      throw new Error(\"createSelector expects an output function after the inputs, but received: [\" + typeof resultFunc + \"]\");\n    } // Determine which set of options we're using. Prefer options passed directly,\n    // but fall back to options given to createSelectorCreator.\n\n    var _directlyPassedOption = directlyPassedOptions,\n      _directlyPassedOption2 = _directlyPassedOption.memoizeOptions,\n      memoizeOptions = _directlyPassedOption2 === void 0 ? memoizeOptionsFromArgs : _directlyPassedOption2; // Simplifying assumption: it's unlikely that the first options arg of the provided memoizer\n    // is an array. In most libs I've looked at, it's an equality function or options object.\n    // Based on that, if `memoizeOptions` _is_ an array, we assume it's a full\n    // user-provided array of options. Otherwise, it must be just the _first_ arg, and so\n    // we wrap it in an array so we can apply it.\n\n    var finalMemoizeOptions = Array.isArray(memoizeOptions) ? memoizeOptions : [memoizeOptions];\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(void 0, [function recomputationWrapper() {\n      _recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(finalMemoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function dependenciesChecker() {\n      var params = [];\n      var length = dependencies.length;\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        // @ts-ignore\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n      _lastResult = memoizedResultFunc.apply(null, params);\n      return _lastResult;\n    });\n    Object.assign(selector, {\n      resultFunc: resultFunc,\n      memoizedResultFunc: memoizedResultFunc,\n      dependencies: dependencies,\n      lastResult: function lastResult() {\n        return _lastResult;\n      },\n      recomputations: function recomputations() {\n        return _recomputations;\n      },\n      resetRecomputations: function resetRecomputations() {\n        return _recomputations = 0;\n      }\n    });\n    return selector;\n  }; // @ts-ignore\n\n  return createSelector;\n}\nexport var createSelector = /* #__PURE__ */createSelectorCreator(defaultMemoize);\n// Manual definition of state and output arguments\nexport var createStructuredSelector = function createStructuredSelector(selectors, selectorCreator) {\n  if (selectorCreator === void 0) {\n    selectorCreator = createSelector;\n  }\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + (\"where each property is a selector, instead received a \" + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  var resultSelector = selectorCreator(\n  // @ts-ignore\n  objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n  return resultSelector;\n};","function n(n) {\n  for (var r = arguments.length, t = Array(r > 1 ? r - 1 : 0), e = 1; e < r; e++) t[e - 1] = arguments[e];\n  if (\"production\" !== process.env.NODE_ENV) {\n    var i = Y[n],\n      o = i ? \"function\" == typeof i ? i.apply(null, t) : i : \"unknown error nr: \" + n;\n    throw Error(\"[Immer] \" + o);\n  }\n  throw Error(\"[Immer] minified error nr: \" + n + (t.length ? \" \" + t.map(function (n) {\n    return \"'\" + n + \"'\";\n  }).join(\",\") : \"\") + \". Find the full error at: https://bit.ly/3cXEKWf\");\n}\nfunction r(n) {\n  return !!n && !!n[Q];\n}\nfunction t(n) {\n  var r;\n  return !!n && (function (n) {\n    if (!n || \"object\" != typeof n) return !1;\n    var r = Object.getPrototypeOf(n);\n    if (null === r) return !0;\n    var t = Object.hasOwnProperty.call(r, \"constructor\") && r.constructor;\n    return t === Object || \"function\" == typeof t && Function.toString.call(t) === Z;\n  }(n) || Array.isArray(n) || !!n[L] || !!(null === (r = n.constructor) || void 0 === r ? void 0 : r[L]) || s(n) || v(n));\n}\nfunction e(t) {\n  return r(t) || n(23, t), t[Q].t;\n}\nfunction i(n, r, t) {\n  void 0 === t && (t = !1), 0 === o(n) ? (t ? Object.keys : nn)(n).forEach(function (e) {\n    t && \"symbol\" == typeof e || r(e, n[e], n);\n  }) : n.forEach(function (t, e) {\n    return r(e, t, n);\n  });\n}\nfunction o(n) {\n  var r = n[Q];\n  return r ? r.i > 3 ? r.i - 4 : r.i : Array.isArray(n) ? 1 : s(n) ? 2 : v(n) ? 3 : 0;\n}\nfunction u(n, r) {\n  return 2 === o(n) ? n.has(r) : Object.prototype.hasOwnProperty.call(n, r);\n}\nfunction a(n, r) {\n  return 2 === o(n) ? n.get(r) : n[r];\n}\nfunction f(n, r, t) {\n  var e = o(n);\n  2 === e ? n.set(r, t) : 3 === e ? n.add(t) : n[r] = t;\n}\nfunction c(n, r) {\n  return n === r ? 0 !== n || 1 / n == 1 / r : n != n && r != r;\n}\nfunction s(n) {\n  return X && n instanceof Map;\n}\nfunction v(n) {\n  return q && n instanceof Set;\n}\nfunction p(n) {\n  return n.o || n.t;\n}\nfunction l(n) {\n  if (Array.isArray(n)) return Array.prototype.slice.call(n);\n  var r = rn(n);\n  delete r[Q];\n  for (var t = nn(r), e = 0; e < t.length; e++) {\n    var i = t[e],\n      o = r[i];\n    !1 === o.writable && (o.writable = !0, o.configurable = !0), (o.get || o.set) && (r[i] = {\n      configurable: !0,\n      writable: !0,\n      enumerable: o.enumerable,\n      value: n[i]\n    });\n  }\n  return Object.create(Object.getPrototypeOf(n), r);\n}\nfunction d(n, e) {\n  return void 0 === e && (e = !1), y(n) || r(n) || !t(n) || (o(n) > 1 && (n.set = n.add = n.clear = n.delete = h), Object.freeze(n), e && i(n, function (n, r) {\n    return d(r, !0);\n  }, !0)), n;\n}\nfunction h() {\n  n(2);\n}\nfunction y(n) {\n  return null == n || \"object\" != typeof n || Object.isFrozen(n);\n}\nfunction b(r) {\n  var t = tn[r];\n  return t || n(18, r), t;\n}\nfunction m(n, r) {\n  tn[n] || (tn[n] = r);\n}\nfunction _() {\n  return \"production\" === process.env.NODE_ENV || U || n(0), U;\n}\nfunction j(n, r) {\n  r && (b(\"Patches\"), n.u = [], n.s = [], n.v = r);\n}\nfunction g(n) {\n  O(n), n.p.forEach(S), n.p = null;\n}\nfunction O(n) {\n  n === U && (U = n.l);\n}\nfunction w(n) {\n  return U = {\n    p: [],\n    l: U,\n    h: n,\n    m: !0,\n    _: 0\n  };\n}\nfunction S(n) {\n  var r = n[Q];\n  0 === r.i || 1 === r.i ? r.j() : r.g = !0;\n}\nfunction P(r, e) {\n  e._ = e.p.length;\n  var i = e.p[0],\n    o = void 0 !== r && r !== i;\n  return e.h.O || b(\"ES5\").S(e, r, o), o ? (i[Q].P && (g(e), n(4)), t(r) && (r = M(e, r), e.l || x(e, r)), e.u && b(\"Patches\").M(i[Q].t, r, e.u, e.s)) : r = M(e, i, []), g(e), e.u && e.v(e.u, e.s), r !== H ? r : void 0;\n}\nfunction M(n, r, t) {\n  if (y(r)) return r;\n  var e = r[Q];\n  if (!e) return i(r, function (i, o) {\n    return A(n, e, r, i, o, t);\n  }, !0), r;\n  if (e.A !== n) return r;\n  if (!e.P) return x(n, e.t, !0), e.t;\n  if (!e.I) {\n    e.I = !0, e.A._--;\n    var o = 4 === e.i || 5 === e.i ? e.o = l(e.k) : e.o,\n      u = o,\n      a = !1;\n    3 === e.i && (u = new Set(o), o.clear(), a = !0), i(u, function (r, i) {\n      return A(n, e, o, r, i, t, a);\n    }), x(n, o, !1), t && n.u && b(\"Patches\").N(e, t, n.u, n.s);\n  }\n  return e.o;\n}\nfunction A(e, i, o, a, c, s, v) {\n  if (\"production\" !== process.env.NODE_ENV && c === o && n(5), r(c)) {\n    var p = M(e, c, s && i && 3 !== i.i && !u(i.R, a) ? s.concat(a) : void 0);\n    if (f(o, a, p), !r(p)) return;\n    e.m = !1;\n  } else v && o.add(c);\n  if (t(c) && !y(c)) {\n    if (!e.h.D && e._ < 1) return;\n    M(e, c), i && i.A.l || x(e, c);\n  }\n}\nfunction x(n, r, t) {\n  void 0 === t && (t = !1), !n.l && n.h.D && n.m && d(r, t);\n}\nfunction z(n, r) {\n  var t = n[Q];\n  return (t ? p(t) : n)[r];\n}\nfunction I(n, r) {\n  if (r in n) for (var t = Object.getPrototypeOf(n); t;) {\n    var e = Object.getOwnPropertyDescriptor(t, r);\n    if (e) return e;\n    t = Object.getPrototypeOf(t);\n  }\n}\nfunction k(n) {\n  n.P || (n.P = !0, n.l && k(n.l));\n}\nfunction E(n) {\n  n.o || (n.o = l(n.t));\n}\nfunction N(n, r, t) {\n  var e = s(r) ? b(\"MapSet\").F(r, t) : v(r) ? b(\"MapSet\").T(r, t) : n.O ? function (n, r) {\n    var t = Array.isArray(n),\n      e = {\n        i: t ? 1 : 0,\n        A: r ? r.A : _(),\n        P: !1,\n        I: !1,\n        R: {},\n        l: r,\n        t: n,\n        k: null,\n        o: null,\n        j: null,\n        C: !1\n      },\n      i = e,\n      o = en;\n    t && (i = [e], o = on);\n    var u = Proxy.revocable(i, o),\n      a = u.revoke,\n      f = u.proxy;\n    return e.k = f, e.j = a, f;\n  }(r, t) : b(\"ES5\").J(r, t);\n  return (t ? t.A : _()).p.push(e), e;\n}\nfunction R(e) {\n  return r(e) || n(22, e), function n(r) {\n    if (!t(r)) return r;\n    var e,\n      u = r[Q],\n      c = o(r);\n    if (u) {\n      if (!u.P && (u.i < 4 || !b(\"ES5\").K(u))) return u.t;\n      u.I = !0, e = D(r, c), u.I = !1;\n    } else e = D(r, c);\n    return i(e, function (r, t) {\n      u && a(u.t, r) === t || f(e, r, n(t));\n    }), 3 === c ? new Set(e) : e;\n  }(e);\n}\nfunction D(n, r) {\n  switch (r) {\n    case 2:\n      return new Map(n);\n    case 3:\n      return Array.from(n);\n  }\n  return l(n);\n}\nfunction F() {\n  function t(n, r) {\n    var t = s[n];\n    return t ? t.enumerable = r : s[n] = t = {\n      configurable: !0,\n      enumerable: r,\n      get: function () {\n        var r = this[Q];\n        return \"production\" !== process.env.NODE_ENV && f(r), en.get(r, n);\n      },\n      set: function (r) {\n        var t = this[Q];\n        \"production\" !== process.env.NODE_ENV && f(t), en.set(t, n, r);\n      }\n    }, t;\n  }\n  function e(n) {\n    for (var r = n.length - 1; r >= 0; r--) {\n      var t = n[r][Q];\n      if (!t.P) switch (t.i) {\n        case 5:\n          a(t) && k(t);\n          break;\n        case 4:\n          o(t) && k(t);\n      }\n    }\n  }\n  function o(n) {\n    for (var r = n.t, t = n.k, e = nn(t), i = e.length - 1; i >= 0; i--) {\n      var o = e[i];\n      if (o !== Q) {\n        var a = r[o];\n        if (void 0 === a && !u(r, o)) return !0;\n        var f = t[o],\n          s = f && f[Q];\n        if (s ? s.t !== a : !c(f, a)) return !0;\n      }\n    }\n    var v = !!r[Q];\n    return e.length !== nn(r).length + (v ? 0 : 1);\n  }\n  function a(n) {\n    var r = n.k;\n    if (r.length !== n.t.length) return !0;\n    var t = Object.getOwnPropertyDescriptor(r, r.length - 1);\n    if (t && !t.get) return !0;\n    for (var e = 0; e < r.length; e++) if (!r.hasOwnProperty(e)) return !0;\n    return !1;\n  }\n  function f(r) {\n    r.g && n(3, JSON.stringify(p(r)));\n  }\n  var s = {};\n  m(\"ES5\", {\n    J: function (n, r) {\n      var e = Array.isArray(n),\n        i = function (n, r) {\n          if (n) {\n            for (var e = Array(r.length), i = 0; i < r.length; i++) Object.defineProperty(e, \"\" + i, t(i, !0));\n            return e;\n          }\n          var o = rn(r);\n          delete o[Q];\n          for (var u = nn(o), a = 0; a < u.length; a++) {\n            var f = u[a];\n            o[f] = t(f, n || !!o[f].enumerable);\n          }\n          return Object.create(Object.getPrototypeOf(r), o);\n        }(e, n),\n        o = {\n          i: e ? 5 : 4,\n          A: r ? r.A : _(),\n          P: !1,\n          I: !1,\n          R: {},\n          l: r,\n          t: n,\n          k: i,\n          o: null,\n          g: !1,\n          C: !1\n        };\n      return Object.defineProperty(i, Q, {\n        value: o,\n        writable: !0\n      }), i;\n    },\n    S: function (n, t, o) {\n      o ? r(t) && t[Q].A === n && e(n.p) : (n.u && function n(r) {\n        if (r && \"object\" == typeof r) {\n          var t = r[Q];\n          if (t) {\n            var e = t.t,\n              o = t.k,\n              f = t.R,\n              c = t.i;\n            if (4 === c) i(o, function (r) {\n              r !== Q && (void 0 !== e[r] || u(e, r) ? f[r] || n(o[r]) : (f[r] = !0, k(t)));\n            }), i(e, function (n) {\n              void 0 !== o[n] || u(o, n) || (f[n] = !1, k(t));\n            });else if (5 === c) {\n              if (a(t) && (k(t), f.length = !0), o.length < e.length) for (var s = o.length; s < e.length; s++) f[s] = !1;else for (var v = e.length; v < o.length; v++) f[v] = !0;\n              for (var p = Math.min(o.length, e.length), l = 0; l < p; l++) o.hasOwnProperty(l) || (f[l] = !0), void 0 === f[l] && n(o[l]);\n            }\n          }\n        }\n      }(n.p[0]), e(n.p));\n    },\n    K: function (n) {\n      return 4 === n.i ? o(n) : a(n);\n    }\n  });\n}\nfunction T() {\n  function e(n) {\n    if (!t(n)) return n;\n    if (Array.isArray(n)) return n.map(e);\n    if (s(n)) return new Map(Array.from(n.entries()).map(function (n) {\n      return [n[0], e(n[1])];\n    }));\n    if (v(n)) return new Set(Array.from(n).map(e));\n    var r = Object.create(Object.getPrototypeOf(n));\n    for (var i in n) r[i] = e(n[i]);\n    return u(n, L) && (r[L] = n[L]), r;\n  }\n  function f(n) {\n    return r(n) ? e(n) : n;\n  }\n  var c = \"add\";\n  m(\"Patches\", {\n    $: function (r, t) {\n      return t.forEach(function (t) {\n        for (var i = t.path, u = t.op, f = r, s = 0; s < i.length - 1; s++) {\n          var v = o(f),\n            p = i[s];\n          \"string\" != typeof p && \"number\" != typeof p && (p = \"\" + p), 0 !== v && 1 !== v || \"__proto__\" !== p && \"constructor\" !== p || n(24), \"function\" == typeof f && \"prototype\" === p && n(24), \"object\" != typeof (f = a(f, p)) && n(15, i.join(\"/\"));\n        }\n        var l = o(f),\n          d = e(t.value),\n          h = i[i.length - 1];\n        switch (u) {\n          case \"replace\":\n            switch (l) {\n              case 2:\n                return f.set(h, d);\n              case 3:\n                n(16);\n              default:\n                return f[h] = d;\n            }\n          case c:\n            switch (l) {\n              case 1:\n                return \"-\" === h ? f.push(d) : f.splice(h, 0, d);\n              case 2:\n                return f.set(h, d);\n              case 3:\n                return f.add(d);\n              default:\n                return f[h] = d;\n            }\n          case \"remove\":\n            switch (l) {\n              case 1:\n                return f.splice(h, 1);\n              case 2:\n                return f.delete(h);\n              case 3:\n                return f.delete(t.value);\n              default:\n                return delete f[h];\n            }\n          default:\n            n(17, u);\n        }\n      }), r;\n    },\n    N: function (n, r, t, e) {\n      switch (n.i) {\n        case 0:\n        case 4:\n        case 2:\n          return function (n, r, t, e) {\n            var o = n.t,\n              s = n.o;\n            i(n.R, function (n, i) {\n              var v = a(o, n),\n                p = a(s, n),\n                l = i ? u(o, n) ? \"replace\" : c : \"remove\";\n              if (v !== p || \"replace\" !== l) {\n                var d = r.concat(n);\n                t.push(\"remove\" === l ? {\n                  op: l,\n                  path: d\n                } : {\n                  op: l,\n                  path: d,\n                  value: p\n                }), e.push(l === c ? {\n                  op: \"remove\",\n                  path: d\n                } : \"remove\" === l ? {\n                  op: c,\n                  path: d,\n                  value: f(v)\n                } : {\n                  op: \"replace\",\n                  path: d,\n                  value: f(v)\n                });\n              }\n            });\n          }(n, r, t, e);\n        case 5:\n        case 1:\n          return function (n, r, t, e) {\n            var i = n.t,\n              o = n.R,\n              u = n.o;\n            if (u.length < i.length) {\n              var a = [u, i];\n              i = a[0], u = a[1];\n              var s = [e, t];\n              t = s[0], e = s[1];\n            }\n            for (var v = 0; v < i.length; v++) if (o[v] && u[v] !== i[v]) {\n              var p = r.concat([v]);\n              t.push({\n                op: \"replace\",\n                path: p,\n                value: f(u[v])\n              }), e.push({\n                op: \"replace\",\n                path: p,\n                value: f(i[v])\n              });\n            }\n            for (var l = i.length; l < u.length; l++) {\n              var d = r.concat([l]);\n              t.push({\n                op: c,\n                path: d,\n                value: f(u[l])\n              });\n            }\n            i.length < u.length && e.push({\n              op: \"replace\",\n              path: r.concat([\"length\"]),\n              value: i.length\n            });\n          }(n, r, t, e);\n        case 3:\n          return function (n, r, t, e) {\n            var i = n.t,\n              o = n.o,\n              u = 0;\n            i.forEach(function (n) {\n              if (!o.has(n)) {\n                var i = r.concat([u]);\n                t.push({\n                  op: \"remove\",\n                  path: i,\n                  value: n\n                }), e.unshift({\n                  op: c,\n                  path: i,\n                  value: n\n                });\n              }\n              u++;\n            }), u = 0, o.forEach(function (n) {\n              if (!i.has(n)) {\n                var o = r.concat([u]);\n                t.push({\n                  op: c,\n                  path: o,\n                  value: n\n                }), e.unshift({\n                  op: \"remove\",\n                  path: o,\n                  value: n\n                });\n              }\n              u++;\n            });\n          }(n, r, t, e);\n      }\n    },\n    M: function (n, r, t, e) {\n      t.push({\n        op: \"replace\",\n        path: [],\n        value: r === H ? void 0 : r\n      }), e.push({\n        op: \"replace\",\n        path: [],\n        value: n\n      });\n    }\n  });\n}\nfunction C() {\n  function r(n, r) {\n    function t() {\n      this.constructor = n;\n    }\n    a(n, r), n.prototype = (t.prototype = r.prototype, new t());\n  }\n  function e(n) {\n    n.o || (n.R = new Map(), n.o = new Map(n.t));\n  }\n  function o(n) {\n    n.o || (n.o = new Set(), n.t.forEach(function (r) {\n      if (t(r)) {\n        var e = N(n.A.h, r, n);\n        n.p.set(r, e), n.o.add(e);\n      } else n.o.add(r);\n    }));\n  }\n  function u(r) {\n    r.g && n(3, JSON.stringify(p(r)));\n  }\n  var a = function (n, r) {\n      return (a = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (n, r) {\n        n.__proto__ = r;\n      } || function (n, r) {\n        for (var t in r) r.hasOwnProperty(t) && (n[t] = r[t]);\n      })(n, r);\n    },\n    f = function () {\n      function n(n, r) {\n        return this[Q] = {\n          i: 2,\n          l: r,\n          A: r ? r.A : _(),\n          P: !1,\n          I: !1,\n          o: void 0,\n          R: void 0,\n          t: n,\n          k: this,\n          C: !1,\n          g: !1\n        }, this;\n      }\n      r(n, Map);\n      var o = n.prototype;\n      return Object.defineProperty(o, \"size\", {\n        get: function () {\n          return p(this[Q]).size;\n        }\n      }), o.has = function (n) {\n        return p(this[Q]).has(n);\n      }, o.set = function (n, r) {\n        var t = this[Q];\n        return u(t), p(t).has(n) && p(t).get(n) === r || (e(t), k(t), t.R.set(n, !0), t.o.set(n, r), t.R.set(n, !0)), this;\n      }, o.delete = function (n) {\n        if (!this.has(n)) return !1;\n        var r = this[Q];\n        return u(r), e(r), k(r), r.t.has(n) ? r.R.set(n, !1) : r.R.delete(n), r.o.delete(n), !0;\n      }, o.clear = function () {\n        var n = this[Q];\n        u(n), p(n).size && (e(n), k(n), n.R = new Map(), i(n.t, function (r) {\n          n.R.set(r, !1);\n        }), n.o.clear());\n      }, o.forEach = function (n, r) {\n        var t = this;\n        p(this[Q]).forEach(function (e, i) {\n          n.call(r, t.get(i), i, t);\n        });\n      }, o.get = function (n) {\n        var r = this[Q];\n        u(r);\n        var i = p(r).get(n);\n        if (r.I || !t(i)) return i;\n        if (i !== r.t.get(n)) return i;\n        var o = N(r.A.h, i, r);\n        return e(r), r.o.set(n, o), o;\n      }, o.keys = function () {\n        return p(this[Q]).keys();\n      }, o.values = function () {\n        var n,\n          r = this,\n          t = this.keys();\n        return (n = {})[V] = function () {\n          return r.values();\n        }, n.next = function () {\n          var n = t.next();\n          return n.done ? n : {\n            done: !1,\n            value: r.get(n.value)\n          };\n        }, n;\n      }, o.entries = function () {\n        var n,\n          r = this,\n          t = this.keys();\n        return (n = {})[V] = function () {\n          return r.entries();\n        }, n.next = function () {\n          var n = t.next();\n          if (n.done) return n;\n          var e = r.get(n.value);\n          return {\n            done: !1,\n            value: [n.value, e]\n          };\n        }, n;\n      }, o[V] = function () {\n        return this.entries();\n      }, n;\n    }(),\n    c = function () {\n      function n(n, r) {\n        return this[Q] = {\n          i: 3,\n          l: r,\n          A: r ? r.A : _(),\n          P: !1,\n          I: !1,\n          o: void 0,\n          t: n,\n          k: this,\n          p: new Map(),\n          g: !1,\n          C: !1\n        }, this;\n      }\n      r(n, Set);\n      var t = n.prototype;\n      return Object.defineProperty(t, \"size\", {\n        get: function () {\n          return p(this[Q]).size;\n        }\n      }), t.has = function (n) {\n        var r = this[Q];\n        return u(r), r.o ? !!r.o.has(n) || !(!r.p.has(n) || !r.o.has(r.p.get(n))) : r.t.has(n);\n      }, t.add = function (n) {\n        var r = this[Q];\n        return u(r), this.has(n) || (o(r), k(r), r.o.add(n)), this;\n      }, t.delete = function (n) {\n        if (!this.has(n)) return !1;\n        var r = this[Q];\n        return u(r), o(r), k(r), r.o.delete(n) || !!r.p.has(n) && r.o.delete(r.p.get(n));\n      }, t.clear = function () {\n        var n = this[Q];\n        u(n), p(n).size && (o(n), k(n), n.o.clear());\n      }, t.values = function () {\n        var n = this[Q];\n        return u(n), o(n), n.o.values();\n      }, t.entries = function () {\n        var n = this[Q];\n        return u(n), o(n), n.o.entries();\n      }, t.keys = function () {\n        return this.values();\n      }, t[V] = function () {\n        return this.values();\n      }, t.forEach = function (n, r) {\n        for (var t = this.values(), e = t.next(); !e.done;) n.call(r, e.value, e.value, this), e = t.next();\n      }, n;\n    }();\n  m(\"MapSet\", {\n    F: function (n, r) {\n      return new f(n, r);\n    },\n    T: function (n, r) {\n      return new c(n, r);\n    }\n  });\n}\nfunction J() {\n  F(), C(), T();\n}\nfunction K(n) {\n  return n;\n}\nfunction $(n) {\n  return n;\n}\nvar G,\n  U,\n  W = \"undefined\" != typeof Symbol && \"symbol\" == typeof Symbol(\"x\"),\n  X = \"undefined\" != typeof Map,\n  q = \"undefined\" != typeof Set,\n  B = \"undefined\" != typeof Proxy && void 0 !== Proxy.revocable && \"undefined\" != typeof Reflect,\n  H = W ? Symbol.for(\"immer-nothing\") : ((G = {})[\"immer-nothing\"] = !0, G),\n  L = W ? Symbol.for(\"immer-draftable\") : \"__$immer_draftable\",\n  Q = W ? Symbol.for(\"immer-state\") : \"__$immer_state\",\n  V = \"undefined\" != typeof Symbol && Symbol.iterator || \"@@iterator\",\n  Y = {\n    0: \"Illegal state\",\n    1: \"Immer drafts cannot have computed properties\",\n    2: \"This object has been frozen and should not be mutated\",\n    3: function (n) {\n      return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + n;\n    },\n    4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n    5: \"Immer forbids circular references\",\n    6: \"The first or second argument to `produce` must be a function\",\n    7: \"The third argument to `produce` must be a function or undefined\",\n    8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n    9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n    10: \"The given draft is already finalized\",\n    11: \"Object.defineProperty() cannot be used on an Immer draft\",\n    12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n    13: \"Immer only supports deleting array indices\",\n    14: \"Immer only supports setting array indices and the 'length' property\",\n    15: function (n) {\n      return \"Cannot apply patch, path doesn't resolve: \" + n;\n    },\n    16: 'Sets cannot have \"replace\" patches.',\n    17: function (n) {\n      return \"Unsupported patch operation: \" + n;\n    },\n    18: function (n) {\n      return \"The plugin for '\" + n + \"' has not been loaded into Immer. To enable the plugin, import and call `enable\" + n + \"()` when initializing your application.\";\n    },\n    20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n    21: function (n) {\n      return \"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\" + n + \"'\";\n    },\n    22: function (n) {\n      return \"'current' expects a draft, got: \" + n;\n    },\n    23: function (n) {\n      return \"'original' expects a draft, got: \" + n;\n    },\n    24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n  },\n  Z = \"\" + Object.prototype.constructor,\n  nn = \"undefined\" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : void 0 !== Object.getOwnPropertySymbols ? function (n) {\n    return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n));\n  } : Object.getOwnPropertyNames,\n  rn = Object.getOwnPropertyDescriptors || function (n) {\n    var r = {};\n    return nn(n).forEach(function (t) {\n      r[t] = Object.getOwnPropertyDescriptor(n, t);\n    }), r;\n  },\n  tn = {},\n  en = {\n    get: function (n, r) {\n      if (r === Q) return n;\n      var e = p(n);\n      if (!u(e, r)) return function (n, r, t) {\n        var e,\n          i = I(r, t);\n        return i ? \"value\" in i ? i.value : null === (e = i.get) || void 0 === e ? void 0 : e.call(n.k) : void 0;\n      }(n, e, r);\n      var i = e[r];\n      return n.I || !t(i) ? i : i === z(n.t, r) ? (E(n), n.o[r] = N(n.A.h, i, n)) : i;\n    },\n    has: function (n, r) {\n      return r in p(n);\n    },\n    ownKeys: function (n) {\n      return Reflect.ownKeys(p(n));\n    },\n    set: function (n, r, t) {\n      var e = I(p(n), r);\n      if (null == e ? void 0 : e.set) return e.set.call(n.k, t), !0;\n      if (!n.P) {\n        var i = z(p(n), r),\n          o = null == i ? void 0 : i[Q];\n        if (o && o.t === t) return n.o[r] = t, n.R[r] = !1, !0;\n        if (c(t, i) && (void 0 !== t || u(n.t, r))) return !0;\n        E(n), k(n);\n      }\n      return n.o[r] === t && (void 0 !== t || r in n.o) || Number.isNaN(t) && Number.isNaN(n.o[r]) || (n.o[r] = t, n.R[r] = !0), !0;\n    },\n    deleteProperty: function (n, r) {\n      return void 0 !== z(n.t, r) || r in n.t ? (n.R[r] = !1, E(n), k(n)) : delete n.R[r], n.o && delete n.o[r], !0;\n    },\n    getOwnPropertyDescriptor: function (n, r) {\n      var t = p(n),\n        e = Reflect.getOwnPropertyDescriptor(t, r);\n      return e ? {\n        writable: !0,\n        configurable: 1 !== n.i || \"length\" !== r,\n        enumerable: e.enumerable,\n        value: t[r]\n      } : e;\n    },\n    defineProperty: function () {\n      n(11);\n    },\n    getPrototypeOf: function (n) {\n      return Object.getPrototypeOf(n.t);\n    },\n    setPrototypeOf: function () {\n      n(12);\n    }\n  },\n  on = {};\ni(en, function (n, r) {\n  on[n] = function () {\n    return arguments[0] = arguments[0][0], r.apply(this, arguments);\n  };\n}), on.deleteProperty = function (r, t) {\n  return \"production\" !== process.env.NODE_ENV && isNaN(parseInt(t)) && n(13), on.set.call(this, r, t, void 0);\n}, on.set = function (r, t, e) {\n  return \"production\" !== process.env.NODE_ENV && \"length\" !== t && isNaN(parseInt(t)) && n(14), en.set.call(this, r[0], t, e, r[0]);\n};\nvar un = function () {\n    function e(r) {\n      var e = this;\n      this.O = B, this.D = !0, this.produce = function (r, i, o) {\n        if (\"function\" == typeof r && \"function\" != typeof i) {\n          var u = i;\n          i = r;\n          var a = e;\n          return function (n) {\n            var r = this;\n            void 0 === n && (n = u);\n            for (var t = arguments.length, e = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++) e[o - 1] = arguments[o];\n            return a.produce(n, function (n) {\n              var t;\n              return (t = i).call.apply(t, [r, n].concat(e));\n            });\n          };\n        }\n        var f;\n        if (\"function\" != typeof i && n(6), void 0 !== o && \"function\" != typeof o && n(7), t(r)) {\n          var c = w(e),\n            s = N(e, r, void 0),\n            v = !0;\n          try {\n            f = i(s), v = !1;\n          } finally {\n            v ? g(c) : O(c);\n          }\n          return \"undefined\" != typeof Promise && f instanceof Promise ? f.then(function (n) {\n            return j(c, o), P(n, c);\n          }, function (n) {\n            throw g(c), n;\n          }) : (j(c, o), P(f, c));\n        }\n        if (!r || \"object\" != typeof r) {\n          if (void 0 === (f = i(r)) && (f = r), f === H && (f = void 0), e.D && d(f, !0), o) {\n            var p = [],\n              l = [];\n            b(\"Patches\").M(r, f, p, l), o(p, l);\n          }\n          return f;\n        }\n        n(21, r);\n      }, this.produceWithPatches = function (n, r) {\n        if (\"function\" == typeof n) return function (r) {\n          for (var t = arguments.length, i = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++) i[o - 1] = arguments[o];\n          return e.produceWithPatches(r, function (r) {\n            return n.apply(void 0, [r].concat(i));\n          });\n        };\n        var t,\n          i,\n          o = e.produce(n, r, function (n, r) {\n            t = n, i = r;\n          });\n        return \"undefined\" != typeof Promise && o instanceof Promise ? o.then(function (n) {\n          return [n, t, i];\n        }) : [o, t, i];\n      }, \"boolean\" == typeof (null == r ? void 0 : r.useProxies) && this.setUseProxies(r.useProxies), \"boolean\" == typeof (null == r ? void 0 : r.autoFreeze) && this.setAutoFreeze(r.autoFreeze);\n    }\n    var i = e.prototype;\n    return i.createDraft = function (e) {\n      t(e) || n(8), r(e) && (e = R(e));\n      var i = w(this),\n        o = N(this, e, void 0);\n      return o[Q].C = !0, O(i), o;\n    }, i.finishDraft = function (r, t) {\n      var e = r && r[Q];\n      \"production\" !== process.env.NODE_ENV && (e && e.C || n(9), e.I && n(10));\n      var i = e.A;\n      return j(i, t), P(void 0, i);\n    }, i.setAutoFreeze = function (n) {\n      this.D = n;\n    }, i.setUseProxies = function (r) {\n      r && !B && n(20), this.O = r;\n    }, i.applyPatches = function (n, t) {\n      var e;\n      for (e = t.length - 1; e >= 0; e--) {\n        var i = t[e];\n        if (0 === i.path.length && \"replace\" === i.op) {\n          n = i.value;\n          break;\n        }\n      }\n      e > -1 && (t = t.slice(e + 1));\n      var o = b(\"Patches\").$;\n      return r(n) ? o(n, t) : this.produce(n, function (n) {\n        return o(n, t);\n      });\n    }, e;\n  }(),\n  an = new un(),\n  fn = an.produce,\n  cn = an.produceWithPatches.bind(an),\n  sn = an.setAutoFreeze.bind(an),\n  vn = an.setUseProxies.bind(an),\n  pn = an.applyPatches.bind(an),\n  ln = an.createDraft.bind(an),\n  dn = an.finishDraft.bind(an);\nexport default fn;\nexport { un as Immer, pn as applyPatches, K as castDraft, $ as castImmutable, ln as createDraft, R as current, J as enableAllPlugins, F as enableES5, C as enableMapSet, T as enablePatches, dn as finishDraft, d as freeze, L as immerable, r as isDraft, t as isDraftable, H as nothing, e as original, fn as produce, cn as produceWithPatches, sn as setAutoFreeze, vn as setUseProxies };","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\n\nexport const REBLOG_REQUEST = 'REBLOG_REQUEST';\nexport const REBLOG_SUCCESS = 'REBLOG_SUCCESS';\nexport const REBLOG_FAIL    = 'REBLOG_FAIL';\n\nexport const REBLOGS_EXPAND_REQUEST = 'REBLOGS_EXPAND_REQUEST';\nexport const REBLOGS_EXPAND_SUCCESS = 'REBLOGS_EXPAND_SUCCESS';\nexport const REBLOGS_EXPAND_FAIL = 'REBLOGS_EXPAND_FAIL';\n\nexport const FAVOURITE_REQUEST = 'FAVOURITE_REQUEST';\nexport const FAVOURITE_SUCCESS = 'FAVOURITE_SUCCESS';\nexport const FAVOURITE_FAIL    = 'FAVOURITE_FAIL';\n\nexport const UNREBLOG_REQUEST = 'UNREBLOG_REQUEST';\nexport const UNREBLOG_SUCCESS = 'UNREBLOG_SUCCESS';\nexport const UNREBLOG_FAIL    = 'UNREBLOG_FAIL';\n\nexport const UNFAVOURITE_REQUEST = 'UNFAVOURITE_REQUEST';\nexport const UNFAVOURITE_SUCCESS = 'UNFAVOURITE_SUCCESS';\nexport const UNFAVOURITE_FAIL    = 'UNFAVOURITE_FAIL';\n\nexport const REBLOGS_FETCH_REQUEST = 'REBLOGS_FETCH_REQUEST';\nexport const REBLOGS_FETCH_SUCCESS = 'REBLOGS_FETCH_SUCCESS';\nexport const REBLOGS_FETCH_FAIL    = 'REBLOGS_FETCH_FAIL';\n\nexport const FAVOURITES_FETCH_REQUEST = 'FAVOURITES_FETCH_REQUEST';\nexport const FAVOURITES_FETCH_SUCCESS = 'FAVOURITES_FETCH_SUCCESS';\nexport const FAVOURITES_FETCH_FAIL    = 'FAVOURITES_FETCH_FAIL';\n\nexport const FAVOURITES_EXPAND_REQUEST = 'FAVOURITES_EXPAND_REQUEST';\nexport const FAVOURITES_EXPAND_SUCCESS = 'FAVOURITES_EXPAND_SUCCESS';\nexport const FAVOURITES_EXPAND_FAIL = 'FAVOURITES_EXPAND_FAIL';\n\nexport const PIN_REQUEST = 'PIN_REQUEST';\nexport const PIN_SUCCESS = 'PIN_SUCCESS';\nexport const PIN_FAIL    = 'PIN_FAIL';\n\nexport const UNPIN_REQUEST = 'UNPIN_REQUEST';\nexport const UNPIN_SUCCESS = 'UNPIN_SUCCESS';\nexport const UNPIN_FAIL    = 'UNPIN_FAIL';\n\nexport const BOOKMARK_REQUEST = 'BOOKMARK_REQUEST';\nexport const BOOKMARK_SUCCESS = 'BOOKMARKED_SUCCESS';\nexport const BOOKMARK_FAIL    = 'BOOKMARKED_FAIL';\n\nexport const UNBOOKMARK_REQUEST = 'UNBOOKMARKED_REQUEST';\nexport const UNBOOKMARK_SUCCESS = 'UNBOOKMARKED_SUCCESS';\nexport const UNBOOKMARK_FAIL    = 'UNBOOKMARKED_FAIL';\n\nexport function reblog(status, visibility) {\n  return function (dispatch, getState) {\n    dispatch(reblogRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/reblog`, { visibility }).then(function (response) {\n      // The reblog API method returns a new status wrapped around the original. In this case we are only\n      // interested in how the original is modified, hence passing it skipping the wrapper\n      dispatch(importFetchedStatus(response.data.reblog));\n      dispatch(reblogSuccess(status));\n    }).catch(function (error) {\n      dispatch(reblogFail(status, error));\n    });\n  };\n}\n\nexport function unreblog(status) {\n  return (dispatch, getState) => {\n    dispatch(unreblogRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unreblog`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unreblogSuccess(status));\n    }).catch(error => {\n      dispatch(unreblogFail(status, error));\n    });\n  };\n}\n\nexport function reblogRequest(status) {\n  return {\n    type: REBLOG_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function reblogSuccess(status) {\n  return {\n    type: REBLOG_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function reblogFail(status, error) {\n  return {\n    type: REBLOG_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function unreblogRequest(status) {\n  return {\n    type: UNREBLOG_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unreblogSuccess(status) {\n  return {\n    type: UNREBLOG_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unreblogFail(status, error) {\n  return {\n    type: UNREBLOG_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function favourite(status) {\n  return function (dispatch, getState) {\n    dispatch(favouriteRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/favourite`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(favouriteSuccess(status));\n    }).catch(function (error) {\n      dispatch(favouriteFail(status, error));\n    });\n  };\n}\n\nexport function unfavourite(status) {\n  return (dispatch, getState) => {\n    dispatch(unfavouriteRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unfavourite`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unfavouriteSuccess(status));\n    }).catch(error => {\n      dispatch(unfavouriteFail(status, error));\n    });\n  };\n}\n\nexport function favouriteRequest(status) {\n  return {\n    type: FAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteSuccess(status) {\n  return {\n    type: FAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteFail(status, error) {\n  return {\n    type: FAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteRequest(status) {\n  return {\n    type: UNFAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteSuccess(status) {\n  return {\n    type: UNFAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteFail(status, error) {\n  return {\n    type: UNFAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function bookmark(status) {\n  return function (dispatch, getState) {\n    dispatch(bookmarkRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/bookmark`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(bookmarkSuccess(status, response.data));\n    }).catch(function (error) {\n      dispatch(bookmarkFail(status, error));\n    });\n  };\n}\n\nexport function unbookmark(status) {\n  return (dispatch, getState) => {\n    dispatch(unbookmarkRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unbookmark`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unbookmarkSuccess(status, response.data));\n    }).catch(error => {\n      dispatch(unbookmarkFail(status, error));\n    });\n  };\n}\n\nexport function bookmarkRequest(status) {\n  return {\n    type: BOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function bookmarkSuccess(status, response) {\n  return {\n    type: BOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function bookmarkFail(status, error) {\n  return {\n    type: BOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unbookmarkRequest(status) {\n  return {\n    type: UNBOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function unbookmarkSuccess(status, response) {\n  return {\n    type: UNBOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function unbookmarkFail(status, error) {\n  return {\n    type: UNBOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function fetchReblogs(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchReblogsRequest(id));\n\n    api(getState).get(`/api/v1/statuses/${id}/reblogged_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchReblogsFail(id, error));\n    });\n  };\n}\n\nexport function fetchReblogsRequest(id) {\n  return {\n    type: REBLOGS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchReblogsFail(id, error) {\n  return {\n    type: REBLOGS_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandReblogs(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'reblogged_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandReblogsRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandReblogsFail(id, error)));\n  };\n}\n\nexport function expandReblogsRequest(id) {\n  return {\n    type: REBLOGS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandReblogsFail(id, error) {\n  return {\n    type: REBLOGS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFavourites(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFavouritesRequest(id));\n\n    api(getState).get(`/api/v1/statuses/${id}/favourited_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFavouritesFail(id, error));\n    });\n  };\n}\n\nexport function fetchFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandFavourites(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'favourited_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFavouritesRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandFavouritesFail(id, error)));\n  };\n}\n\nexport function expandFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pin(status) {\n  return (dispatch, getState) => {\n    dispatch(pinRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/pin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(pinSuccess(status));\n    }).catch(error => {\n      dispatch(pinFail(status, error));\n    });\n  };\n}\n\nexport function pinRequest(status) {\n  return {\n    type: PIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinSuccess(status) {\n  return {\n    type: PIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinFail(status, error) {\n  return {\n    type: PIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function unpin (status) {\n  return (dispatch, getState) => {\n    dispatch(unpinRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unpin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unpinSuccess(status));\n    }).catch(error => {\n      dispatch(unpinFail(status, error));\n    });\n  };\n}\n\nexport function unpinRequest(status) {\n  return {\n    type: UNPIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinSuccess(status) {\n  return {\n    type: UNPIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinFail(status, error) {\n  return {\n    type: UNPIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\n\nexport const REBLOG_REQUEST = 'REBLOG_REQUEST';\nexport const REBLOG_SUCCESS = 'REBLOG_SUCCESS';\nexport const REBLOG_FAIL    = 'REBLOG_FAIL';\n\nexport const REBLOGS_EXPAND_REQUEST = 'REBLOGS_EXPAND_REQUEST';\nexport const REBLOGS_EXPAND_SUCCESS = 'REBLOGS_EXPAND_SUCCESS';\nexport const REBLOGS_EXPAND_FAIL = 'REBLOGS_EXPAND_FAIL';\n\nexport const FAVOURITE_REQUEST = 'FAVOURITE_REQUEST';\nexport const FAVOURITE_SUCCESS = 'FAVOURITE_SUCCESS';\nexport const FAVOURITE_FAIL    = 'FAVOURITE_FAIL';\n\nexport const UNREBLOG_REQUEST = 'UNREBLOG_REQUEST';\nexport const UNREBLOG_SUCCESS = 'UNREBLOG_SUCCESS';\nexport const UNREBLOG_FAIL    = 'UNREBLOG_FAIL';\n\nexport const UNFAVOURITE_REQUEST = 'UNFAVOURITE_REQUEST';\nexport const UNFAVOURITE_SUCCESS = 'UNFAVOURITE_SUCCESS';\nexport const UNFAVOURITE_FAIL    = 'UNFAVOURITE_FAIL';\n\nexport const REBLOGS_FETCH_REQUEST = 'REBLOGS_FETCH_REQUEST';\nexport const REBLOGS_FETCH_SUCCESS = 'REBLOGS_FETCH_SUCCESS';\nexport const REBLOGS_FETCH_FAIL    = 'REBLOGS_FETCH_FAIL';\n\nexport const FAVOURITES_FETCH_REQUEST = 'FAVOURITES_FETCH_REQUEST';\nexport const FAVOURITES_FETCH_SUCCESS = 'FAVOURITES_FETCH_SUCCESS';\nexport const FAVOURITES_FETCH_FAIL    = 'FAVOURITES_FETCH_FAIL';\n\nexport const FAVOURITES_EXPAND_REQUEST = 'FAVOURITES_EXPAND_REQUEST';\nexport const FAVOURITES_EXPAND_SUCCESS = 'FAVOURITES_EXPAND_SUCCESS';\nexport const FAVOURITES_EXPAND_FAIL = 'FAVOURITES_EXPAND_FAIL';\n\nexport const PIN_REQUEST = 'PIN_REQUEST';\nexport const PIN_SUCCESS = 'PIN_SUCCESS';\nexport const PIN_FAIL    = 'PIN_FAIL';\n\nexport const UNPIN_REQUEST = 'UNPIN_REQUEST';\nexport const UNPIN_SUCCESS = 'UNPIN_SUCCESS';\nexport const UNPIN_FAIL    = 'UNPIN_FAIL';\n\nexport const BOOKMARK_REQUEST = 'BOOKMARK_REQUEST';\nexport const BOOKMARK_SUCCESS = 'BOOKMARKED_SUCCESS';\nexport const BOOKMARK_FAIL    = 'BOOKMARKED_FAIL';\n\nexport const UNBOOKMARK_REQUEST = 'UNBOOKMARKED_REQUEST';\nexport const UNBOOKMARK_SUCCESS = 'UNBOOKMARKED_SUCCESS';\nexport const UNBOOKMARK_FAIL    = 'UNBOOKMARKED_FAIL';\n\nexport function reblog(status, visibility) {\n  return function (dispatch, getState) {\n    dispatch(reblogRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/reblog`, { visibility }).then(function (response) {\n      // The reblog API method returns a new status wrapped around the original. In this case we are only\n      // interested in how the original is modified, hence passing it skipping the wrapper\n      dispatch(importFetchedStatus(response.data.reblog));\n      dispatch(reblogSuccess(status));\n    }).catch(function (error) {\n      dispatch(reblogFail(status, error));\n    });\n  };\n}\n\nexport function unreblog(status) {\n  return (dispatch, getState) => {\n    dispatch(unreblogRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unreblog`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unreblogSuccess(status));\n    }).catch(error => {\n      dispatch(unreblogFail(status, error));\n    });\n  };\n}\n\nexport function reblogRequest(status) {\n  return {\n    type: REBLOG_REQUEST,\n    status: status,\n  };\n}\n\nexport function reblogSuccess(status) {\n  return {\n    type: REBLOG_SUCCESS,\n    status: status,\n  };\n}\n\nexport function reblogFail(status, error) {\n  return {\n    type: REBLOG_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unreblogRequest(status) {\n  return {\n    type: UNREBLOG_REQUEST,\n    status: status,\n  };\n}\n\nexport function unreblogSuccess(status) {\n  return {\n    type: UNREBLOG_SUCCESS,\n    status: status,\n  };\n}\n\nexport function unreblogFail(status, error) {\n  return {\n    type: UNREBLOG_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function favourite(status) {\n  return function (dispatch, getState) {\n    dispatch(favouriteRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/favourite`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(favouriteSuccess(status));\n    }).catch(function (error) {\n      dispatch(favouriteFail(status, error));\n    });\n  };\n}\n\nexport function unfavourite(status) {\n  return (dispatch, getState) => {\n    dispatch(unfavouriteRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unfavourite`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unfavouriteSuccess(status));\n    }).catch(error => {\n      dispatch(unfavouriteFail(status, error));\n    });\n  };\n}\n\nexport function favouriteRequest(status) {\n  return {\n    type: FAVOURITE_REQUEST,\n    status: status,\n  };\n}\n\nexport function favouriteSuccess(status) {\n  return {\n    type: FAVOURITE_SUCCESS,\n    status: status,\n  };\n}\n\nexport function favouriteFail(status, error) {\n  return {\n    type: FAVOURITE_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unfavouriteRequest(status) {\n  return {\n    type: UNFAVOURITE_REQUEST,\n    status: status,\n  };\n}\n\nexport function unfavouriteSuccess(status) {\n  return {\n    type: UNFAVOURITE_SUCCESS,\n    status: status,\n  };\n}\n\nexport function unfavouriteFail(status, error) {\n  return {\n    type: UNFAVOURITE_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function bookmark(status) {\n  return function (dispatch, getState) {\n    dispatch(bookmarkRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/bookmark`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(bookmarkSuccess(status));\n    }).catch(function (error) {\n      dispatch(bookmarkFail(status, error));\n    });\n  };\n}\n\nexport function unbookmark(status) {\n  return (dispatch, getState) => {\n    dispatch(unbookmarkRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unbookmark`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unbookmarkSuccess(status));\n    }).catch(error => {\n      dispatch(unbookmarkFail(status, error));\n    });\n  };\n}\n\nexport function bookmarkRequest(status) {\n  return {\n    type: BOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function bookmarkSuccess(status) {\n  return {\n    type: BOOKMARK_SUCCESS,\n    status: status,\n  };\n}\n\nexport function bookmarkFail(status, error) {\n  return {\n    type: BOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unbookmarkRequest(status) {\n  return {\n    type: UNBOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function unbookmarkSuccess(status) {\n  return {\n    type: UNBOOKMARK_SUCCESS,\n    status: status,\n  };\n}\n\nexport function unbookmarkFail(status, error) {\n  return {\n    type: UNBOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function fetchReblogs(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchReblogsRequest(id));\n\n    api(getState).get(`/api/v1/statuses/${id}/reblogged_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchReblogsFail(id, error));\n    });\n  };\n}\n\nexport function fetchReblogsRequest(id) {\n  return {\n    type: REBLOGS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchReblogsFail(id, error) {\n  return {\n    type: REBLOGS_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandReblogs(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'reblogged_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandReblogsRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandReblogsFail(id, error)));\n  };\n}\n\nexport function expandReblogsRequest(id) {\n  return {\n    type: REBLOGS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandReblogsFail(id, error) {\n  return {\n    type: REBLOGS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFavourites(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFavouritesRequest(id));\n\n    api(getState).get(`/api/v1/statuses/${id}/favourited_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFavouritesFail(id, error));\n    });\n  };\n}\n\nexport function fetchFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandFavourites(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'favourited_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFavouritesRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandFavouritesFail(id, error)));\n  };\n}\n\nexport function expandFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pin(status) {\n  return (dispatch, getState) => {\n    dispatch(pinRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/pin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(pinSuccess(status));\n    }).catch(error => {\n      dispatch(pinFail(status, error));\n    });\n  };\n}\n\nexport function pinRequest(status) {\n  return {\n    type: PIN_REQUEST,\n    status,\n  };\n}\n\nexport function pinSuccess(status) {\n  return {\n    type: PIN_SUCCESS,\n    status,\n  };\n}\n\nexport function pinFail(status, error) {\n  return {\n    type: PIN_FAIL,\n    status,\n    error,\n  };\n}\n\nexport function unpin (status) {\n  return (dispatch, getState) => {\n    dispatch(unpinRequest(status));\n\n    api(getState).post(`/api/v1/statuses/${status.get('id')}/unpin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unpinSuccess(status));\n    }).catch(error => {\n      dispatch(unpinFail(status, error));\n    });\n  };\n}\n\nexport function unpinRequest(status) {\n  return {\n    type: UNPIN_REQUEST,\n    status,\n  };\n}\n\nexport function unpinSuccess(status) {\n  return {\n    type: UNPIN_SUCCESS,\n    status,\n  };\n}\n\nexport function unpinFail(status, error) {\n  return {\n    type: UNPIN_FAIL,\n    status,\n    error,\n  };\n}\n","/**\n * MIT License\n * \n * Copyright (c) 2014-present, Lee Byron and other contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar DELETE = 'delete';\n\n// Constants describing the size of trie nodes.\nvar SHIFT = 5; // Resulted in best performance after ______?\nvar SIZE = 1 << SHIFT;\nvar MASK = SIZE - 1;\n\n// A consistent shared value representing \"not set\" which equals nothing other\n// than itself, and nothing that could be provided externally.\nvar NOT_SET = {};\n\n// Boolean references, Rough equivalent of `bool &`.\nfunction MakeRef() {\n  return {\n    value: false\n  };\n}\nfunction SetRef(ref) {\n  if (ref) {\n    ref.value = true;\n  }\n}\n\n// A function which returns a value representing an \"owner\" for transient writes\n// to tries. The return value will only ever equal itself, and will not equal\n// the return of any subsequent call of this function.\nfunction OwnerID() {}\nfunction ensureSize(iter) {\n  if (iter.size === undefined) {\n    iter.size = iter.__iterate(returnTrue);\n  }\n  return iter.size;\n}\nfunction wrapIndex(iter, index) {\n  // This implements \"is array index\" which the ECMAString spec defines as:\n  //\n  //     A String property name P is an array index if and only if\n  //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n  //     to 2^321.\n  //\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n  if (typeof index !== 'number') {\n    var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n    if ('' + uint32Index !== index || uint32Index === 4294967295) {\n      return NaN;\n    }\n    index = uint32Index;\n  }\n  return index < 0 ? ensureSize(iter) + index : index;\n}\nfunction returnTrue() {\n  return true;\n}\nfunction wholeSlice(begin, end, size) {\n  return (begin === 0 && !isNeg(begin) || size !== undefined && begin <= -size) && (end === undefined || size !== undefined && end >= size);\n}\nfunction resolveBegin(begin, size) {\n  return resolveIndex(begin, size, 0);\n}\nfunction resolveEnd(end, size) {\n  return resolveIndex(end, size, size);\n}\nfunction resolveIndex(index, size, defaultIndex) {\n  // Sanitize indices using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  return index === undefined ? defaultIndex : isNeg(index) ? size === Infinity ? size : Math.max(0, size + index) | 0 : size === undefined || size === index ? index : Math.min(size, index) | 0;\n}\nfunction isNeg(value) {\n  // Account for -0 which is negative, but not less than 0.\n  return value < 0 || value === 0 && 1 / value === -Infinity;\n}\nvar IS_COLLECTION_SYMBOL = '@@__IMMUTABLE_ITERABLE__@@';\nfunction isCollection(maybeCollection) {\n  return Boolean(maybeCollection && maybeCollection[IS_COLLECTION_SYMBOL]);\n}\nvar IS_KEYED_SYMBOL = '@@__IMMUTABLE_KEYED__@@';\nfunction isKeyed(maybeKeyed) {\n  return Boolean(maybeKeyed && maybeKeyed[IS_KEYED_SYMBOL]);\n}\nvar IS_INDEXED_SYMBOL = '@@__IMMUTABLE_INDEXED__@@';\nfunction isIndexed(maybeIndexed) {\n  return Boolean(maybeIndexed && maybeIndexed[IS_INDEXED_SYMBOL]);\n}\nfunction isAssociative(maybeAssociative) {\n  return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n}\nvar Collection = function Collection(value) {\n  return isCollection(value) ? value : Seq(value);\n};\nvar KeyedCollection = /*@__PURE__*/function (Collection) {\n  function KeyedCollection(value) {\n    return isKeyed(value) ? value : KeyedSeq(value);\n  }\n  if (Collection) KeyedCollection.__proto__ = Collection;\n  KeyedCollection.prototype = Object.create(Collection && Collection.prototype);\n  KeyedCollection.prototype.constructor = KeyedCollection;\n  return KeyedCollection;\n}(Collection);\nvar IndexedCollection = /*@__PURE__*/function (Collection) {\n  function IndexedCollection(value) {\n    return isIndexed(value) ? value : IndexedSeq(value);\n  }\n  if (Collection) IndexedCollection.__proto__ = Collection;\n  IndexedCollection.prototype = Object.create(Collection && Collection.prototype);\n  IndexedCollection.prototype.constructor = IndexedCollection;\n  return IndexedCollection;\n}(Collection);\nvar SetCollection = /*@__PURE__*/function (Collection) {\n  function SetCollection(value) {\n    return isCollection(value) && !isAssociative(value) ? value : SetSeq(value);\n  }\n  if (Collection) SetCollection.__proto__ = Collection;\n  SetCollection.prototype = Object.create(Collection && Collection.prototype);\n  SetCollection.prototype.constructor = SetCollection;\n  return SetCollection;\n}(Collection);\nCollection.Keyed = KeyedCollection;\nCollection.Indexed = IndexedCollection;\nCollection.Set = SetCollection;\nvar IS_SEQ_SYMBOL = '@@__IMMUTABLE_SEQ__@@';\nfunction isSeq(maybeSeq) {\n  return Boolean(maybeSeq && maybeSeq[IS_SEQ_SYMBOL]);\n}\nvar IS_RECORD_SYMBOL = '@@__IMMUTABLE_RECORD__@@';\nfunction isRecord(maybeRecord) {\n  return Boolean(maybeRecord && maybeRecord[IS_RECORD_SYMBOL]);\n}\nfunction isImmutable(maybeImmutable) {\n  return isCollection(maybeImmutable) || isRecord(maybeImmutable);\n}\nvar IS_ORDERED_SYMBOL = '@@__IMMUTABLE_ORDERED__@@';\nfunction isOrdered(maybeOrdered) {\n  return Boolean(maybeOrdered && maybeOrdered[IS_ORDERED_SYMBOL]);\n}\nvar ITERATE_KEYS = 0;\nvar ITERATE_VALUES = 1;\nvar ITERATE_ENTRIES = 2;\nvar REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nvar ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\nvar Iterator = function Iterator(next) {\n  this.next = next;\n};\nIterator.prototype.toString = function toString() {\n  return '[Iterator]';\n};\nIterator.KEYS = ITERATE_KEYS;\nIterator.VALUES = ITERATE_VALUES;\nIterator.ENTRIES = ITERATE_ENTRIES;\nIterator.prototype.inspect = Iterator.prototype.toSource = function () {\n  return this.toString();\n};\nIterator.prototype[ITERATOR_SYMBOL] = function () {\n  return this;\n};\nfunction iteratorValue(type, k, v, iteratorResult) {\n  var value = type === 0 ? k : type === 1 ? v : [k, v];\n  iteratorResult ? iteratorResult.value = value : iteratorResult = {\n    value: value,\n    done: false\n  };\n  return iteratorResult;\n}\nfunction iteratorDone() {\n  return {\n    value: undefined,\n    done: true\n  };\n}\nfunction hasIterator(maybeIterable) {\n  if (Array.isArray(maybeIterable)) {\n    // IE11 trick as it does not support `Symbol.iterator`\n    return true;\n  }\n  return !!getIteratorFn(maybeIterable);\n}\nfunction isIterator(maybeIterator) {\n  return maybeIterator && typeof maybeIterator.next === 'function';\n}\nfunction getIterator(iterable) {\n  var iteratorFn = getIteratorFn(iterable);\n  return iteratorFn && iteratorFn.call(iterable);\n}\nfunction getIteratorFn(iterable) {\n  var iteratorFn = iterable && (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL] || iterable[FAUX_ITERATOR_SYMBOL]);\n  if (typeof iteratorFn === 'function') {\n    return iteratorFn;\n  }\n}\nfunction isEntriesIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.entries;\n}\nfunction isKeysIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.keys;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction isArrayLike(value) {\n  if (Array.isArray(value) || typeof value === 'string') {\n    return true;\n  }\n  return value && typeof value === 'object' && Number.isInteger(value.length) && value.length >= 0 && (value.length === 0 ?\n  // Only {length: 0} is considered Array-like.\n  Object.keys(value).length === 1 :\n  // An object is only Array-like if it has a property where the last value\n  // in the array-like may be found (which could be undefined).\n  value.hasOwnProperty(value.length - 1));\n}\nvar Seq = /*@__PURE__*/function (Collection) {\n  function Seq(value) {\n    return value === undefined || value === null ? emptySequence() : isImmutable(value) ? value.toSeq() : seqFromValue(value);\n  }\n  if (Collection) Seq.__proto__ = Collection;\n  Seq.prototype = Object.create(Collection && Collection.prototype);\n  Seq.prototype.constructor = Seq;\n  Seq.prototype.toSeq = function toSeq() {\n    return this;\n  };\n  Seq.prototype.toString = function toString() {\n    return this.__toString('Seq {', '}');\n  };\n  Seq.prototype.cacheResult = function cacheResult() {\n    if (!this._cache && this.__iterateUncached) {\n      this._cache = this.entrySeq().toArray();\n      this.size = this._cache.length;\n    }\n    return this;\n  };\n\n  // abstract __iterateUncached(fn, reverse)\n\n  Seq.prototype.__iterate = function __iterate(fn, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      while (i !== size) {\n        var entry = cache[reverse ? size - ++i : i++];\n        if (fn(entry[1], entry[0], this) === false) {\n          break;\n        }\n      }\n      return i;\n    }\n    return this.__iterateUncached(fn, reverse);\n  };\n\n  // abstract __iteratorUncached(type, reverse)\n\n  Seq.prototype.__iterator = function __iterator(type, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      return new Iterator(function () {\n        if (i === size) {\n          return iteratorDone();\n        }\n        var entry = cache[reverse ? size - ++i : i++];\n        return iteratorValue(type, entry[0], entry[1]);\n      });\n    }\n    return this.__iteratorUncached(type, reverse);\n  };\n  return Seq;\n}(Collection);\nvar KeyedSeq = /*@__PURE__*/function (Seq) {\n  function KeyedSeq(value) {\n    return value === undefined || value === null ? emptySequence().toKeyedSeq() : isCollection(value) ? isKeyed(value) ? value.toSeq() : value.fromEntrySeq() : isRecord(value) ? value.toSeq() : keyedSeqFromValue(value);\n  }\n  if (Seq) KeyedSeq.__proto__ = Seq;\n  KeyedSeq.prototype = Object.create(Seq && Seq.prototype);\n  KeyedSeq.prototype.constructor = KeyedSeq;\n  KeyedSeq.prototype.toKeyedSeq = function toKeyedSeq() {\n    return this;\n  };\n  return KeyedSeq;\n}(Seq);\nvar IndexedSeq = /*@__PURE__*/function (Seq) {\n  function IndexedSeq(value) {\n    return value === undefined || value === null ? emptySequence() : isCollection(value) ? isKeyed(value) ? value.entrySeq() : value.toIndexedSeq() : isRecord(value) ? value.toSeq().entrySeq() : indexedSeqFromValue(value);\n  }\n  if (Seq) IndexedSeq.__proto__ = Seq;\n  IndexedSeq.prototype = Object.create(Seq && Seq.prototype);\n  IndexedSeq.prototype.constructor = IndexedSeq;\n  IndexedSeq.of = function of( /*...values*/\n  ) {\n    return IndexedSeq(arguments);\n  };\n  IndexedSeq.prototype.toIndexedSeq = function toIndexedSeq() {\n    return this;\n  };\n  IndexedSeq.prototype.toString = function toString() {\n    return this.__toString('Seq [', ']');\n  };\n  return IndexedSeq;\n}(Seq);\nvar SetSeq = /*@__PURE__*/function (Seq) {\n  function SetSeq(value) {\n    return (isCollection(value) && !isAssociative(value) ? value : IndexedSeq(value)).toSetSeq();\n  }\n  if (Seq) SetSeq.__proto__ = Seq;\n  SetSeq.prototype = Object.create(Seq && Seq.prototype);\n  SetSeq.prototype.constructor = SetSeq;\n  SetSeq.of = function of( /*...values*/\n  ) {\n    return SetSeq(arguments);\n  };\n  SetSeq.prototype.toSetSeq = function toSetSeq() {\n    return this;\n  };\n  return SetSeq;\n}(Seq);\nSeq.isSeq = isSeq;\nSeq.Keyed = KeyedSeq;\nSeq.Set = SetSeq;\nSeq.Indexed = IndexedSeq;\nSeq.prototype[IS_SEQ_SYMBOL] = true;\n\n// #pragma Root Sequences\n\nvar ArraySeq = /*@__PURE__*/function (IndexedSeq) {\n  function ArraySeq(array) {\n    this._array = array;\n    this.size = array.length;\n  }\n  if (IndexedSeq) ArraySeq.__proto__ = IndexedSeq;\n  ArraySeq.prototype = Object.create(IndexedSeq && IndexedSeq.prototype);\n  ArraySeq.prototype.constructor = ArraySeq;\n  ArraySeq.prototype.get = function get(index, notSetValue) {\n    return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n  };\n  ArraySeq.prototype.__iterate = function __iterate(fn, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    while (i !== size) {\n      var ii = reverse ? size - ++i : i++;\n      if (fn(array[ii], ii, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n  ArraySeq.prototype.__iterator = function __iterator(type, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var ii = reverse ? size - ++i : i++;\n      return iteratorValue(type, ii, array[ii]);\n    });\n  };\n  return ArraySeq;\n}(IndexedSeq);\nvar ObjectSeq = /*@__PURE__*/function (KeyedSeq) {\n  function ObjectSeq(object) {\n    var keys = Object.keys(object).concat(Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(object) : []);\n    this._object = object;\n    this._keys = keys;\n    this.size = keys.length;\n  }\n  if (KeyedSeq) ObjectSeq.__proto__ = KeyedSeq;\n  ObjectSeq.prototype = Object.create(KeyedSeq && KeyedSeq.prototype);\n  ObjectSeq.prototype.constructor = ObjectSeq;\n  ObjectSeq.prototype.get = function get(key, notSetValue) {\n    if (notSetValue !== undefined && !this.has(key)) {\n      return notSetValue;\n    }\n    return this._object[key];\n  };\n  ObjectSeq.prototype.has = function has(key) {\n    return hasOwnProperty.call(this._object, key);\n  };\n  ObjectSeq.prototype.__iterate = function __iterate(fn, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    while (i !== size) {\n      var key = keys[reverse ? size - ++i : i++];\n      if (fn(object[key], key, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n  ObjectSeq.prototype.__iterator = function __iterator(type, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var key = keys[reverse ? size - ++i : i++];\n      return iteratorValue(type, key, object[key]);\n    });\n  };\n  return ObjectSeq;\n}(KeyedSeq);\nObjectSeq.prototype[IS_ORDERED_SYMBOL] = true;\nvar CollectionSeq = /*@__PURE__*/function (IndexedSeq) {\n  function CollectionSeq(collection) {\n    this._collection = collection;\n    this.size = collection.length || collection.size;\n  }\n  if (IndexedSeq) CollectionSeq.__proto__ = IndexedSeq;\n  CollectionSeq.prototype = Object.create(IndexedSeq && IndexedSeq.prototype);\n  CollectionSeq.prototype.constructor = CollectionSeq;\n  CollectionSeq.prototype.__iterateUncached = function __iterateUncached(fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    var iterations = 0;\n    if (isIterator(iterator)) {\n      var step;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n    }\n    return iterations;\n  };\n  CollectionSeq.prototype.__iteratorUncached = function __iteratorUncached(type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    if (!isIterator(iterator)) {\n      return new Iterator(iteratorDone);\n    }\n    var iterations = 0;\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, iterations++, step.value);\n    });\n  };\n  return CollectionSeq;\n}(IndexedSeq);\n\n// # pragma Helper functions\n\nvar EMPTY_SEQ;\nfunction emptySequence() {\n  return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n}\nfunction keyedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq.fromEntrySeq();\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError('Expected Array or collection object of [k, v] entries, or keyed object: ' + value);\n}\nfunction indexedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  throw new TypeError('Expected Array or collection object of values: ' + value);\n}\nfunction seqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return isEntriesIterable(value) ? seq.fromEntrySeq() : isKeysIterable(value) ? seq.toSetSeq() : seq;\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError('Expected Array or collection object of values, or keyed object: ' + value);\n}\nfunction maybeIndexedSeqFromValue(value) {\n  return isArrayLike(value) ? new ArraySeq(value) : hasIterator(value) ? new CollectionSeq(value) : undefined;\n}\nvar IS_MAP_SYMBOL = '@@__IMMUTABLE_MAP__@@';\nfunction isMap(maybeMap) {\n  return Boolean(maybeMap && maybeMap[IS_MAP_SYMBOL]);\n}\nfunction isOrderedMap(maybeOrderedMap) {\n  return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n}\nfunction isValueObject(maybeValue) {\n  return Boolean(maybeValue && typeof maybeValue.equals === 'function' && typeof maybeValue.hashCode === 'function');\n}\n\n/**\n * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n *\n * NaN is considered the same as NaN, however -0 and 0 are considered the same\n * value, which is different from the algorithm described by\n * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n *\n * This is extended further to allow Objects to describe the values they\n * represent, by way of `valueOf` or `equals` (and `hashCode`).\n *\n * Note: because of this extension, the key equality of Immutable.Map and the\n * value equality of Immutable.Set will differ from ES6 Map and Set.\n *\n * ### Defining custom values\n *\n * The easiest way to describe the value an object represents is by implementing\n * `valueOf`. For example, `Date` represents a value by returning a unix\n * timestamp for `valueOf`:\n *\n *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n *     var date2 = new Date(1234567890000);\n *     date1.valueOf(); // 1234567890000\n *     assert( date1 !== date2 );\n *     assert( Immutable.is( date1, date2 ) );\n *\n * Note: overriding `valueOf` may have other implications if you use this object\n * where JavaScript expects a primitive, such as implicit string coercion.\n *\n * For more complex types, especially collections, implementing `valueOf` may\n * not be performant. An alternative is to implement `equals` and `hashCode`.\n *\n * `equals` takes another object, presumably of similar type, and returns true\n * if it is equal. Equality is symmetrical, so the same result should be\n * returned if this and the argument are flipped.\n *\n *     assert( a.equals(b) === b.equals(a) );\n *\n * `hashCode` returns a 32bit integer number representing the object which will\n * be used to determine how to store the value object in a Map or Set. You must\n * provide both or neither methods, one must not exist without the other.\n *\n * Also, an important relationship between these methods must be upheld: if two\n * values are equal, they *must* return the same hashCode. If the values are not\n * equal, they might have the same hashCode; this is called a hash collision,\n * and while undesirable for performance reasons, it is acceptable.\n *\n *     if (a.equals(b)) {\n *       assert( a.hashCode() === b.hashCode() );\n *     }\n *\n * All Immutable collections are Value Objects: they implement `equals()`\n * and `hashCode()`.\n */\nfunction is(valueA, valueB) {\n  if (valueA === valueB || valueA !== valueA && valueB !== valueB) {\n    return true;\n  }\n  if (!valueA || !valueB) {\n    return false;\n  }\n  if (typeof valueA.valueOf === 'function' && typeof valueB.valueOf === 'function') {\n    valueA = valueA.valueOf();\n    valueB = valueB.valueOf();\n    if (valueA === valueB || valueA !== valueA && valueB !== valueB) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n  }\n  return !!(isValueObject(valueA) && isValueObject(valueB) && valueA.equals(valueB));\n}\nvar imul = typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ? Math.imul : function imul(a, b) {\n  a |= 0; // int\n  b |= 0; // int\n  var c = a & 0xffff;\n  var d = b & 0xffff;\n  // Shift by 0 fixes the sign on the high part.\n  return c * d + ((a >>> 16) * d + c * (b >>> 16) << 16 >>> 0) | 0; // int\n};\n\n// v8 has an optimization for storing 31-bit signed numbers.\n// Values which have either 00 or 11 as the high order bits qualify.\n// This function drops the highest order bit in a signed number, maintaining\n// the sign bit.\nfunction smi(i32) {\n  return i32 >>> 1 & 0x40000000 | i32 & 0xbfffffff;\n}\nvar defaultValueOf = Object.prototype.valueOf;\nfunction hash(o) {\n  if (o == null) {\n    return hashNullish(o);\n  }\n  if (typeof o.hashCode === 'function') {\n    // Drop any high bits from accidentally long hash codes.\n    return smi(o.hashCode(o));\n  }\n  var v = valueOf(o);\n  if (v == null) {\n    return hashNullish(v);\n  }\n  switch (typeof v) {\n    case 'boolean':\n      // The hash values for built-in constants are a 1 value for each 5-byte\n      // shift region expect for the first, which encodes the value. This\n      // reduces the odds of a hash collision for these common values.\n      return v ? 0x42108421 : 0x42108420;\n    case 'number':\n      return hashNumber(v);\n    case 'string':\n      return v.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(v) : hashString(v);\n    case 'object':\n    case 'function':\n      return hashJSObj(v);\n    case 'symbol':\n      return hashSymbol(v);\n    default:\n      if (typeof v.toString === 'function') {\n        return hashString(v.toString());\n      }\n      throw new Error('Value type ' + typeof v + ' cannot be hashed.');\n  }\n}\nfunction hashNullish(nullish) {\n  return nullish === null ? 0x42108422 : /* undefined */0x42108423;\n}\n\n// Compress arbitrarily large numbers into smi hashes.\nfunction hashNumber(n) {\n  if (n !== n || n === Infinity) {\n    return 0;\n  }\n  var hash = n | 0;\n  if (hash !== n) {\n    hash ^= n * 0xffffffff;\n  }\n  while (n > 0xffffffff) {\n    n /= 0xffffffff;\n    hash ^= n;\n  }\n  return smi(hash);\n}\nfunction cachedHashString(string) {\n  var hashed = stringHashCache[string];\n  if (hashed === undefined) {\n    hashed = hashString(string);\n    if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n      STRING_HASH_CACHE_SIZE = 0;\n      stringHashCache = {};\n    }\n    STRING_HASH_CACHE_SIZE++;\n    stringHashCache[string] = hashed;\n  }\n  return hashed;\n}\n\n// http://jsperf.com/hashing-strings\nfunction hashString(string) {\n  // This is the hash from JVM\n  // The hash code for a string is computed as\n  // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n  // where s[i] is the ith character of the string and n is the length of\n  // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n  // (exclusive) by dropping high bits.\n  var hashed = 0;\n  for (var ii = 0; ii < string.length; ii++) {\n    hashed = 31 * hashed + string.charCodeAt(ii) | 0;\n  }\n  return smi(hashed);\n}\nfunction hashSymbol(sym) {\n  var hashed = symbolMap[sym];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n  hashed = nextHash();\n  symbolMap[sym] = hashed;\n  return hashed;\n}\nfunction hashJSObj(obj) {\n  var hashed;\n  if (usingWeakMap) {\n    hashed = weakMap.get(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n  hashed = obj[UID_HASH_KEY];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n  if (!canDefineProperty) {\n    hashed = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n    if (hashed !== undefined) {\n      return hashed;\n    }\n    hashed = getIENodeHash(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n  hashed = nextHash();\n  if (usingWeakMap) {\n    weakMap.set(obj, hashed);\n  } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n    throw new Error('Non-extensible objects are not allowed as keys.');\n  } else if (canDefineProperty) {\n    Object.defineProperty(obj, UID_HASH_KEY, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: hashed\n    });\n  } else if (obj.propertyIsEnumerable !== undefined && obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n    // Since we can't define a non-enumerable property on the object\n    // we'll hijack one of the less-used non-enumerable properties to\n    // save our hash on it. Since this is a function it will not show up in\n    // `JSON.stringify` which is what we want.\n    obj.propertyIsEnumerable = function () {\n      return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n    };\n    obj.propertyIsEnumerable[UID_HASH_KEY] = hashed;\n  } else if (obj.nodeType !== undefined) {\n    // At this point we couldn't get the IE `uniqueID` to use as a hash\n    // and we couldn't use a non-enumerable property to exploit the\n    // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n    // itself.\n    obj[UID_HASH_KEY] = hashed;\n  } else {\n    throw new Error('Unable to set a non-enumerable property on object.');\n  }\n  return hashed;\n}\n\n// Get references to ES5 object methods.\nvar isExtensible = Object.isExtensible;\n\n// True if Object.defineProperty works as expected. IE8 fails this test.\nvar canDefineProperty = function () {\n  try {\n    Object.defineProperty({}, '@', {});\n    return true;\n  } catch (e) {\n    return false;\n  }\n}();\n\n// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n// and avoid memory leaks from the IE cloneNode bug.\nfunction getIENodeHash(node) {\n  if (node && node.nodeType > 0) {\n    switch (node.nodeType) {\n      case 1:\n        // Element\n        return node.uniqueID;\n      case 9:\n        // Document\n        return node.documentElement && node.documentElement.uniqueID;\n    }\n  }\n}\nfunction valueOf(obj) {\n  return obj.valueOf !== defaultValueOf && typeof obj.valueOf === 'function' ? obj.valueOf(obj) : obj;\n}\nfunction nextHash() {\n  var nextHash = ++_objHashUID;\n  if (_objHashUID & 0x40000000) {\n    _objHashUID = 0;\n  }\n  return nextHash;\n}\n\n// If possible, use a WeakMap.\nvar usingWeakMap = typeof WeakMap === 'function';\nvar weakMap;\nif (usingWeakMap) {\n  weakMap = new WeakMap();\n}\nvar symbolMap = Object.create(null);\nvar _objHashUID = 0;\nvar UID_HASH_KEY = '__immutablehash__';\nif (typeof Symbol === 'function') {\n  UID_HASH_KEY = Symbol(UID_HASH_KEY);\n}\nvar STRING_HASH_CACHE_MIN_STRLEN = 16;\nvar STRING_HASH_CACHE_MAX_SIZE = 255;\nvar STRING_HASH_CACHE_SIZE = 0;\nvar stringHashCache = {};\nvar ToKeyedSequence = /*@__PURE__*/function (KeyedSeq) {\n  function ToKeyedSequence(indexed, useKeys) {\n    this._iter = indexed;\n    this._useKeys = useKeys;\n    this.size = indexed.size;\n  }\n  if (KeyedSeq) ToKeyedSequence.__proto__ = KeyedSeq;\n  ToKeyedSequence.prototype = Object.create(KeyedSeq && KeyedSeq.prototype);\n  ToKeyedSequence.prototype.constructor = ToKeyedSequence;\n  ToKeyedSequence.prototype.get = function get(key, notSetValue) {\n    return this._iter.get(key, notSetValue);\n  };\n  ToKeyedSequence.prototype.has = function has(key) {\n    return this._iter.has(key);\n  };\n  ToKeyedSequence.prototype.valueSeq = function valueSeq() {\n    return this._iter.valueSeq();\n  };\n  ToKeyedSequence.prototype.reverse = function reverse() {\n    var this$1$1 = this;\n    var reversedSequence = reverseFactory(this, true);\n    if (!this._useKeys) {\n      reversedSequence.valueSeq = function () {\n        return this$1$1._iter.toSeq().reverse();\n      };\n    }\n    return reversedSequence;\n  };\n  ToKeyedSequence.prototype.map = function map(mapper, context) {\n    var this$1$1 = this;\n    var mappedSequence = mapFactory(this, mapper, context);\n    if (!this._useKeys) {\n      mappedSequence.valueSeq = function () {\n        return this$1$1._iter.toSeq().map(mapper, context);\n      };\n    }\n    return mappedSequence;\n  };\n  ToKeyedSequence.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    return this._iter.__iterate(function (v, k) {\n      return fn(v, k, this$1$1);\n    }, reverse);\n  };\n  ToKeyedSequence.prototype.__iterator = function __iterator(type, reverse) {\n    return this._iter.__iterator(type, reverse);\n  };\n  return ToKeyedSequence;\n}(KeyedSeq);\nToKeyedSequence.prototype[IS_ORDERED_SYMBOL] = true;\nvar ToIndexedSequence = /*@__PURE__*/function (IndexedSeq) {\n  function ToIndexedSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n  if (IndexedSeq) ToIndexedSequence.__proto__ = IndexedSeq;\n  ToIndexedSequence.prototype = Object.create(IndexedSeq && IndexedSeq.prototype);\n  ToIndexedSequence.prototype.constructor = ToIndexedSequence;\n  ToIndexedSequence.prototype.includes = function includes(value) {\n    return this._iter.includes(value);\n  };\n  ToIndexedSequence.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    var i = 0;\n    reverse && ensureSize(this);\n    return this._iter.__iterate(function (v) {\n      return fn(v, reverse ? this$1$1.size - ++i : i++, this$1$1);\n    }, reverse);\n  };\n  ToIndexedSequence.prototype.__iterator = function __iterator(type, reverse) {\n    var this$1$1 = this;\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    var i = 0;\n    reverse && ensureSize(this);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, reverse ? this$1$1.size - ++i : i++, step.value, step);\n    });\n  };\n  return ToIndexedSequence;\n}(IndexedSeq);\nvar ToSetSequence = /*@__PURE__*/function (SetSeq) {\n  function ToSetSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n  if (SetSeq) ToSetSequence.__proto__ = SetSeq;\n  ToSetSequence.prototype = Object.create(SetSeq && SetSeq.prototype);\n  ToSetSequence.prototype.constructor = ToSetSequence;\n  ToSetSequence.prototype.has = function has(key) {\n    return this._iter.includes(key);\n  };\n  ToSetSequence.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    return this._iter.__iterate(function (v) {\n      return fn(v, v, this$1$1);\n    }, reverse);\n  };\n  ToSetSequence.prototype.__iterator = function __iterator(type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, step.value, step.value, step);\n    });\n  };\n  return ToSetSequence;\n}(SetSeq);\nvar FromEntriesSequence = /*@__PURE__*/function (KeyedSeq) {\n  function FromEntriesSequence(entries) {\n    this._iter = entries;\n    this.size = entries.size;\n  }\n  if (KeyedSeq) FromEntriesSequence.__proto__ = KeyedSeq;\n  FromEntriesSequence.prototype = Object.create(KeyedSeq && KeyedSeq.prototype);\n  FromEntriesSequence.prototype.constructor = FromEntriesSequence;\n  FromEntriesSequence.prototype.entrySeq = function entrySeq() {\n    return this._iter.toSeq();\n  };\n  FromEntriesSequence.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    return this._iter.__iterate(function (entry) {\n      // Check if entry exists first so array access doesn't throw for holes\n      // in the parent iteration.\n      if (entry) {\n        validateEntry(entry);\n        var indexedCollection = isCollection(entry);\n        return fn(indexedCollection ? entry.get(1) : entry[1], indexedCollection ? entry.get(0) : entry[0], this$1$1);\n      }\n    }, reverse);\n  };\n  FromEntriesSequence.prototype.__iterator = function __iterator(type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedCollection = isCollection(entry);\n          return iteratorValue(type, indexedCollection ? entry.get(0) : entry[0], indexedCollection ? entry.get(1) : entry[1], step);\n        }\n      }\n    });\n  };\n  return FromEntriesSequence;\n}(KeyedSeq);\nToIndexedSequence.prototype.cacheResult = ToKeyedSequence.prototype.cacheResult = ToSetSequence.prototype.cacheResult = FromEntriesSequence.prototype.cacheResult = cacheResultThrough;\nfunction flipFactory(collection) {\n  var flipSequence = makeSequence(collection);\n  flipSequence._iter = collection;\n  flipSequence.size = collection.size;\n  flipSequence.flip = function () {\n    return collection;\n  };\n  flipSequence.reverse = function () {\n    var reversedSequence = collection.reverse.apply(this); // super.reverse()\n    reversedSequence.flip = function () {\n      return collection.reverse();\n    };\n    return reversedSequence;\n  };\n  flipSequence.has = function (key) {\n    return collection.includes(key);\n  };\n  flipSequence.includes = function (key) {\n    return collection.has(key);\n  };\n  flipSequence.cacheResult = cacheResultThrough;\n  flipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    return collection.__iterate(function (v, k) {\n      return fn(k, v, this$1$1) !== false;\n    }, reverse);\n  };\n  flipSequence.__iteratorUncached = function (type, reverse) {\n    if (type === ITERATE_ENTRIES) {\n      var iterator = collection.__iterator(type, reverse);\n      return new Iterator(function () {\n        var step = iterator.next();\n        if (!step.done) {\n          var k = step.value[0];\n          step.value[0] = step.value[1];\n          step.value[1] = k;\n        }\n        return step;\n      });\n    }\n    return collection.__iterator(type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES, reverse);\n  };\n  return flipSequence;\n}\nfunction mapFactory(collection, mapper, context) {\n  var mappedSequence = makeSequence(collection);\n  mappedSequence.size = collection.size;\n  mappedSequence.has = function (key) {\n    return collection.has(key);\n  };\n  mappedSequence.get = function (key, notSetValue) {\n    var v = collection.get(key, NOT_SET);\n    return v === NOT_SET ? notSetValue : mapper.call(context, v, key, collection);\n  };\n  mappedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    return collection.__iterate(function (v, k, c) {\n      return fn(mapper.call(context, v, k, c), k, this$1$1) !== false;\n    }, reverse);\n  };\n  mappedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var key = entry[0];\n      return iteratorValue(type, key, mapper.call(context, entry[1], key, collection), step);\n    });\n  };\n  return mappedSequence;\n}\nfunction reverseFactory(collection, useKeys) {\n  var this$1$1 = this;\n  var reversedSequence = makeSequence(collection);\n  reversedSequence._iter = collection;\n  reversedSequence.size = collection.size;\n  reversedSequence.reverse = function () {\n    return collection;\n  };\n  if (collection.flip) {\n    reversedSequence.flip = function () {\n      var flipSequence = flipFactory(collection);\n      flipSequence.reverse = function () {\n        return collection.flip();\n      };\n      return flipSequence;\n    };\n  }\n  reversedSequence.get = function (key, notSetValue) {\n    return collection.get(useKeys ? key : -1 - key, notSetValue);\n  };\n  reversedSequence.has = function (key) {\n    return collection.has(useKeys ? key : -1 - key);\n  };\n  reversedSequence.includes = function (value) {\n    return collection.includes(value);\n  };\n  reversedSequence.cacheResult = cacheResultThrough;\n  reversedSequence.__iterate = function (fn, reverse) {\n    var this$1$1 = this;\n    var i = 0;\n    reverse && ensureSize(collection);\n    return collection.__iterate(function (v, k) {\n      return fn(v, useKeys ? k : reverse ? this$1$1.size - ++i : i++, this$1$1);\n    }, !reverse);\n  };\n  reversedSequence.__iterator = function (type, reverse) {\n    var i = 0;\n    reverse && ensureSize(collection);\n    var iterator = collection.__iterator(ITERATE_ENTRIES, !reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      return iteratorValue(type, useKeys ? entry[0] : reverse ? this$1$1.size - ++i : i++, entry[1], step);\n    });\n  };\n  return reversedSequence;\n}\nfunction filterFactory(collection, predicate, context, useKeys) {\n  var filterSequence = makeSequence(collection);\n  if (useKeys) {\n    filterSequence.has = function (key) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && !!predicate.call(context, v, key, collection);\n    };\n    filterSequence.get = function (key, notSetValue) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && predicate.call(context, v, key, collection) ? v : notSetValue;\n    };\n  }\n  filterSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    }, reverse);\n    return iterations;\n  };\n  filterSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterations = 0;\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        var value = entry[1];\n        if (predicate.call(context, value, key, collection)) {\n          return iteratorValue(type, useKeys ? key : iterations++, value, step);\n        }\n      }\n    });\n  };\n  return filterSequence;\n}\nfunction countByFactory(collection, grouper, context) {\n  var groups = Map().asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), 0, function (a) {\n      return a + 1;\n    });\n  });\n  return groups.asImmutable();\n}\nfunction groupByFactory(collection, grouper, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = (isOrdered(collection) ? OrderedMap() : Map()).asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), function (a) {\n      return a = a || [], a.push(isKeyedIter ? [k, v] : v), a;\n    });\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) {\n    return reify(collection, coerce(arr));\n  }).asImmutable();\n}\nfunction partitionFactory(collection, predicate, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = [[], []];\n  collection.__iterate(function (v, k) {\n    groups[predicate.call(context, v, k, collection) ? 1 : 0].push(isKeyedIter ? [k, v] : v);\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) {\n    return reify(collection, coerce(arr));\n  });\n}\nfunction sliceFactory(collection, begin, end, useKeys) {\n  var originalSize = collection.size;\n  if (wholeSlice(begin, end, originalSize)) {\n    return collection;\n  }\n  var resolvedBegin = resolveBegin(begin, originalSize);\n  var resolvedEnd = resolveEnd(end, originalSize);\n\n  // begin or end will be NaN if they were provided as negative numbers and\n  // this collection's size is unknown. In that case, cache first so there is\n  // a known size and these do not resolve to NaN.\n  if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n    return sliceFactory(collection.toSeq().cacheResult(), begin, end, useKeys);\n  }\n\n  // Note: resolvedEnd is undefined when the original sequence's length is\n  // unknown and this slice did not supply an end and should contain all\n  // elements after resolvedBegin.\n  // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n  var resolvedSize = resolvedEnd - resolvedBegin;\n  var sliceSize;\n  if (resolvedSize === resolvedSize) {\n    sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n  }\n  var sliceSeq = makeSequence(collection);\n\n  // If collection.size is undefined, the size of the realized sliceSeq is\n  // unknown at this point unless the number of items to slice is 0\n  sliceSeq.size = sliceSize === 0 ? sliceSize : collection.size && sliceSize || undefined;\n  if (!useKeys && isSeq(collection) && sliceSize >= 0) {\n    sliceSeq.get = function (index, notSetValue) {\n      index = wrapIndex(this, index);\n      return index >= 0 && index < sliceSize ? collection.get(index + resolvedBegin, notSetValue) : notSetValue;\n    };\n  }\n  sliceSeq.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    if (sliceSize === 0) {\n      return 0;\n    }\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var skipped = 0;\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k) {\n      if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1) !== false && iterations !== sliceSize;\n      }\n    });\n    return iterations;\n  };\n  sliceSeq.__iteratorUncached = function (type, reverse) {\n    if (sliceSize !== 0 && reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    // Don't bother instantiating parent iterator if taking 0.\n    if (sliceSize === 0) {\n      return new Iterator(iteratorDone);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var skipped = 0;\n    var iterations = 0;\n    return new Iterator(function () {\n      while (skipped++ < resolvedBegin) {\n        iterator.next();\n      }\n      if (++iterations > sliceSize) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (useKeys || type === ITERATE_VALUES || step.done) {\n        return step;\n      }\n      if (type === ITERATE_KEYS) {\n        return iteratorValue(type, iterations - 1, undefined, step);\n      }\n      return iteratorValue(type, iterations - 1, step.value[1], step);\n    });\n  };\n  return sliceSeq;\n}\nfunction takeWhileFactory(collection, predicate, context) {\n  var takeSequence = makeSequence(collection);\n  takeSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$1$1);\n    });\n    return iterations;\n  };\n  takeSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterating = true;\n    return new Iterator(function () {\n      if (!iterating) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var k = entry[0];\n      var v = entry[1];\n      if (!predicate.call(context, v, k, this$1$1)) {\n        iterating = false;\n        return iteratorDone();\n      }\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return takeSequence;\n}\nfunction skipWhileFactory(collection, predicate, context, useKeys) {\n  var skipSequence = makeSequence(collection);\n  skipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    });\n    return iterations;\n  };\n  skipSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var skipping = true;\n    var iterations = 0;\n    return new Iterator(function () {\n      var step;\n      var k;\n      var v;\n      do {\n        step = iterator.next();\n        if (step.done) {\n          if (useKeys || type === ITERATE_VALUES) {\n            return step;\n          }\n          if (type === ITERATE_KEYS) {\n            return iteratorValue(type, iterations++, undefined, step);\n          }\n          return iteratorValue(type, iterations++, step.value[1], step);\n        }\n        var entry = step.value;\n        k = entry[0];\n        v = entry[1];\n        skipping && (skipping = predicate.call(context, v, k, this$1$1));\n      } while (skipping);\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return skipSequence;\n}\nfunction concatFactory(collection, values) {\n  var isKeyedCollection = isKeyed(collection);\n  var iters = [collection].concat(values).map(function (v) {\n    if (!isCollection(v)) {\n      v = isKeyedCollection ? keyedSeqFromValue(v) : indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n    } else if (isKeyedCollection) {\n      v = KeyedCollection(v);\n    }\n    return v;\n  }).filter(function (v) {\n    return v.size !== 0;\n  });\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (iters.length === 1) {\n    var singleton = iters[0];\n    if (singleton === collection || isKeyedCollection && isKeyed(singleton) || isIndexed(collection) && isIndexed(singleton)) {\n      return singleton;\n    }\n  }\n  var concatSeq = new ArraySeq(iters);\n  if (isKeyedCollection) {\n    concatSeq = concatSeq.toKeyedSeq();\n  } else if (!isIndexed(collection)) {\n    concatSeq = concatSeq.toSetSeq();\n  }\n  concatSeq = concatSeq.flatten(true);\n  concatSeq.size = iters.reduce(function (sum, seq) {\n    if (sum !== undefined) {\n      var size = seq.size;\n      if (size !== undefined) {\n        return sum + size;\n      }\n    }\n  }, 0);\n  return concatSeq;\n}\nfunction flattenFactory(collection, depth, useKeys) {\n  var flatSequence = makeSequence(collection);\n  flatSequence.__iterateUncached = function (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    var stopped = false;\n    function flatDeep(iter, currentDepth) {\n      iter.__iterate(function (v, k) {\n        if ((!depth || currentDepth < depth) && isCollection(v)) {\n          flatDeep(v, currentDepth + 1);\n        } else {\n          iterations++;\n          if (fn(v, useKeys ? k : iterations - 1, flatSequence) === false) {\n            stopped = true;\n          }\n        }\n        return !stopped;\n      }, reverse);\n    }\n    flatDeep(collection, 0);\n    return iterations;\n  };\n  flatSequence.__iteratorUncached = function (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var stack = [];\n    var iterations = 0;\n    return new Iterator(function () {\n      while (iterator) {\n        var step = iterator.next();\n        if (step.done !== false) {\n          iterator = stack.pop();\n          continue;\n        }\n        var v = step.value;\n        if (type === ITERATE_ENTRIES) {\n          v = v[1];\n        }\n        if ((!depth || stack.length < depth) && isCollection(v)) {\n          stack.push(iterator);\n          iterator = v.__iterator(type, reverse);\n        } else {\n          return useKeys ? step : iteratorValue(type, iterations++, v, step);\n        }\n      }\n      return iteratorDone();\n    });\n  };\n  return flatSequence;\n}\nfunction flatMapFactory(collection, mapper, context) {\n  var coerce = collectionClass(collection);\n  return collection.toSeq().map(function (v, k) {\n    return coerce(mapper.call(context, v, k, collection));\n  }).flatten(true);\n}\nfunction interposeFactory(collection, separator) {\n  var interposedSequence = makeSequence(collection);\n  interposedSequence.size = collection.size && collection.size * 2 - 1;\n  interposedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n    var iterations = 0;\n    collection.__iterate(function (v) {\n      return (!iterations || fn(separator, iterations++, this$1$1) !== false) && fn(v, iterations++, this$1$1) !== false;\n    }, reverse);\n    return iterations;\n  };\n  interposedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_VALUES, reverse);\n    var iterations = 0;\n    var step;\n    return new Iterator(function () {\n      if (!step || iterations % 2) {\n        step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n      }\n      return iterations % 2 ? iteratorValue(type, iterations++, separator) : iteratorValue(type, iterations++, step.value, step);\n    });\n  };\n  return interposedSequence;\n}\nfunction sortFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  var isKeyedCollection = isKeyed(collection);\n  var index = 0;\n  var entries = collection.toSeq().map(function (v, k) {\n    return [k, v, index++, mapper ? mapper(v, k, collection) : v];\n  }).valueSeq().toArray();\n  entries.sort(function (a, b) {\n    return comparator(a[3], b[3]) || a[2] - b[2];\n  }).forEach(isKeyedCollection ? function (v, i) {\n    entries[i].length = 2;\n  } : function (v, i) {\n    entries[i] = v[1];\n  });\n  return isKeyedCollection ? KeyedSeq(entries) : isIndexed(collection) ? IndexedSeq(entries) : SetSeq(entries);\n}\nfunction maxFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  if (mapper) {\n    var entry = collection.toSeq().map(function (v, k) {\n      return [v, mapper(v, k, collection)];\n    }).reduce(function (a, b) {\n      return maxCompare(comparator, a[1], b[1]) ? b : a;\n    });\n    return entry && entry[0];\n  }\n  return collection.reduce(function (a, b) {\n    return maxCompare(comparator, a, b) ? b : a;\n  });\n}\nfunction maxCompare(comparator, a, b) {\n  var comp = comparator(b, a);\n  // b is considered the new max if the comparator declares them equal, but\n  // they are not equal and b is in fact a nullish value.\n  return comp === 0 && b !== a && (b === undefined || b === null || b !== b) || comp > 0;\n}\nfunction zipWithFactory(keyIter, zipper, iters, zipAll) {\n  var zipSequence = makeSequence(keyIter);\n  var sizes = new ArraySeq(iters).map(function (i) {\n    return i.size;\n  });\n  zipSequence.size = zipAll ? sizes.max() : sizes.min();\n  // Note: this a generic base implementation of __iterate in terms of\n  // __iterator which may be more generically useful in the future.\n  zipSequence.__iterate = function (fn, reverse) {\n    /* generic:\n    var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      iterations++;\n      if (fn(step.value[1], step.value[0], this) === false) {\n        break;\n      }\n    }\n    return iterations;\n    */\n    // indexed:\n    var iterator = this.__iterator(ITERATE_VALUES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      if (fn(step.value, iterations++, this) === false) {\n        break;\n      }\n    }\n    return iterations;\n  };\n  zipSequence.__iteratorUncached = function (type, reverse) {\n    var iterators = iters.map(function (i) {\n      return i = Collection(i), getIterator(reverse ? i.reverse() : i);\n    });\n    var iterations = 0;\n    var isDone = false;\n    return new Iterator(function () {\n      var steps;\n      if (!isDone) {\n        steps = iterators.map(function (i) {\n          return i.next();\n        });\n        isDone = zipAll ? steps.every(function (s) {\n          return s.done;\n        }) : steps.some(function (s) {\n          return s.done;\n        });\n      }\n      if (isDone) {\n        return iteratorDone();\n      }\n      return iteratorValue(type, iterations++, zipper.apply(null, steps.map(function (s) {\n        return s.value;\n      })));\n    });\n  };\n  return zipSequence;\n}\n\n// #pragma Helper Functions\n\nfunction reify(iter, seq) {\n  return iter === seq ? iter : isSeq(iter) ? seq : iter.constructor(seq);\n}\nfunction validateEntry(entry) {\n  if (entry !== Object(entry)) {\n    throw new TypeError('Expected [K, V] tuple: ' + entry);\n  }\n}\nfunction collectionClass(collection) {\n  return isKeyed(collection) ? KeyedCollection : isIndexed(collection) ? IndexedCollection : SetCollection;\n}\nfunction makeSequence(collection) {\n  return Object.create((isKeyed(collection) ? KeyedSeq : isIndexed(collection) ? IndexedSeq : SetSeq).prototype);\n}\nfunction cacheResultThrough() {\n  if (this._iter.cacheResult) {\n    this._iter.cacheResult();\n    this.size = this._iter.size;\n    return this;\n  }\n  return Seq.prototype.cacheResult.call(this);\n}\nfunction defaultComparator(a, b) {\n  if (a === undefined && b === undefined) {\n    return 0;\n  }\n  if (a === undefined) {\n    return 1;\n  }\n  if (b === undefined) {\n    return -1;\n  }\n  return a > b ? 1 : a < b ? -1 : 0;\n}\nfunction arrCopy(arr, offset) {\n  offset = offset || 0;\n  var len = Math.max(0, arr.length - offset);\n  var newArr = new Array(len);\n  for (var ii = 0; ii < len; ii++) {\n    newArr[ii] = arr[ii + offset];\n  }\n  return newArr;\n}\nfunction invariant(condition, error) {\n  if (!condition) {\n    throw new Error(error);\n  }\n}\nfunction assertNotInfinite(size) {\n  invariant(size !== Infinity, 'Cannot perform this action with an infinite size.');\n}\nfunction coerceKeyPath(keyPath) {\n  if (isArrayLike(keyPath) && typeof keyPath !== 'string') {\n    return keyPath;\n  }\n  if (isOrdered(keyPath)) {\n    return keyPath.toArray();\n  }\n  throw new TypeError('Invalid keyPath: expected Ordered Collection or Array: ' + keyPath);\n}\nvar toString = Object.prototype.toString;\nfunction isPlainObject(value) {\n  // The base prototype's toString deals with Argument objects and native namespaces like Math\n  if (!value || typeof value !== 'object' || toString.call(value) !== '[object Object]') {\n    return false;\n  }\n  var proto = Object.getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n\n  // Iteratively going up the prototype chain is needed for cross-realm environments (differing contexts, iframes, etc)\n  var parentProto = proto;\n  var nextProto = Object.getPrototypeOf(proto);\n  while (nextProto !== null) {\n    parentProto = nextProto;\n    nextProto = Object.getPrototypeOf(parentProto);\n  }\n  return parentProto === proto;\n}\n\n/**\n * Returns true if the value is a potentially-persistent data structure, either\n * provided by Immutable.js or a plain Array or Object.\n */\nfunction isDataStructure(value) {\n  return typeof value === 'object' && (isImmutable(value) || Array.isArray(value) || isPlainObject(value));\n}\nfunction quoteString(value) {\n  try {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  } catch (_ignoreError) {\n    return JSON.stringify(value);\n  }\n}\nfunction has(collection, key) {\n  return isImmutable(collection) ? collection.has(key) : isDataStructure(collection) && hasOwnProperty.call(collection, key);\n}\nfunction get(collection, key, notSetValue) {\n  return isImmutable(collection) ? collection.get(key, notSetValue) : !has(collection, key) ? notSetValue : typeof collection.get === 'function' ? collection.get(key) : collection[key];\n}\nfunction shallowCopy(from) {\n  if (Array.isArray(from)) {\n    return arrCopy(from);\n  }\n  var to = {};\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      to[key] = from[key];\n    }\n  }\n  return to;\n}\nfunction remove(collection, key) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError('Cannot update non-data-structure value: ' + collection);\n  }\n  if (isImmutable(collection)) {\n    if (!collection.remove) {\n      throw new TypeError('Cannot update immutable value without .remove() method: ' + collection);\n    }\n    return collection.remove(key);\n  }\n  if (!hasOwnProperty.call(collection, key)) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  if (Array.isArray(collectionCopy)) {\n    collectionCopy.splice(key, 1);\n  } else {\n    delete collectionCopy[key];\n  }\n  return collectionCopy;\n}\nfunction set(collection, key, value) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError('Cannot update non-data-structure value: ' + collection);\n  }\n  if (isImmutable(collection)) {\n    if (!collection.set) {\n      throw new TypeError('Cannot update immutable value without .set() method: ' + collection);\n    }\n    return collection.set(key, value);\n  }\n  if (hasOwnProperty.call(collection, key) && value === collection[key]) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  collectionCopy[key] = value;\n  return collectionCopy;\n}\nfunction updateIn$1(collection, keyPath, notSetValue, updater) {\n  if (!updater) {\n    updater = notSetValue;\n    notSetValue = undefined;\n  }\n  var updatedValue = updateInDeeply(isImmutable(collection), collection, coerceKeyPath(keyPath), 0, notSetValue, updater);\n  return updatedValue === NOT_SET ? notSetValue : updatedValue;\n}\nfunction updateInDeeply(inImmutable, existing, keyPath, i, notSetValue, updater) {\n  var wasNotSet = existing === NOT_SET;\n  if (i === keyPath.length) {\n    var existingValue = wasNotSet ? notSetValue : existing;\n    var newValue = updater(existingValue);\n    return newValue === existingValue ? existing : newValue;\n  }\n  if (!wasNotSet && !isDataStructure(existing)) {\n    throw new TypeError('Cannot update within non-data-structure value in path [' + keyPath.slice(0, i).map(quoteString) + ']: ' + existing);\n  }\n  var key = keyPath[i];\n  var nextExisting = wasNotSet ? NOT_SET : get(existing, key, NOT_SET);\n  var nextUpdated = updateInDeeply(nextExisting === NOT_SET ? inImmutable : isImmutable(nextExisting), nextExisting, keyPath, i + 1, notSetValue, updater);\n  return nextUpdated === nextExisting ? existing : nextUpdated === NOT_SET ? remove(existing, key) : set(wasNotSet ? inImmutable ? emptyMap() : {} : existing, key, nextUpdated);\n}\nfunction setIn$1(collection, keyPath, value) {\n  return updateIn$1(collection, keyPath, NOT_SET, function () {\n    return value;\n  });\n}\nfunction setIn(keyPath, v) {\n  return setIn$1(this, keyPath, v);\n}\nfunction removeIn(collection, keyPath) {\n  return updateIn$1(collection, keyPath, function () {\n    return NOT_SET;\n  });\n}\nfunction deleteIn(keyPath) {\n  return removeIn(this, keyPath);\n}\nfunction update$1(collection, key, notSetValue, updater) {\n  return updateIn$1(collection, [key], notSetValue, updater);\n}\nfunction update(key, notSetValue, updater) {\n  return arguments.length === 1 ? key(this) : update$1(this, key, notSetValue, updater);\n}\nfunction updateIn(keyPath, notSetValue, updater) {\n  return updateIn$1(this, keyPath, notSetValue, updater);\n}\nfunction merge$1() {\n  var iters = [],\n    len = arguments.length;\n  while (len--) iters[len] = arguments[len];\n  return mergeIntoKeyedWith(this, iters);\n}\nfunction mergeWith$1(merger) {\n  var iters = [],\n    len = arguments.length - 1;\n  while (len-- > 0) iters[len] = arguments[len + 1];\n  if (typeof merger !== 'function') {\n    throw new TypeError('Invalid merger function: ' + merger);\n  }\n  return mergeIntoKeyedWith(this, iters, merger);\n}\nfunction mergeIntoKeyedWith(collection, collections, merger) {\n  var iters = [];\n  for (var ii = 0; ii < collections.length; ii++) {\n    var collection$1 = KeyedCollection(collections[ii]);\n    if (collection$1.size !== 0) {\n      iters.push(collection$1);\n    }\n  }\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (collection.toSeq().size === 0 && !collection.__ownerID && iters.length === 1) {\n    return collection.constructor(iters[0]);\n  }\n  return collection.withMutations(function (collection) {\n    var mergeIntoCollection = merger ? function (value, key) {\n      update$1(collection, key, NOT_SET, function (oldVal) {\n        return oldVal === NOT_SET ? value : merger(oldVal, value, key);\n      });\n    } : function (value, key) {\n      collection.set(key, value);\n    };\n    for (var ii = 0; ii < iters.length; ii++) {\n      iters[ii].forEach(mergeIntoCollection);\n    }\n  });\n}\nfunction merge(collection) {\n  var sources = [],\n    len = arguments.length - 1;\n  while (len-- > 0) sources[len] = arguments[len + 1];\n  return mergeWithSources(collection, sources);\n}\nfunction mergeWith(merger, collection) {\n  var sources = [],\n    len = arguments.length - 2;\n  while (len-- > 0) sources[len] = arguments[len + 2];\n  return mergeWithSources(collection, sources, merger);\n}\nfunction mergeDeep$1(collection) {\n  var sources = [],\n    len = arguments.length - 1;\n  while (len-- > 0) sources[len] = arguments[len + 1];\n  return mergeDeepWithSources(collection, sources);\n}\nfunction mergeDeepWith$1(merger, collection) {\n  var sources = [],\n    len = arguments.length - 2;\n  while (len-- > 0) sources[len] = arguments[len + 2];\n  return mergeDeepWithSources(collection, sources, merger);\n}\nfunction mergeDeepWithSources(collection, sources, merger) {\n  return mergeWithSources(collection, sources, deepMergerWith(merger));\n}\nfunction mergeWithSources(collection, sources, merger) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError('Cannot merge into non-data-structure value: ' + collection);\n  }\n  if (isImmutable(collection)) {\n    return typeof merger === 'function' && collection.mergeWith ? collection.mergeWith.apply(collection, [merger].concat(sources)) : collection.merge ? collection.merge.apply(collection, sources) : collection.concat.apply(collection, sources);\n  }\n  var isArray = Array.isArray(collection);\n  var merged = collection;\n  var Collection = isArray ? IndexedCollection : KeyedCollection;\n  var mergeItem = isArray ? function (value) {\n    // Copy on write\n    if (merged === collection) {\n      merged = shallowCopy(merged);\n    }\n    merged.push(value);\n  } : function (value, key) {\n    var hasVal = hasOwnProperty.call(merged, key);\n    var nextVal = hasVal && merger ? merger(merged[key], value, key) : value;\n    if (!hasVal || nextVal !== merged[key]) {\n      // Copy on write\n      if (merged === collection) {\n        merged = shallowCopy(merged);\n      }\n      merged[key] = nextVal;\n    }\n  };\n  for (var i = 0; i < sources.length; i++) {\n    Collection(sources[i]).forEach(mergeItem);\n  }\n  return merged;\n}\nfunction deepMergerWith(merger) {\n  function deepMerger(oldValue, newValue, key) {\n    return isDataStructure(oldValue) && isDataStructure(newValue) && areMergeable(oldValue, newValue) ? mergeWithSources(oldValue, [newValue], deepMerger) : merger ? merger(oldValue, newValue, key) : newValue;\n  }\n  return deepMerger;\n}\n\n/**\n * It's unclear what the desired behavior is for merging two collections that\n * fall into separate categories between keyed, indexed, or set-like, so we only\n * consider them mergeable if they fall into the same category.\n */\nfunction areMergeable(oldDataStructure, newDataStructure) {\n  var oldSeq = Seq(oldDataStructure);\n  var newSeq = Seq(newDataStructure);\n  // This logic assumes that a sequence can only fall into one of the three\n  // categories mentioned above (since there's no `isSetLike()` method).\n  return isIndexed(oldSeq) === isIndexed(newSeq) && isKeyed(oldSeq) === isKeyed(newSeq);\n}\nfunction mergeDeep() {\n  var iters = [],\n    len = arguments.length;\n  while (len--) iters[len] = arguments[len];\n  return mergeDeepWithSources(this, iters);\n}\nfunction mergeDeepWith(merger) {\n  var iters = [],\n    len = arguments.length - 1;\n  while (len-- > 0) iters[len] = arguments[len + 1];\n  return mergeDeepWithSources(this, iters, merger);\n}\nfunction mergeIn(keyPath) {\n  var iters = [],\n    len = arguments.length - 1;\n  while (len-- > 0) iters[len] = arguments[len + 1];\n  return updateIn$1(this, keyPath, emptyMap(), function (m) {\n    return mergeWithSources(m, iters);\n  });\n}\nfunction mergeDeepIn(keyPath) {\n  var iters = [],\n    len = arguments.length - 1;\n  while (len-- > 0) iters[len] = arguments[len + 1];\n  return updateIn$1(this, keyPath, emptyMap(), function (m) {\n    return mergeDeepWithSources(m, iters);\n  });\n}\nfunction withMutations(fn) {\n  var mutable = this.asMutable();\n  fn(mutable);\n  return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n}\nfunction asMutable() {\n  return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n}\nfunction asImmutable() {\n  return this.__ensureOwner();\n}\nfunction wasAltered() {\n  return this.__altered;\n}\nvar Map = /*@__PURE__*/function (KeyedCollection) {\n  function Map(value) {\n    return value === undefined || value === null ? emptyMap() : isMap(value) && !isOrdered(value) ? value : emptyMap().withMutations(function (map) {\n      var iter = KeyedCollection(value);\n      assertNotInfinite(iter.size);\n      iter.forEach(function (v, k) {\n        return map.set(k, v);\n      });\n    });\n  }\n  if (KeyedCollection) Map.__proto__ = KeyedCollection;\n  Map.prototype = Object.create(KeyedCollection && KeyedCollection.prototype);\n  Map.prototype.constructor = Map;\n  Map.of = function of() {\n    var keyValues = [],\n      len = arguments.length;\n    while (len--) keyValues[len] = arguments[len];\n    return emptyMap().withMutations(function (map) {\n      for (var i = 0; i < keyValues.length; i += 2) {\n        if (i + 1 >= keyValues.length) {\n          throw new Error('Missing value for key: ' + keyValues[i]);\n        }\n        map.set(keyValues[i], keyValues[i + 1]);\n      }\n    });\n  };\n  Map.prototype.toString = function toString() {\n    return this.__toString('Map {', '}');\n  };\n\n  // @pragma Access\n\n  Map.prototype.get = function get(k, notSetValue) {\n    return this._root ? this._root.get(0, undefined, k, notSetValue) : notSetValue;\n  };\n\n  // @pragma Modification\n\n  Map.prototype.set = function set(k, v) {\n    return updateMap(this, k, v);\n  };\n  Map.prototype.remove = function remove(k) {\n    return updateMap(this, k, NOT_SET);\n  };\n  Map.prototype.deleteAll = function deleteAll(keys) {\n    var collection = Collection(keys);\n    if (collection.size === 0) {\n      return this;\n    }\n    return this.withMutations(function (map) {\n      collection.forEach(function (key) {\n        return map.remove(key);\n      });\n    });\n  };\n  Map.prototype.clear = function clear() {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._root = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyMap();\n  };\n\n  // @pragma Composition\n\n  Map.prototype.sort = function sort(comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator));\n  };\n  Map.prototype.sortBy = function sortBy(mapper, comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator, mapper));\n  };\n  Map.prototype.map = function map(mapper, context) {\n    var this$1$1 = this;\n    return this.withMutations(function (map) {\n      map.forEach(function (value, key) {\n        map.set(key, mapper.call(context, value, key, this$1$1));\n      });\n    });\n  };\n\n  // @pragma Mutability\n\n  Map.prototype.__iterator = function __iterator(type, reverse) {\n    return new MapIterator(this, type, reverse);\n  };\n  Map.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    var iterations = 0;\n    this._root && this._root.iterate(function (entry) {\n      iterations++;\n      return fn(entry[1], entry[0], this$1$1);\n    }, reverse);\n    return iterations;\n  };\n  Map.prototype.__ensureOwner = function __ensureOwner(ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeMap(this.size, this._root, ownerID, this.__hash);\n  };\n  return Map;\n}(KeyedCollection);\nMap.isMap = isMap;\nvar MapPrototype = Map.prototype;\nMapPrototype[IS_MAP_SYMBOL] = true;\nMapPrototype[DELETE] = MapPrototype.remove;\nMapPrototype.removeAll = MapPrototype.deleteAll;\nMapPrototype.setIn = setIn;\nMapPrototype.removeIn = MapPrototype.deleteIn = deleteIn;\nMapPrototype.update = update;\nMapPrototype.updateIn = updateIn;\nMapPrototype.merge = MapPrototype.concat = merge$1;\nMapPrototype.mergeWith = mergeWith$1;\nMapPrototype.mergeDeep = mergeDeep;\nMapPrototype.mergeDeepWith = mergeDeepWith;\nMapPrototype.mergeIn = mergeIn;\nMapPrototype.mergeDeepIn = mergeDeepIn;\nMapPrototype.withMutations = withMutations;\nMapPrototype.wasAltered = wasAltered;\nMapPrototype.asImmutable = asImmutable;\nMapPrototype['@@transducer/init'] = MapPrototype.asMutable = asMutable;\nMapPrototype['@@transducer/step'] = function (result, arr) {\n  return result.set(arr[0], arr[1]);\n};\nMapPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\n// #pragma Trie Nodes\n\nvar ArrayMapNode = function ArrayMapNode(ownerID, entries) {\n  this.ownerID = ownerID;\n  this.entries = entries;\n};\nArrayMapNode.prototype.get = function get(shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\nArrayMapNode.prototype.update = function update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n  if (removed && entries.length === 1) {\n    return; // undefined\n  }\n\n  if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n    return createNodes(ownerID, entries, key, value);\n  }\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n  if (exists) {\n    if (removed) {\n      idx === len - 1 ? newEntries.pop() : newEntries[idx] = newEntries.pop();\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n  return new ArrayMapNode(ownerID, newEntries);\n};\nvar BitmapIndexedNode = function BitmapIndexedNode(ownerID, bitmap, nodes) {\n  this.ownerID = ownerID;\n  this.bitmap = bitmap;\n  this.nodes = nodes;\n};\nBitmapIndexedNode.prototype.get = function get(shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);\n  var bitmap = this.bitmap;\n  return (bitmap & bit) === 0 ? notSetValue : this.nodes[popCount(bitmap & bit - 1)].get(shift + SHIFT, keyHash, key, notSetValue);\n};\nBitmapIndexedNode.prototype.update = function update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var bit = 1 << keyHashFrag;\n  var bitmap = this.bitmap;\n  var exists = (bitmap & bit) !== 0;\n  if (!exists && value === NOT_SET) {\n    return this;\n  }\n  var idx = popCount(bitmap & bit - 1);\n  var nodes = this.nodes;\n  var node = exists ? nodes[idx] : undefined;\n  var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n  if (newNode === node) {\n    return this;\n  }\n  if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n    return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n  }\n  if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n    return nodes[idx ^ 1];\n  }\n  if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n    return newNode;\n  }\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n  var newNodes = exists ? newNode ? setAt(nodes, idx, newNode, isEditable) : spliceOut(nodes, idx, isEditable) : spliceIn(nodes, idx, newNode, isEditable);\n  if (isEditable) {\n    this.bitmap = newBitmap;\n    this.nodes = newNodes;\n    return this;\n  }\n  return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n};\nvar HashArrayMapNode = function HashArrayMapNode(ownerID, count, nodes) {\n  this.ownerID = ownerID;\n  this.count = count;\n  this.nodes = nodes;\n};\nHashArrayMapNode.prototype.get = function get(shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var node = this.nodes[idx];\n  return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n};\nHashArrayMapNode.prototype.update = function update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var removed = value === NOT_SET;\n  var nodes = this.nodes;\n  var node = nodes[idx];\n  if (removed && !node) {\n    return this;\n  }\n  var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n  if (newNode === node) {\n    return this;\n  }\n  var newCount = this.count;\n  if (!node) {\n    newCount++;\n  } else if (!newNode) {\n    newCount--;\n    if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n      return packNodes(ownerID, nodes, newCount, idx);\n    }\n  }\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newNodes = setAt(nodes, idx, newNode, isEditable);\n  if (isEditable) {\n    this.count = newCount;\n    this.nodes = newNodes;\n    return this;\n  }\n  return new HashArrayMapNode(ownerID, newCount, newNodes);\n};\nvar HashCollisionNode = function HashCollisionNode(ownerID, keyHash, entries) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entries = entries;\n};\nHashCollisionNode.prototype.get = function get(shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\nHashCollisionNode.prototype.update = function update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var removed = value === NOT_SET;\n  if (keyHash !== this.keyHash) {\n    if (removed) {\n      return this;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n  }\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n  if (removed && len === 2) {\n    return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n  }\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n  if (exists) {\n    if (removed) {\n      idx === len - 1 ? newEntries.pop() : newEntries[idx] = newEntries.pop();\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n  return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n};\nvar ValueNode = function ValueNode(ownerID, keyHash, entry) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entry = entry;\n};\nValueNode.prototype.get = function get(shift, keyHash, key, notSetValue) {\n  return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n};\nValueNode.prototype.update = function update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var keyMatch = is(key, this.entry[0]);\n  if (keyMatch ? value === this.entry[1] : removed) {\n    return this;\n  }\n  SetRef(didAlter);\n  if (removed) {\n    SetRef(didChangeSize);\n    return; // undefined\n  }\n\n  if (keyMatch) {\n    if (ownerID && ownerID === this.ownerID) {\n      this.entry[1] = value;\n      return this;\n    }\n    return new ValueNode(ownerID, this.keyHash, [key, value]);\n  }\n  SetRef(didChangeSize);\n  return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n};\n\n// #pragma Iterators\n\nArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate = function (fn, reverse) {\n  var entries = this.entries;\n  for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n    if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n      return false;\n    }\n  }\n};\nBitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n  var nodes = this.nodes;\n  for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n    var node = nodes[reverse ? maxIndex - ii : ii];\n    if (node && node.iterate(fn, reverse) === false) {\n      return false;\n    }\n  }\n};\n\n// eslint-disable-next-line no-unused-vars\nValueNode.prototype.iterate = function (fn, reverse) {\n  return fn(this.entry);\n};\nvar MapIterator = /*@__PURE__*/function (Iterator) {\n  function MapIterator(map, type, reverse) {\n    this._type = type;\n    this._reverse = reverse;\n    this._stack = map._root && mapIteratorFrame(map._root);\n  }\n  if (Iterator) MapIterator.__proto__ = Iterator;\n  MapIterator.prototype = Object.create(Iterator && Iterator.prototype);\n  MapIterator.prototype.constructor = MapIterator;\n  MapIterator.prototype.next = function next() {\n    var type = this._type;\n    var stack = this._stack;\n    while (stack) {\n      var node = stack.node;\n      var index = stack.index++;\n      var maxIndex = void 0;\n      if (node.entry) {\n        if (index === 0) {\n          return mapIteratorValue(type, node.entry);\n        }\n      } else if (node.entries) {\n        maxIndex = node.entries.length - 1;\n        if (index <= maxIndex) {\n          return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n        }\n      } else {\n        maxIndex = node.nodes.length - 1;\n        if (index <= maxIndex) {\n          var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n          if (subNode) {\n            if (subNode.entry) {\n              return mapIteratorValue(type, subNode.entry);\n            }\n            stack = this._stack = mapIteratorFrame(subNode, stack);\n          }\n          continue;\n        }\n      }\n      stack = this._stack = this._stack.__prev;\n    }\n    return iteratorDone();\n  };\n  return MapIterator;\n}(Iterator);\nfunction mapIteratorValue(type, entry) {\n  return iteratorValue(type, entry[0], entry[1]);\n}\nfunction mapIteratorFrame(node, prev) {\n  return {\n    node: node,\n    index: 0,\n    __prev: prev\n  };\n}\nfunction makeMap(size, root, ownerID, hash) {\n  var map = Object.create(MapPrototype);\n  map.size = size;\n  map._root = root;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\nvar EMPTY_MAP;\nfunction emptyMap() {\n  return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n}\nfunction updateMap(map, k, v) {\n  var newRoot;\n  var newSize;\n  if (!map._root) {\n    if (v === NOT_SET) {\n      return map;\n    }\n    newSize = 1;\n    newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n  } else {\n    var didChangeSize = MakeRef();\n    var didAlter = MakeRef();\n    newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n    if (!didAlter.value) {\n      return map;\n    }\n    newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n  }\n  if (map.__ownerID) {\n    map.size = newSize;\n    map._root = newRoot;\n    map.__hash = undefined;\n    map.__altered = true;\n    return map;\n  }\n  return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n}\nfunction updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (!node) {\n    if (value === NOT_SET) {\n      return node;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return new ValueNode(ownerID, keyHash, [key, value]);\n  }\n  return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n}\nfunction isLeafNode(node) {\n  return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n}\nfunction mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n  if (node.keyHash === keyHash) {\n    return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n  }\n  var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n  var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var newNode;\n  var nodes = idx1 === idx2 ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] : (newNode = new ValueNode(ownerID, keyHash, entry), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n  return new BitmapIndexedNode(ownerID, 1 << idx1 | 1 << idx2, nodes);\n}\nfunction createNodes(ownerID, entries, key, value) {\n  if (!ownerID) {\n    ownerID = new OwnerID();\n  }\n  var node = new ValueNode(ownerID, hash(key), [key, value]);\n  for (var ii = 0; ii < entries.length; ii++) {\n    var entry = entries[ii];\n    node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n  }\n  return node;\n}\nfunction packNodes(ownerID, nodes, count, excluding) {\n  var bitmap = 0;\n  var packedII = 0;\n  var packedNodes = new Array(count);\n  for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n    var node = nodes[ii];\n    if (node !== undefined && ii !== excluding) {\n      bitmap |= bit;\n      packedNodes[packedII++] = node;\n    }\n  }\n  return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n}\nfunction expandNodes(ownerID, nodes, bitmap, including, node) {\n  var count = 0;\n  var expandedNodes = new Array(SIZE);\n  for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n    expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n  }\n  expandedNodes[including] = node;\n  return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n}\nfunction popCount(x) {\n  x -= x >> 1 & 0x55555555;\n  x = (x & 0x33333333) + (x >> 2 & 0x33333333);\n  x = x + (x >> 4) & 0x0f0f0f0f;\n  x += x >> 8;\n  x += x >> 16;\n  return x & 0x7f;\n}\nfunction setAt(array, idx, val, canEdit) {\n  var newArray = canEdit ? array : arrCopy(array);\n  newArray[idx] = val;\n  return newArray;\n}\nfunction spliceIn(array, idx, val, canEdit) {\n  var newLen = array.length + 1;\n  if (canEdit && idx + 1 === newLen) {\n    array[idx] = val;\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      newArray[ii] = val;\n      after = -1;\n    } else {\n      newArray[ii] = array[ii + after];\n    }\n  }\n  return newArray;\n}\nfunction spliceOut(array, idx, canEdit) {\n  var newLen = array.length - 1;\n  if (canEdit && idx === newLen) {\n    array.pop();\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      after = 1;\n    }\n    newArray[ii] = array[ii + after];\n  }\n  return newArray;\n}\nvar MAX_ARRAY_MAP_SIZE = SIZE / 4;\nvar MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\nvar MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\nvar IS_LIST_SYMBOL = '@@__IMMUTABLE_LIST__@@';\nfunction isList(maybeList) {\n  return Boolean(maybeList && maybeList[IS_LIST_SYMBOL]);\n}\nvar List = /*@__PURE__*/function (IndexedCollection) {\n  function List(value) {\n    var empty = emptyList();\n    if (value === undefined || value === null) {\n      return empty;\n    }\n    if (isList(value)) {\n      return value;\n    }\n    var iter = IndexedCollection(value);\n    var size = iter.size;\n    if (size === 0) {\n      return empty;\n    }\n    assertNotInfinite(size);\n    if (size > 0 && size < SIZE) {\n      return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n    }\n    return empty.withMutations(function (list) {\n      list.setSize(size);\n      iter.forEach(function (v, i) {\n        return list.set(i, v);\n      });\n    });\n  }\n  if (IndexedCollection) List.__proto__ = IndexedCollection;\n  List.prototype = Object.create(IndexedCollection && IndexedCollection.prototype);\n  List.prototype.constructor = List;\n  List.of = function of( /*...values*/\n  ) {\n    return this(arguments);\n  };\n  List.prototype.toString = function toString() {\n    return this.__toString('List [', ']');\n  };\n\n  // @pragma Access\n\n  List.prototype.get = function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    if (index >= 0 && index < this.size) {\n      index += this._origin;\n      var node = listNodeFor(this, index);\n      return node && node.array[index & MASK];\n    }\n    return notSetValue;\n  };\n\n  // @pragma Modification\n\n  List.prototype.set = function set(index, value) {\n    return updateList(this, index, value);\n  };\n  List.prototype.remove = function remove(index) {\n    return !this.has(index) ? this : index === 0 ? this.shift() : index === this.size - 1 ? this.pop() : this.splice(index, 1);\n  };\n  List.prototype.insert = function insert(index, value) {\n    return this.splice(index, 0, value);\n  };\n  List.prototype.clear = function clear() {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = this._origin = this._capacity = 0;\n      this._level = SHIFT;\n      this._root = this._tail = this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyList();\n  };\n  List.prototype.push = function push( /*...values*/\n  ) {\n    var values = arguments;\n    var oldSize = this.size;\n    return this.withMutations(function (list) {\n      setListBounds(list, 0, oldSize + values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(oldSize + ii, values[ii]);\n      }\n    });\n  };\n  List.prototype.pop = function pop() {\n    return setListBounds(this, 0, -1);\n  };\n  List.prototype.unshift = function unshift( /*...values*/\n  ) {\n    var values = arguments;\n    return this.withMutations(function (list) {\n      setListBounds(list, -values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(ii, values[ii]);\n      }\n    });\n  };\n  List.prototype.shift = function shift() {\n    return setListBounds(this, 1);\n  };\n\n  // @pragma Composition\n\n  List.prototype.concat = function concat( /*...collections*/\n  ) {\n    var arguments$1 = arguments;\n    var seqs = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var argument = arguments$1[i];\n      var seq = IndexedCollection(typeof argument !== 'string' && hasIterator(argument) ? argument : [argument]);\n      if (seq.size !== 0) {\n        seqs.push(seq);\n      }\n    }\n    if (seqs.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && seqs.length === 1) {\n      return this.constructor(seqs[0]);\n    }\n    return this.withMutations(function (list) {\n      seqs.forEach(function (seq) {\n        return seq.forEach(function (value) {\n          return list.push(value);\n        });\n      });\n    });\n  };\n  List.prototype.setSize = function setSize(size) {\n    return setListBounds(this, 0, size);\n  };\n  List.prototype.map = function map(mapper, context) {\n    var this$1$1 = this;\n    return this.withMutations(function (list) {\n      for (var i = 0; i < this$1$1.size; i++) {\n        list.set(i, mapper.call(context, list.get(i), i, this$1$1));\n      }\n    });\n  };\n\n  // @pragma Iteration\n\n  List.prototype.slice = function slice(begin, end) {\n    var size = this.size;\n    if (wholeSlice(begin, end, size)) {\n      return this;\n    }\n    return setListBounds(this, resolveBegin(begin, size), resolveEnd(end, size));\n  };\n  List.prototype.__iterator = function __iterator(type, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    return new Iterator(function () {\n      var value = values();\n      return value === DONE ? iteratorDone() : iteratorValue(type, reverse ? --index : index++, value);\n    });\n  };\n  List.prototype.__iterate = function __iterate(fn, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    var value;\n    while ((value = values()) !== DONE) {\n      if (fn(value, reverse ? --index : index++, this) === false) {\n        break;\n      }\n    }\n    return index;\n  };\n  List.prototype.__ensureOwner = function __ensureOwner(ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyList();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n  };\n  return List;\n}(IndexedCollection);\nList.isList = isList;\nvar ListPrototype = List.prototype;\nListPrototype[IS_LIST_SYMBOL] = true;\nListPrototype[DELETE] = ListPrototype.remove;\nListPrototype.merge = ListPrototype.concat;\nListPrototype.setIn = setIn;\nListPrototype.deleteIn = ListPrototype.removeIn = deleteIn;\nListPrototype.update = update;\nListPrototype.updateIn = updateIn;\nListPrototype.mergeIn = mergeIn;\nListPrototype.mergeDeepIn = mergeDeepIn;\nListPrototype.withMutations = withMutations;\nListPrototype.wasAltered = wasAltered;\nListPrototype.asImmutable = asImmutable;\nListPrototype['@@transducer/init'] = ListPrototype.asMutable = asMutable;\nListPrototype['@@transducer/step'] = function (result, arr) {\n  return result.push(arr);\n};\nListPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\nvar VNode = function VNode(array, ownerID) {\n  this.array = array;\n  this.ownerID = ownerID;\n};\n\n// TODO: seems like these methods are very similar\n\nVNode.prototype.removeBefore = function removeBefore(ownerID, level, index) {\n  if (index === level ? 1 << level : this.array.length === 0) {\n    return this;\n  }\n  var originIndex = index >>> level & MASK;\n  if (originIndex >= this.array.length) {\n    return new VNode([], ownerID);\n  }\n  var removingFirst = originIndex === 0;\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[originIndex];\n    newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && removingFirst) {\n      return this;\n    }\n  }\n  if (removingFirst && !newChild) {\n    return this;\n  }\n  var editable = editableVNode(this, ownerID);\n  if (!removingFirst) {\n    for (var ii = 0; ii < originIndex; ii++) {\n      editable.array[ii] = undefined;\n    }\n  }\n  if (newChild) {\n    editable.array[originIndex] = newChild;\n  }\n  return editable;\n};\nVNode.prototype.removeAfter = function removeAfter(ownerID, level, index) {\n  if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n    return this;\n  }\n  var sizeIndex = index - 1 >>> level & MASK;\n  if (sizeIndex >= this.array.length) {\n    return this;\n  }\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[sizeIndex];\n    newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n      return this;\n    }\n  }\n  var editable = editableVNode(this, ownerID);\n  editable.array.splice(sizeIndex + 1);\n  if (newChild) {\n    editable.array[sizeIndex] = newChild;\n  }\n  return editable;\n};\nvar DONE = {};\nfunction iterateList(list, reverse) {\n  var left = list._origin;\n  var right = list._capacity;\n  var tailPos = getTailOffset(right);\n  var tail = list._tail;\n  return iterateNodeOrLeaf(list._root, list._level, 0);\n  function iterateNodeOrLeaf(node, level, offset) {\n    return level === 0 ? iterateLeaf(node, offset) : iterateNode(node, level, offset);\n  }\n  function iterateLeaf(node, offset) {\n    var array = offset === tailPos ? tail && tail.array : node && node.array;\n    var from = offset > left ? 0 : left - offset;\n    var to = right - offset;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      if (from === to) {\n        return DONE;\n      }\n      var idx = reverse ? --to : from++;\n      return array && array[idx];\n    };\n  }\n  function iterateNode(node, level, offset) {\n    var values;\n    var array = node && node.array;\n    var from = offset > left ? 0 : left - offset >> level;\n    var to = (right - offset >> level) + 1;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      while (true) {\n        if (values) {\n          var value = values();\n          if (value !== DONE) {\n            return value;\n          }\n          values = null;\n        }\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        values = iterateNodeOrLeaf(array && array[idx], level - SHIFT, offset + (idx << level));\n      }\n    };\n  }\n}\nfunction makeList(origin, capacity, level, root, tail, ownerID, hash) {\n  var list = Object.create(ListPrototype);\n  list.size = capacity - origin;\n  list._origin = origin;\n  list._capacity = capacity;\n  list._level = level;\n  list._root = root;\n  list._tail = tail;\n  list.__ownerID = ownerID;\n  list.__hash = hash;\n  list.__altered = false;\n  return list;\n}\nvar EMPTY_LIST;\nfunction emptyList() {\n  return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n}\nfunction updateList(list, index, value) {\n  index = wrapIndex(list, index);\n  if (index !== index) {\n    return list;\n  }\n  if (index >= list.size || index < 0) {\n    return list.withMutations(function (list) {\n      index < 0 ? setListBounds(list, index).set(0, value) : setListBounds(list, 0, index + 1).set(index, value);\n    });\n  }\n  index += list._origin;\n  var newTail = list._tail;\n  var newRoot = list._root;\n  var didAlter = MakeRef();\n  if (index >= getTailOffset(list._capacity)) {\n    newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n  } else {\n    newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n  }\n  if (!didAlter.value) {\n    return list;\n  }\n  if (list.__ownerID) {\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n}\nfunction updateVNode(node, ownerID, level, index, value, didAlter) {\n  var idx = index >>> level & MASK;\n  var nodeHas = node && idx < node.array.length;\n  if (!nodeHas && value === undefined) {\n    return node;\n  }\n  var newNode;\n  if (level > 0) {\n    var lowerNode = node && node.array[idx];\n    var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n    if (newLowerNode === lowerNode) {\n      return node;\n    }\n    newNode = editableVNode(node, ownerID);\n    newNode.array[idx] = newLowerNode;\n    return newNode;\n  }\n  if (nodeHas && node.array[idx] === value) {\n    return node;\n  }\n  if (didAlter) {\n    SetRef(didAlter);\n  }\n  newNode = editableVNode(node, ownerID);\n  if (value === undefined && idx === newNode.array.length - 1) {\n    newNode.array.pop();\n  } else {\n    newNode.array[idx] = value;\n  }\n  return newNode;\n}\nfunction editableVNode(node, ownerID) {\n  if (ownerID && node && ownerID === node.ownerID) {\n    return node;\n  }\n  return new VNode(node ? node.array.slice() : [], ownerID);\n}\nfunction listNodeFor(list, rawIndex) {\n  if (rawIndex >= getTailOffset(list._capacity)) {\n    return list._tail;\n  }\n  if (rawIndex < 1 << list._level + SHIFT) {\n    var node = list._root;\n    var level = list._level;\n    while (node && level > 0) {\n      node = node.array[rawIndex >>> level & MASK];\n      level -= SHIFT;\n    }\n    return node;\n  }\n}\nfunction setListBounds(list, begin, end) {\n  // Sanitize begin & end using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  if (begin !== undefined) {\n    begin |= 0;\n  }\n  if (end !== undefined) {\n    end |= 0;\n  }\n  var owner = list.__ownerID || new OwnerID();\n  var oldOrigin = list._origin;\n  var oldCapacity = list._capacity;\n  var newOrigin = oldOrigin + begin;\n  var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n  if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n    return list;\n  }\n\n  // If it's going to end after it starts, it's empty.\n  if (newOrigin >= newCapacity) {\n    return list.clear();\n  }\n  var newLevel = list._level;\n  var newRoot = list._root;\n\n  // New origin might need creating a higher root.\n  var offsetShift = 0;\n  while (newOrigin + offsetShift < 0) {\n    newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n    newLevel += SHIFT;\n    offsetShift += 1 << newLevel;\n  }\n  if (offsetShift) {\n    newOrigin += offsetShift;\n    oldOrigin += offsetShift;\n    newCapacity += offsetShift;\n    oldCapacity += offsetShift;\n  }\n  var oldTailOffset = getTailOffset(oldCapacity);\n  var newTailOffset = getTailOffset(newCapacity);\n\n  // New size might need creating a higher root.\n  while (newTailOffset >= 1 << newLevel + SHIFT) {\n    newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n    newLevel += SHIFT;\n  }\n\n  // Locate or create the new tail.\n  var oldTail = list._tail;\n  var newTail = newTailOffset < oldTailOffset ? listNodeFor(list, newCapacity - 1) : newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n  // Merge Tail into tree.\n  if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n    newRoot = editableVNode(newRoot, owner);\n    var node = newRoot;\n    for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n      var idx = oldTailOffset >>> level & MASK;\n      node = node.array[idx] = editableVNode(node.array[idx], owner);\n    }\n    node.array[oldTailOffset >>> SHIFT & MASK] = oldTail;\n  }\n\n  // If the size has been reduced, there's a chance the tail needs to be trimmed.\n  if (newCapacity < oldCapacity) {\n    newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n  }\n\n  // If the new origin is within the tail, then we do not need a root.\n  if (newOrigin >= newTailOffset) {\n    newOrigin -= newTailOffset;\n    newCapacity -= newTailOffset;\n    newLevel = SHIFT;\n    newRoot = null;\n    newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n  } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n    offsetShift = 0;\n\n    // Identify the new top root node of the subtree of the old root.\n    while (newRoot) {\n      var beginIndex = newOrigin >>> newLevel & MASK;\n      if (beginIndex !== newTailOffset >>> newLevel & MASK) {\n        break;\n      }\n      if (beginIndex) {\n        offsetShift += (1 << newLevel) * beginIndex;\n      }\n      newLevel -= SHIFT;\n      newRoot = newRoot.array[beginIndex];\n    }\n\n    // Trim the new sides of the new root.\n    if (newRoot && newOrigin > oldOrigin) {\n      newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n    }\n    if (newRoot && newTailOffset < oldTailOffset) {\n      newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n    }\n    if (offsetShift) {\n      newOrigin -= offsetShift;\n      newCapacity -= offsetShift;\n    }\n  }\n  if (list.__ownerID) {\n    list.size = newCapacity - newOrigin;\n    list._origin = newOrigin;\n    list._capacity = newCapacity;\n    list._level = newLevel;\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n}\nfunction getTailOffset(size) {\n  return size < SIZE ? 0 : size - 1 >>> SHIFT << SHIFT;\n}\nvar OrderedMap = /*@__PURE__*/function (Map) {\n  function OrderedMap(value) {\n    return value === undefined || value === null ? emptyOrderedMap() : isOrderedMap(value) ? value : emptyOrderedMap().withMutations(function (map) {\n      var iter = KeyedCollection(value);\n      assertNotInfinite(iter.size);\n      iter.forEach(function (v, k) {\n        return map.set(k, v);\n      });\n    });\n  }\n  if (Map) OrderedMap.__proto__ = Map;\n  OrderedMap.prototype = Object.create(Map && Map.prototype);\n  OrderedMap.prototype.constructor = OrderedMap;\n  OrderedMap.of = function of( /*...values*/\n  ) {\n    return this(arguments);\n  };\n  OrderedMap.prototype.toString = function toString() {\n    return this.__toString('OrderedMap {', '}');\n  };\n\n  // @pragma Access\n\n  OrderedMap.prototype.get = function get(k, notSetValue) {\n    var index = this._map.get(k);\n    return index !== undefined ? this._list.get(index)[1] : notSetValue;\n  };\n\n  // @pragma Modification\n\n  OrderedMap.prototype.clear = function clear() {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._map.clear();\n      this._list.clear();\n      this.__altered = true;\n      return this;\n    }\n    return emptyOrderedMap();\n  };\n  OrderedMap.prototype.set = function set(k, v) {\n    return updateOrderedMap(this, k, v);\n  };\n  OrderedMap.prototype.remove = function remove(k) {\n    return updateOrderedMap(this, k, NOT_SET);\n  };\n  OrderedMap.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    return this._list.__iterate(function (entry) {\n      return entry && fn(entry[1], entry[0], this$1$1);\n    }, reverse);\n  };\n  OrderedMap.prototype.__iterator = function __iterator(type, reverse) {\n    return this._list.fromEntrySeq().__iterator(type, reverse);\n  };\n  OrderedMap.prototype.__ensureOwner = function __ensureOwner(ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    var newList = this._list.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyOrderedMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      this._map = newMap;\n      this._list = newList;\n      return this;\n    }\n    return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n  };\n  return OrderedMap;\n}(Map);\nOrderedMap.isOrderedMap = isOrderedMap;\nOrderedMap.prototype[IS_ORDERED_SYMBOL] = true;\nOrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\nfunction makeOrderedMap(map, list, ownerID, hash) {\n  var omap = Object.create(OrderedMap.prototype);\n  omap.size = map ? map.size : 0;\n  omap._map = map;\n  omap._list = list;\n  omap.__ownerID = ownerID;\n  omap.__hash = hash;\n  omap.__altered = false;\n  return omap;\n}\nvar EMPTY_ORDERED_MAP;\nfunction emptyOrderedMap() {\n  return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n}\nfunction updateOrderedMap(omap, k, v) {\n  var map = omap._map;\n  var list = omap._list;\n  var i = map.get(k);\n  var has = i !== undefined;\n  var newMap;\n  var newList;\n  if (v === NOT_SET) {\n    // removed\n    if (!has) {\n      return omap;\n    }\n    if (list.size >= SIZE && list.size >= map.size * 2) {\n      newList = list.filter(function (entry, idx) {\n        return entry !== undefined && i !== idx;\n      });\n      newMap = newList.toKeyedSeq().map(function (entry) {\n        return entry[0];\n      }).flip().toMap();\n      if (omap.__ownerID) {\n        newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n      }\n    } else {\n      newMap = map.remove(k);\n      newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n    }\n  } else if (has) {\n    if (v === list.get(i)[1]) {\n      return omap;\n    }\n    newMap = map;\n    newList = list.set(i, [k, v]);\n  } else {\n    newMap = map.set(k, list.size);\n    newList = list.set(list.size, [k, v]);\n  }\n  if (omap.__ownerID) {\n    omap.size = newMap.size;\n    omap._map = newMap;\n    omap._list = newList;\n    omap.__hash = undefined;\n    omap.__altered = true;\n    return omap;\n  }\n  return makeOrderedMap(newMap, newList);\n}\nvar IS_STACK_SYMBOL = '@@__IMMUTABLE_STACK__@@';\nfunction isStack(maybeStack) {\n  return Boolean(maybeStack && maybeStack[IS_STACK_SYMBOL]);\n}\nvar Stack = /*@__PURE__*/function (IndexedCollection) {\n  function Stack(value) {\n    return value === undefined || value === null ? emptyStack() : isStack(value) ? value : emptyStack().pushAll(value);\n  }\n  if (IndexedCollection) Stack.__proto__ = IndexedCollection;\n  Stack.prototype = Object.create(IndexedCollection && IndexedCollection.prototype);\n  Stack.prototype.constructor = Stack;\n  Stack.of = function of( /*...values*/\n  ) {\n    return this(arguments);\n  };\n  Stack.prototype.toString = function toString() {\n    return this.__toString('Stack [', ']');\n  };\n\n  // @pragma Access\n\n  Stack.prototype.get = function get(index, notSetValue) {\n    var head = this._head;\n    index = wrapIndex(this, index);\n    while (head && index--) {\n      head = head.next;\n    }\n    return head ? head.value : notSetValue;\n  };\n  Stack.prototype.peek = function peek() {\n    return this._head && this._head.value;\n  };\n\n  // @pragma Modification\n\n  Stack.prototype.push = function push( /*...values*/\n  ) {\n    var arguments$1 = arguments;\n    if (arguments.length === 0) {\n      return this;\n    }\n    var newSize = this.size + arguments.length;\n    var head = this._head;\n    for (var ii = arguments.length - 1; ii >= 0; ii--) {\n      head = {\n        value: arguments$1[ii],\n        next: head\n      };\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n  Stack.prototype.pushAll = function pushAll(iter) {\n    iter = IndexedCollection(iter);\n    if (iter.size === 0) {\n      return this;\n    }\n    if (this.size === 0 && isStack(iter)) {\n      return iter;\n    }\n    assertNotInfinite(iter.size);\n    var newSize = this.size;\n    var head = this._head;\n    iter.__iterate(function (value) {\n      newSize++;\n      head = {\n        value: value,\n        next: head\n      };\n    }, /* reverse */true);\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n  Stack.prototype.pop = function pop() {\n    return this.slice(1);\n  };\n  Stack.prototype.clear = function clear() {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._head = undefined;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyStack();\n  };\n  Stack.prototype.slice = function slice(begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    var resolvedBegin = resolveBegin(begin, this.size);\n    var resolvedEnd = resolveEnd(end, this.size);\n    if (resolvedEnd !== this.size) {\n      // super.slice(begin, end);\n      return IndexedCollection.prototype.slice.call(this, begin, end);\n    }\n    var newSize = this.size - resolvedBegin;\n    var head = this._head;\n    while (resolvedBegin--) {\n      head = head.next;\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  // @pragma Mutability\n\n  Stack.prototype.__ensureOwner = function __ensureOwner(ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyStack();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeStack(this.size, this._head, ownerID, this.__hash);\n  };\n\n  // @pragma Iteration\n\n  Stack.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterate(function (v, k) {\n        return fn(v, k, this$1$1);\n      }, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    while (node) {\n      if (fn(node.value, iterations++, this) === false) {\n        break;\n      }\n      node = node.next;\n    }\n    return iterations;\n  };\n  Stack.prototype.__iterator = function __iterator(type, reverse) {\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterator(type, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    return new Iterator(function () {\n      if (node) {\n        var value = node.value;\n        node = node.next;\n        return iteratorValue(type, iterations++, value);\n      }\n      return iteratorDone();\n    });\n  };\n  return Stack;\n}(IndexedCollection);\nStack.isStack = isStack;\nvar StackPrototype = Stack.prototype;\nStackPrototype[IS_STACK_SYMBOL] = true;\nStackPrototype.shift = StackPrototype.pop;\nStackPrototype.unshift = StackPrototype.push;\nStackPrototype.unshiftAll = StackPrototype.pushAll;\nStackPrototype.withMutations = withMutations;\nStackPrototype.wasAltered = wasAltered;\nStackPrototype.asImmutable = asImmutable;\nStackPrototype['@@transducer/init'] = StackPrototype.asMutable = asMutable;\nStackPrototype['@@transducer/step'] = function (result, arr) {\n  return result.unshift(arr);\n};\nStackPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\nfunction makeStack(size, head, ownerID, hash) {\n  var map = Object.create(StackPrototype);\n  map.size = size;\n  map._head = head;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\nvar EMPTY_STACK;\nfunction emptyStack() {\n  return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n}\nvar IS_SET_SYMBOL = '@@__IMMUTABLE_SET__@@';\nfunction isSet(maybeSet) {\n  return Boolean(maybeSet && maybeSet[IS_SET_SYMBOL]);\n}\nfunction isOrderedSet(maybeOrderedSet) {\n  return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n}\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (!isCollection(b) || a.size !== undefined && b.size !== undefined && a.size !== b.size || a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash || isKeyed(a) !== isKeyed(b) || isIndexed(a) !== isIndexed(b) || isOrdered(a) !== isOrdered(b)) {\n    return false;\n  }\n  if (a.size === 0 && b.size === 0) {\n    return true;\n  }\n  var notAssociative = !isAssociative(a);\n  if (isOrdered(a)) {\n    var entries = a.entries();\n    return b.every(function (v, k) {\n      var entry = entries.next().value;\n      return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n    }) && entries.next().done;\n  }\n  var flipped = false;\n  if (a.size === undefined) {\n    if (b.size === undefined) {\n      if (typeof a.cacheResult === 'function') {\n        a.cacheResult();\n      }\n    } else {\n      flipped = true;\n      var _ = a;\n      a = b;\n      b = _;\n    }\n  }\n  var allEqual = true;\n  var bSize = b.__iterate(function (v, k) {\n    if (notAssociative ? !a.has(v) : flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n      allEqual = false;\n      return false;\n    }\n  });\n  return allEqual && a.size === bSize;\n}\nfunction mixin(ctor, methods) {\n  var keyCopier = function (key) {\n    ctor.prototype[key] = methods[key];\n  };\n  Object.keys(methods).forEach(keyCopier);\n  Object.getOwnPropertySymbols && Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n  return ctor;\n}\nfunction toJS(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  if (!isCollection(value)) {\n    if (!isDataStructure(value)) {\n      return value;\n    }\n    value = Seq(value);\n  }\n  if (isKeyed(value)) {\n    var result$1 = {};\n    value.__iterate(function (v, k) {\n      result$1[k] = toJS(v);\n    });\n    return result$1;\n  }\n  var result = [];\n  value.__iterate(function (v) {\n    result.push(toJS(v));\n  });\n  return result;\n}\nvar Set = /*@__PURE__*/function (SetCollection) {\n  function Set(value) {\n    return value === undefined || value === null ? emptySet() : isSet(value) && !isOrdered(value) ? value : emptySet().withMutations(function (set) {\n      var iter = SetCollection(value);\n      assertNotInfinite(iter.size);\n      iter.forEach(function (v) {\n        return set.add(v);\n      });\n    });\n  }\n  if (SetCollection) Set.__proto__ = SetCollection;\n  Set.prototype = Object.create(SetCollection && SetCollection.prototype);\n  Set.prototype.constructor = Set;\n  Set.of = function of( /*...values*/\n  ) {\n    return this(arguments);\n  };\n  Set.fromKeys = function fromKeys(value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n  Set.intersect = function intersect(sets) {\n    sets = Collection(sets).toArray();\n    return sets.length ? SetPrototype.intersect.apply(Set(sets.pop()), sets) : emptySet();\n  };\n  Set.union = function union(sets) {\n    sets = Collection(sets).toArray();\n    return sets.length ? SetPrototype.union.apply(Set(sets.pop()), sets) : emptySet();\n  };\n  Set.prototype.toString = function toString() {\n    return this.__toString('Set {', '}');\n  };\n\n  // @pragma Access\n\n  Set.prototype.has = function has(value) {\n    return this._map.has(value);\n  };\n\n  // @pragma Modification\n\n  Set.prototype.add = function add(value) {\n    return updateSet(this, this._map.set(value, value));\n  };\n  Set.prototype.remove = function remove(value) {\n    return updateSet(this, this._map.remove(value));\n  };\n  Set.prototype.clear = function clear() {\n    return updateSet(this, this._map.clear());\n  };\n\n  // @pragma Composition\n\n  Set.prototype.map = function map(mapper, context) {\n    var this$1$1 = this;\n\n    // keep track if the set is altered by the map function\n    var didChanges = false;\n    var newMap = updateSet(this, this._map.mapEntries(function (ref) {\n      var v = ref[1];\n      var mapped = mapper.call(context, v, v, this$1$1);\n      if (mapped !== v) {\n        didChanges = true;\n      }\n      return [mapped, mapped];\n    }, context));\n    return didChanges ? newMap : this;\n  };\n  Set.prototype.union = function union() {\n    var iters = [],\n      len = arguments.length;\n    while (len--) iters[len] = arguments[len];\n    iters = iters.filter(function (x) {\n      return x.size !== 0;\n    });\n    if (iters.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n      return this.constructor(iters[0]);\n    }\n    return this.withMutations(function (set) {\n      for (var ii = 0; ii < iters.length; ii++) {\n        if (typeof iters[ii] === 'string') {\n          set.add(iters[ii]);\n        } else {\n          SetCollection(iters[ii]).forEach(function (value) {\n            return set.add(value);\n          });\n        }\n      }\n    });\n  };\n  Set.prototype.intersect = function intersect() {\n    var iters = [],\n      len = arguments.length;\n    while (len--) iters[len] = arguments[len];\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) {\n      return SetCollection(iter);\n    });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (!iters.every(function (iter) {\n        return iter.includes(value);\n      })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n  Set.prototype.subtract = function subtract() {\n    var iters = [],\n      len = arguments.length;\n    while (len--) iters[len] = arguments[len];\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) {\n      return SetCollection(iter);\n    });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (iters.some(function (iter) {\n        return iter.includes(value);\n      })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n  Set.prototype.sort = function sort(comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator));\n  };\n  Set.prototype.sortBy = function sortBy(mapper, comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator, mapper));\n  };\n  Set.prototype.wasAltered = function wasAltered() {\n    return this._map.wasAltered();\n  };\n  Set.prototype.__iterate = function __iterate(fn, reverse) {\n    var this$1$1 = this;\n    return this._map.__iterate(function (k) {\n      return fn(k, k, this$1$1);\n    }, reverse);\n  };\n  Set.prototype.__iterator = function __iterator(type, reverse) {\n    return this._map.__iterator(type, reverse);\n  };\n  Set.prototype.__ensureOwner = function __ensureOwner(ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return this.__empty();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      return this;\n    }\n    return this.__make(newMap, ownerID);\n  };\n  return Set;\n}(SetCollection);\nSet.isSet = isSet;\nvar SetPrototype = Set.prototype;\nSetPrototype[IS_SET_SYMBOL] = true;\nSetPrototype[DELETE] = SetPrototype.remove;\nSetPrototype.merge = SetPrototype.concat = SetPrototype.union;\nSetPrototype.withMutations = withMutations;\nSetPrototype.asImmutable = asImmutable;\nSetPrototype['@@transducer/init'] = SetPrototype.asMutable = asMutable;\nSetPrototype['@@transducer/step'] = function (result, arr) {\n  return result.add(arr);\n};\nSetPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\nSetPrototype.__empty = emptySet;\nSetPrototype.__make = makeSet;\nfunction updateSet(set, newMap) {\n  if (set.__ownerID) {\n    set.size = newMap.size;\n    set._map = newMap;\n    return set;\n  }\n  return newMap === set._map ? set : newMap.size === 0 ? set.__empty() : set.__make(newMap);\n}\nfunction makeSet(map, ownerID) {\n  var set = Object.create(SetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\nvar EMPTY_SET;\nfunction emptySet() {\n  return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n}\n\n/**\n * Returns a lazy seq of nums from start (inclusive) to end\n * (exclusive), by step, where start defaults to 0, step to 1, and end to\n * infinity. When start is equal to end, returns empty list.\n */\nvar Range = /*@__PURE__*/function (IndexedSeq) {\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      return new Range(start, end, step);\n    }\n    invariant(step !== 0, 'Cannot step a Range by 0');\n    start = start || 0;\n    if (end === undefined) {\n      end = Infinity;\n    }\n    step = step === undefined ? 1 : Math.abs(step);\n    if (end < start) {\n      step = -step;\n    }\n    this._start = start;\n    this._end = end;\n    this._step = step;\n    this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n    if (this.size === 0) {\n      if (EMPTY_RANGE) {\n        return EMPTY_RANGE;\n      }\n      EMPTY_RANGE = this;\n    }\n  }\n  if (IndexedSeq) Range.__proto__ = IndexedSeq;\n  Range.prototype = Object.create(IndexedSeq && IndexedSeq.prototype);\n  Range.prototype.constructor = Range;\n  Range.prototype.toString = function toString() {\n    if (this.size === 0) {\n      return 'Range []';\n    }\n    return 'Range [ ' + this._start + '...' + this._end + (this._step !== 1 ? ' by ' + this._step : '') + ' ]';\n  };\n  Range.prototype.get = function get(index, notSetValue) {\n    return this.has(index) ? this._start + wrapIndex(this, index) * this._step : notSetValue;\n  };\n  Range.prototype.includes = function includes(searchValue) {\n    var possibleIndex = (searchValue - this._start) / this._step;\n    return possibleIndex >= 0 && possibleIndex < this.size && possibleIndex === Math.floor(possibleIndex);\n  };\n  Range.prototype.slice = function slice(begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    begin = resolveBegin(begin, this.size);\n    end = resolveEnd(end, this.size);\n    if (end <= begin) {\n      return new Range(0, 0);\n    }\n    return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n  };\n  Range.prototype.indexOf = function indexOf(searchValue) {\n    var offsetValue = searchValue - this._start;\n    if (offsetValue % this._step === 0) {\n      var index = offsetValue / this._step;\n      if (index >= 0 && index < this.size) {\n        return index;\n      }\n    }\n    return -1;\n  };\n  Range.prototype.lastIndexOf = function lastIndexOf(searchValue) {\n    return this.indexOf(searchValue);\n  };\n  Range.prototype.__iterate = function __iterate(fn, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    while (i !== size) {\n      if (fn(value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n      value += reverse ? -step : step;\n    }\n    return i;\n  };\n  Range.prototype.__iterator = function __iterator(type, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var v = value;\n      value += reverse ? -step : step;\n      return iteratorValue(type, reverse ? size - ++i : i++, v);\n    });\n  };\n  Range.prototype.equals = function equals(other) {\n    return other instanceof Range ? this._start === other._start && this._end === other._end && this._step === other._step : deepEqual(this, other);\n  };\n  return Range;\n}(IndexedSeq);\nvar EMPTY_RANGE;\nfunction getIn$1(collection, searchKeyPath, notSetValue) {\n  var keyPath = coerceKeyPath(searchKeyPath);\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\nfunction getIn(searchKeyPath, notSetValue) {\n  return getIn$1(this, searchKeyPath, notSetValue);\n}\nfunction hasIn$1(collection, keyPath) {\n  return getIn$1(collection, keyPath, NOT_SET) !== NOT_SET;\n}\nfunction hasIn(searchKeyPath) {\n  return hasIn$1(this, searchKeyPath);\n}\nfunction toObject() {\n  assertNotInfinite(this.size);\n  var object = {};\n  this.__iterate(function (v, k) {\n    object[k] = v;\n  });\n  return object;\n}\n\n// Note: all of these methods are deprecated.\nCollection.isIterable = isCollection;\nCollection.isKeyed = isKeyed;\nCollection.isIndexed = isIndexed;\nCollection.isAssociative = isAssociative;\nCollection.isOrdered = isOrdered;\nCollection.Iterator = Iterator;\nmixin(Collection, {\n  // ### Conversion to other types\n\n  toArray: function toArray() {\n    assertNotInfinite(this.size);\n    var array = new Array(this.size || 0);\n    var useTuples = isKeyed(this);\n    var i = 0;\n    this.__iterate(function (v, k) {\n      // Keyed collections produce an array of tuples.\n      array[i++] = useTuples ? [k, v] : v;\n    });\n    return array;\n  },\n  toIndexedSeq: function toIndexedSeq() {\n    return new ToIndexedSequence(this);\n  },\n  toJS: function toJS$1() {\n    return toJS(this);\n  },\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, true);\n  },\n  toMap: function toMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return Map(this.toKeyedSeq());\n  },\n  toObject: toObject,\n  toOrderedMap: function toOrderedMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedMap(this.toKeyedSeq());\n  },\n  toOrderedSet: function toOrderedSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n  },\n  toSet: function toSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return Set(isKeyed(this) ? this.valueSeq() : this);\n  },\n  toSetSeq: function toSetSeq() {\n    return new ToSetSequence(this);\n  },\n  toSeq: function toSeq() {\n    return isIndexed(this) ? this.toIndexedSeq() : isKeyed(this) ? this.toKeyedSeq() : this.toSetSeq();\n  },\n  toStack: function toStack() {\n    // Use Late Binding here to solve the circular dependency.\n    return Stack(isKeyed(this) ? this.valueSeq() : this);\n  },\n  toList: function toList() {\n    // Use Late Binding here to solve the circular dependency.\n    return List(isKeyed(this) ? this.valueSeq() : this);\n  },\n  // ### Common JavaScript methods and properties\n\n  toString: function toString() {\n    return '[Collection]';\n  },\n  __toString: function __toString(head, tail) {\n    if (this.size === 0) {\n      return head + tail;\n    }\n    return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n  },\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  concat: function concat() {\n    var values = [],\n      len = arguments.length;\n    while (len--) values[len] = arguments[len];\n    return reify(this, concatFactory(this, values));\n  },\n  includes: function includes(searchValue) {\n    return this.some(function (value) {\n      return is(value, searchValue);\n    });\n  },\n  entries: function entries() {\n    return this.__iterator(ITERATE_ENTRIES);\n  },\n  every: function every(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = true;\n    this.__iterate(function (v, k, c) {\n      if (!predicate.call(context, v, k, c)) {\n        returnValue = false;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, true));\n  },\n  partition: function partition(predicate, context) {\n    return partitionFactory(this, predicate, context);\n  },\n  find: function find(predicate, context, notSetValue) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[1] : notSetValue;\n  },\n  forEach: function forEach(sideEffect, context) {\n    assertNotInfinite(this.size);\n    return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n  },\n  join: function join(separator) {\n    assertNotInfinite(this.size);\n    separator = separator !== undefined ? '' + separator : ',';\n    var joined = '';\n    var isFirst = true;\n    this.__iterate(function (v) {\n      isFirst ? isFirst = false : joined += separator;\n      joined += v !== null && v !== undefined ? v.toString() : '';\n    });\n    return joined;\n  },\n  keys: function keys() {\n    return this.__iterator(ITERATE_KEYS);\n  },\n  map: function map(mapper, context) {\n    return reify(this, mapFactory(this, mapper, context));\n  },\n  reduce: function reduce$1(reducer, initialReduction, context) {\n    return reduce(this, reducer, initialReduction, context, arguments.length < 2, false);\n  },\n  reduceRight: function reduceRight(reducer, initialReduction, context) {\n    return reduce(this, reducer, initialReduction, context, arguments.length < 2, true);\n  },\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, true));\n  },\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, true));\n  },\n  some: function some(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = false;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        returnValue = true;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n  sort: function sort(comparator) {\n    return reify(this, sortFactory(this, comparator));\n  },\n  values: function values() {\n    return this.__iterator(ITERATE_VALUES);\n  },\n  // ### More sequential methods\n\n  butLast: function butLast() {\n    return this.slice(0, -1);\n  },\n  isEmpty: function isEmpty() {\n    return this.size !== undefined ? this.size === 0 : !this.some(function () {\n      return true;\n    });\n  },\n  count: function count(predicate, context) {\n    return ensureSize(predicate ? this.toSeq().filter(predicate, context) : this);\n  },\n  countBy: function countBy(grouper, context) {\n    return countByFactory(this, grouper, context);\n  },\n  equals: function equals(other) {\n    return deepEqual(this, other);\n  },\n  entrySeq: function entrySeq() {\n    var collection = this;\n    if (collection._cache) {\n      // We cache as an entries array, so we can just return the cache!\n      return new ArraySeq(collection._cache);\n    }\n    var entriesSequence = collection.toSeq().map(entryMapper).toIndexedSeq();\n    entriesSequence.fromEntrySeq = function () {\n      return collection.toSeq();\n    };\n    return entriesSequence;\n  },\n  filterNot: function filterNot(predicate, context) {\n    return this.filter(not(predicate), context);\n  },\n  findEntry: function findEntry(predicate, context, notSetValue) {\n    var found = notSetValue;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        found = [k, v];\n        return false;\n      }\n    });\n    return found;\n  },\n  findKey: function findKey(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry && entry[0];\n  },\n  findLast: function findLast(predicate, context, notSetValue) {\n    return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n  },\n  findLastEntry: function findLastEntry(predicate, context, notSetValue) {\n    return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n  },\n  findLastKey: function findLastKey(predicate, context) {\n    return this.toKeyedSeq().reverse().findKey(predicate, context);\n  },\n  first: function first(notSetValue) {\n    return this.find(returnTrue, null, notSetValue);\n  },\n  flatMap: function flatMap(mapper, context) {\n    return reify(this, flatMapFactory(this, mapper, context));\n  },\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, true));\n  },\n  fromEntrySeq: function fromEntrySeq() {\n    return new FromEntriesSequence(this);\n  },\n  get: function get(searchKey, notSetValue) {\n    return this.find(function (_, key) {\n      return is(key, searchKey);\n    }, undefined, notSetValue);\n  },\n  getIn: getIn,\n  groupBy: function groupBy(grouper, context) {\n    return groupByFactory(this, grouper, context);\n  },\n  has: function has(searchKey) {\n    return this.get(searchKey, NOT_SET) !== NOT_SET;\n  },\n  hasIn: hasIn,\n  isSubset: function isSubset(iter) {\n    iter = typeof iter.includes === 'function' ? iter : Collection(iter);\n    return this.every(function (value) {\n      return iter.includes(value);\n    });\n  },\n  isSuperset: function isSuperset(iter) {\n    iter = typeof iter.isSubset === 'function' ? iter : Collection(iter);\n    return iter.isSubset(this);\n  },\n  keyOf: function keyOf(searchValue) {\n    return this.findKey(function (value) {\n      return is(value, searchValue);\n    });\n  },\n  keySeq: function keySeq() {\n    return this.toSeq().map(keyMapper).toIndexedSeq();\n  },\n  last: function last(notSetValue) {\n    return this.toSeq().reverse().first(notSetValue);\n  },\n  lastKeyOf: function lastKeyOf(searchValue) {\n    return this.toKeyedSeq().reverse().keyOf(searchValue);\n  },\n  max: function max(comparator) {\n    return maxFactory(this, comparator);\n  },\n  maxBy: function maxBy(mapper, comparator) {\n    return maxFactory(this, comparator, mapper);\n  },\n  min: function min(comparator) {\n    return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n  },\n  minBy: function minBy(mapper, comparator) {\n    return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n  },\n  rest: function rest() {\n    return this.slice(1);\n  },\n  skip: function skip(amount) {\n    return amount === 0 ? this : this.slice(Math.max(0, amount));\n  },\n  skipLast: function skipLast(amount) {\n    return amount === 0 ? this : this.slice(0, -Math.max(0, amount));\n  },\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, true));\n  },\n  skipUntil: function skipUntil(predicate, context) {\n    return this.skipWhile(not(predicate), context);\n  },\n  sortBy: function sortBy(mapper, comparator) {\n    return reify(this, sortFactory(this, comparator, mapper));\n  },\n  take: function take(amount) {\n    return this.slice(0, Math.max(0, amount));\n  },\n  takeLast: function takeLast(amount) {\n    return this.slice(-Math.max(0, amount));\n  },\n  takeWhile: function takeWhile(predicate, context) {\n    return reify(this, takeWhileFactory(this, predicate, context));\n  },\n  takeUntil: function takeUntil(predicate, context) {\n    return this.takeWhile(not(predicate), context);\n  },\n  update: function update(fn) {\n    return fn(this);\n  },\n  valueSeq: function valueSeq() {\n    return this.toIndexedSeq();\n  },\n  // ### Hashable Object\n\n  hashCode: function hashCode() {\n    return this.__hash || (this.__hash = hashCollection(this));\n  }\n\n  // ### Internal\n\n  // abstract __iterate(fn, reverse)\n\n  // abstract __iterator(type, reverse)\n});\n\nvar CollectionPrototype = Collection.prototype;\nCollectionPrototype[IS_COLLECTION_SYMBOL] = true;\nCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.values;\nCollectionPrototype.toJSON = CollectionPrototype.toArray;\nCollectionPrototype.__toStringMapper = quoteString;\nCollectionPrototype.inspect = CollectionPrototype.toSource = function () {\n  return this.toString();\n};\nCollectionPrototype.chain = CollectionPrototype.flatMap;\nCollectionPrototype.contains = CollectionPrototype.includes;\nmixin(KeyedCollection, {\n  // ### More sequential methods\n\n  flip: function flip() {\n    return reify(this, flipFactory(this));\n  },\n  mapEntries: function mapEntries(mapper, context) {\n    var this$1$1 = this;\n    var iterations = 0;\n    return reify(this, this.toSeq().map(function (v, k) {\n      return mapper.call(context, [k, v], iterations++, this$1$1);\n    }).fromEntrySeq());\n  },\n  mapKeys: function mapKeys(mapper, context) {\n    var this$1$1 = this;\n    return reify(this, this.toSeq().flip().map(function (k, v) {\n      return mapper.call(context, k, v, this$1$1);\n    }).flip());\n  }\n});\nvar KeyedCollectionPrototype = KeyedCollection.prototype;\nKeyedCollectionPrototype[IS_KEYED_SYMBOL] = true;\nKeyedCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.entries;\nKeyedCollectionPrototype.toJSON = toObject;\nKeyedCollectionPrototype.__toStringMapper = function (v, k) {\n  return quoteString(k) + ': ' + quoteString(v);\n};\nmixin(IndexedCollection, {\n  // ### Conversion to other types\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, false);\n  },\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, false));\n  },\n  findIndex: function findIndex(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n  indexOf: function indexOf(searchValue) {\n    var key = this.keyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n  lastIndexOf: function lastIndexOf(searchValue) {\n    var key = this.lastKeyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, false));\n  },\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, false));\n  },\n  splice: function splice(index, removeNum /*, ...values*/) {\n    var numArgs = arguments.length;\n    removeNum = Math.max(removeNum || 0, 0);\n    if (numArgs === 0 || numArgs === 2 && !removeNum) {\n      return this;\n    }\n    // If index is negative, it should resolve relative to the size of the\n    // collection. However size may be expensive to compute if not cached, so\n    // only call count() if the number is in fact negative.\n    index = resolveBegin(index, index < 0 ? this.count() : this.size);\n    var spliced = this.slice(0, index);\n    return reify(this, numArgs === 1 ? spliced : spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum)));\n  },\n  // ### More collection methods\n\n  findLastIndex: function findLastIndex(predicate, context) {\n    var entry = this.findLastEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n  first: function first(notSetValue) {\n    return this.get(0, notSetValue);\n  },\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, false));\n  },\n  get: function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    return index < 0 || this.size === Infinity || this.size !== undefined && index > this.size ? notSetValue : this.find(function (_, key) {\n      return key === index;\n    }, undefined, notSetValue);\n  },\n  has: function has(index) {\n    index = wrapIndex(this, index);\n    return index >= 0 && (this.size !== undefined ? this.size === Infinity || index < this.size : this.indexOf(index) !== -1);\n  },\n  interpose: function interpose(separator) {\n    return reify(this, interposeFactory(this, separator));\n  },\n  interleave: function interleave( /*...collections*/\n  ) {\n    var collections = [this].concat(arrCopy(arguments));\n    var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, collections);\n    var interleaved = zipped.flatten(true);\n    if (zipped.size) {\n      interleaved.size = zipped.size * collections.length;\n    }\n    return reify(this, interleaved);\n  },\n  keySeq: function keySeq() {\n    return Range(0, this.size);\n  },\n  last: function last(notSetValue) {\n    return this.get(-1, notSetValue);\n  },\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, false));\n  },\n  zip: function zip( /*, ...collections */\n  ) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections));\n  },\n  zipAll: function zipAll( /*, ...collections */\n  ) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections, true));\n  },\n  zipWith: function zipWith(zipper /*, ...collections */) {\n    var collections = arrCopy(arguments);\n    collections[0] = this;\n    return reify(this, zipWithFactory(this, zipper, collections));\n  }\n});\nvar IndexedCollectionPrototype = IndexedCollection.prototype;\nIndexedCollectionPrototype[IS_INDEXED_SYMBOL] = true;\nIndexedCollectionPrototype[IS_ORDERED_SYMBOL] = true;\nmixin(SetCollection, {\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  get: function get(value, notSetValue) {\n    return this.has(value) ? value : notSetValue;\n  },\n  includes: function includes(value) {\n    return this.has(value);\n  },\n  // ### More sequential methods\n\n  keySeq: function keySeq() {\n    return this.valueSeq();\n  }\n});\nvar SetCollectionPrototype = SetCollection.prototype;\nSetCollectionPrototype.has = CollectionPrototype.includes;\nSetCollectionPrototype.contains = SetCollectionPrototype.includes;\nSetCollectionPrototype.keys = SetCollectionPrototype.values;\n\n// Mixin subclasses\n\nmixin(KeyedSeq, KeyedCollectionPrototype);\nmixin(IndexedSeq, IndexedCollectionPrototype);\nmixin(SetSeq, SetCollectionPrototype);\n\n// #pragma Helper functions\n\nfunction reduce(collection, reducer, reduction, context, useFirst, reverse) {\n  assertNotInfinite(collection.size);\n  collection.__iterate(function (v, k, c) {\n    if (useFirst) {\n      useFirst = false;\n      reduction = v;\n    } else {\n      reduction = reducer.call(context, reduction, v, k, c);\n    }\n  }, reverse);\n  return reduction;\n}\nfunction keyMapper(v, k) {\n  return k;\n}\nfunction entryMapper(v, k) {\n  return [k, v];\n}\nfunction not(predicate) {\n  return function () {\n    return !predicate.apply(this, arguments);\n  };\n}\nfunction neg(predicate) {\n  return function () {\n    return -predicate.apply(this, arguments);\n  };\n}\nfunction defaultZipper() {\n  return arrCopy(arguments);\n}\nfunction defaultNegComparator(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\nfunction hashCollection(collection) {\n  if (collection.size === Infinity) {\n    return 0;\n  }\n  var ordered = isOrdered(collection);\n  var keyed = isKeyed(collection);\n  var h = ordered ? 1 : 0;\n  var size = collection.__iterate(keyed ? ordered ? function (v, k) {\n    h = 31 * h + hashMerge(hash(v), hash(k)) | 0;\n  } : function (v, k) {\n    h = h + hashMerge(hash(v), hash(k)) | 0;\n  } : ordered ? function (v) {\n    h = 31 * h + hash(v) | 0;\n  } : function (v) {\n    h = h + hash(v) | 0;\n  });\n  return murmurHashOfSize(size, h);\n}\nfunction murmurHashOfSize(size, h) {\n  h = imul(h, 0xcc9e2d51);\n  h = imul(h << 15 | h >>> -15, 0x1b873593);\n  h = imul(h << 13 | h >>> -13, 5);\n  h = (h + 0xe6546b64 | 0) ^ size;\n  h = imul(h ^ h >>> 16, 0x85ebca6b);\n  h = imul(h ^ h >>> 13, 0xc2b2ae35);\n  h = smi(h ^ h >>> 16);\n  return h;\n}\nfunction hashMerge(a, b) {\n  return a ^ b + 0x9e3779b9 + (a << 6) + (a >> 2) | 0; // int\n}\n\nvar OrderedSet = /*@__PURE__*/function (Set) {\n  function OrderedSet(value) {\n    return value === undefined || value === null ? emptyOrderedSet() : isOrderedSet(value) ? value : emptyOrderedSet().withMutations(function (set) {\n      var iter = SetCollection(value);\n      assertNotInfinite(iter.size);\n      iter.forEach(function (v) {\n        return set.add(v);\n      });\n    });\n  }\n  if (Set) OrderedSet.__proto__ = Set;\n  OrderedSet.prototype = Object.create(Set && Set.prototype);\n  OrderedSet.prototype.constructor = OrderedSet;\n  OrderedSet.of = function of( /*...values*/\n  ) {\n    return this(arguments);\n  };\n  OrderedSet.fromKeys = function fromKeys(value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n  OrderedSet.prototype.toString = function toString() {\n    return this.__toString('OrderedSet {', '}');\n  };\n  return OrderedSet;\n}(Set);\nOrderedSet.isOrderedSet = isOrderedSet;\nvar OrderedSetPrototype = OrderedSet.prototype;\nOrderedSetPrototype[IS_ORDERED_SYMBOL] = true;\nOrderedSetPrototype.zip = IndexedCollectionPrototype.zip;\nOrderedSetPrototype.zipWith = IndexedCollectionPrototype.zipWith;\nOrderedSetPrototype.zipAll = IndexedCollectionPrototype.zipAll;\nOrderedSetPrototype.__empty = emptyOrderedSet;\nOrderedSetPrototype.__make = makeOrderedSet;\nfunction makeOrderedSet(map, ownerID) {\n  var set = Object.create(OrderedSetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\nvar EMPTY_ORDERED_SET;\nfunction emptyOrderedSet() {\n  return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n}\nvar PairSorting = {\n  LeftThenRight: -1,\n  RightThenLeft: +1\n};\nfunction throwOnInvalidDefaultValues(defaultValues) {\n  if (isRecord(defaultValues)) {\n    throw new Error('Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.');\n  }\n  if (isImmutable(defaultValues)) {\n    throw new Error('Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.');\n  }\n  if (defaultValues === null || typeof defaultValues !== 'object') {\n    throw new Error('Can not call `Record` with a non-object as default values. Use a plain javascript object instead.');\n  }\n}\nvar Record = function Record(defaultValues, name) {\n  var hasInitialized;\n  throwOnInvalidDefaultValues(defaultValues);\n  var RecordType = function Record(values) {\n    var this$1$1 = this;\n    if (values instanceof RecordType) {\n      return values;\n    }\n    if (!(this instanceof RecordType)) {\n      return new RecordType(values);\n    }\n    if (!hasInitialized) {\n      hasInitialized = true;\n      var keys = Object.keys(defaultValues);\n      var indices = RecordTypePrototype._indices = {};\n      // Deprecated: left to attempt not to break any external code which\n      // relies on a ._name property existing on record instances.\n      // Use Record.getDescriptiveName() instead\n      RecordTypePrototype._name = name;\n      RecordTypePrototype._keys = keys;\n      RecordTypePrototype._defaultValues = defaultValues;\n      for (var i = 0; i < keys.length; i++) {\n        var propName = keys[i];\n        indices[propName] = i;\n        if (RecordTypePrototype[propName]) {\n          /* eslint-disable no-console */\n          typeof console === 'object' && console.warn && console.warn('Cannot define ' + recordName(this) + ' with property \"' + propName + '\" since that property name is part of the Record API.');\n          /* eslint-enable no-console */\n        } else {\n          setProp(RecordTypePrototype, propName);\n        }\n      }\n    }\n    this.__ownerID = undefined;\n    this._values = List().withMutations(function (l) {\n      l.setSize(this$1$1._keys.length);\n      KeyedCollection(values).forEach(function (v, k) {\n        l.set(this$1$1._indices[k], v === this$1$1._defaultValues[k] ? undefined : v);\n      });\n    });\n    return this;\n  };\n  var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n  RecordTypePrototype.constructor = RecordType;\n  if (name) {\n    RecordType.displayName = name;\n  }\n  return RecordType;\n};\nRecord.prototype.toString = function toString() {\n  var str = recordName(this) + ' { ';\n  var keys = this._keys;\n  var k;\n  for (var i = 0, l = keys.length; i !== l; i++) {\n    k = keys[i];\n    str += (i ? ', ' : '') + k + ': ' + quoteString(this.get(k));\n  }\n  return str + ' }';\n};\nRecord.prototype.equals = function equals(other) {\n  return this === other || isRecord(other) && recordSeq(this).equals(recordSeq(other));\n};\nRecord.prototype.hashCode = function hashCode() {\n  return recordSeq(this).hashCode();\n};\n\n// @pragma Access\n\nRecord.prototype.has = function has(k) {\n  return this._indices.hasOwnProperty(k);\n};\nRecord.prototype.get = function get(k, notSetValue) {\n  if (!this.has(k)) {\n    return notSetValue;\n  }\n  var index = this._indices[k];\n  var value = this._values.get(index);\n  return value === undefined ? this._defaultValues[k] : value;\n};\n\n// @pragma Modification\n\nRecord.prototype.set = function set(k, v) {\n  if (this.has(k)) {\n    var newValues = this._values.set(this._indices[k], v === this._defaultValues[k] ? undefined : v);\n    if (newValues !== this._values && !this.__ownerID) {\n      return makeRecord(this, newValues);\n    }\n  }\n  return this;\n};\nRecord.prototype.remove = function remove(k) {\n  return this.set(k);\n};\nRecord.prototype.clear = function clear() {\n  var newValues = this._values.clear().setSize(this._keys.length);\n  return this.__ownerID ? this : makeRecord(this, newValues);\n};\nRecord.prototype.wasAltered = function wasAltered() {\n  return this._values.wasAltered();\n};\nRecord.prototype.toSeq = function toSeq() {\n  return recordSeq(this);\n};\nRecord.prototype.toJS = function toJS$1() {\n  return toJS(this);\n};\nRecord.prototype.entries = function entries() {\n  return this.__iterator(ITERATE_ENTRIES);\n};\nRecord.prototype.__iterator = function __iterator(type, reverse) {\n  return recordSeq(this).__iterator(type, reverse);\n};\nRecord.prototype.__iterate = function __iterate(fn, reverse) {\n  return recordSeq(this).__iterate(fn, reverse);\n};\nRecord.prototype.__ensureOwner = function __ensureOwner(ownerID) {\n  if (ownerID === this.__ownerID) {\n    return this;\n  }\n  var newValues = this._values.__ensureOwner(ownerID);\n  if (!ownerID) {\n    this.__ownerID = ownerID;\n    this._values = newValues;\n    return this;\n  }\n  return makeRecord(this, newValues, ownerID);\n};\nRecord.isRecord = isRecord;\nRecord.getDescriptiveName = recordName;\nvar RecordPrototype = Record.prototype;\nRecordPrototype[IS_RECORD_SYMBOL] = true;\nRecordPrototype[DELETE] = RecordPrototype.remove;\nRecordPrototype.deleteIn = RecordPrototype.removeIn = deleteIn;\nRecordPrototype.getIn = getIn;\nRecordPrototype.hasIn = CollectionPrototype.hasIn;\nRecordPrototype.merge = merge$1;\nRecordPrototype.mergeWith = mergeWith$1;\nRecordPrototype.mergeIn = mergeIn;\nRecordPrototype.mergeDeep = mergeDeep;\nRecordPrototype.mergeDeepWith = mergeDeepWith;\nRecordPrototype.mergeDeepIn = mergeDeepIn;\nRecordPrototype.setIn = setIn;\nRecordPrototype.update = update;\nRecordPrototype.updateIn = updateIn;\nRecordPrototype.withMutations = withMutations;\nRecordPrototype.asMutable = asMutable;\nRecordPrototype.asImmutable = asImmutable;\nRecordPrototype[ITERATOR_SYMBOL] = RecordPrototype.entries;\nRecordPrototype.toJSON = RecordPrototype.toObject = CollectionPrototype.toObject;\nRecordPrototype.inspect = RecordPrototype.toSource = function () {\n  return this.toString();\n};\nfunction makeRecord(likeRecord, values, ownerID) {\n  var record = Object.create(Object.getPrototypeOf(likeRecord));\n  record._values = values;\n  record.__ownerID = ownerID;\n  return record;\n}\nfunction recordName(record) {\n  return record.constructor.displayName || record.constructor.name || 'Record';\n}\nfunction recordSeq(record) {\n  return keyedSeqFromValue(record._keys.map(function (k) {\n    return [k, record.get(k)];\n  }));\n}\nfunction setProp(prototype, name) {\n  try {\n    Object.defineProperty(prototype, name, {\n      get: function () {\n        return this.get(name);\n      },\n      set: function (value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  } catch (error) {\n    // Object.defineProperty failed. Probably IE8.\n  }\n}\n\n/**\n * Returns a lazy Seq of `value` repeated `times` times. When `times` is\n * undefined, returns an infinite sequence of `value`.\n */\nvar Repeat = /*@__PURE__*/function (IndexedSeq) {\n  function Repeat(value, times) {\n    if (!(this instanceof Repeat)) {\n      return new Repeat(value, times);\n    }\n    this._value = value;\n    this.size = times === undefined ? Infinity : Math.max(0, times);\n    if (this.size === 0) {\n      if (EMPTY_REPEAT) {\n        return EMPTY_REPEAT;\n      }\n      EMPTY_REPEAT = this;\n    }\n  }\n  if (IndexedSeq) Repeat.__proto__ = IndexedSeq;\n  Repeat.prototype = Object.create(IndexedSeq && IndexedSeq.prototype);\n  Repeat.prototype.constructor = Repeat;\n  Repeat.prototype.toString = function toString() {\n    if (this.size === 0) {\n      return 'Repeat []';\n    }\n    return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n  };\n  Repeat.prototype.get = function get(index, notSetValue) {\n    return this.has(index) ? this._value : notSetValue;\n  };\n  Repeat.prototype.includes = function includes(searchValue) {\n    return is(this._value, searchValue);\n  };\n  Repeat.prototype.slice = function slice(begin, end) {\n    var size = this.size;\n    return wholeSlice(begin, end, size) ? this : new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n  };\n  Repeat.prototype.reverse = function reverse() {\n    return this;\n  };\n  Repeat.prototype.indexOf = function indexOf(searchValue) {\n    if (is(this._value, searchValue)) {\n      return 0;\n    }\n    return -1;\n  };\n  Repeat.prototype.lastIndexOf = function lastIndexOf(searchValue) {\n    if (is(this._value, searchValue)) {\n      return this.size;\n    }\n    return -1;\n  };\n  Repeat.prototype.__iterate = function __iterate(fn, reverse) {\n    var size = this.size;\n    var i = 0;\n    while (i !== size) {\n      if (fn(this._value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n  Repeat.prototype.__iterator = function __iterator(type, reverse) {\n    var this$1$1 = this;\n    var size = this.size;\n    var i = 0;\n    return new Iterator(function () {\n      return i === size ? iteratorDone() : iteratorValue(type, reverse ? size - ++i : i++, this$1$1._value);\n    });\n  };\n  Repeat.prototype.equals = function equals(other) {\n    return other instanceof Repeat ? is(this._value, other._value) : deepEqual(other);\n  };\n  return Repeat;\n}(IndexedSeq);\nvar EMPTY_REPEAT;\nfunction fromJS(value, converter) {\n  return fromJSWith([], converter || defaultConverter, value, '', converter && converter.length > 2 ? [] : undefined, {\n    '': value\n  });\n}\nfunction fromJSWith(stack, converter, value, key, keyPath, parentValue) {\n  if (typeof value !== 'string' && !isImmutable(value) && (isArrayLike(value) || hasIterator(value) || isPlainObject(value))) {\n    if (~stack.indexOf(value)) {\n      throw new TypeError('Cannot convert circular structure to Immutable');\n    }\n    stack.push(value);\n    keyPath && key !== '' && keyPath.push(key);\n    var converted = converter.call(parentValue, key, Seq(value).map(function (v, k) {\n      return fromJSWith(stack, converter, v, k, keyPath, value);\n    }), keyPath && keyPath.slice());\n    stack.pop();\n    keyPath && keyPath.pop();\n    return converted;\n  }\n  return value;\n}\nfunction defaultConverter(k, v) {\n  // Effectively the opposite of \"Collection.toSeq()\"\n  return isIndexed(v) ? v.toList() : isKeyed(v) ? v.toMap() : v.toSet();\n}\nvar version = \"4.3.4\";\nvar Immutable = {\n  version: version,\n  Collection: Collection,\n  // Note: Iterable is deprecated\n  Iterable: Collection,\n  Seq: Seq,\n  Map: Map,\n  OrderedMap: OrderedMap,\n  List: List,\n  Stack: Stack,\n  Set: Set,\n  OrderedSet: OrderedSet,\n  PairSorting: PairSorting,\n  Record: Record,\n  Range: Range,\n  Repeat: Repeat,\n  is: is,\n  fromJS: fromJS,\n  hash: hash,\n  isImmutable: isImmutable,\n  isCollection: isCollection,\n  isKeyed: isKeyed,\n  isIndexed: isIndexed,\n  isAssociative: isAssociative,\n  isOrdered: isOrdered,\n  isValueObject: isValueObject,\n  isPlainObject: isPlainObject,\n  isSeq: isSeq,\n  isList: isList,\n  isMap: isMap,\n  isOrderedMap: isOrderedMap,\n  isStack: isStack,\n  isSet: isSet,\n  isOrderedSet: isOrderedSet,\n  isRecord: isRecord,\n  get: get,\n  getIn: getIn$1,\n  has: has,\n  hasIn: hasIn$1,\n  merge: merge,\n  mergeDeep: mergeDeep$1,\n  mergeWith: mergeWith,\n  mergeDeepWith: mergeDeepWith$1,\n  remove: remove,\n  removeIn: removeIn,\n  set: set,\n  setIn: setIn$1,\n  update: update$1,\n  updateIn: updateIn$1\n};\n\n// Note: Iterable is deprecated\nvar Iterable = Collection;\nexport default Immutable;\nexport { Collection, Iterable, List, Map, OrderedMap, OrderedSet, PairSorting, Range, Record, Repeat, Seq, Set, Stack, fromJS, get, getIn$1 as getIn, has, hasIn$1 as hasIn, hash, is, isAssociative, isCollection, isImmutable, isIndexed, isKeyed, isList, isMap, isOrdered, isOrderedMap, isOrderedSet, isPlainObject, isRecord, isSeq, isSet, isStack, isValueObject, merge, mergeDeep$1 as mergeDeep, mergeDeepWith$1 as mergeDeepWith, mergeWith, remove, removeIn, set, setIn$1 as setIn, update$1 as update, updateIn$1 as updateIn, version };","import { PureComponent } from 'react';\n\nimport classNames from 'classnames';\n\nimport { AnimatedNumber } from './animated_number';\nimport { Icon } from './icon';\n\ninterface Props {\n  className?: string;\n  title: string;\n  icon: string;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onMouseDown?: React.MouseEventHandler<HTMLButtonElement>;\n  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement>;\n  onKeyPress?: React.KeyboardEventHandler<HTMLButtonElement>;\n  size: number;\n  active: boolean;\n  expanded?: boolean;\n  style?: React.CSSProperties;\n  activeStyle?: React.CSSProperties;\n  disabled: boolean;\n  inverted?: boolean;\n  animate: boolean;\n  overlay: boolean;\n  tabIndex: number;\n  counter?: number;\n  href?: string;\n  ariaHidden: boolean;\n}\ninterface States {\n  activate: boolean;\n  deactivate: boolean;\n}\nexport class IconButton extends PureComponent<Props, States> {\n  static defaultProps = {\n    size: 18,\n    active: false,\n    disabled: false,\n    animate: false,\n    overlay: false,\n    tabIndex: 0,\n    ariaHidden: false,\n  };\n\n  state = {\n    activate: false,\n    deactivate: false,\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (!nextProps.animate) return;\n\n    if (this.props.active && !nextProps.active) {\n      this.setState({ activate: false, deactivate: true });\n    } else if (!this.props.active && nextProps.active) {\n      this.setState({ activate: true, deactivate: false });\n    }\n  }\n\n  handleClick: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    e.preventDefault();\n\n    if (!this.props.disabled && this.props.onClick != null) {\n      this.props.onClick(e);\n    }\n  };\n\n  handleKeyPress: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (this.props.onKeyPress && !this.props.disabled) {\n      this.props.onKeyPress(e);\n    }\n  };\n\n  handleMouseDown: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onMouseDown) {\n      this.props.onMouseDown(e);\n    }\n  };\n\n  handleKeyDown: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  };\n\n  render() {\n    const style = {\n      fontSize: `${this.props.size}px`,\n      width: `${this.props.size * 1.28571429}px`,\n      height: `${this.props.size * 1.28571429}px`,\n      lineHeight: `${this.props.size}px`,\n      ...this.props.style,\n      ...(this.props.active ? this.props.activeStyle : {}),\n    };\n\n    const {\n      active,\n      className,\n      disabled,\n      expanded,\n      icon,\n      inverted,\n      overlay,\n      tabIndex,\n      title,\n      counter,\n      href,\n      ariaHidden,\n    } = this.props;\n\n    const { activate, deactivate } = this.state;\n\n    const classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined',\n    });\n\n    if (typeof counter !== 'undefined') {\n      style.width = 'auto';\n    }\n\n    let contents = (\n      <>\n        <Icon id={icon} fixedWidth aria-hidden='true' />{' '}\n        {typeof counter !== 'undefined' && (\n          <span className='icon-button__counter'>\n            <AnimatedNumber value={counter} />\n          </span>\n        )}\n      </>\n    );\n\n    if (href != null) {\n      contents = (\n        <a href={href} target='_blank' rel='noopener noreferrer'>\n          {contents}\n        </a>\n      );\n    }\n\n    return (\n      <button\n        type='button'\n        aria-label={title}\n        aria-expanded={expanded}\n        aria-hidden={ariaHidden}\n        title={title}\n        className={classes}\n        onClick={this.handleClick}\n        onMouseDown={this.handleMouseDown}\n        onKeyDown={this.handleKeyDown}\n        onKeyPress={this.handleKeyPress}\n        style={style}\n        tabIndex={tabIndex}\n        disabled={disabled}\n      >\n        {contents}\n      </button>\n    );\n  }\n}\n","export interface LocaleData {\n  locale: string;\n  messages: Record<string, string>;\n}\n\nlet loadedLocale: LocaleData | undefined;\n\nexport function setLocale(locale: LocaleData) {\n  loadedLocale = locale;\n}\n\nexport function getLocale(): LocaleData {\n  if (!loadedLocale) {\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error('getLocale() called before any locale has been set');\n    } else {\n      return { locale: 'unknown', messages: {} };\n    }\n  }\n\n  return loadedLocale;\n}\n\nexport function isLocaleLoaded() {\n  return !!loadedLocale;\n}\n","import { Semaphore } from 'async-mutex';\n\nimport type { LocaleData } from './global_locale';\nimport { isLocaleLoaded, setLocale } from './global_locale';\n\nconst localeLoadingSemaphore = new Semaphore(1);\n\nexport async function loadLocale() {\n  // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing -- we want to match empty strings\n  const locale = document.querySelector<HTMLElement>('html')?.lang || 'en';\n\n  // We use a Semaphore here so only one thing can try to load the locales at\n  // the same time. If one tries to do it while its in progress, it will wait\n  // for the initial load to finish before it is resumed (and will see that locale\n  // data is already loaded)\n  await localeLoadingSemaphore.runExclusive(async () => {\n    // if the locale is already set, then do nothing\n    if (isLocaleLoaded()) return;\n\n    const upstreamLocaleData = await import(\n      /* webpackMode: \"lazy\" */\n      /* webpackChunkName: \"locales/vanilla/[request]\" */\n      /* webpackInclude: /\\.json$/ */\n      /* webpackPreload: true */\n      `mastodon/locales/${locale}.json`\n    ) as LocaleData['messages'];\n\n    const localeData = await import(\n      /* webpackMode: \"lazy\" */\n      /* webpackChunkName: \"locales/glitch/[request]\" */\n      /* webpackInclude: /\\.json$/ */\n      /* webpackPreload: true */\n      `flavours/glitch/locales/${locale}.json`\n    ) as LocaleData['messages'];\n\n    setLocale({ messages: { ...upstreamLocaleData, ...localeData }, locale });\n  });\n}\n","import { useEffect, useState } from 'react';\n\nimport { IntlProvider as BaseIntlProvider } from 'react-intl';\n\nimport { getLocale, isLocaleLoaded } from './global_locale';\nimport { loadLocale } from './load_locale';\n\nfunction onProviderError(error: unknown) {\n  // Silent the error, like upstream does\n  if (process.env.NODE_ENV === 'production') return;\n\n  // This browser does not advertise Intl support for this locale, we only print a warning\n  // As-per the spec, the browser should select the best matching locale\n  if (\n    error &&\n    typeof error === 'object' &&\n    error instanceof Error &&\n    error.message.match('MISSING_DATA')\n  ) {\n    console.warn(error.message);\n  }\n\n  console.error(error);\n}\n\nexport const IntlProvider: React.FC<\n  Omit<React.ComponentProps<typeof BaseIntlProvider>, 'locale' | 'messages'>\n> = ({ children, ...props }) => {\n  const [localeLoaded, setLocaleLoaded] = useState(false);\n\n  useEffect(() => {\n    async function loadLocaleData() {\n      if (!isLocaleLoaded()) {\n        await loadLocale();\n      }\n\n      setLocaleLoaded(true);\n    }\n    void loadLocaleData();\n  }, []);\n\n  if (!localeLoaded) return null;\n\n  const { locale, messages } = getLocale();\n\n  return (\n    <BaseIntlProvider\n      locale={locale}\n      messages={messages}\n      onError={onProviderError}\n      textComponent='span'\n      {...props}\n    >\n      {children}\n    </BaseIntlProvider>\n  );\n};\n","import { supportsPassiveEvents } from 'detect-passive-events';\n\nimport { forceSingleColumn, hasMultiColumnPath } from './initial_state';\n\nconst LAYOUT_BREAKPOINT = 630;\n\nexport const isMobile = (width: number) => width <= LAYOUT_BREAKPOINT;\n\nexport const transientSingleColumn = !forceSingleColumn && !hasMultiColumnPath;\n\nexport type LayoutType = 'mobile' | 'single-column' | 'multi-column';\nexport const layoutFromWindow = (): LayoutType => {\n  if (isMobile(window.innerWidth)) {\n    return 'mobile';\n  } else if (!forceSingleColumn && !transientSingleColumn) {\n    return 'multi-column';\n  } else {\n    return 'single-column';\n  }\n};\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nlet userTouching = false;\n\nconst touchListener = () => {\n  userTouching = true;\n\n  window.removeEventListener('touchstart', touchListener);\n};\n\nwindow.addEventListener('touchstart', touchListener, listenerOptions);\n\nexport const isUserTouching = () => userTouching;\n","import { List as ImmutableList } from 'immutable';\n\nimport { debounce } from 'lodash';\n\nimport api from '../api';\nimport { compareId } from '../compare_id';\n\nexport const MARKERS_FETCH_REQUEST = 'MARKERS_FETCH_REQUEST';\nexport const MARKERS_FETCH_SUCCESS = 'MARKERS_FETCH_SUCCESS';\nexport const MARKERS_FETCH_FAIL    = 'MARKERS_FETCH_FAIL';\nexport const MARKERS_SUBMIT_SUCCESS = 'MARKERS_SUBMIT_SUCCESS';\n\nexport const synchronouslySubmitMarkers = () => (dispatch, getState) => {\n  const accessToken = getState().getIn(['meta', 'access_token'], '');\n  const params      = _buildParams(getState());\n\n  if (Object.keys(params).length === 0 || accessToken === '') {\n    return;\n  }\n\n  // The Fetch API allows us to perform requests that will be carried out\n  // after the page closes. But that only works if the `keepalive` attribute\n  // is supported.\n  if (window.fetch && 'keepalive' in new Request('')) {\n    fetch('/api/v1/markers', {\n      keepalive: true,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${accessToken}`,\n      },\n      body: JSON.stringify(params),\n    });\n\n    return;\n  } else if (navigator && navigator.sendBeacon) {\n    // Failing that, we can use sendBeacon, but we have to encode the data as\n    // FormData for DoorKeeper to recognize the token.\n    const formData = new FormData();\n\n    formData.append('bearer_token', accessToken);\n\n    for (const [id, value] of Object.entries(params)) {\n      formData.append(`${id}[last_read_id]`, value.last_read_id);\n    }\n\n    if (navigator.sendBeacon('/api/v1/markers', formData)) {\n      return;\n    }\n  }\n\n  // If neither Fetch nor sendBeacon worked, try to perform a synchronous\n  // request.\n  try {\n    const client = new XMLHttpRequest();\n\n    client.open('POST', '/api/v1/markers', false);\n    client.setRequestHeader('Content-Type', 'application/json');\n    client.setRequestHeader('Authorization', `Bearer ${accessToken}`);\n    client.send(JSON.stringify(params));\n  } catch (e) {\n    // Do not make the BeforeUnload handler error out\n  }\n};\n\nconst _buildParams = (state) => {\n  const params = {};\n\n  const lastHomeId         = state.getIn(['timelines', 'home', 'items'], ImmutableList()).find(item => item !== null);\n  const lastNotificationId = state.getIn(['notifications', 'lastReadId']);\n\n  if (lastHomeId && compareId(lastHomeId, state.getIn(['markers', 'home'])) > 0) {\n    params.home = {\n      last_read_id: lastHomeId,\n    };\n  }\n\n  if (lastNotificationId && compareId(lastNotificationId, state.getIn(['markers', 'notifications'])) > 0) {\n    params.notifications = {\n      last_read_id: lastNotificationId,\n    };\n  }\n\n  return params;\n};\n\nconst debouncedSubmitMarkers = debounce((dispatch, getState) => {\n  const accessToken = getState().getIn(['meta', 'access_token'], '');\n  const params      = _buildParams(getState());\n\n  if (Object.keys(params).length === 0 || accessToken === '') {\n    return;\n  }\n\n  api(getState).post('/api/v1/markers', params).then(() => {\n    dispatch(submitMarkersSuccess(params));\n  }).catch(() => {});\n}, 300000, { leading: true, trailing: true });\n\nexport function submitMarkersSuccess({ home, notifications }) {\n  return {\n    type: MARKERS_SUBMIT_SUCCESS,\n    home: (home || {}).last_read_id,\n    notifications: (notifications || {}).last_read_id,\n  };\n}\n\nexport function submitMarkers(params = {}) {\n  const result = (dispatch, getState) => debouncedSubmitMarkers(dispatch, getState);\n\n  if (params.immediate === true) {\n    debouncedSubmitMarkers.flush();\n  }\n\n  return result;\n}\n\nexport const fetchMarkers = () => (dispatch, getState) => {\n  const params = { timeline: ['notifications'] };\n\n  dispatch(fetchMarkersRequest());\n\n  api(getState).get('/api/v1/markers', { params }).then(response => {\n    dispatch(fetchMarkersSuccess(response.data));\n  }).catch(error => {\n    dispatch(fetchMarkersFail(error));\n  });\n};\n\nexport function fetchMarkersRequest() {\n  return {\n    type: MARKERS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchMarkersSuccess(markers) {\n  return {\n    type: MARKERS_FETCH_SUCCESS,\n    markers,\n    skipLoading: true,\n  };\n}\n\nexport function fetchMarkersFail(error) {\n  return {\n    type: MARKERS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipAlert: true,\n  };\n}\n","import { List as ImmutableList } from 'immutable';\n\nimport { debounce } from 'lodash';\n\nimport api from '../api';\nimport { compareId } from '../compare_id';\n\nexport const MARKERS_FETCH_REQUEST = 'MARKERS_FETCH_REQUEST';\nexport const MARKERS_FETCH_SUCCESS = 'MARKERS_FETCH_SUCCESS';\nexport const MARKERS_FETCH_FAIL    = 'MARKERS_FETCH_FAIL';\nexport const MARKERS_SUBMIT_SUCCESS = 'MARKERS_SUBMIT_SUCCESS';\n\nexport const synchronouslySubmitMarkers = () => (dispatch, getState) => {\n  const accessToken = getState().getIn(['meta', 'access_token'], '');\n  const params      = _buildParams(getState());\n\n  if (Object.keys(params).length === 0 || accessToken === '') {\n    return;\n  }\n\n  // The Fetch API allows us to perform requests that will be carried out\n  // after the page closes. But that only works if the `keepalive` attribute\n  // is supported.\n  if (window.fetch && 'keepalive' in new Request('')) {\n    fetch('/api/v1/markers', {\n      keepalive: true,\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${accessToken}`,\n      },\n      body: JSON.stringify(params),\n    });\n\n    return;\n  } else if (navigator && navigator.sendBeacon) {\n    // Failing that, we can use sendBeacon, but we have to encode the data as\n    // FormData for DoorKeeper to recognize the token.\n    const formData = new FormData();\n\n    formData.append('bearer_token', accessToken);\n\n    for (const [id, value] of Object.entries(params)) {\n      formData.append(`${id}[last_read_id]`, value.last_read_id);\n    }\n\n    if (navigator.sendBeacon('/api/v1/markers', formData)) {\n      return;\n    }\n  }\n\n  // If neither Fetch nor sendBeacon worked, try to perform a synchronous\n  // request.\n  try {\n    const client = new XMLHttpRequest();\n\n    client.open('POST', '/api/v1/markers', false);\n    client.setRequestHeader('Content-Type', 'application/json');\n    client.setRequestHeader('Authorization', `Bearer ${accessToken}`);\n    client.send(JSON.stringify(params));\n  } catch (e) {\n    // Do not make the BeforeUnload handler error out\n  }\n};\n\nconst _buildParams = (state) => {\n  const params = {};\n\n  const lastHomeId         = state.getIn(['timelines', 'home', 'items'], ImmutableList()).find(item => item !== null);\n  const lastNotificationId = state.getIn(['notifications', 'lastReadId']);\n\n  if (lastHomeId && compareId(lastHomeId, state.getIn(['markers', 'home'])) > 0) {\n    params.home = {\n      last_read_id: lastHomeId,\n    };\n  }\n\n  if (lastNotificationId && lastNotificationId !== '0' && compareId(lastNotificationId, state.getIn(['markers', 'notifications'])) > 0) {\n    params.notifications = {\n      last_read_id: lastNotificationId,\n    };\n  }\n\n  return params;\n};\n\nconst debouncedSubmitMarkers = debounce((dispatch, getState) => {\n  const accessToken = getState().getIn(['meta', 'access_token'], '');\n  const params      = _buildParams(getState());\n\n  if (Object.keys(params).length === 0 || accessToken === '') {\n    return;\n  }\n\n  api(getState).post('/api/v1/markers', params).then(() => {\n    dispatch(submitMarkersSuccess(params));\n  }).catch(() => {});\n}, 300000, { leading: true, trailing: true });\n\nexport function submitMarkersSuccess({ home, notifications }) {\n  return {\n    type: MARKERS_SUBMIT_SUCCESS,\n    home: (home || {}).last_read_id,\n    notifications: (notifications || {}).last_read_id,\n  };\n}\n\nexport function submitMarkers(params = {}) {\n  const result = (dispatch, getState) => debouncedSubmitMarkers(dispatch, getState);\n\n  if (params.immediate === true) {\n    debouncedSubmitMarkers.flush();\n  }\n\n  return result;\n}\n\nexport const fetchMarkers = () => (dispatch, getState) => {\n  const params = { timeline: ['notifications'] };\n\n  dispatch(fetchMarkersRequest());\n\n  api(getState).get('/api/v1/markers', { params }).then(response => {\n    dispatch(fetchMarkersSuccess(response.data));\n  }).catch(error => {\n    dispatch(fetchMarkersFail(error));\n  });\n};\n\nexport function fetchMarkersRequest() {\n  return {\n    type: MARKERS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchMarkersSuccess(markers) {\n  return {\n    type: MARKERS_FETCH_SUCCESS,\n    markers,\n    skipLoading: true,\n  };\n}\n\nexport function fetchMarkersFail(error) {\n  return {\n    type: MARKERS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipAlert: true,\n  };\n}\n","import escapeTextContentForBrowser from 'escape-html';\n\nimport emojify from '../../features/emoji/emoji';\nimport { expandSpoilers } from '../../initial_state';\nimport { unescapeHTML } from '../../utils/html';\n\nconst domParser = new DOMParser();\n\nconst makeEmojiMap = emojis => emojis.reduce((obj, emoji) => {\n  obj[`:${emoji.shortcode}:`] = emoji;\n  return obj;\n}, {});\n\nexport function searchTextFromRawStatus (status) {\n  const spoilerText   = status.spoiler_text || '';\n  const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n  return domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n}\n\nexport function normalizeAccount(account) {\n  account = { ...account };\n\n  const emojiMap = makeEmojiMap(account.emojis);\n  const displayName = account.display_name.trim().length === 0 ? account.username : account.display_name;\n\n  account.display_name_html = emojify(escapeTextContentForBrowser(displayName), emojiMap);\n  account.note_emojified = emojify(account.note, emojiMap);\n  account.note_plain = unescapeHTML(account.note);\n\n  if (account.fields) {\n    account.fields = account.fields.map(pair => ({\n      ...pair,\n      name_emojified: emojify(escapeTextContentForBrowser(pair.name), emojiMap),\n      value_emojified: emojify(pair.value, emojiMap),\n      value_plain: unescapeHTML(pair.value),\n    }));\n  }\n\n  if (account.moved) {\n    account.moved = account.moved.id;\n  }\n\n  return account;\n}\n\nexport function normalizeFilterResult(result) {\n  const normalResult = { ...result };\n\n  normalResult.filter = normalResult.filter.id;\n\n  return normalResult;\n}\n\nexport function normalizeStatus(status, normalOldStatus) {\n  const normalStatus   = { ...status };\n  normalStatus.account = status.account.id;\n\n  if (status.reblog && status.reblog.id) {\n    normalStatus.reblog = status.reblog.id;\n  }\n\n  if (status.poll && status.poll.id) {\n    normalStatus.poll = status.poll.id;\n  }\n\n  if (status.filtered) {\n    normalStatus.filtered = status.filtered.map(normalizeFilterResult);\n  }\n\n  // Only calculate these values when status first encountered and\n  // when the underlying values change. Otherwise keep the ones\n  // already in the reducer\n  if (normalOldStatus && normalOldStatus.get('content') === normalStatus.content && normalOldStatus.get('spoiler_text') === normalStatus.spoiler_text) {\n    normalStatus.search_index = normalOldStatus.get('search_index');\n    normalStatus.contentHtml = normalOldStatus.get('contentHtml');\n    normalStatus.spoilerHtml = normalOldStatus.get('spoilerHtml');\n    normalStatus.spoiler_text = normalOldStatus.get('spoiler_text');\n    normalStatus.hidden = normalOldStatus.get('hidden');\n\n    if (normalOldStatus.get('translation')) {\n      normalStatus.translation = normalOldStatus.get('translation');\n    }\n  } else {\n    // If the status has a CW but no contents, treat the CW as if it were the\n    // status' contents, to avoid having a CW toggle with seemingly no effect.\n    if (normalStatus.spoiler_text && !normalStatus.content) {\n      normalStatus.content = normalStatus.spoiler_text;\n      normalStatus.spoiler_text = '';\n    }\n\n    const spoilerText   = normalStatus.spoiler_text || '';\n    const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n    const emojiMap      = makeEmojiMap(normalStatus.emojis);\n\n    normalStatus.search_index = domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n    normalStatus.contentHtml  = emojify(normalStatus.content, emojiMap);\n    normalStatus.spoilerHtml  = emojify(escapeTextContentForBrowser(spoilerText), emojiMap);\n    normalStatus.hidden       = expandSpoilers ? false : spoilerText.length > 0 || normalStatus.sensitive;\n  }\n\n  if (normalOldStatus) {\n    const list = normalOldStatus.get('media_attachments');\n    if (normalStatus.media_attachments && list) {\n      normalStatus.media_attachments.forEach(item => {\n        const oldItem = list.find(i => i.get('id') === item.id);\n        if (oldItem && oldItem.get('description') === item.description) {\n          item.translation = oldItem.get('translation');\n        }\n      });\n    }\n  }\n\n  return normalStatus;\n}\n\nexport function normalizeStatusTranslation(translation, status) {\n  const emojiMap = makeEmojiMap(status.get('emojis').toJS());\n\n  const normalTranslation = {\n    detected_source_language: translation.detected_source_language,\n    language: translation.language,\n    provider: translation.provider,\n    contentHtml: emojify(translation.content, emojiMap),\n    spoilerHtml: emojify(escapeTextContentForBrowser(translation.spoiler_text), emojiMap),\n    spoiler_text: translation.spoiler_text,\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizePoll(poll, normalOldPoll) {\n  const normalPoll = { ...poll };\n  const emojiMap = makeEmojiMap(poll.emojis);\n\n  normalPoll.options = poll.options.map((option, index) => {\n    const normalOption = {\n      ...option,\n      voted: poll.own_votes && poll.own_votes.includes(index),\n      titleHtml: emojify(escapeTextContentForBrowser(option.title), emojiMap),\n    };\n\n    if (normalOldPoll && normalOldPoll.getIn(['options', index, 'title']) === option.title) {\n      normalOption.translation = normalOldPoll.getIn(['options', index, 'translation']);\n    }\n\n    return normalOption;\n  });\n\n  return normalPoll;\n}\n\nexport function normalizePollOptionTranslation(translation, poll) {\n  const emojiMap = makeEmojiMap(poll.get('emojis').toJS());\n\n  const normalTranslation = {\n    ...translation,\n    titleHtml: emojify(escapeTextContentForBrowser(translation.title), emojiMap),\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizeAnnouncement(announcement) {\n  const normalAnnouncement = { ...announcement };\n  const emojiMap = makeEmojiMap(normalAnnouncement.emojis);\n\n  normalAnnouncement.contentHtml = emojify(normalAnnouncement.content, emojiMap);\n\n  return normalAnnouncement;\n}\n","import escapeTextContentForBrowser from 'escape-html';\n\nimport emojify from 'flavours/glitch/features/emoji/emoji';\nimport { autoHideCW } from 'flavours/glitch/utils/content_warning';\nimport { unescapeHTML } from 'flavours/glitch/utils/html';\n\nconst domParser = new DOMParser();\n\nconst makeEmojiMap = emojis => emojis.reduce((obj, emoji) => {\n  obj[`:${emoji.shortcode}:`] = emoji;\n  return obj;\n}, {});\n\nexport function searchTextFromRawStatus (status) {\n  const spoilerText   = status.spoiler_text || '';\n  const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n  return domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n}\n\nexport function normalizeAccount(account) {\n  account = { ...account };\n\n  const emojiMap = makeEmojiMap(account.emojis);\n  const displayName = account.display_name.trim().length === 0 ? account.username : account.display_name;\n\n  account.display_name_html = emojify(escapeTextContentForBrowser(displayName), emojiMap);\n  account.note_emojified = emojify(account.note, emojiMap);\n  account.note_plain = unescapeHTML(account.note);\n\n  if (account.fields) {\n    account.fields = account.fields.map(pair => ({\n      ...pair,\n      name_emojified: emojify(escapeTextContentForBrowser(pair.name), emojiMap),\n      value_emojified: emojify(pair.value, emojiMap),\n      value_plain: unescapeHTML(pair.value),\n    }));\n  }\n\n  if (account.moved) {\n    account.moved = account.moved.id;\n  }\n\n  return account;\n}\n\nexport function normalizeFilterResult(result) {\n  const normalResult = { ...result };\n\n  normalResult.filter = normalResult.filter.id;\n\n  return normalResult;\n}\n\nexport function normalizeStatus(status, normalOldStatus, settings) {\n  const normalStatus   = { ...status };\n  normalStatus.account = status.account.id;\n\n  if (status.reblog && status.reblog.id) {\n    normalStatus.reblog = status.reblog.id;\n  }\n\n  if (status.poll && status.poll.id) {\n    normalStatus.poll = status.poll.id;\n  }\n\n  if (status.filtered) {\n    normalStatus.filtered = status.filtered.map(normalizeFilterResult);\n  }\n\n  // Only calculate these values when status first encountered and\n  // when the underlying values change. Otherwise keep the ones\n  // already in the reducer\n  if (normalOldStatus && normalOldStatus.get('content') === normalStatus.content && normalOldStatus.get('spoiler_text') === normalStatus.spoiler_text) {\n    normalStatus.search_index = normalOldStatus.get('search_index');\n    normalStatus.contentHtml = normalOldStatus.get('contentHtml');\n    normalStatus.spoilerHtml = normalOldStatus.get('spoilerHtml');\n    normalStatus.hidden = normalOldStatus.get('hidden');\n\n    if (normalOldStatus.get('translation')) {\n      normalStatus.translation = normalOldStatus.get('translation');\n    }\n  } else {\n    const spoilerText   = normalStatus.spoiler_text || '';\n    const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n    const emojiMap      = makeEmojiMap(normalStatus.emojis);\n\n    normalStatus.search_index = domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n    normalStatus.contentHtml  = emojify(normalStatus.content, emojiMap);\n    normalStatus.spoilerHtml  = emojify(escapeTextContentForBrowser(spoilerText), emojiMap);\n    normalStatus.hidden       = (spoilerText.length > 0 || normalStatus.sensitive) && autoHideCW(settings, spoilerText);\n  }\n\n  if (normalOldStatus) {\n    const list = normalOldStatus.get('media_attachments');\n    if (normalStatus.media_attachments && list) {\n      normalStatus.media_attachments.forEach(item => {\n        const oldItem = list.find(i => i.get('id') === item.id);\n        if (oldItem && oldItem.get('description') === item.description) {\n          item.translation = oldItem.get('translation');\n        }\n      });\n    }\n  }\n\n  return normalStatus;\n}\n\nexport function normalizeStatusTranslation(translation, status) {\n  const emojiMap = makeEmojiMap(status.get('emojis').toJS());\n\n  const normalTranslation = {\n    detected_source_language: translation.detected_source_language,\n    language: translation.language,\n    provider: translation.provider,\n    contentHtml: emojify(translation.content, emojiMap),\n    spoilerHtml: emojify(escapeTextContentForBrowser(translation.spoiler_text), emojiMap),\n    spoiler_text: translation.spoiler_text,\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizePoll(poll, normalOldPoll) {\n  const normalPoll = { ...poll };\n  const emojiMap = makeEmojiMap(poll.emojis);\n\n  normalPoll.options = poll.options.map((option, index) => {\n    const normalOption = {\n      ...option,\n      voted: poll.own_votes && poll.own_votes.includes(index),\n      titleHtml: emojify(escapeTextContentForBrowser(option.title), emojiMap),\n    };\n\n    if (normalOldPoll && normalOldPoll.getIn(['options', index, 'title']) === option.title) {\n      normalOption.translation = normalOldPoll.getIn(['options', index, 'translation']);\n    }\n\n    return normalOption;\n  });\n\n  return normalPoll;\n}\n\nexport function normalizePollOptionTranslation(translation, poll) {\n  const emojiMap = makeEmojiMap(poll.get('emojis').toJS());\n\n  const normalTranslation = {\n    ...translation,\n    titleHtml: emojify(escapeTextContentForBrowser(translation.title), emojiMap),\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizeAnnouncement(announcement) {\n  const normalAnnouncement = { ...announcement };\n  const emojiMap = makeEmojiMap(normalAnnouncement.emojis);\n\n  normalAnnouncement.contentHtml = emojify(normalAnnouncement.content, emojiMap);\n\n  return normalAnnouncement;\n}\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here due to preval */\n// @preval\n// http://www.unicode.org/Public/emoji/5.0/emoji-test.txt\n// This file contains the compressed version of the emoji data from\n// both emoji_map.json and from emoji-mart's emojiIndex and data objects.\n// It's designed to be emitted in an array format to take up less space\n// over the wire.\n\nconst { emojiIndex } = require('emoji-mart');\nlet data = require('emoji-mart/data/all.json');\nconst { uncompress: emojiMartUncompress } = require('emoji-mart/dist/utils/data');\n\nconst emojiMap = require('./emoji_map.json');\nconst { unicodeToFilename } = require('./unicode_to_filename');\nconst { unicodeToUnifiedName } = require('./unicode_to_unified_name');\n\n\nif(data.compressed) {\n  data = emojiMartUncompress(data);\n}\n\nconst emojiMartData = data;\n\nconst excluded       = ['', '', ''];\nconst skinTones      = ['', '', '', '', ''];\nconst shortcodeMap   = {};\n\nconst shortCodesToEmojiData = {};\nconst emojisWithoutShortCodes = [];\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.prototype.hasOwnProperty.call(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  shortcodeMap[emoji.native] = emoji.id;\n});\n\nconst stripModifiers = unicode => {\n  skinTones.forEach(tone => {\n    unicode = unicode.replace(tone, '');\n  });\n\n  return unicode;\n};\n\nObject.keys(emojiMap).forEach(key => {\n  if (excluded.includes(key)) {\n    delete emojiMap[key];\n    return;\n  }\n\n  const normalizedKey = stripModifiers(key);\n  let shortcode       = shortcodeMap[normalizedKey];\n\n  if (!shortcode) {\n    shortcode = shortcodeMap[normalizedKey + '\\uFE0F'];\n  }\n\n  const filename = emojiMap[key];\n\n  const filenameData = [key];\n\n  if (unicodeToFilename(key) !== filename) {\n    // filename can't be derived using unicodeToFilename\n    filenameData.push(filename);\n  }\n\n  if (typeof shortcode === 'undefined') {\n    emojisWithoutShortCodes.push(filenameData);\n  } else {\n    if (!Array.isArray(shortCodesToEmojiData[shortcode])) {\n      shortCodesToEmojiData[shortcode] = [[]];\n    }\n\n    shortCodesToEmojiData[shortcode][0].push(filenameData);\n  }\n});\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.prototype.hasOwnProperty.call(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  const { native } = emoji;\n  let { short_names, search, unified } = emojiMartData.emojis[key];\n\n  if (short_names[0] !== key) {\n    throw new Error('The compressor expects the first short_code to be the ' +\n      'key. It may need to be rewritten if the emoji change such that this ' +\n      'is no longer the case.');\n  }\n\n  short_names = short_names.slice(1); // first short name can be inferred from the key\n\n  const searchData = [native, short_names, search];\n\n  if (unicodeToUnifiedName(native) !== unified) {\n    // unified name can't be derived from unicodeToUnifiedName\n    searchData.push(unified);\n  }\n\n  if (!Array.isArray(shortCodesToEmojiData[key])) {\n    shortCodesToEmojiData[key] = [[]];\n  }\n\n  shortCodesToEmojiData[key].push(searchData);\n});\n\n// JSON.parse/stringify is to emulate what @preval is doing and avoid any\n// inconsistent behavior in dev mode\nmodule.exports = JSON.parse(JSON.stringify([\n  shortCodesToEmojiData,\n  /*\n   * The property `skins` is not found in the current context.\n   * This could potentially lead to issues when interacting with modules or data structures\n   * that expect the presence of `skins` property.\n   * Currently, no definitions or references to `skins` property can be found in:\n   * - {@link node_modules/emoji-mart/dist/utils/data.js}\n   * - {@link node_modules/emoji-mart/data/all.json}\n   * - {@link app/javascript/mastodon/features/emoji/emoji_compressed.d.ts#Skins}\n   * Future refactorings or updates should consider adding definitions or handling for `skins` property.\n   */\n  emojiMartData.skins,\n  emojiMartData.categories,\n  emojiMartData.aliases,\n  emojisWithoutShortCodes,\n]));\n","var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n  return to;\n};\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = function (obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __spreadValues = function (a, b) {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var _i = 0, _c = __getOwnPropSymbols(b); _i < _c.length; _i++) {\n    var prop = _c[_i];\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = function (a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\nvar __async = function (__this, __arguments, generator) {\n  return new Promise(function (resolve, reject) {\n    var fulfilled = function (value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = function (value) {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = function (x) {\n      return x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    };\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n// src/index.ts\nimport { enableES5 } from \"immer\";\nexport * from \"redux\";\nimport { default as default2, current as current2, freeze, original, isDraft as isDraft4 } from \"immer\";\nimport { createSelector as createSelector2 } from \"reselect\";\n// src/createDraftSafeSelector.ts\nimport { current, isDraft } from \"immer\";\nimport { createSelector } from \"reselect\";\nvar createDraftSafeSelector = function () {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var selector = createSelector.apply(void 0, args);\n  var wrappedSelector = function (value) {\n    var rest = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      rest[_i - 1] = arguments[_i];\n    }\n    return selector.apply(void 0, __spreadArray([isDraft(value) ? current(value) : value], rest));\n  };\n  return wrappedSelector;\n};\n// src/configureStore.ts\nimport { createStore, compose as compose2, applyMiddleware, combineReducers } from \"redux\";\n// src/devtoolsExtension.ts\nimport { compose } from \"redux\";\nvar composeWithDevTools = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () {\n  if (arguments.length === 0) return void 0;\n  if (typeof arguments[0] === \"object\") return compose;\n  return compose.apply(null, arguments);\n};\nvar devToolsEnhancer = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__ : function () {\n  return function (noop2) {\n    return noop2;\n  };\n};\n// src/isPlainObject.ts\nfunction isPlainObject(value) {\n  if (typeof value !== \"object\" || value === null) return false;\n  var proto = Object.getPrototypeOf(value);\n  if (proto === null) return true;\n  var baseProto = proto;\n  while (Object.getPrototypeOf(baseProto) !== null) {\n    baseProto = Object.getPrototypeOf(baseProto);\n  }\n  return proto === baseProto;\n}\n// src/getDefaultMiddleware.ts\nimport thunkMiddleware from \"redux-thunk\";\n// src/tsHelpers.ts\nvar hasMatchFunction = function (v) {\n  return v && typeof v.match === \"function\";\n};\n// src/createAction.ts\nfunction createAction(type, prepareAction) {\n  function actionCreator() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (prepareAction) {\n      var prepared = prepareAction.apply(void 0, args);\n      if (!prepared) {\n        throw new Error(\"prepareAction did not return an object\");\n      }\n      return __spreadValues(__spreadValues({\n        type: type,\n        payload: prepared.payload\n      }, \"meta\" in prepared && {\n        meta: prepared.meta\n      }), \"error\" in prepared && {\n        error: prepared.error\n      });\n    }\n    return {\n      type: type,\n      payload: args[0]\n    };\n  }\n  actionCreator.toString = function () {\n    return \"\" + type;\n  };\n  actionCreator.type = type;\n  actionCreator.match = function (action) {\n    return action.type === type;\n  };\n  return actionCreator;\n}\nfunction isAction(action) {\n  return isPlainObject(action) && \"type\" in action;\n}\nfunction isActionCreator(action) {\n  return typeof action === \"function\" && \"type\" in action && hasMatchFunction(action);\n}\nfunction isFSA(action) {\n  return isAction(action) && typeof action.type === \"string\" && Object.keys(action).every(isValidKey);\n}\nfunction isValidKey(key) {\n  return [\"type\", \"payload\", \"error\", \"meta\"].indexOf(key) > -1;\n}\nfunction getType(actionCreator) {\n  return \"\" + actionCreator;\n}\n// src/actionCreatorInvariantMiddleware.ts\nfunction getMessage(type) {\n  var splitType = type ? (\"\" + type).split(\"/\") : [];\n  var actionName = splitType[splitType.length - 1] || \"actionCreator\";\n  return \"Detected an action creator with type \\\"\" + (type || \"unknown\") + \"\\\" being dispatched. \\nMake sure you're calling the action creator before dispatching, i.e. `dispatch(\" + actionName + \"())` instead of `dispatch(\" + actionName + \")`. This is necessary even if the action has no payload.\";\n}\nfunction createActionCreatorInvariantMiddleware(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (process.env.NODE_ENV === \"production\") {\n    return function () {\n      return function (next) {\n        return function (action) {\n          return next(action);\n        };\n      };\n    };\n  }\n  var _c = options.isActionCreator,\n    isActionCreator2 = _c === void 0 ? isActionCreator : _c;\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (isActionCreator2(action)) {\n          console.warn(getMessage(action.type));\n        }\n        return next(action);\n      };\n    };\n  };\n}\n// src/utils.ts\nimport createNextState, { isDraftable } from \"immer\";\nfunction getTimeMeasureUtils(maxDelay, fnName) {\n  var elapsed = 0;\n  return {\n    measureTime: function (fn) {\n      var started = Date.now();\n      try {\n        return fn();\n      } finally {\n        var finished = Date.now();\n        elapsed += finished - started;\n      }\n    },\n    warnIfExceeded: function () {\n      if (elapsed > maxDelay) {\n        console.warn(fnName + \" took \" + elapsed + \"ms, which is more than the warning threshold of \" + maxDelay + \"ms. \\nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\\nIt is disabled in production builds, so you don't need to worry about that.\");\n      }\n    }\n  };\n}\nvar MiddlewareArray = /** @class */function (_super) {\n  __extends(MiddlewareArray, _super);\n  function MiddlewareArray() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var _this = _super.apply(this, args) || this;\n    Object.setPrototypeOf(_this, MiddlewareArray.prototype);\n    return _this;\n  }\n  Object.defineProperty(MiddlewareArray, Symbol.species, {\n    get: function () {\n      return MiddlewareArray;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  MiddlewareArray.prototype.concat = function () {\n    var arr = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      arr[_i] = arguments[_i];\n    }\n    return _super.prototype.concat.apply(this, arr);\n  };\n  MiddlewareArray.prototype.prepend = function () {\n    var arr = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      arr[_i] = arguments[_i];\n    }\n    if (arr.length === 1 && Array.isArray(arr[0])) {\n      return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr[0].concat(this))))();\n    }\n    return new (MiddlewareArray.bind.apply(MiddlewareArray, __spreadArray([void 0], arr.concat(this))))();\n  };\n  return MiddlewareArray;\n}(Array);\nvar EnhancerArray = /** @class */function (_super) {\n  __extends(EnhancerArray, _super);\n  function EnhancerArray() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var _this = _super.apply(this, args) || this;\n    Object.setPrototypeOf(_this, EnhancerArray.prototype);\n    return _this;\n  }\n  Object.defineProperty(EnhancerArray, Symbol.species, {\n    get: function () {\n      return EnhancerArray;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  EnhancerArray.prototype.concat = function () {\n    var arr = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      arr[_i] = arguments[_i];\n    }\n    return _super.prototype.concat.apply(this, arr);\n  };\n  EnhancerArray.prototype.prepend = function () {\n    var arr = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      arr[_i] = arguments[_i];\n    }\n    if (arr.length === 1 && Array.isArray(arr[0])) {\n      return new (EnhancerArray.bind.apply(EnhancerArray, __spreadArray([void 0], arr[0].concat(this))))();\n    }\n    return new (EnhancerArray.bind.apply(EnhancerArray, __spreadArray([void 0], arr.concat(this))))();\n  };\n  return EnhancerArray;\n}(Array);\nfunction freezeDraftable(val) {\n  return isDraftable(val) ? createNextState(val, function () {}) : val;\n}\n// src/immutableStateInvariantMiddleware.ts\nvar isProduction = process.env.NODE_ENV === \"production\";\nvar prefix = \"Invariant failed\";\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n  if (isProduction) {\n    throw new Error(prefix);\n  }\n  throw new Error(prefix + \": \" + (message || \"\"));\n}\nfunction stringify(obj, serializer, indent, decycler) {\n  return JSON.stringify(obj, getSerialize(serializer, decycler), indent);\n}\nfunction getSerialize(serializer, decycler) {\n  var stack = [],\n    keys = [];\n  if (!decycler) decycler = function (_, value) {\n    if (stack[0] === value) return \"[Circular ~]\";\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\n  };\n  return function (key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this);\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n      if (~stack.indexOf(value)) value = decycler.call(this, key, value);\n    } else stack.push(value);\n    return serializer == null ? value : serializer.call(this, key, value);\n  };\n}\nfunction isImmutableDefault(value) {\n  return typeof value !== \"object\" || value == null || Object.isFrozen(value);\n}\nfunction trackForMutations(isImmutable, ignorePaths, obj) {\n  var trackedProperties = trackProperties(isImmutable, ignorePaths, obj);\n  return {\n    detectMutations: function () {\n      return detectMutations(isImmutable, ignorePaths, trackedProperties, obj);\n    }\n  };\n}\nfunction trackProperties(isImmutable, ignorePaths, obj, path, checkedObjects) {\n  if (ignorePaths === void 0) {\n    ignorePaths = [];\n  }\n  if (path === void 0) {\n    path = \"\";\n  }\n  if (checkedObjects === void 0) {\n    checkedObjects = new Set();\n  }\n  var tracked = {\n    value: obj\n  };\n  if (!isImmutable(obj) && !checkedObjects.has(obj)) {\n    checkedObjects.add(obj);\n    tracked.children = {};\n    for (var key in obj) {\n      var childPath = path ? path + \".\" + key : key;\n      if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {\n        continue;\n      }\n      tracked.children[key] = trackProperties(isImmutable, ignorePaths, obj[key], childPath);\n    }\n  }\n  return tracked;\n}\nfunction detectMutations(isImmutable, ignoredPaths, trackedProperty, obj, sameParentRef, path) {\n  if (ignoredPaths === void 0) {\n    ignoredPaths = [];\n  }\n  if (sameParentRef === void 0) {\n    sameParentRef = false;\n  }\n  if (path === void 0) {\n    path = \"\";\n  }\n  var prevObj = trackedProperty ? trackedProperty.value : void 0;\n  var sameRef = prevObj === obj;\n  if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\n    return {\n      wasMutated: true,\n      path: path\n    };\n  }\n  if (isImmutable(prevObj) || isImmutable(obj)) {\n    return {\n      wasMutated: false\n    };\n  }\n  var keysToDetect = {};\n  for (var key in trackedProperty.children) {\n    keysToDetect[key] = true;\n  }\n  for (var key in obj) {\n    keysToDetect[key] = true;\n  }\n  var hasIgnoredPaths = ignoredPaths.length > 0;\n  var _loop_1 = function (key) {\n    var nestedPath = path ? path + \".\" + key : key;\n    if (hasIgnoredPaths) {\n      var hasMatches = ignoredPaths.some(function (ignored) {\n        if (ignored instanceof RegExp) {\n          return ignored.test(nestedPath);\n        }\n        return nestedPath === ignored;\n      });\n      if (hasMatches) {\n        return \"continue\";\n      }\n    }\n    var result = detectMutations(isImmutable, ignoredPaths, trackedProperty.children[key], obj[key], sameRef, nestedPath);\n    if (result.wasMutated) {\n      return {\n        value: result\n      };\n    }\n  };\n  for (var key in keysToDetect) {\n    var state_1 = _loop_1(key);\n    if (typeof state_1 === \"object\") return state_1.value;\n  }\n  return {\n    wasMutated: false\n  };\n}\nfunction createImmutableStateInvariantMiddleware(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (process.env.NODE_ENV === \"production\") {\n    return function () {\n      return function (next) {\n        return function (action) {\n          return next(action);\n        };\n      };\n    };\n  }\n  var _c = options.isImmutable,\n    isImmutable = _c === void 0 ? isImmutableDefault : _c,\n    ignoredPaths = options.ignoredPaths,\n    _d = options.warnAfter,\n    warnAfter = _d === void 0 ? 32 : _d,\n    ignore = options.ignore;\n  ignoredPaths = ignoredPaths || ignore;\n  var track = trackForMutations.bind(null, isImmutable, ignoredPaths);\n  return function (_c) {\n    var getState = _c.getState;\n    var state = getState();\n    var tracker = track(state);\n    var result;\n    return function (next) {\n      return function (action) {\n        var measureUtils = getTimeMeasureUtils(warnAfter, \"ImmutableStateInvariantMiddleware\");\n        measureUtils.measureTime(function () {\n          state = getState();\n          result = tracker.detectMutations();\n          tracker = track(state);\n          invariant(!result.wasMutated, \"A state mutation was detected between dispatches, in the path '\" + (result.path || \"\") + \"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)\");\n        });\n        var dispatchedAction = next(action);\n        measureUtils.measureTime(function () {\n          state = getState();\n          result = tracker.detectMutations();\n          tracker = track(state);\n          result.wasMutated && invariant(!result.wasMutated, \"A state mutation was detected inside a dispatch, in the path: \" + (result.path || \"\") + \". Take a look at the reducer(s) handling the action \" + stringify(action) + \". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)\");\n        });\n        measureUtils.warnIfExceeded();\n        return dispatchedAction;\n      };\n    };\n  };\n}\n// src/serializableStateInvariantMiddleware.ts\nfunction isPlain(val) {\n  var type = typeof val;\n  return val == null || type === \"string\" || type === \"boolean\" || type === \"number\" || Array.isArray(val) || isPlainObject(val);\n}\nfunction findNonSerializableValue(value, path, isSerializable, getEntries, ignoredPaths, cache) {\n  if (path === void 0) {\n    path = \"\";\n  }\n  if (isSerializable === void 0) {\n    isSerializable = isPlain;\n  }\n  if (ignoredPaths === void 0) {\n    ignoredPaths = [];\n  }\n  var foundNestedSerializable;\n  if (!isSerializable(value)) {\n    return {\n      keyPath: path || \"<root>\",\n      value: value\n    };\n  }\n  if (typeof value !== \"object\" || value === null) {\n    return false;\n  }\n  if (cache == null ? void 0 : cache.has(value)) return false;\n  var entries = getEntries != null ? getEntries(value) : Object.entries(value);\n  var hasIgnoredPaths = ignoredPaths.length > 0;\n  var _loop_2 = function (key, nestedValue) {\n    var nestedPath = path ? path + \".\" + key : key;\n    if (hasIgnoredPaths) {\n      var hasMatches = ignoredPaths.some(function (ignored) {\n        if (ignored instanceof RegExp) {\n          return ignored.test(nestedPath);\n        }\n        return nestedPath === ignored;\n      });\n      if (hasMatches) {\n        return \"continue\";\n      }\n    }\n    if (!isSerializable(nestedValue)) {\n      return {\n        value: {\n          keyPath: nestedPath,\n          value: nestedValue\n        }\n      };\n    }\n    if (typeof nestedValue === \"object\") {\n      foundNestedSerializable = findNonSerializableValue(nestedValue, nestedPath, isSerializable, getEntries, ignoredPaths, cache);\n      if (foundNestedSerializable) {\n        return {\n          value: foundNestedSerializable\n        };\n      }\n    }\n  };\n  for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n    var _c = entries_1[_i],\n      key = _c[0],\n      nestedValue = _c[1];\n    var state_2 = _loop_2(key, nestedValue);\n    if (typeof state_2 === \"object\") return state_2.value;\n  }\n  if (cache && isNestedFrozen(value)) cache.add(value);\n  return false;\n}\nfunction isNestedFrozen(value) {\n  if (!Object.isFrozen(value)) return false;\n  for (var _i = 0, _c = Object.values(value); _i < _c.length; _i++) {\n    var nestedValue = _c[_i];\n    if (typeof nestedValue !== \"object\" || nestedValue === null) continue;\n    if (!isNestedFrozen(nestedValue)) return false;\n  }\n  return true;\n}\nfunction createSerializableStateInvariantMiddleware(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  if (process.env.NODE_ENV === \"production\") {\n    return function () {\n      return function (next) {\n        return function (action) {\n          return next(action);\n        };\n      };\n    };\n  }\n  var _c = options.isSerializable,\n    isSerializable = _c === void 0 ? isPlain : _c,\n    getEntries = options.getEntries,\n    _d = options.ignoredActions,\n    ignoredActions = _d === void 0 ? [] : _d,\n    _e = options.ignoredActionPaths,\n    ignoredActionPaths = _e === void 0 ? [\"meta.arg\", \"meta.baseQueryMeta\"] : _e,\n    _f = options.ignoredPaths,\n    ignoredPaths = _f === void 0 ? [] : _f,\n    _g = options.warnAfter,\n    warnAfter = _g === void 0 ? 32 : _g,\n    _h = options.ignoreState,\n    ignoreState = _h === void 0 ? false : _h,\n    _j = options.ignoreActions,\n    ignoreActions = _j === void 0 ? false : _j,\n    _k = options.disableCache,\n    disableCache = _k === void 0 ? false : _k;\n  var cache = !disableCache && WeakSet ? new WeakSet() : void 0;\n  return function (storeAPI) {\n    return function (next) {\n      return function (action) {\n        var result = next(action);\n        var measureUtils = getTimeMeasureUtils(warnAfter, \"SerializableStateInvariantMiddleware\");\n        if (!ignoreActions && !(ignoredActions.length && ignoredActions.indexOf(action.type) !== -1)) {\n          measureUtils.measureTime(function () {\n            var foundActionNonSerializableValue = findNonSerializableValue(action, \"\", isSerializable, getEntries, ignoredActionPaths, cache);\n            if (foundActionNonSerializableValue) {\n              var keyPath = foundActionNonSerializableValue.keyPath,\n                value = foundActionNonSerializableValue.value;\n              console.error(\"A non-serializable value was detected in an action, in the path: `\" + keyPath + \"`. Value:\", value, \"\\nTake a look at the logic that dispatched this action: \", action, \"\\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)\", \"\\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)\");\n            }\n          });\n        }\n        if (!ignoreState) {\n          measureUtils.measureTime(function () {\n            var state = storeAPI.getState();\n            var foundStateNonSerializableValue = findNonSerializableValue(state, \"\", isSerializable, getEntries, ignoredPaths, cache);\n            if (foundStateNonSerializableValue) {\n              var keyPath = foundStateNonSerializableValue.keyPath,\n                value = foundStateNonSerializableValue.value;\n              console.error(\"A non-serializable value was detected in the state, in the path: `\" + keyPath + \"`. Value:\", value, \"\\nTake a look at the reducer(s) handling this action type: \" + action.type + \".\\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)\");\n            }\n          });\n          measureUtils.warnIfExceeded();\n        }\n        return result;\n      };\n    };\n  };\n}\n// src/getDefaultMiddleware.ts\nfunction isBoolean(x) {\n  return typeof x === \"boolean\";\n}\nfunction curryGetDefaultMiddleware() {\n  return function curriedGetDefaultMiddleware(options) {\n    return getDefaultMiddleware(options);\n  };\n}\nfunction getDefaultMiddleware(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var _c = options.thunk,\n    thunk = _c === void 0 ? true : _c,\n    _d = options.immutableCheck,\n    immutableCheck = _d === void 0 ? true : _d,\n    _e = options.serializableCheck,\n    serializableCheck = _e === void 0 ? true : _e,\n    _f = options.actionCreatorCheck,\n    actionCreatorCheck = _f === void 0 ? true : _f;\n  var middlewareArray = new MiddlewareArray();\n  if (thunk) {\n    if (isBoolean(thunk)) {\n      middlewareArray.push(thunkMiddleware);\n    } else {\n      middlewareArray.push(thunkMiddleware.withExtraArgument(thunk.extraArgument));\n    }\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (immutableCheck) {\n      var immutableOptions = {};\n      if (!isBoolean(immutableCheck)) {\n        immutableOptions = immutableCheck;\n      }\n      middlewareArray.unshift(createImmutableStateInvariantMiddleware(immutableOptions));\n    }\n    if (serializableCheck) {\n      var serializableOptions = {};\n      if (!isBoolean(serializableCheck)) {\n        serializableOptions = serializableCheck;\n      }\n      middlewareArray.push(createSerializableStateInvariantMiddleware(serializableOptions));\n    }\n    if (actionCreatorCheck) {\n      var actionCreatorOptions = {};\n      if (!isBoolean(actionCreatorCheck)) {\n        actionCreatorOptions = actionCreatorCheck;\n      }\n      middlewareArray.unshift(createActionCreatorInvariantMiddleware(actionCreatorOptions));\n    }\n  }\n  return middlewareArray;\n}\n// src/configureStore.ts\nvar IS_PRODUCTION = process.env.NODE_ENV === \"production\";\nfunction configureStore(options) {\n  var curriedGetDefaultMiddleware = curryGetDefaultMiddleware();\n  var _c = options || {},\n    _d = _c.reducer,\n    reducer = _d === void 0 ? void 0 : _d,\n    _e = _c.middleware,\n    middleware = _e === void 0 ? curriedGetDefaultMiddleware() : _e,\n    _f = _c.devTools,\n    devTools = _f === void 0 ? true : _f,\n    _g = _c.preloadedState,\n    preloadedState = _g === void 0 ? void 0 : _g,\n    _h = _c.enhancers,\n    enhancers = _h === void 0 ? void 0 : _h;\n  var rootReducer;\n  if (typeof reducer === \"function\") {\n    rootReducer = reducer;\n  } else if (isPlainObject(reducer)) {\n    rootReducer = combineReducers(reducer);\n  } else {\n    throw new Error('\"reducer\" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');\n  }\n  var finalMiddleware = middleware;\n  if (typeof finalMiddleware === \"function\") {\n    finalMiddleware = finalMiddleware(curriedGetDefaultMiddleware);\n    if (!IS_PRODUCTION && !Array.isArray(finalMiddleware)) {\n      throw new Error(\"when using a middleware builder function, an array of middleware must be returned\");\n    }\n  }\n  if (!IS_PRODUCTION && finalMiddleware.some(function (item) {\n    return typeof item !== \"function\";\n  })) {\n    throw new Error(\"each middleware provided to configureStore must be a function\");\n  }\n  var middlewareEnhancer = applyMiddleware.apply(void 0, finalMiddleware);\n  var finalCompose = compose2;\n  if (devTools) {\n    finalCompose = composeWithDevTools(__spreadValues({\n      trace: !IS_PRODUCTION\n    }, typeof devTools === \"object\" && devTools));\n  }\n  var defaultEnhancers = new EnhancerArray(middlewareEnhancer);\n  var storeEnhancers = defaultEnhancers;\n  if (Array.isArray(enhancers)) {\n    storeEnhancers = __spreadArray([middlewareEnhancer], enhancers);\n  } else if (typeof enhancers === \"function\") {\n    storeEnhancers = enhancers(defaultEnhancers);\n  }\n  var composedEnhancer = finalCompose.apply(void 0, storeEnhancers);\n  return createStore(rootReducer, preloadedState, composedEnhancer);\n}\n// src/createReducer.ts\nimport createNextState2, { isDraft as isDraft2, isDraftable as isDraftable2 } from \"immer\";\n// src/mapBuilders.ts\nfunction executeReducerBuilderCallback(builderCallback) {\n  var actionsMap = {};\n  var actionMatchers = [];\n  var defaultCaseReducer;\n  var builder = {\n    addCase: function (typeOrActionCreator, reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (actionMatchers.length > 0) {\n          throw new Error(\"`builder.addCase` should only be called before calling `builder.addMatcher`\");\n        }\n        if (defaultCaseReducer) {\n          throw new Error(\"`builder.addCase` should only be called before calling `builder.addDefaultCase`\");\n        }\n      }\n      var type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\n      if (!type) {\n        throw new Error(\"`builder.addCase` cannot be called with an empty action type\");\n      }\n      if (type in actionsMap) {\n        throw new Error(\"`builder.addCase` cannot be called with two reducers for the same action type\");\n      }\n      actionsMap[type] = reducer;\n      return builder;\n    },\n    addMatcher: function (matcher, reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (defaultCaseReducer) {\n          throw new Error(\"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`\");\n        }\n      }\n      actionMatchers.push({\n        matcher: matcher,\n        reducer: reducer\n      });\n      return builder;\n    },\n    addDefaultCase: function (reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (defaultCaseReducer) {\n          throw new Error(\"`builder.addDefaultCase` can only be called once\");\n        }\n      }\n      defaultCaseReducer = reducer;\n      return builder;\n    }\n  };\n  builderCallback(builder);\n  return [actionsMap, actionMatchers, defaultCaseReducer];\n}\n// src/createReducer.ts\nfunction isStateFunction(x) {\n  return typeof x === \"function\";\n}\nvar hasWarnedAboutObjectNotation = false;\nfunction createReducer(initialState, mapOrBuilderCallback, actionMatchers, defaultCaseReducer) {\n  if (actionMatchers === void 0) {\n    actionMatchers = [];\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof mapOrBuilderCallback === \"object\") {\n      if (!hasWarnedAboutObjectNotation) {\n        hasWarnedAboutObjectNotation = true;\n        console.warn(\"The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer\");\n      }\n    }\n  }\n  var _c = typeof mapOrBuilderCallback === \"function\" ? executeReducerBuilderCallback(mapOrBuilderCallback) : [mapOrBuilderCallback, actionMatchers, defaultCaseReducer],\n    actionsMap = _c[0],\n    finalActionMatchers = _c[1],\n    finalDefaultCaseReducer = _c[2];\n  var getInitialState;\n  if (isStateFunction(initialState)) {\n    getInitialState = function () {\n      return freezeDraftable(initialState());\n    };\n  } else {\n    var frozenInitialState_1 = freezeDraftable(initialState);\n    getInitialState = function () {\n      return frozenInitialState_1;\n    };\n  }\n  function reducer(state, action) {\n    if (state === void 0) {\n      state = getInitialState();\n    }\n    var caseReducers = __spreadArray([actionsMap[action.type]], finalActionMatchers.filter(function (_c) {\n      var matcher = _c.matcher;\n      return matcher(action);\n    }).map(function (_c) {\n      var reducer2 = _c.reducer;\n      return reducer2;\n    }));\n    if (caseReducers.filter(function (cr) {\n      return !!cr;\n    }).length === 0) {\n      caseReducers = [finalDefaultCaseReducer];\n    }\n    return caseReducers.reduce(function (previousState, caseReducer) {\n      if (caseReducer) {\n        if (isDraft2(previousState)) {\n          var draft = previousState;\n          var result = caseReducer(draft, action);\n          if (result === void 0) {\n            return previousState;\n          }\n          return result;\n        } else if (!isDraftable2(previousState)) {\n          var result = caseReducer(previousState, action);\n          if (result === void 0) {\n            if (previousState === null) {\n              return previousState;\n            }\n            throw Error(\"A case reducer on a non-draftable value must not return undefined\");\n          }\n          return result;\n        } else {\n          return createNextState2(previousState, function (draft) {\n            return caseReducer(draft, action);\n          });\n        }\n      }\n      return previousState;\n    }, state);\n  }\n  reducer.getInitialState = getInitialState;\n  return reducer;\n}\n// src/createSlice.ts\nvar hasWarnedAboutObjectNotation2 = false;\nfunction getType2(slice, actionKey) {\n  return slice + \"/\" + actionKey;\n}\nfunction createSlice(options) {\n  var name = options.name;\n  if (!name) {\n    throw new Error(\"`name` is a required option for createSlice\");\n  }\n  if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n    if (options.initialState === void 0) {\n      console.error(\"You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`\");\n    }\n  }\n  var initialState = typeof options.initialState == \"function\" ? options.initialState : freezeDraftable(options.initialState);\n  var reducers = options.reducers || {};\n  var reducerNames = Object.keys(reducers);\n  var sliceCaseReducersByName = {};\n  var sliceCaseReducersByType = {};\n  var actionCreators = {};\n  reducerNames.forEach(function (reducerName) {\n    var maybeReducerWithPrepare = reducers[reducerName];\n    var type = getType2(name, reducerName);\n    var caseReducer;\n    var prepareCallback;\n    if (\"reducer\" in maybeReducerWithPrepare) {\n      caseReducer = maybeReducerWithPrepare.reducer;\n      prepareCallback = maybeReducerWithPrepare.prepare;\n    } else {\n      caseReducer = maybeReducerWithPrepare;\n    }\n    sliceCaseReducersByName[reducerName] = caseReducer;\n    sliceCaseReducersByType[type] = caseReducer;\n    actionCreators[reducerName] = prepareCallback ? createAction(type, prepareCallback) : createAction(type);\n  });\n  function buildReducer() {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof options.extraReducers === \"object\") {\n        if (!hasWarnedAboutObjectNotation2) {\n          hasWarnedAboutObjectNotation2 = true;\n          console.warn(\"The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice\");\n        }\n      }\n    }\n    var _c = typeof options.extraReducers === \"function\" ? executeReducerBuilderCallback(options.extraReducers) : [options.extraReducers],\n      _d = _c[0],\n      extraReducers = _d === void 0 ? {} : _d,\n      _e = _c[1],\n      actionMatchers = _e === void 0 ? [] : _e,\n      _f = _c[2],\n      defaultCaseReducer = _f === void 0 ? void 0 : _f;\n    var finalCaseReducers = __spreadValues(__spreadValues({}, extraReducers), sliceCaseReducersByType);\n    return createReducer(initialState, function (builder) {\n      for (var key in finalCaseReducers) {\n        builder.addCase(key, finalCaseReducers[key]);\n      }\n      for (var _i = 0, actionMatchers_1 = actionMatchers; _i < actionMatchers_1.length; _i++) {\n        var m = actionMatchers_1[_i];\n        builder.addMatcher(m.matcher, m.reducer);\n      }\n      if (defaultCaseReducer) {\n        builder.addDefaultCase(defaultCaseReducer);\n      }\n    });\n  }\n  var _reducer;\n  return {\n    name: name,\n    reducer: function (state, action) {\n      if (!_reducer) _reducer = buildReducer();\n      return _reducer(state, action);\n    },\n    actions: actionCreators,\n    caseReducers: sliceCaseReducersByName,\n    getInitialState: function () {\n      if (!_reducer) _reducer = buildReducer();\n      return _reducer.getInitialState();\n    }\n  };\n}\n// src/entities/entity_state.ts\nfunction getInitialEntityState() {\n  return {\n    ids: [],\n    entities: {}\n  };\n}\nfunction createInitialStateFactory() {\n  function getInitialState(additionalState) {\n    if (additionalState === void 0) {\n      additionalState = {};\n    }\n    return Object.assign(getInitialEntityState(), additionalState);\n  }\n  return {\n    getInitialState: getInitialState\n  };\n}\n// src/entities/state_selectors.ts\nfunction createSelectorsFactory() {\n  function getSelectors(selectState) {\n    var selectIds = function (state) {\n      return state.ids;\n    };\n    var selectEntities = function (state) {\n      return state.entities;\n    };\n    var selectAll = createDraftSafeSelector(selectIds, selectEntities, function (ids, entities) {\n      return ids.map(function (id) {\n        return entities[id];\n      });\n    });\n    var selectId = function (_, id) {\n      return id;\n    };\n    var selectById = function (entities, id) {\n      return entities[id];\n    };\n    var selectTotal = createDraftSafeSelector(selectIds, function (ids) {\n      return ids.length;\n    });\n    if (!selectState) {\n      return {\n        selectIds: selectIds,\n        selectEntities: selectEntities,\n        selectAll: selectAll,\n        selectTotal: selectTotal,\n        selectById: createDraftSafeSelector(selectEntities, selectId, selectById)\n      };\n    }\n    var selectGlobalizedEntities = createDraftSafeSelector(selectState, selectEntities);\n    return {\n      selectIds: createDraftSafeSelector(selectState, selectIds),\n      selectEntities: selectGlobalizedEntities,\n      selectAll: createDraftSafeSelector(selectState, selectAll),\n      selectTotal: createDraftSafeSelector(selectState, selectTotal),\n      selectById: createDraftSafeSelector(selectGlobalizedEntities, selectId, selectById)\n    };\n  }\n  return {\n    getSelectors: getSelectors\n  };\n}\n// src/entities/state_adapter.ts\nimport createNextState3, { isDraft as isDraft3 } from \"immer\";\nfunction createSingleArgumentStateOperator(mutator) {\n  var operator = createStateOperator(function (_, state) {\n    return mutator(state);\n  });\n  return function operation(state) {\n    return operator(state, void 0);\n  };\n}\nfunction createStateOperator(mutator) {\n  return function operation(state, arg) {\n    function isPayloadActionArgument(arg2) {\n      return isFSA(arg2);\n    }\n    var runMutator = function (draft) {\n      if (isPayloadActionArgument(arg)) {\n        mutator(arg.payload, draft);\n      } else {\n        mutator(arg, draft);\n      }\n    };\n    if (isDraft3(state)) {\n      runMutator(state);\n      return state;\n    } else {\n      return createNextState3(state, runMutator);\n    }\n  };\n}\n// src/entities/utils.ts\nfunction selectIdValue(entity, selectId) {\n  var key = selectId(entity);\n  if (process.env.NODE_ENV !== \"production\" && key === void 0) {\n    console.warn(\"The entity passed to the `selectId` implementation returned undefined.\", \"You should probably provide your own `selectId` implementation.\", \"The entity that was passed:\", entity, \"The `selectId` implementation:\", selectId.toString());\n  }\n  return key;\n}\nfunction ensureEntitiesArray(entities) {\n  if (!Array.isArray(entities)) {\n    entities = Object.values(entities);\n  }\n  return entities;\n}\nfunction splitAddedUpdatedEntities(newEntities, selectId, state) {\n  newEntities = ensureEntitiesArray(newEntities);\n  var added = [];\n  var updated = [];\n  for (var _i = 0, newEntities_1 = newEntities; _i < newEntities_1.length; _i++) {\n    var entity = newEntities_1[_i];\n    var id = selectIdValue(entity, selectId);\n    if (id in state.entities) {\n      updated.push({\n        id: id,\n        changes: entity\n      });\n    } else {\n      added.push(entity);\n    }\n  }\n  return [added, updated];\n}\n// src/entities/unsorted_state_adapter.ts\nfunction createUnsortedStateAdapter(selectId) {\n  function addOneMutably(entity, state) {\n    var key = selectIdValue(entity, selectId);\n    if (key in state.entities) {\n      return;\n    }\n    state.ids.push(key);\n    state.entities[key] = entity;\n  }\n  function addManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    for (var _i = 0, newEntities_2 = newEntities; _i < newEntities_2.length; _i++) {\n      var entity = newEntities_2[_i];\n      addOneMutably(entity, state);\n    }\n  }\n  function setOneMutably(entity, state) {\n    var key = selectIdValue(entity, selectId);\n    if (!(key in state.entities)) {\n      state.ids.push(key);\n    }\n    state.entities[key] = entity;\n  }\n  function setManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    for (var _i = 0, newEntities_3 = newEntities; _i < newEntities_3.length; _i++) {\n      var entity = newEntities_3[_i];\n      setOneMutably(entity, state);\n    }\n  }\n  function setAllMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    state.ids = [];\n    state.entities = {};\n    addManyMutably(newEntities, state);\n  }\n  function removeOneMutably(key, state) {\n    return removeManyMutably([key], state);\n  }\n  function removeManyMutably(keys, state) {\n    var didMutate = false;\n    keys.forEach(function (key) {\n      if (key in state.entities) {\n        delete state.entities[key];\n        didMutate = true;\n      }\n    });\n    if (didMutate) {\n      state.ids = state.ids.filter(function (id) {\n        return id in state.entities;\n      });\n    }\n  }\n  function removeAllMutably(state) {\n    Object.assign(state, {\n      ids: [],\n      entities: {}\n    });\n  }\n  function takeNewKey(keys, update, state) {\n    var original2 = state.entities[update.id];\n    var updated = Object.assign({}, original2, update.changes);\n    var newKey = selectIdValue(updated, selectId);\n    var hasNewKey = newKey !== update.id;\n    if (hasNewKey) {\n      keys[update.id] = newKey;\n      delete state.entities[update.id];\n    }\n    state.entities[newKey] = updated;\n    return hasNewKey;\n  }\n  function updateOneMutably(update, state) {\n    return updateManyMutably([update], state);\n  }\n  function updateManyMutably(updates, state) {\n    var newKeys = {};\n    var updatesPerEntity = {};\n    updates.forEach(function (update) {\n      if (update.id in state.entities) {\n        updatesPerEntity[update.id] = {\n          id: update.id,\n          changes: __spreadValues(__spreadValues({}, updatesPerEntity[update.id] ? updatesPerEntity[update.id].changes : null), update.changes)\n        };\n      }\n    });\n    updates = Object.values(updatesPerEntity);\n    var didMutateEntities = updates.length > 0;\n    if (didMutateEntities) {\n      var didMutateIds = updates.filter(function (update) {\n        return takeNewKey(newKeys, update, state);\n      }).length > 0;\n      if (didMutateIds) {\n        state.ids = Object.keys(state.entities);\n      }\n    }\n  }\n  function upsertOneMutably(entity, state) {\n    return upsertManyMutably([entity], state);\n  }\n  function upsertManyMutably(newEntities, state) {\n    var _c = splitAddedUpdatedEntities(newEntities, selectId, state),\n      added = _c[0],\n      updated = _c[1];\n    updateManyMutably(updated, state);\n    addManyMutably(added, state);\n  }\n  return {\n    removeAll: createSingleArgumentStateOperator(removeAllMutably),\n    addOne: createStateOperator(addOneMutably),\n    addMany: createStateOperator(addManyMutably),\n    setOne: createStateOperator(setOneMutably),\n    setMany: createStateOperator(setManyMutably),\n    setAll: createStateOperator(setAllMutably),\n    updateOne: createStateOperator(updateOneMutably),\n    updateMany: createStateOperator(updateManyMutably),\n    upsertOne: createStateOperator(upsertOneMutably),\n    upsertMany: createStateOperator(upsertManyMutably),\n    removeOne: createStateOperator(removeOneMutably),\n    removeMany: createStateOperator(removeManyMutably)\n  };\n}\n// src/entities/sorted_state_adapter.ts\nfunction createSortedStateAdapter(selectId, sort) {\n  var _c = createUnsortedStateAdapter(selectId),\n    removeOne = _c.removeOne,\n    removeMany = _c.removeMany,\n    removeAll = _c.removeAll;\n  function addOneMutably(entity, state) {\n    return addManyMutably([entity], state);\n  }\n  function addManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    var models = newEntities.filter(function (model) {\n      return !(selectIdValue(model, selectId) in state.entities);\n    });\n    if (models.length !== 0) {\n      merge(models, state);\n    }\n  }\n  function setOneMutably(entity, state) {\n    return setManyMutably([entity], state);\n  }\n  function setManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    if (newEntities.length !== 0) {\n      merge(newEntities, state);\n    }\n  }\n  function setAllMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    state.entities = {};\n    state.ids = [];\n    addManyMutably(newEntities, state);\n  }\n  function updateOneMutably(update, state) {\n    return updateManyMutably([update], state);\n  }\n  function updateManyMutably(updates, state) {\n    var appliedUpdates = false;\n    for (var _i = 0, updates_1 = updates; _i < updates_1.length; _i++) {\n      var update = updates_1[_i];\n      var entity = state.entities[update.id];\n      if (!entity) {\n        continue;\n      }\n      appliedUpdates = true;\n      Object.assign(entity, update.changes);\n      var newId = selectId(entity);\n      if (update.id !== newId) {\n        delete state.entities[update.id];\n        state.entities[newId] = entity;\n      }\n    }\n    if (appliedUpdates) {\n      resortEntities(state);\n    }\n  }\n  function upsertOneMutably(entity, state) {\n    return upsertManyMutably([entity], state);\n  }\n  function upsertManyMutably(newEntities, state) {\n    var _c = splitAddedUpdatedEntities(newEntities, selectId, state),\n      added = _c[0],\n      updated = _c[1];\n    updateManyMutably(updated, state);\n    addManyMutably(added, state);\n  }\n  function areArraysEqual(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (var i = 0; i < a.length && i < b.length; i++) {\n      if (a[i] === b[i]) {\n        continue;\n      }\n      return false;\n    }\n    return true;\n  }\n  function merge(models, state) {\n    models.forEach(function (model) {\n      state.entities[selectId(model)] = model;\n    });\n    resortEntities(state);\n  }\n  function resortEntities(state) {\n    var allEntities = Object.values(state.entities);\n    allEntities.sort(sort);\n    var newSortedIds = allEntities.map(selectId);\n    var ids = state.ids;\n    if (!areArraysEqual(ids, newSortedIds)) {\n      state.ids = newSortedIds;\n    }\n  }\n  return {\n    removeOne: removeOne,\n    removeMany: removeMany,\n    removeAll: removeAll,\n    addOne: createStateOperator(addOneMutably),\n    updateOne: createStateOperator(updateOneMutably),\n    upsertOne: createStateOperator(upsertOneMutably),\n    setOne: createStateOperator(setOneMutably),\n    setMany: createStateOperator(setManyMutably),\n    setAll: createStateOperator(setAllMutably),\n    addMany: createStateOperator(addManyMutably),\n    updateMany: createStateOperator(updateManyMutably),\n    upsertMany: createStateOperator(upsertManyMutably)\n  };\n}\n// src/entities/create_adapter.ts\nfunction createEntityAdapter(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var _c = __spreadValues({\n      sortComparer: false,\n      selectId: function (instance) {\n        return instance.id;\n      }\n    }, options),\n    selectId = _c.selectId,\n    sortComparer = _c.sortComparer;\n  var stateFactory = createInitialStateFactory();\n  var selectorsFactory = createSelectorsFactory();\n  var stateAdapter = sortComparer ? createSortedStateAdapter(selectId, sortComparer) : createUnsortedStateAdapter(selectId);\n  return __spreadValues(__spreadValues(__spreadValues({\n    selectId: selectId,\n    sortComparer: sortComparer\n  }, stateFactory), selectorsFactory), stateAdapter);\n}\n// src/nanoid.ts\nvar urlAlphabet = \"ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW\";\nvar nanoid = function (size) {\n  if (size === void 0) {\n    size = 21;\n  }\n  var id = \"\";\n  var i = size;\n  while (i--) {\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n  return id;\n};\n// src/createAsyncThunk.ts\nvar commonProperties = [\"name\", \"message\", \"stack\", \"code\"];\nvar RejectWithValue = /** @class */function () {\n  function RejectWithValue(payload, meta) {\n    this.payload = payload;\n    this.meta = meta;\n  }\n  return RejectWithValue;\n}();\nvar FulfillWithMeta = /** @class */function () {\n  function FulfillWithMeta(payload, meta) {\n    this.payload = payload;\n    this.meta = meta;\n  }\n  return FulfillWithMeta;\n}();\nvar miniSerializeError = function (value) {\n  if (typeof value === \"object\" && value !== null) {\n    var simpleError = {};\n    for (var _i = 0, commonProperties_1 = commonProperties; _i < commonProperties_1.length; _i++) {\n      var property = commonProperties_1[_i];\n      if (typeof value[property] === \"string\") {\n        simpleError[property] = value[property];\n      }\n    }\n    return simpleError;\n  }\n  return {\n    message: String(value)\n  };\n};\nvar createAsyncThunk = function () {\n  function createAsyncThunk2(typePrefix, payloadCreator, options) {\n    var fulfilled = createAction(typePrefix + \"/fulfilled\", function (payload, requestId, arg, meta) {\n      return {\n        payload: payload,\n        meta: __spreadProps(__spreadValues({}, meta || {}), {\n          arg: arg,\n          requestId: requestId,\n          requestStatus: \"fulfilled\"\n        })\n      };\n    });\n    var pending = createAction(typePrefix + \"/pending\", function (requestId, arg, meta) {\n      return {\n        payload: void 0,\n        meta: __spreadProps(__spreadValues({}, meta || {}), {\n          arg: arg,\n          requestId: requestId,\n          requestStatus: \"pending\"\n        })\n      };\n    });\n    var rejected = createAction(typePrefix + \"/rejected\", function (error, requestId, arg, payload, meta) {\n      return {\n        payload: payload,\n        error: (options && options.serializeError || miniSerializeError)(error || \"Rejected\"),\n        meta: __spreadProps(__spreadValues({}, meta || {}), {\n          arg: arg,\n          requestId: requestId,\n          rejectedWithValue: !!payload,\n          requestStatus: \"rejected\",\n          aborted: (error == null ? void 0 : error.name) === \"AbortError\",\n          condition: (error == null ? void 0 : error.name) === \"ConditionError\"\n        })\n      };\n    });\n    var displayedWarning = false;\n    var AC = typeof AbortController !== \"undefined\" ? AbortController : /** @class */function () {\n      function class_1() {\n        this.signal = {\n          aborted: false,\n          addEventListener: function () {},\n          dispatchEvent: function () {\n            return false;\n          },\n          onabort: function () {},\n          removeEventListener: function () {},\n          reason: void 0,\n          throwIfAborted: function () {}\n        };\n      }\n      class_1.prototype.abort = function () {\n        if (process.env.NODE_ENV !== \"production\") {\n          if (!displayedWarning) {\n            displayedWarning = true;\n            console.info(\"This platform does not implement AbortController. \\nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'.\");\n          }\n        }\n      };\n      return class_1;\n    }();\n    function actionCreator(arg) {\n      return function (dispatch, getState, extra) {\n        var requestId = (options == null ? void 0 : options.idGenerator) ? options.idGenerator(arg) : nanoid();\n        var abortController = new AC();\n        var abortReason;\n        var started = false;\n        function abort(reason) {\n          abortReason = reason;\n          abortController.abort();\n        }\n        var promise2 = function () {\n          return __async(this, null, function () {\n            var _a, _b, finalAction, conditionResult, abortedPromise, err_1, skipDispatch;\n            return __generator(this, function (_c) {\n              switch (_c.label) {\n                case 0:\n                  _c.trys.push([0, 4,, 5]);\n                  conditionResult = (_a = options == null ? void 0 : options.condition) == null ? void 0 : _a.call(options, arg, {\n                    getState: getState,\n                    extra: extra\n                  });\n                  if (!isThenable(conditionResult)) return [3 /*break*/, 2];\n                  return [4 /*yield*/, conditionResult];\n                case 1:\n                  conditionResult = _c.sent();\n                  _c.label = 2;\n                case 2:\n                  if (conditionResult === false || abortController.signal.aborted) {\n                    throw {\n                      name: \"ConditionError\",\n                      message: \"Aborted due to condition callback returning false.\"\n                    };\n                  }\n                  started = true;\n                  abortedPromise = new Promise(function (_, reject) {\n                    return abortController.signal.addEventListener(\"abort\", function () {\n                      return reject({\n                        name: \"AbortError\",\n                        message: abortReason || \"Aborted\"\n                      });\n                    });\n                  });\n                  dispatch(pending(requestId, arg, (_b = options == null ? void 0 : options.getPendingMeta) == null ? void 0 : _b.call(options, {\n                    requestId: requestId,\n                    arg: arg\n                  }, {\n                    getState: getState,\n                    extra: extra\n                  })));\n                  return [4 /*yield*/, Promise.race([abortedPromise, Promise.resolve(payloadCreator(arg, {\n                    dispatch: dispatch,\n                    getState: getState,\n                    extra: extra,\n                    requestId: requestId,\n                    signal: abortController.signal,\n                    abort: abort,\n                    rejectWithValue: function (value, meta) {\n                      return new RejectWithValue(value, meta);\n                    },\n                    fulfillWithValue: function (value, meta) {\n                      return new FulfillWithMeta(value, meta);\n                    }\n                  })).then(function (result) {\n                    if (result instanceof RejectWithValue) {\n                      throw result;\n                    }\n                    if (result instanceof FulfillWithMeta) {\n                      return fulfilled(result.payload, requestId, arg, result.meta);\n                    }\n                    return fulfilled(result, requestId, arg);\n                  })])];\n                case 3:\n                  finalAction = _c.sent();\n                  return [3 /*break*/, 5];\n                case 4:\n                  err_1 = _c.sent();\n                  finalAction = err_1 instanceof RejectWithValue ? rejected(null, requestId, arg, err_1.payload, err_1.meta) : rejected(err_1, requestId, arg);\n                  return [3 /*break*/, 5];\n                case 5:\n                  skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && finalAction.meta.condition;\n                  if (!skipDispatch) {\n                    dispatch(finalAction);\n                  }\n                  return [2 /*return*/, finalAction];\n              }\n            });\n          });\n        }();\n        return Object.assign(promise2, {\n          abort: abort,\n          requestId: requestId,\n          arg: arg,\n          unwrap: function () {\n            return promise2.then(unwrapResult);\n          }\n        });\n      };\n    }\n    return Object.assign(actionCreator, {\n      pending: pending,\n      rejected: rejected,\n      fulfilled: fulfilled,\n      typePrefix: typePrefix\n    });\n  }\n  createAsyncThunk2.withTypes = function () {\n    return createAsyncThunk2;\n  };\n  return createAsyncThunk2;\n}();\nfunction unwrapResult(action) {\n  if (action.meta && action.meta.rejectedWithValue) {\n    throw action.payload;\n  }\n  if (action.error) {\n    throw action.error;\n  }\n  return action.payload;\n}\nfunction isThenable(value) {\n  return value !== null && typeof value === \"object\" && typeof value.then === \"function\";\n}\n// src/matchers.ts\nvar matches = function (matcher, action) {\n  if (hasMatchFunction(matcher)) {\n    return matcher.match(action);\n  } else {\n    return matcher(action);\n  }\n};\nfunction isAnyOf() {\n  var matchers = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    matchers[_i] = arguments[_i];\n  }\n  return function (action) {\n    return matchers.some(function (matcher) {\n      return matches(matcher, action);\n    });\n  };\n}\nfunction isAllOf() {\n  var matchers = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    matchers[_i] = arguments[_i];\n  }\n  return function (action) {\n    return matchers.every(function (matcher) {\n      return matches(matcher, action);\n    });\n  };\n}\nfunction hasExpectedRequestMetadata(action, validStatus) {\n  if (!action || !action.meta) return false;\n  var hasValidRequestId = typeof action.meta.requestId === \"string\";\n  var hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;\n  return hasValidRequestId && hasValidRequestStatus;\n}\nfunction isAsyncThunkArray(a) {\n  return typeof a[0] === \"function\" && \"pending\" in a[0] && \"fulfilled\" in a[0] && \"rejected\" in a[0];\n}\nfunction isPending() {\n  var asyncThunks = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    asyncThunks[_i] = arguments[_i];\n  }\n  if (asyncThunks.length === 0) {\n    return function (action) {\n      return hasExpectedRequestMetadata(action, [\"pending\"]);\n    };\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isPending()(asyncThunks[0]);\n  }\n  return function (action) {\n    var matchers = asyncThunks.map(function (asyncThunk) {\n      return asyncThunk.pending;\n    });\n    var combinedMatcher = isAnyOf.apply(void 0, matchers);\n    return combinedMatcher(action);\n  };\n}\nfunction isRejected() {\n  var asyncThunks = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    asyncThunks[_i] = arguments[_i];\n  }\n  if (asyncThunks.length === 0) {\n    return function (action) {\n      return hasExpectedRequestMetadata(action, [\"rejected\"]);\n    };\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejected()(asyncThunks[0]);\n  }\n  return function (action) {\n    var matchers = asyncThunks.map(function (asyncThunk) {\n      return asyncThunk.rejected;\n    });\n    var combinedMatcher = isAnyOf.apply(void 0, matchers);\n    return combinedMatcher(action);\n  };\n}\nfunction isRejectedWithValue() {\n  var asyncThunks = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    asyncThunks[_i] = arguments[_i];\n  }\n  var hasFlag = function (action) {\n    return action && action.meta && action.meta.rejectedWithValue;\n  };\n  if (asyncThunks.length === 0) {\n    return function (action) {\n      var combinedMatcher = isAllOf(isRejected.apply(void 0, asyncThunks), hasFlag);\n      return combinedMatcher(action);\n    };\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejectedWithValue()(asyncThunks[0]);\n  }\n  return function (action) {\n    var combinedMatcher = isAllOf(isRejected.apply(void 0, asyncThunks), hasFlag);\n    return combinedMatcher(action);\n  };\n}\nfunction isFulfilled() {\n  var asyncThunks = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    asyncThunks[_i] = arguments[_i];\n  }\n  if (asyncThunks.length === 0) {\n    return function (action) {\n      return hasExpectedRequestMetadata(action, [\"fulfilled\"]);\n    };\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isFulfilled()(asyncThunks[0]);\n  }\n  return function (action) {\n    var matchers = asyncThunks.map(function (asyncThunk) {\n      return asyncThunk.fulfilled;\n    });\n    var combinedMatcher = isAnyOf.apply(void 0, matchers);\n    return combinedMatcher(action);\n  };\n}\nfunction isAsyncThunkAction() {\n  var asyncThunks = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    asyncThunks[_i] = arguments[_i];\n  }\n  if (asyncThunks.length === 0) {\n    return function (action) {\n      return hasExpectedRequestMetadata(action, [\"pending\", \"fulfilled\", \"rejected\"]);\n    };\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isAsyncThunkAction()(asyncThunks[0]);\n  }\n  return function (action) {\n    var matchers = [];\n    for (var _i = 0, asyncThunks_1 = asyncThunks; _i < asyncThunks_1.length; _i++) {\n      var asyncThunk = asyncThunks_1[_i];\n      matchers.push(asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled);\n    }\n    var combinedMatcher = isAnyOf.apply(void 0, matchers);\n    return combinedMatcher(action);\n  };\n}\n// src/listenerMiddleware/utils.ts\nvar assertFunction = function (func, expected) {\n  if (typeof func !== \"function\") {\n    throw new TypeError(expected + \" is not a function\");\n  }\n};\nvar noop = function () {};\nvar catchRejection = function (promise2, onError) {\n  if (onError === void 0) {\n    onError = noop;\n  }\n  promise2.catch(onError);\n  return promise2;\n};\nvar addAbortSignalListener = function (abortSignal, callback) {\n  abortSignal.addEventListener(\"abort\", callback, {\n    once: true\n  });\n  return function () {\n    return abortSignal.removeEventListener(\"abort\", callback);\n  };\n};\nvar abortControllerWithReason = function (abortController, reason) {\n  var signal = abortController.signal;\n  if (signal.aborted) {\n    return;\n  }\n  if (!(\"reason\" in signal)) {\n    Object.defineProperty(signal, \"reason\", {\n      enumerable: true,\n      value: reason,\n      configurable: true,\n      writable: true\n    });\n  }\n  ;\n  abortController.abort(reason);\n};\n// src/listenerMiddleware/exceptions.ts\nvar task = \"task\";\nvar listener = \"listener\";\nvar completed = \"completed\";\nvar cancelled = \"cancelled\";\nvar taskCancelled = \"task-\" + cancelled;\nvar taskCompleted = \"task-\" + completed;\nvar listenerCancelled = listener + \"-\" + cancelled;\nvar listenerCompleted = listener + \"-\" + completed;\nvar TaskAbortError = /** @class */function () {\n  function TaskAbortError(code) {\n    this.code = code;\n    this.name = \"TaskAbortError\";\n    this.message = task + \" \" + cancelled + \" (reason: \" + code + \")\";\n  }\n  return TaskAbortError;\n}();\n// src/listenerMiddleware/task.ts\nvar validateActive = function (signal) {\n  if (signal.aborted) {\n    throw new TaskAbortError(signal.reason);\n  }\n};\nfunction raceWithSignal(signal, promise2) {\n  var cleanup = noop;\n  return new Promise(function (resolve, reject) {\n    var notifyRejection = function () {\n      return reject(new TaskAbortError(signal.reason));\n    };\n    if (signal.aborted) {\n      notifyRejection();\n      return;\n    }\n    cleanup = addAbortSignalListener(signal, notifyRejection);\n    promise2.finally(function () {\n      return cleanup();\n    }).then(resolve, reject);\n  }).finally(function () {\n    cleanup = noop;\n  });\n}\nvar runTask = function (task2, cleanUp) {\n  return __async(void 0, null, function () {\n    var value, error_1;\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          _c.trys.push([0, 3, 4, 5]);\n          return [4 /*yield*/, Promise.resolve()];\n        case 1:\n          _c.sent();\n          return [4 /*yield*/, task2()];\n        case 2:\n          value = _c.sent();\n          return [2 /*return*/, {\n            status: \"ok\",\n            value: value\n          }];\n        case 3:\n          error_1 = _c.sent();\n          return [2 /*return*/, {\n            status: error_1 instanceof TaskAbortError ? \"cancelled\" : \"rejected\",\n            error: error_1\n          }];\n        case 4:\n          cleanUp == null ? void 0 : cleanUp();\n          return [7 /*endfinally*/];\n        case 5:\n          return [2 /*return*/];\n      }\n    });\n  });\n};\n\nvar createPause = function (signal) {\n  return function (promise2) {\n    return catchRejection(raceWithSignal(signal, promise2).then(function (output) {\n      validateActive(signal);\n      return output;\n    }));\n  };\n};\nvar createDelay = function (signal) {\n  var pause = createPause(signal);\n  return function (timeoutMs) {\n    return pause(new Promise(function (resolve) {\n      return setTimeout(resolve, timeoutMs);\n    }));\n  };\n};\n// src/listenerMiddleware/index.ts\nvar assign = Object.assign;\nvar INTERNAL_NIL_TOKEN = {};\nvar alm = \"listenerMiddleware\";\nvar createFork = function (parentAbortSignal, parentBlockingPromises) {\n  var linkControllers = function (controller) {\n    return addAbortSignalListener(parentAbortSignal, function () {\n      return abortControllerWithReason(controller, parentAbortSignal.reason);\n    });\n  };\n  return function (taskExecutor, opts) {\n    assertFunction(taskExecutor, \"taskExecutor\");\n    var childAbortController = new AbortController();\n    linkControllers(childAbortController);\n    var result = runTask(function () {\n      return __async(void 0, null, function () {\n        var result2;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              validateActive(parentAbortSignal);\n              validateActive(childAbortController.signal);\n              return [4 /*yield*/, taskExecutor({\n                pause: createPause(childAbortController.signal),\n                delay: createDelay(childAbortController.signal),\n                signal: childAbortController.signal\n              })];\n            case 1:\n              result2 = _c.sent();\n              validateActive(childAbortController.signal);\n              return [2 /*return*/, result2];\n          }\n        });\n      });\n    }, function () {\n      return abortControllerWithReason(childAbortController, taskCompleted);\n    });\n    if (opts == null ? void 0 : opts.autoJoin) {\n      parentBlockingPromises.push(result);\n    }\n    return {\n      result: createPause(parentAbortSignal)(result),\n      cancel: function () {\n        abortControllerWithReason(childAbortController, taskCancelled);\n      }\n    };\n  };\n};\nvar createTakePattern = function (startListening, signal) {\n  var take = function (predicate, timeout) {\n    return __async(void 0, null, function () {\n      var unsubscribe, tuplePromise, promises, output;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            validateActive(signal);\n            unsubscribe = function () {};\n            tuplePromise = new Promise(function (resolve, reject) {\n              var stopListening = startListening({\n                predicate: predicate,\n                effect: function (action, listenerApi) {\n                  listenerApi.unsubscribe();\n                  resolve([action, listenerApi.getState(), listenerApi.getOriginalState()]);\n                }\n              });\n              unsubscribe = function () {\n                stopListening();\n                reject();\n              };\n            });\n            promises = [tuplePromise];\n            if (timeout != null) {\n              promises.push(new Promise(function (resolve) {\n                return setTimeout(resolve, timeout, null);\n              }));\n            }\n            _c.label = 1;\n          case 1:\n            _c.trys.push([1,, 3, 4]);\n            return [4 /*yield*/, raceWithSignal(signal, Promise.race(promises))];\n          case 2:\n            output = _c.sent();\n            validateActive(signal);\n            return [2 /*return*/, output];\n          case 3:\n            unsubscribe();\n            return [7 /*endfinally*/];\n          case 4:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  return function (predicate, timeout) {\n    return catchRejection(take(predicate, timeout));\n  };\n};\nvar getListenerEntryPropsFrom = function (options) {\n  var type = options.type,\n    actionCreator = options.actionCreator,\n    matcher = options.matcher,\n    predicate = options.predicate,\n    effect = options.effect;\n  if (type) {\n    predicate = createAction(type).match;\n  } else if (actionCreator) {\n    type = actionCreator.type;\n    predicate = actionCreator.match;\n  } else if (matcher) {\n    predicate = matcher;\n  } else if (predicate) {} else {\n    throw new Error(\"Creating or removing a listener requires one of the known fields for matching an action\");\n  }\n  assertFunction(effect, \"options.listener\");\n  return {\n    predicate: predicate,\n    type: type,\n    effect: effect\n  };\n};\nvar createListenerEntry = function (options) {\n  var _c = getListenerEntryPropsFrom(options),\n    type = _c.type,\n    predicate = _c.predicate,\n    effect = _c.effect;\n  var id = nanoid();\n  var entry = {\n    id: id,\n    effect: effect,\n    type: type,\n    predicate: predicate,\n    pending: new Set(),\n    unsubscribe: function () {\n      throw new Error(\"Unsubscribe not initialized\");\n    }\n  };\n  return entry;\n};\nvar cancelActiveListeners = function (entry) {\n  entry.pending.forEach(function (controller) {\n    abortControllerWithReason(controller, listenerCancelled);\n  });\n};\nvar createClearListenerMiddleware = function (listenerMap) {\n  return function () {\n    listenerMap.forEach(cancelActiveListeners);\n    listenerMap.clear();\n  };\n};\nvar safelyNotifyError = function (errorHandler, errorToNotify, errorInfo) {\n  try {\n    errorHandler(errorToNotify, errorInfo);\n  } catch (errorHandlerError) {\n    setTimeout(function () {\n      throw errorHandlerError;\n    }, 0);\n  }\n};\nvar addListener = createAction(alm + \"/add\");\nvar clearAllListeners = createAction(alm + \"/removeAll\");\nvar removeListener = createAction(alm + \"/remove\");\nvar defaultErrorHandler = function () {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  console.error.apply(console, __spreadArray([alm + \"/error\"], args));\n};\nfunction createListenerMiddleware(middlewareOptions) {\n  var _this = this;\n  if (middlewareOptions === void 0) {\n    middlewareOptions = {};\n  }\n  var listenerMap = new Map();\n  var extra = middlewareOptions.extra,\n    _c = middlewareOptions.onError,\n    onError = _c === void 0 ? defaultErrorHandler : _c;\n  assertFunction(onError, \"onError\");\n  var insertEntry = function (entry) {\n    entry.unsubscribe = function () {\n      return listenerMap.delete(entry.id);\n    };\n    listenerMap.set(entry.id, entry);\n    return function (cancelOptions) {\n      entry.unsubscribe();\n      if (cancelOptions == null ? void 0 : cancelOptions.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    };\n  };\n  var findListenerEntry = function (comparator) {\n    for (var _i = 0, _c = Array.from(listenerMap.values()); _i < _c.length; _i++) {\n      var entry = _c[_i];\n      if (comparator(entry)) {\n        return entry;\n      }\n    }\n    return void 0;\n  };\n  var startListening = function (options) {\n    var entry = findListenerEntry(function (existingEntry) {\n      return existingEntry.effect === options.effect;\n    });\n    if (!entry) {\n      entry = createListenerEntry(options);\n    }\n    return insertEntry(entry);\n  };\n  var stopListening = function (options) {\n    var _c = getListenerEntryPropsFrom(options),\n      type = _c.type,\n      effect = _c.effect,\n      predicate = _c.predicate;\n    var entry = findListenerEntry(function (entry2) {\n      var matchPredicateOrType = typeof type === \"string\" ? entry2.type === type : entry2.predicate === predicate;\n      return matchPredicateOrType && entry2.effect === effect;\n    });\n    if (entry) {\n      entry.unsubscribe();\n      if (options.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    }\n    return !!entry;\n  };\n  var notifyListener = function (entry, action, api, getOriginalState) {\n    return __async(_this, null, function () {\n      var internalTaskController, take, autoJoinPromises, listenerError_1;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            internalTaskController = new AbortController();\n            take = createTakePattern(startListening, internalTaskController.signal);\n            autoJoinPromises = [];\n            _c.label = 1;\n          case 1:\n            _c.trys.push([1, 3, 4, 6]);\n            entry.pending.add(internalTaskController);\n            return [4 /*yield*/, Promise.resolve(entry.effect(action, assign({}, api, {\n              getOriginalState: getOriginalState,\n              condition: function (predicate, timeout) {\n                return take(predicate, timeout).then(Boolean);\n              },\n              take: take,\n              delay: createDelay(internalTaskController.signal),\n              pause: createPause(internalTaskController.signal),\n              extra: extra,\n              signal: internalTaskController.signal,\n              fork: createFork(internalTaskController.signal, autoJoinPromises),\n              unsubscribe: entry.unsubscribe,\n              subscribe: function () {\n                listenerMap.set(entry.id, entry);\n              },\n              cancelActiveListeners: function () {\n                entry.pending.forEach(function (controller, _, set) {\n                  if (controller !== internalTaskController) {\n                    abortControllerWithReason(controller, listenerCancelled);\n                    set.delete(controller);\n                  }\n                });\n              }\n            })))];\n          case 2:\n            _c.sent();\n            return [3 /*break*/, 6];\n          case 3:\n            listenerError_1 = _c.sent();\n            if (!(listenerError_1 instanceof TaskAbortError)) {\n              safelyNotifyError(onError, listenerError_1, {\n                raisedBy: \"effect\"\n              });\n            }\n            return [3 /*break*/, 6];\n          case 4:\n            return [4 /*yield*/, Promise.allSettled(autoJoinPromises)];\n          case 5:\n            _c.sent();\n            abortControllerWithReason(internalTaskController, listenerCompleted);\n            entry.pending.delete(internalTaskController);\n            return [7 /*endfinally*/];\n          case 6:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  var clearListenerMiddleware = createClearListenerMiddleware(listenerMap);\n  var middleware = function (api) {\n    return function (next) {\n      return function (action) {\n        if (!isAction(action)) {\n          return next(action);\n        }\n        if (addListener.match(action)) {\n          return startListening(action.payload);\n        }\n        if (clearAllListeners.match(action)) {\n          clearListenerMiddleware();\n          return;\n        }\n        if (removeListener.match(action)) {\n          return stopListening(action.payload);\n        }\n        var originalState = api.getState();\n        var getOriginalState = function () {\n          if (originalState === INTERNAL_NIL_TOKEN) {\n            throw new Error(alm + \": getOriginalState can only be called synchronously\");\n          }\n          return originalState;\n        };\n        var result;\n        try {\n          result = next(action);\n          if (listenerMap.size > 0) {\n            var currentState = api.getState();\n            var listenerEntries = Array.from(listenerMap.values());\n            for (var _i = 0, listenerEntries_1 = listenerEntries; _i < listenerEntries_1.length; _i++) {\n              var entry = listenerEntries_1[_i];\n              var runListener = false;\n              try {\n                runListener = entry.predicate(action, currentState, originalState);\n              } catch (predicateError) {\n                runListener = false;\n                safelyNotifyError(onError, predicateError, {\n                  raisedBy: \"predicate\"\n                });\n              }\n              if (!runListener) {\n                continue;\n              }\n              notifyListener(entry, action, api, getOriginalState);\n            }\n          }\n        } finally {\n          originalState = INTERNAL_NIL_TOKEN;\n        }\n        return result;\n      };\n    };\n  };\n  return {\n    middleware: middleware,\n    startListening: startListening,\n    stopListening: stopListening,\n    clearListeners: clearListenerMiddleware\n  };\n}\n// src/autoBatchEnhancer.ts\nvar SHOULD_AUTOBATCH = \"RTK_autoBatch\";\nvar prepareAutoBatched = function () {\n  return function (payload) {\n    var _c;\n    return {\n      payload: payload,\n      meta: (_c = {}, _c[SHOULD_AUTOBATCH] = true, _c)\n    };\n  };\n};\nvar promise;\nvar queueMicrotaskShim = typeof queueMicrotask === \"function\" ? queueMicrotask.bind(typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : globalThis) : function (cb) {\n  return (promise || (promise = Promise.resolve())).then(cb).catch(function (err) {\n    return setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\nvar createQueueWithTimer = function (timeout) {\n  return function (notify) {\n    setTimeout(notify, timeout);\n  };\n};\nvar rAF = typeof window !== \"undefined\" && window.requestAnimationFrame ? window.requestAnimationFrame : createQueueWithTimer(10);\nvar autoBatchEnhancer = function (options) {\n  if (options === void 0) {\n    options = {\n      type: \"raf\"\n    };\n  }\n  return function (next) {\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      var store = next.apply(void 0, args);\n      var notifying = true;\n      var shouldNotifyAtEndOfTick = false;\n      var notificationQueued = false;\n      var listeners = new Set();\n      var queueCallback = options.type === \"tick\" ? queueMicrotaskShim : options.type === \"raf\" ? rAF : options.type === \"callback\" ? options.queueNotification : createQueueWithTimer(options.timeout);\n      var notifyListeners = function () {\n        notificationQueued = false;\n        if (shouldNotifyAtEndOfTick) {\n          shouldNotifyAtEndOfTick = false;\n          listeners.forEach(function (l) {\n            return l();\n          });\n        }\n      };\n      return Object.assign({}, store, {\n        subscribe: function (listener2) {\n          var wrappedListener = function () {\n            return notifying && listener2();\n          };\n          var unsubscribe = store.subscribe(wrappedListener);\n          listeners.add(listener2);\n          return function () {\n            unsubscribe();\n            listeners.delete(listener2);\n          };\n        },\n        dispatch: function (action) {\n          var _a;\n          try {\n            notifying = !((_a = action == null ? void 0 : action.meta) == null ? void 0 : _a[SHOULD_AUTOBATCH]);\n            shouldNotifyAtEndOfTick = !notifying;\n            if (shouldNotifyAtEndOfTick) {\n              if (!notificationQueued) {\n                notificationQueued = true;\n                queueCallback(notifyListeners);\n              }\n            }\n            return store.dispatch(action);\n          } finally {\n            notifying = true;\n          }\n        }\n      });\n    };\n  };\n};\n// src/index.ts\nenableES5();\nexport { EnhancerArray, MiddlewareArray, SHOULD_AUTOBATCH, TaskAbortError, addListener, autoBatchEnhancer, clearAllListeners, configureStore, createAction, createActionCreatorInvariantMiddleware, createAsyncThunk, createDraftSafeSelector, createEntityAdapter, createImmutableStateInvariantMiddleware, createListenerMiddleware, default2 as createNextState, createReducer, createSelector2 as createSelector, createSerializableStateInvariantMiddleware, createSlice, current2 as current, findNonSerializableValue, freeze, getDefaultMiddleware, getType, isAction, isActionCreator, isAllOf, isAnyOf, isAsyncThunkAction, isDraft4 as isDraft, isFSA as isFluxStandardAction, isFulfilled, isImmutableDefault, isPending, isPlain, isPlainObject, isRejected, isRejectedWithValue, miniSerializeError, nanoid, original, prepareAutoBatched, removeListener, unwrapResult };","// @ts-check\n\n/**\n * @param {(() => void) | (() => Promise<void>)} callback\n * @returns {Promise<void>}\n */\nexport default function ready(callback) {\n  return new Promise((resolve, reject) => {\n    function loaded() {\n      let result;\n      try {\n        result = callback();\n      } catch (err) {\n        reject(err);\n\n        return;\n      }\n\n      if (typeof result?.then === 'function') {\n        result.then(resolve).catch(reject);\n      } else {\n        resolve();\n      }\n    }\n\n    if (['interactive', 'complete'].includes(document.readyState)) {\n      loaded();\n    } else {\n      document.addEventListener('DOMContentLoaded', loaded);\n    }\n  });\n}\n","'use strict';\n\nexports.__esModule = true;\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar _mapToZero = require('./mapToZero');\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\nvar _stripStyle = require('./stripStyle');\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\nvar _stepper3 = require('./stepper');\nvar _stepper4 = _interopRequireDefault(_stepper3);\nvar _performanceNow = require('performance-now');\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\nvar _raf = require('raf');\nvar _raf2 = _interopRequireDefault(_raf);\nvar _shouldStopAnimation = require('./shouldStopAnimation');\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\nvar _react = require('react');\nvar _react2 = _interopRequireDefault(_react);\nvar _propTypes = require('prop-types');\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar msPerFrame = 1000 / 60;\nvar Motion = function (_React$Component) {\n  _inherits(Motion, _React$Component);\n  _createClass(Motion, null, [{\n    key: 'propTypes',\n    value: {\n      // TOOD: warn against putting a config in here\n      defaultStyle: _propTypes2['default'].objectOf(_propTypes2['default'].number),\n      style: _propTypes2['default'].objectOf(_propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].object])).isRequired,\n      children: _propTypes2['default'].func.isRequired,\n      onRest: _propTypes2['default'].func\n    },\n    enumerable: true\n  }]);\n  function Motion(props) {\n    var _this = this;\n    _classCallCheck(this, Motion);\n    _React$Component.call(this, props);\n    this.wasAnimating = false;\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyle = null;\n    this.clearUnreadPropStyle = function (destStyle) {\n      var dirty = false;\n      var _state = _this.state;\n      var currentStyle = _state.currentStyle;\n      var currentVelocity = _state.currentVelocity;\n      var lastIdealStyle = _state.lastIdealStyle;\n      var lastIdealVelocity = _state.lastIdealVelocity;\n      for (var key in destStyle) {\n        if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {\n          continue;\n        }\n        var styleValue = destStyle[key];\n        if (typeof styleValue === 'number') {\n          if (!dirty) {\n            dirty = true;\n            currentStyle = _extends({}, currentStyle);\n            currentVelocity = _extends({}, currentVelocity);\n            lastIdealStyle = _extends({}, lastIdealStyle);\n            lastIdealVelocity = _extends({}, lastIdealVelocity);\n          }\n          currentStyle[key] = styleValue;\n          currentVelocity[key] = 0;\n          lastIdealStyle[key] = styleValue;\n          lastIdealVelocity[key] = 0;\n        }\n      }\n      if (dirty) {\n        _this.setState({\n          currentStyle: currentStyle,\n          currentVelocity: currentVelocity,\n          lastIdealStyle: lastIdealStyle,\n          lastIdealVelocity: lastIdealVelocity\n        });\n      }\n    };\n    this.startAnimationIfNecessary = function () {\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        // check if we need to animate in the first place\n        var propsStyle = _this.props.style;\n        if (_shouldStopAnimation2['default'](_this.state.currentStyle, propsStyle, _this.state.currentVelocity)) {\n          if (_this.wasAnimating && _this.props.onRest) {\n            _this.props.onRest();\n          }\n\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.wasAnimating = false;\n          _this.accumulatedTime = 0;\n          return;\n        }\n        _this.wasAnimating = true;\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n        var newLastIdealStyle = {};\n        var newLastIdealVelocity = {};\n        var newCurrentStyle = {};\n        var newCurrentVelocity = {};\n        for (var key in propsStyle) {\n          if (!Object.prototype.hasOwnProperty.call(propsStyle, key)) {\n            continue;\n          }\n          var styleValue = propsStyle[key];\n          if (typeof styleValue === 'number') {\n            newCurrentStyle[key] = styleValue;\n            newCurrentVelocity[key] = 0;\n            newLastIdealStyle[key] = styleValue;\n            newLastIdealVelocity[key] = 0;\n          } else {\n            var newLastIdealStyleValue = _this.state.lastIdealStyle[key];\n            var newLastIdealVelocityValue = _this.state.lastIdealVelocity[key];\n            for (var i = 0; i < framesToCatchUp; i++) {\n              var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n              newLastIdealStyleValue = _stepper[0];\n              newLastIdealVelocityValue = _stepper[1];\n            }\n            var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n            var nextIdealX = _stepper2[0];\n            var nextIdealV = _stepper2[1];\n            newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n            newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n            newLastIdealStyle[key] = newLastIdealStyleValue;\n            newLastIdealVelocity[key] = newLastIdealVelocityValue;\n          }\n        }\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n        _this.setState({\n          currentStyle: newCurrentStyle,\n          currentVelocity: newCurrentVelocity,\n          lastIdealStyle: newLastIdealStyle,\n          lastIdealVelocity: newLastIdealVelocity\n        });\n        _this.unreadPropStyle = null;\n        _this.startAnimationIfNecessary();\n      });\n    };\n    this.state = this.defaultState();\n  }\n  Motion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyle = _props.defaultStyle;\n    var style = _props.style;\n    var currentStyle = defaultStyle || _stripStyle2['default'](style);\n    var currentVelocity = _mapToZero2['default'](currentStyle);\n    return {\n      currentStyle: currentStyle,\n      currentVelocity: currentVelocity,\n      lastIdealStyle: currentStyle,\n      lastIdealVelocity: currentVelocity\n    };\n  };\n\n  // it's possible that currentStyle's value is stale: if props is immediately\n  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n  // at 0 (didn't have time to tick and interpolate even once). If we naively\n  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n  // In reality currentStyle should be 400\n\n  Motion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n  Motion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyle != null) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyle);\n    }\n    this.unreadPropStyle = props.style;\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n  Motion.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n  Motion.prototype.render = function render() {\n    var renderedChildren = this.props.children(this.state.currentStyle);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n  return Motion;\n}(_react2['default'].Component);\nexports['default'] = Motion;\nmodule.exports = exports['default'];\n\n// after checking for unreadPropStyle != null, we manually go set the\n// non-interpolating values (those that are a number, without a spring\n// config)","export function compareId(id1: string, id2: string) {\n  if (id1 === id2) {\n    return 0;\n  }\n\n  if (id1.length === id2.length) {\n    return id1 > id2 ? 1 : -1;\n  } else {\n    return id1.length > id2.length ? 1 : -1;\n  }\n}\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here due to preval */\n// @preval\n// http://www.unicode.org/Public/emoji/5.0/emoji-test.txt\n// This file contains the compressed version of the emoji data from\n// both emoji_map.json and from emoji-mart's emojiIndex and data objects.\n// It's designed to be emitted in an array format to take up less space\n// over the wire.\n\nconst { emojiIndex } = require('emoji-mart');\nlet data = require('emoji-mart/data/all.json');\nconst { uncompress: emojiMartUncompress } = require('emoji-mart/dist/utils/data');\n\nconst emojiMap = require('./emoji_map.json');\nconst { unicodeToFilename } = require('./unicode_to_filename');\nconst { unicodeToUnifiedName } = require('./unicode_to_unified_name');\n\n\nif(data.compressed) {\n  data = emojiMartUncompress(data);\n}\n\nconst emojiMartData = data;\n\nconst excluded       = ['', '', ''];\nconst skinTones      = ['', '', '', '', ''];\nconst shortcodeMap   = {};\n\nconst shortCodesToEmojiData = {};\nconst emojisWithoutShortCodes = [];\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.prototype.hasOwnProperty.call(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  shortcodeMap[emoji.native] = emoji.id;\n});\n\nconst stripModifiers = unicode => {\n  skinTones.forEach(tone => {\n    unicode = unicode.replace(tone, '');\n  });\n\n  return unicode;\n};\n\nObject.keys(emojiMap).forEach(key => {\n  if (excluded.includes(key)) {\n    delete emojiMap[key];\n    return;\n  }\n\n  const normalizedKey = stripModifiers(key);\n  let shortcode       = shortcodeMap[normalizedKey];\n\n  if (!shortcode) {\n    shortcode = shortcodeMap[normalizedKey + '\\uFE0F'];\n  }\n\n  const filename = emojiMap[key];\n\n  const filenameData = [key];\n\n  if (unicodeToFilename(key) !== filename) {\n    // filename can't be derived using unicodeToFilename\n    filenameData.push(filename);\n  }\n\n  if (typeof shortcode === 'undefined') {\n    emojisWithoutShortCodes.push(filenameData);\n  } else {\n    if (!Array.isArray(shortCodesToEmojiData[shortcode])) {\n      shortCodesToEmojiData[shortcode] = [[]];\n    }\n\n    shortCodesToEmojiData[shortcode][0].push(filenameData);\n  }\n});\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.prototype.hasOwnProperty.call(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  const { native } = emoji;\n  let { short_names, search, unified } = emojiMartData.emojis[key];\n\n  if (short_names[0] !== key) {\n    throw new Error('The compresser expects the first short_code to be the ' +\n      'key. It may need to be rewritten if the emoji change such that this ' +\n      'is no longer the case.');\n  }\n\n  short_names = short_names.slice(1); // first short name can be inferred from the key\n\n  const searchData = [native, short_names, search];\n\n  if (unicodeToUnifiedName(native) !== unified) {\n    // unified name can't be derived from unicodeToUnifiedName\n    searchData.push(unified);\n  }\n\n  if (!Array.isArray(shortCodesToEmojiData[key])) {\n    shortCodesToEmojiData[key] = [[]];\n  }\n\n  shortCodesToEmojiData[key].push(searchData);\n});\n\n// JSON.parse/stringify is to emulate what @preval is doing and avoid any\n// inconsistent behavior in dev mode\nmodule.exports = JSON.parse(JSON.stringify([\n  shortCodesToEmojiData,\n  /*\n   * The property `skins` is not found in the current context.\n   * This could potentially lead to issues when interacting with modules or data structures\n   * that expect the presence of `skins` property.\n   * Currently, no definitions or references to `skins` property can be found in:\n   * - {@link node_modules/emoji-mart/dist/utils/data.js}\n   * - {@link node_modules/emoji-mart/data/all.json}\n   * - {@link app/javascript/flavours/glitch/features/emoji/emoji_compressed.d.ts#Skins}\n   * Future refactorings or updates should consider adding definitions or handling for `skins` property.\n   */\n  emojiMartData.skins,\n  emojiMartData.categories,\n  emojiMartData.aliases,\n  emojisWithoutShortCodes,\n]));\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\n// taken from:\n// https://github.com/twitter/twemoji/blob/47732c7/twemoji-generator.js#L848-L866\nexports.unicodeToFilename = (str) => {\n  let result = '';\n  let charCode = 0;\n  let p = 0;\n  let i = 0;\n  while (i < str.length) {\n    charCode = str.charCodeAt(i++);\n    if (p) {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += (0x10000 + ((p - 0xD800) << 10) + (charCode - 0xDC00)).toString(16);\n      p = 0;\n    } else if (0xD800 <= charCode && charCode <= 0xDBFF) {\n      p = charCode;\n    } else {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += charCode.toString(16);\n    }\n  }\n  return result;\n};\n","export function compareId(id1: string, id2: string) {\n  if (id1 === id2) {\n    return 0;\n  }\n\n  if (id1.length === id2.length) {\n    return id1 > id2 ? 1 : -1;\n  } else {\n    return id1.length > id2.length ? 1 : -1;\n  }\n}\n","// turn {x: {val: 1, stiffness: 1, damping: 2}, y: 2} generated by\n// `{x: spring(1, {stiffness: 1, damping: 2}), y: 2}` into {x: 1, y: 2}\n\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = stripStyle;\nfunction stripStyle(style) {\n  var ret = {};\n  for (var key in style) {\n    if (!Object.prototype.hasOwnProperty.call(style, key)) {\n      continue;\n    }\n    ret[key] = typeof style[key] === 'number' ? style[key] : style[key].val;\n  }\n  return ret;\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showLoading = showLoading;\nexports.hideLoading = hideLoading;\nexports.resetLoading = resetLoading;\nexports.loadingBarReducer = loadingBarReducer;\nexports.DEFAULT_SCOPE = exports.RESET = exports.HIDE = exports.SHOW = void 0;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nvar SHOW = 'loading-bar/SHOW';\nexports.SHOW = SHOW;\nvar HIDE = 'loading-bar/HIDE';\nexports.HIDE = HIDE;\nvar RESET = 'loading-bar/RESET';\nexports.RESET = RESET;\nvar DEFAULT_SCOPE = 'default';\nexports.DEFAULT_SCOPE = DEFAULT_SCOPE;\nfunction showLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: SHOW,\n    payload: {\n      scope: scope\n    }\n  };\n}\nfunction hideLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: HIDE,\n    payload: {\n      scope: scope\n    }\n  };\n}\nfunction resetLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: RESET,\n    payload: {\n      scope: scope\n    }\n  };\n}\nfunction loadingBarReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _ref = action.payload || {},\n    _ref$scope = _ref.scope,\n    scope = _ref$scope === void 0 ? DEFAULT_SCOPE : _ref$scope;\n  switch (action.type) {\n    case SHOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, (state[scope] || 0) + 1));\n    case HIDE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, Math.max(0, (state[scope] || 1) - 1)));\n    case RESET:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, 0));\n    default:\n      return state;\n  }\n}","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\nvar __DEV__ = process.env.NODE_ENV !== 'production';\nvar warning = function () {};\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' + format.replace(/%s/g, function () {\n      return args[argIndex++];\n    });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n  warning = function (condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error('`warning(condition, format, ...args)` requires a warning ' + 'message argument');\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\nmodule.exports = warning;","// Like react-motion's Motion, but reduces all animations to cross-fades\n// for the benefit of users with motion sickness.\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport Motion from 'react-motion/lib/Motion';\n\nconst stylesToKeep = ['opacity', 'backgroundOpacity'];\n\nconst extractValue = (value) => {\n  // This is either an object with a \"val\" property or it's a number\n  return (typeof value === 'object' && value && 'val' in value) ? value.val : value;\n};\n\nclass ReducedMotion extends Component {\n\n  static propTypes = {\n    defaultStyle: PropTypes.object,\n    style: PropTypes.object,\n    children: PropTypes.func,\n  };\n\n  render() {\n\n    const { style, defaultStyle, children } = this.props;\n\n    Object.keys(style).forEach(key => {\n      if (stylesToKeep.includes(key)) {\n        return;\n      }\n      // If it's setting an x or height or scale or some other value, we need\n      // to preserve the end-state value without actually animating it\n      style[key] = defaultStyle[key] = extractValue(style[key]);\n    });\n\n    return (\n      <Motion style={style} defaultStyle={defaultStyle}>\n        {children}\n      </Motion>\n    );\n  }\n\n}\n\nexport default ReducedMotion;\n","import Motion from 'react-motion/lib/Motion';\n\nimport { reduceMotion } from '../../../initial_state';\n\nimport ReducedMotion from './reduced_motion';\n\nexport default reduceMotion ? ReducedMotion : Motion;\n","// Like react-motion's Motion, but reduces all animations to cross-fades\n// for the benefit of users with motion sickness.\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport Motion from 'react-motion/lib/Motion';\n\nconst stylesToKeep = ['opacity', 'backgroundOpacity'];\n\nconst extractValue = (value) => {\n  // This is either an object with a \"val\" property or it's a number\n  return (typeof value === 'object' && value && 'val' in value) ? value.val : value;\n};\n\nclass ReducedMotion extends Component {\n\n  static propTypes = {\n    defaultStyle: PropTypes.object,\n    style: PropTypes.object,\n    children: PropTypes.func,\n  };\n\n  render() {\n\n    const { style, defaultStyle, children } = this.props;\n\n    Object.keys(style).forEach(key => {\n      if (stylesToKeep.includes(key)) {\n        return;\n      }\n      // If it's setting an x or height or scale or some other value, we need\n      // to preserve the end-state value without actually animating it\n      style[key] = defaultStyle[key] = extractValue(style[key]);\n    });\n\n    return (\n      <Motion style={style} defaultStyle={defaultStyle}>\n        {children}\n      </Motion>\n    );\n  }\n\n}\n\nexport default ReducedMotion;\n","import Motion from 'react-motion/lib/Motion';\n\nimport { reduceMotion } from 'flavours/glitch/initial_state';\n\nimport ReducedMotion from './reduced_motion';\n\nexport default reduceMotion ? ReducedMotion : Motion;\n","'use strict';\n\nexports.__esModule = true;\nfunction _interopRequire(obj) {\n  return obj && obj.__esModule ? obj['default'] : obj;\n}\nvar _Motion = require('./Motion');\nexports.Motion = _interopRequire(_Motion);\nvar _StaggeredMotion = require('./StaggeredMotion');\nexports.StaggeredMotion = _interopRequire(_StaggeredMotion);\nvar _TransitionMotion = require('./TransitionMotion');\nexports.TransitionMotion = _interopRequire(_TransitionMotion);\nvar _spring = require('./spring');\nexports.spring = _interopRequire(_spring);\nvar _presets = require('./presets');\nexports.presets = _interopRequire(_presets);\nvar _stripStyle = require('./stripStyle');\nexports.stripStyle = _interopRequire(_stripStyle);\n\n// deprecated, dummy warning function\n\nvar _reorderKeys = require('./reorderKeys');\nexports.reorderKeys = _interopRequire(_reorderKeys);","import { memo, useRef, useEffect } from 'react';\n\nimport { decode } from 'blurhash';\n\ninterface Props extends React.HTMLAttributes<HTMLCanvasElement> {\n  hash: string;\n  width?: number;\n  height?: number;\n  dummy?: boolean; // Whether dummy mode is enabled. If enabled, nothing is rendered and canvas left untouched\n  children?: never;\n}\nconst Blurhash: React.FC<Props> = ({\n  hash,\n  width = 32,\n  height = width,\n  dummy = false,\n  ...canvasProps\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const canvas = canvasRef.current!;\n\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width; // resets canvas\n\n    if (dummy || !hash) return;\n\n    try {\n      const pixels = decode(hash, width, height);\n      const ctx = canvas.getContext('2d');\n      const imageData = new ImageData(pixels, width, height);\n\n      ctx?.putImageData(imageData, 0, 0);\n    } catch (err) {\n      console.error('Blurhash decoding failure', { err, hash });\n    }\n  }, [dummy, hash, width, height]);\n\n  return (\n    <canvas {...canvasProps} ref={canvasRef} width={width} height={height} />\n  );\n};\n\nconst MemoizedBlurhash = memo(Blurhash);\n\nexport { MemoizedBlurhash as Blurhash };\n","import { useRef, useEffect } from 'react';\nimport * as React from 'react';\n\nimport { decode } from 'blurhash';\n\ninterface Props extends React.HTMLAttributes<HTMLCanvasElement> {\n  hash: string;\n  width?: number;\n  height?: number;\n  dummy?: boolean; // Whether dummy mode is enabled. If enabled, nothing is rendered and canvas left untouched\n  children?: never;\n}\nconst Blurhash: React.FC<Props> = ({\n  hash,\n  width = 32,\n  height = width,\n  dummy = false,\n  ...canvasProps\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const canvas = canvasRef.current!;\n\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width; // resets canvas\n\n    if (dummy || !hash) return;\n\n    try {\n      const pixels = decode(hash, width, height);\n      const ctx = canvas.getContext('2d');\n      const imageData = new ImageData(pixels, width, height);\n\n      ctx?.putImageData(imageData, 0, 0);\n    } catch (err) {\n      console.error('Blurhash decoding failure', { err, hash });\n    }\n  }, [dummy, hash, width, height]);\n\n  return (\n    <canvas {...canvasProps} ref={canvasRef} width={width} height={height} />\n  );\n};\n\nconst MemoizedBlurhash = React.memo(Blurhash);\n\nexport { MemoizedBlurhash as Blurhash };\n","import { openModal } from './modal';\n\nexport const BOOSTS_INIT_MODAL = 'BOOSTS_INIT_MODAL';\nexport const BOOSTS_CHANGE_PRIVACY = 'BOOSTS_CHANGE_PRIVACY';\n\nexport function initBoostModal(props) {\n  return (dispatch, getState) => {\n    const default_privacy = getState().getIn(['compose', 'default_privacy']);\n\n    const privacy = props.status.get('visibility') === 'private' ? 'private' : default_privacy;\n\n    dispatch({\n      type: BOOSTS_INIT_MODAL,\n      privacy,\n    });\n\n    dispatch(openModal({\n      modalType: 'BOOST',\n      modalProps: props,\n    }));\n  };\n}\n\n\nexport function changeBoostPrivacy(privacy) {\n  return dispatch => {\n    dispatch({\n      type: BOOSTS_CHANGE_PRIVACY,\n      privacy,\n    });\n  };\n}\n","import Trie from 'substring-trie';\n\nimport { assetHost } from 'mastodon/utils/config';\n\nimport { autoPlayGif } from '../../initial_state';\n\nimport unicodeMapping from './emoji_unicode_mapping_light';\n\nconst trie = new Trie(Object.keys(unicodeMapping));\n\n// Convert to file names from emojis. (For different variation selector emojis)\nconst emojiFilenames = (emojis) => {\n  return emojis.map(v => unicodeMapping[v].filename);\n};\n\n// Emoji requiring extra borders depending on theme\nconst darkEmoji = emojiFilenames(['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']);\nconst lightEmoji = emojiFilenames(['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']);\n\nconst emojiFilename = (filename) => {\n  const borderedEmoji = (document.body && document.body.classList.contains('theme-mastodon-light')) ? lightEmoji : darkEmoji;\n  return borderedEmoji.includes(filename) ? (filename + '_border') : filename;\n};\n\nconst emojifyTextNode = (node, customEmojis) => {\n  const VS15 = 0xFE0E;\n  const VS16 = 0xFE0F;\n\n  let str = node.textContent;\n\n  const fragment = new DocumentFragment();\n  let i = 0;\n\n  for (;;) {\n    let unicode_emoji;\n\n    // Skip to the next potential emoji to replace (either custom emoji or custom emoji :shortcode:\n    if (customEmojis === null) {\n      while (i < str.length && !(unicode_emoji = trie.search(str.slice(i)))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    } else {\n      while (i < str.length && str[i] !== ':' && !(unicode_emoji = trie.search(str.slice(i)))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    }\n\n    // We reached the end of the string, nothing to replace\n    if (i === str.length) {\n      break;\n    }\n\n    let rend, replacement = null;\n    if (str[i] === ':') { // Potentially the start of a custom emoji :shortcode:\n      rend = str.indexOf(':', i + 1) + 1;\n\n      // no matching ending ':', skip\n      if (!rend) {\n        i++;\n        continue;\n      }\n\n      const shortcode = str.slice(i, rend);\n      const custom_emoji = customEmojis[shortcode];\n\n      // not a recognized shortcode, skip\n      if (!custom_emoji) {\n        i++;\n        continue;\n      }\n\n      // now got a replacee as ':shortcode:'\n      // if you want additional emoji handler, add statements below which set replacement and return true.\n      const filename = autoPlayGif ? custom_emoji.url : custom_emoji.static_url;\n      replacement = document.createElement('img');\n      replacement.setAttribute('draggable', 'false');\n      replacement.setAttribute('class', 'emojione custom-emoji');\n      replacement.setAttribute('alt', shortcode);\n      replacement.setAttribute('title', shortcode);\n      replacement.setAttribute('src', filename);\n      replacement.setAttribute('data-original', custom_emoji.url);\n      replacement.setAttribute('data-static', custom_emoji.static_url);\n    } else { // start of an unicode emoji\n      rend = i + unicode_emoji.length;\n\n      // If the matched character was followed by VS15 (for selecting text presentation), skip it.\n      if (str.codePointAt(rend - 1) !== VS16 && str.codePointAt(rend) === VS15) {\n        i = rend + 1;\n        continue;\n      }\n\n      const { filename, shortCode } = unicodeMapping[unicode_emoji];\n      const title = shortCode ? `:${shortCode}:` : '';\n\n      replacement = document.createElement('img');\n      replacement.setAttribute('draggable', 'false');\n      replacement.setAttribute('class', 'emojione');\n      replacement.setAttribute('alt', unicode_emoji);\n      replacement.setAttribute('title', title);\n      replacement.setAttribute('src', `${assetHost}/emoji/${emojiFilename(filename)}.svg`);\n    }\n\n    // Add the processed-up-to-now string and the emoji replacement\n    fragment.append(document.createTextNode(str.slice(0, i)));\n    fragment.append(replacement);\n    str = str.slice(rend);\n    i = 0;\n  }\n\n  fragment.append(document.createTextNode(str));\n  node.parentElement.replaceChild(fragment, node);\n};\n\nconst emojifyNode = (node, customEmojis) => {\n  for (const child of node.childNodes) {\n    switch(child.nodeType) {\n    case Node.TEXT_NODE:\n      emojifyTextNode(child, customEmojis);\n      break;\n    case Node.ELEMENT_NODE:\n      if (!child.classList.contains('invisible'))\n        emojifyNode(child, customEmojis);\n      break;\n    }\n  }\n};\n\nconst emojify = (str, customEmojis = {}) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = str;\n\n  if (!Object.keys(customEmojis).length)\n    customEmojis = null;\n\n  emojifyNode(wrapper, customEmojis);\n\n  return wrapper.innerHTML;\n};\n\nexport default emojify;\n\nexport const buildCustomEmojis = (customEmojis) => {\n  const emojis = [];\n\n  customEmojis.forEach(emoji => {\n    const shortcode = emoji.get('shortcode');\n    const url       = autoPlayGif ? emoji.get('url') : emoji.get('static_url');\n    const name      = shortcode.replace(':', '');\n\n    emojis.push({\n      id: name,\n      name,\n      short_names: [name],\n      text: '',\n      emoticons: [],\n      keywords: [name],\n      imageUrl: url,\n      custom: true,\n      customCategory: emoji.get('category'),\n    });\n  });\n\n  return emojis;\n};\n\nexport const categoriesFromEmojis = customEmojis => customEmojis.reduce((set, emoji) => set.add(emoji.get('category') ? `custom-${emoji.get('category')}` : 'custom'), new Set(['custom']));\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\n// taken from:\n// https://github.com/twitter/twemoji/blob/47732c7/twemoji-generator.js#L848-L866\nexports.unicodeToFilename = (str) => {\n  let result = '';\n  let charCode = 0;\n  let p = 0;\n  let i = 0;\n  while (i < str.length) {\n    charCode = str.charCodeAt(i++);\n    if (p) {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += (0x10000 + ((p - 0xD800) << 10) + (charCode - 0xDC00)).toString(16);\n      p = 0;\n    } else if (0xD800 <= charCode && charCode <= 0xDBFF) {\n      p = charCode;\n    } else {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += charCode.toString(16);\n    }\n  }\n  return result;\n};\n","import { openModal } from './modal';\n\nexport const BOOSTS_INIT_MODAL = 'BOOSTS_INIT_MODAL';\nexport const BOOSTS_CHANGE_PRIVACY = 'BOOSTS_CHANGE_PRIVACY';\n\nexport function initBoostModal(props) {\n  return (dispatch, getState) => {\n    const default_privacy = getState().getIn(['compose', 'default_privacy']);\n\n    const privacy = props.status.get('visibility') === 'private' ? 'private' : default_privacy;\n\n    dispatch({\n      type: BOOSTS_INIT_MODAL,\n      privacy,\n    });\n\n    dispatch(openModal({\n      modalType: 'BOOST',\n      modalProps: props,\n    }));\n  };\n}\n\n\nexport function changeBoostPrivacy(privacy) {\n  return dispatch => {\n    dispatch({\n      type: BOOSTS_CHANGE_PRIVACY,\n      privacy,\n    });\n  };\n}\n","export const unescapeHTML = (html) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = html.replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n').replace(/<[^>]*>/g, '');\n  return wrapper.textContent;\n};\n","// APIs for normalizing fullscreen operations. Note that Edge uses\n// the WebKit-prefixed APIs currently (as of Edge 16).\n\nexport const isFullscreen = () => document.fullscreenElement ||\n  document.webkitFullscreenElement ||\n  document.mozFullScreenElement;\n\nexport const exitFullscreen = () => {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  }\n};\n\nexport const requestFullscreen = el => {\n  if (el.requestFullscreen) {\n    el.requestFullscreen();\n  } else if (el.webkitRequestFullscreen) {\n    el.webkitRequestFullscreen();\n  } else if (el.mozRequestFullScreen) {\n    el.mozRequestFullScreen();\n  }\n};\n\nexport const attachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.addEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.addEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.addEventListener('mozfullscreenchange', listener);\n  }\n};\n\nexport const detachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.removeEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.removeEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.removeEventListener('mozfullscreenchange', listener);\n  }\n};\n","'use strict';\n\nexports.__esModule = true;\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nexports['default'] = spring;\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nvar _presets = require('./presets');\nvar _presets2 = _interopRequireDefault(_presets);\nvar defaultConfig = _extends({}, _presets2['default'].noWobble, {\n  precision: 0.01\n});\nfunction spring(val, config) {\n  return _extends({}, defaultConfig, config, {\n    val: val\n  });\n}\nmodule.exports = exports['default'];","// APIs for normalizing fullscreen operations. Note that Edge uses\n// the WebKit-prefixed APIs currently (as of Edge 16).\n\nexport const isFullscreen = () => document.fullscreenElement ||\n  document.webkitFullscreenElement ||\n  document.mozFullScreenElement;\n\nexport const exitFullscreen = () => {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  }\n};\n\nexport const requestFullscreen = el => {\n  if (el.requestFullscreen) {\n    el.requestFullscreen();\n  } else if (el.webkitRequestFullscreen) {\n    el.webkitRequestFullscreen();\n  } else if (el.mozRequestFullScreen) {\n    el.mozRequestFullScreen();\n  }\n};\n\nexport const attachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.addEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.addEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.addEventListener('mozfullscreenchange', listener);\n  }\n};\n\nexport const detachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.removeEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.removeEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.removeEventListener('mozfullscreenchange', listener);\n  }\n};\n","// so it doesn't throw if no window or matchMedia\nvar w = typeof window !== 'undefined' ? window : {\n  screen: {},\n  navigator: {}\n};\nvar matchMedia = (w.matchMedia || function () {\n  return {\n    matches: false\n  };\n}).bind(w);\n// passive events test\n// adapted from https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\nvar passiveOptionAccessed = false;\nvar options = {\n  get passive() {\n    return passiveOptionAccessed = true;\n  }\n};\n// have to set and remove a no-op listener instead of null\n// (which was used previously), because Edge v15 throws an error\n// when providing a null callback.\n// https://github.com/rafgraph/detect-passive-events/pull/3\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nvar noop = function () {};\nw.addEventListener && w.addEventListener('p', noop, options);\nw.removeEventListener && w.removeEventListener('p', noop, false);\nvar supportsPassiveEvents = passiveOptionAccessed;\nvar supportsPointerEvents = ('PointerEvent' in w);\nvar onTouchStartInWindow = ('ontouchstart' in w);\nvar touchEventInWindow = ('TouchEvent' in w);\n// onTouchStartInWindow is the old-old-legacy way to determine a touch device\n// and many websites interpreted it to mean that the device is a touch only phone,\n// so today browsers on a desktop/laptop computer with a touch screen (primary input mouse)\n// have onTouchStartInWindow as false (to prevent from being confused with a\n// touchOnly phone) even though they support the TouchEvents API, so need to check\n// both onTouchStartInWindow and touchEventInWindow for TouchEvent support,\n// however, some browsers (chromium) support the TouchEvents API even when running on\n// a mouse only device (touchEventInWindow true, but onTouchStartInWindow false)\n// so the touchEventInWindow check needs to include an coarse pointer media query\nvar supportsTouchEvents = onTouchStartInWindow || touchEventInWindow && matchMedia('(any-pointer: coarse)').matches;\nvar hasTouch = (w.navigator.maxTouchPoints || 0) > 0 || supportsTouchEvents;\n// userAgent is used as a backup to correct for known device/browser bugs\n// and when the browser doesn't support interaction media queries (pointer and hover)\n// see https://caniuse.com/css-media-interaction\nvar userAgent = w.navigator.userAgent || '';\n// iPads now support a mouse that can hover, however the media query interaction\n// feature results always say iPads only have a coarse pointer that can't hover\n// even when a mouse is connected (anyFine and anyHover are always false),\n// this unfortunately indicates a touch only device but iPads should\n// be classified as a hybrid device, so determine if it is an iPad\n// to indicate it should be treated as a hybrid device with anyHover true\nvar isIPad = matchMedia('(pointer: coarse)').matches &&\n// both iPad and iPhone can \"request desktop site\", which sets the userAgent to Macintosh\n// so need to check both userAgents to determine if it is an iOS device\n// and screen size to separate iPad from iPhone\n/iPad|Macintosh/.test(userAgent) && Math.min(w.screen.width || 0, w.screen.height || 0) >= 768;\nvar hasCoarsePrimaryPointer = (matchMedia('(pointer: coarse)').matches ||\n// if the pointer is not coarse and not fine then the browser doesn't support\n// interaction media queries (see https://caniuse.com/css-media-interaction)\n// so if it has onTouchStartInWindow assume it has a coarse primary pointer\n!matchMedia('(pointer: fine)').matches && onTouchStartInWindow) &&\n// bug in firefox (as of v81) on hybrid windows devices where the interaction media queries\n// always indicate a touch only device (only has a coarse pointer that can't hover)\n// so assume that the primary pointer is not coarse for firefox windows\n!/Windows.*Firefox/.test(userAgent);\nvar hasAnyHoverOrAnyFinePointer = matchMedia('(any-pointer: fine)').matches || matchMedia('(any-hover: hover)').matches ||\n// iPads might have an input device that can hover, so assume it has anyHover\nisIPad ||\n// if no onTouchStartInWindow then the browser is indicating that it is not a touch only device\n// see above note for supportsTouchEvents\n!onTouchStartInWindow;\n// a hybrid device is one that both hasTouch and\n// any input can hover or has a fine pointer, or the primary pointer is not coarse\n// if it's not a hybrid, then if it hasTouch it's touchOnly, otherwise it's mouseOnly\nvar deviceType = hasTouch && (hasAnyHoverOrAnyFinePointer || !hasCoarsePrimaryPointer) ? 'hybrid' : hasTouch ? 'touchOnly' : 'mouseOnly';\nvar primaryInput = deviceType === 'mouseOnly' ? 'mouse' : deviceType === 'touchOnly' ? 'touch' :\n// if the device is a hybrid, then if the primary pointer is coarse\n// assume the primaryInput is touch, otherwise assume it's mouse\nhasCoarsePrimaryPointer ? 'touch' : 'mouse';\nexport { deviceType, primaryInput, supportsPassiveEvents, supportsPointerEvents, supportsTouchEvents };","// currently used to initiate the velocity style object to 0\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = mapToZero;\nfunction mapToZero(obj) {\n  var ret = {};\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      ret[key] = 0;\n    }\n  }\n  return ret;\n}\nmodule.exports = exports['default'];","// stepper is used a lot. Saves allocation to return the same array wrapper.\n// This is fine and danger-free against mutations because the callsite\n// immediately destructures it and gets the numbers inside without passing the\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = stepper;\nvar reusedTuple = [0, 0];\nfunction stepper(secondPerFrame, x, v, destX, k, b, precision) {\n  // Spring stiffness, in kg / s^2\n\n  // for animations, destX is really spring length (spring at rest). initial\n  // position is considered as the stretched/compressed position of a spring\n  var Fspring = -k * (x - destX);\n\n  // Damping, in kg / s\n  var Fdamper = -b * v;\n\n  // usually we put mass here, but for animation purposes, specifying mass is a\n  // bit redundant. you could simply adjust k and b accordingly\n  // let a = (Fspring + Fdamper) / mass;\n  var a = Fspring + Fdamper;\n  var newV = v + a * secondPerFrame;\n  var newX = x + newV * secondPerFrame;\n  if (Math.abs(newV) < precision && Math.abs(newX - destX) < precision) {\n    reusedTuple[0] = destX;\n    reusedTuple[1] = 0;\n    return reusedTuple;\n  }\n  reusedTuple[0] = newX;\n  reusedTuple[1] = newV;\n  return reusedTuple;\n}\nmodule.exports = exports[\"default\"];\n// array reference around.","// Generated by CoffeeScript 1.7.1\n(function () {\n  var getNanoSeconds, hrtime, loadTime;\n  if (typeof performance !== \"undefined\" && performance !== null && performance.now) {\n    module.exports = function () {\n      return performance.now();\n    };\n  } else if (typeof process !== \"undefined\" && process !== null && process.hrtime) {\n    module.exports = function () {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function () {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function () {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function () {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n}).call(this);","var now = require('performance-now'),\n  root = typeof window === 'undefined' ? global : window,\n  vendors = ['moz', 'webkit'],\n  suffix = 'AnimationFrame',\n  raf = root['request' + suffix],\n  caf = root['cancel' + suffix] || root['cancelRequest' + suffix];\nfor (var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix];\n  caf = root[vendors[i] + 'Cancel' + suffix] || root[vendors[i] + 'CancelRequest' + suffix];\n}\n\n// Some versions of FF have rAF but not cAF\nif (!raf || !caf) {\n  var last = 0,\n    id = 0,\n    queue = [],\n    frameDuration = 1000 / 60;\n  raf = function (callback) {\n    if (queue.length === 0) {\n      var _now = now(),\n        next = Math.max(0, frameDuration - (_now - last));\n      last = next + _now;\n      setTimeout(function () {\n        var cp = queue.slice(0);\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0;\n        for (var i = 0; i < cp.length; i++) {\n          if (!cp[i].cancelled) {\n            try {\n              cp[i].callback(last);\n            } catch (e) {\n              setTimeout(function () {\n                throw e;\n              }, 0);\n            }\n          }\n        }\n      }, Math.round(next));\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    });\n    return id;\n  };\n  caf = function (handle) {\n    for (var i = 0; i < queue.length; i++) {\n      if (queue[i].handle === handle) {\n        queue[i].cancelled = true;\n      }\n    }\n  };\n}\nmodule.exports = function (fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn);\n};\nmodule.exports.cancel = function () {\n  caf.apply(root, arguments);\n};\nmodule.exports.polyfill = function (object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf;\n  object.cancelAnimationFrame = caf;\n};","// usage assumption: currentStyle values have already been rendered but it says\n// nothing of whether currentStyle is stale (see unreadPropStyle)\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = shouldStopAnimation;\nfunction shouldStopAnimation(currentStyle, style, currentVelocity) {\n  for (var key in style) {\n    if (!Object.prototype.hasOwnProperty.call(style, key)) {\n      continue;\n    }\n    if (currentVelocity[key] !== 0) {\n      return false;\n    }\n    var styleValue = typeof style[key] === 'number' ? style[key] : style[key].val;\n    // stepper will have already taken care of rounding precision errors, so\n    // won't have such thing as 0.9999 !=== 1\n    if (currentStyle[key] !== styleValue) {\n      return false;\n    }\n  }\n  return true;\n}\nmodule.exports = exports['default'];","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport { initBoostModal } from 'mastodon/actions/boosts';\nimport { replyCompose } from 'mastodon/actions/compose';\nimport { reblog, favourite, unreblog, unfavourite } from 'mastodon/actions/interactions';\nimport { openModal } from 'mastodon/actions/modal';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport { me, boostModal } from 'mastodon/initial_state';\nimport { makeGetStatus } from 'mastodon/selectors';\n\nconst messages = defineMessages({\n  reply: { id: 'status.reply', defaultMessage: 'Reply' },\n  replyAll: { id: 'status.replyAll', defaultMessage: 'Reply to thread' },\n  reblog: { id: 'status.reblog', defaultMessage: 'Boost' },\n  reblog_private: { id: 'status.reblog_private', defaultMessage: 'Boost with original visibility' },\n  cancel_reblog_private: { id: 'status.cancel_reblog_private', defaultMessage: 'Unboost' },\n  cannot_reblog: { id: 'status.cannot_reblog', defaultMessage: 'This post cannot be boosted' },\n  favourite: { id: 'status.favourite', defaultMessage: 'Favorite' },\n  replyConfirm: { id: 'confirmations.reply.confirm', defaultMessage: 'Reply' },\n  replyMessage: { id: 'confirmations.reply.message', defaultMessage: 'Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?' },\n  open: { id: 'status.open', defaultMessage: 'Expand this status' },\n});\n\nconst makeMapStateToProps = () => {\n  const getStatus = makeGetStatus();\n\n  const mapStateToProps = (state, { statusId }) => ({\n    status: getStatus(state, { id: statusId }),\n    askReplyConfirmation: state.getIn(['compose', 'text']).trim().length !== 0,\n  });\n\n  return mapStateToProps;\n};\n\nclass Footer extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    statusId: PropTypes.string.isRequired,\n    status: ImmutablePropTypes.map.isRequired,\n    intl: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    askReplyConfirmation: PropTypes.bool,\n    withOpenButton: PropTypes.bool,\n    onClose: PropTypes.func,\n  };\n\n  _performReply = () => {\n    const { dispatch, status, onClose } = this.props;\n    const { router } = this.context;\n\n    if (onClose) {\n      onClose(true);\n    }\n\n    dispatch(replyCompose(status, router.history));\n  };\n\n  handleReplyClick = () => {\n    const { dispatch, askReplyConfirmation, status, intl } = this.props;\n    const { signedIn } = this.context.identity;\n\n    if (signedIn) {\n      if (askReplyConfirmation) {\n        dispatch(openModal({\n          modalType: 'CONFIRM',\n          modalProps: {\n            message: intl.formatMessage(messages.replyMessage),\n            confirm: intl.formatMessage(messages.replyConfirm),\n            onConfirm: this._performReply,\n          },\n        }));\n      } else {\n        this._performReply();\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reply',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleFavouriteClick = () => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.context.identity;\n\n    if (signedIn) {\n      if (status.get('favourited')) {\n        dispatch(unfavourite(status));\n      } else {\n        dispatch(favourite(status));\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'favourite',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  _performReblog = (status, privacy) => {\n    const { dispatch } = this.props;\n    dispatch(reblog(status, privacy));\n  };\n\n  handleReblogClick = e => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.context.identity;\n\n    if (signedIn) {\n      if (status.get('reblogged')) {\n        dispatch(unreblog(status));\n      } else if ((e && e.shiftKey) || !boostModal) {\n        this._performReblog(status);\n      } else {\n        dispatch(initBoostModal({ status, onReblog: this._performReblog }));\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reblog',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleOpenClick = e => {\n    const { router } = this.context;\n\n    if (e.button !== 0 || !router) {\n      return;\n    }\n\n    const { status, onClose } = this.props;\n\n    if (onClose) {\n      onClose();\n    }\n\n    router.history.push(`/@${status.getIn(['account', 'acct'])}/${status.get('id')}`);\n  };\n\n  render () {\n    const { status, intl, withOpenButton } = this.props;\n\n    const publicStatus  = ['public', 'unlisted'].includes(status.get('visibility'));\n    const reblogPrivate = status.getIn(['account', 'id']) === me && status.get('visibility') === 'private';\n\n    let replyIcon, replyTitle;\n\n    if (status.get('in_reply_to_id', null) === null) {\n      replyIcon = 'reply';\n      replyTitle = intl.formatMessage(messages.reply);\n    } else {\n      replyIcon = 'reply-all';\n      replyTitle = intl.formatMessage(messages.replyAll);\n    }\n\n    let reblogTitle = '';\n\n    if (status.get('reblogged')) {\n      reblogTitle = intl.formatMessage(messages.cancel_reblog_private);\n    } else if (publicStatus) {\n      reblogTitle = intl.formatMessage(messages.reblog);\n    } else if (reblogPrivate) {\n      reblogTitle = intl.formatMessage(messages.reblog_private);\n    } else {\n      reblogTitle = intl.formatMessage(messages.cannot_reblog);\n    }\n\n    return (\n      <div className='picture-in-picture__footer'>\n        <IconButton className='status__action-bar-button' title={replyTitle} icon={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? 'reply' : replyIcon} onClick={this.handleReplyClick} counter={status.get('replies_count')} />\n        <IconButton className={classNames('status__action-bar-button', { reblogPrivate })} disabled={!publicStatus && !reblogPrivate}  active={status.get('reblogged')} title={reblogTitle} icon='retweet' onClick={this.handleReblogClick} counter={status.get('reblogs_count')} />\n        <IconButton className='status__action-bar-button star-icon' animate active={status.get('favourited')} title={intl.formatMessage(messages.favourite)} icon='star' onClick={this.handleFavouriteClick} counter={status.get('favourites_count')} />\n        {withOpenButton && <IconButton className='status__action-bar-button' title={intl.formatMessage(messages.open)} icon='external-link' onClick={this.handleOpenClick} href={`/@${status.getIn(['account', 'acct'])}/${status.get('id')}`} />}\n      </div>\n    );\n  }\n\n}\n\nexport default connect(makeMapStateToProps)(injectIntl(Footer));\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport { initBoostModal } from 'flavours/glitch/actions/boosts';\nimport { replyCompose } from 'flavours/glitch/actions/compose';\nimport { reblog, favourite, unreblog, unfavourite } from 'flavours/glitch/actions/interactions';\nimport { openModal } from 'flavours/glitch/actions/modal';\nimport { IconButton } from 'flavours/glitch/components/icon_button';\nimport { me, boostModal } from 'flavours/glitch/initial_state';\nimport { makeGetStatus } from 'flavours/glitch/selectors';\n\nconst messages = defineMessages({\n  reply: { id: 'status.reply', defaultMessage: 'Reply' },\n  replyAll: { id: 'status.replyAll', defaultMessage: 'Reply to thread' },\n  reblog: { id: 'status.reblog', defaultMessage: 'Boost' },\n  reblog_private: { id: 'status.reblog_private', defaultMessage: 'Boost with original visibility' },\n  cancel_reblog_private: { id: 'status.cancel_reblog_private', defaultMessage: 'Unboost' },\n  cannot_reblog: { id: 'status.cannot_reblog', defaultMessage: 'This post cannot be boosted' },\n  favourite: { id: 'status.favourite', defaultMessage: 'Favorite' },\n  replyConfirm: { id: 'confirmations.reply.confirm', defaultMessage: 'Reply' },\n  replyMessage: { id: 'confirmations.reply.message', defaultMessage: 'Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?' },\n  open: { id: 'status.open', defaultMessage: 'Expand this status' },\n});\n\nconst makeMapStateToProps = () => {\n  const getStatus = makeGetStatus();\n\n  const mapStateToProps = (state, { statusId }) => ({\n    status: getStatus(state, { id: statusId }),\n    askReplyConfirmation: state.getIn(['compose', 'text']).trim().length !== 0,\n    showReplyCount: state.getIn(['local_settings', 'show_reply_count']),\n  });\n\n  return mapStateToProps;\n};\n\nclass Footer extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    statusId: PropTypes.string.isRequired,\n    status: ImmutablePropTypes.map.isRequired,\n    intl: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    askReplyConfirmation: PropTypes.bool,\n    showReplyCount: PropTypes.bool,\n    withOpenButton: PropTypes.bool,\n    onClose: PropTypes.func,\n  };\n\n  _performReply = () => {\n    const { dispatch, status, onClose } = this.props;\n    const { router } = this.context;\n\n    if (onClose) {\n      onClose(true);\n    }\n\n    dispatch(replyCompose(status, router.history));\n  };\n\n  handleReplyClick = () => {\n    const { dispatch, askReplyConfirmation, status, intl } = this.props;\n    const { signedIn } = this.context.identity;\n\n    if (signedIn) {\n      if (askReplyConfirmation) {\n        dispatch(openModal({\n          modalType: 'CONFIRM',\n          modalProps: {\n            message: intl.formatMessage(messages.replyMessage),\n            confirm: intl.formatMessage(messages.replyConfirm),\n            onConfirm: this._performReply,\n          },\n        }));\n      } else {\n        this._performReply();\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reply',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleFavouriteClick = () => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.context.identity;\n\n    if (signedIn) {\n      if (status.get('favourited')) {\n        dispatch(unfavourite(status));\n      } else {\n        dispatch(favourite(status));\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'favourite',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  _performReblog = (privacy) => {\n    const { dispatch, status } = this.props;\n    dispatch(reblog(status, privacy));\n  };\n\n  handleReblogClick = e => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.context.identity;\n\n    if (signedIn) {\n      if (status.get('reblogged')) {\n        dispatch(unreblog(status));\n      } else if ((e && e.shiftKey) || !boostModal) {\n        this._performReblog();\n      } else {\n        dispatch(initBoostModal({ status, onReblog: this._performReblog }));\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reblog',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleOpenClick = e => {\n    const { router } = this.context;\n\n    if (e.button !== 0 || !router) {\n      return;\n    }\n\n    const { status, onClose } = this.props;\n\n    if (onClose) {\n      onClose();\n    }\n\n    router.history.push(`/@${status.getIn(['account', 'acct'])}/${status.get('id')}`);\n  };\n\n  render () {\n    const { status, intl, showReplyCount, withOpenButton } = this.props;\n\n    const publicStatus  = ['public', 'unlisted'].includes(status.get('visibility'));\n    const reblogPrivate = status.getIn(['account', 'id']) === me && status.get('visibility') === 'private';\n\n    let replyIcon, replyTitle;\n\n    if (status.get('in_reply_to_id', null) === null) {\n      replyIcon = 'reply';\n      replyTitle = intl.formatMessage(messages.reply);\n    } else {\n      replyIcon = 'reply-all';\n      replyTitle = intl.formatMessage(messages.replyAll);\n    }\n\n    let reblogTitle = '';\n\n    if (status.get('reblogged')) {\n      reblogTitle = intl.formatMessage(messages.cancel_reblog_private);\n    } else if (publicStatus) {\n      reblogTitle = intl.formatMessage(messages.reblog);\n    } else if (reblogPrivate) {\n      reblogTitle = intl.formatMessage(messages.reblog_private);\n    } else {\n      reblogTitle = intl.formatMessage(messages.cannot_reblog);\n    }\n\n    let replyButton = null;\n    if (showReplyCount) {\n      replyButton = (\n        <IconButton\n          className='status__action-bar-button'\n          title={replyTitle}\n          icon={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? 'reply' : replyIcon}\n          onClick={this.handleReplyClick}\n          counter={status.get('replies_count')}\n          obfuscateCount\n        />\n      );\n    } else {\n      replyButton = (\n        <IconButton\n          className='status__action-bar-button'\n          title={replyTitle}\n          icon={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? 'reply' : replyIcon}\n          onClick={this.handleReplyClick}\n        />\n      );\n    }\n\n    return (\n      <div className='picture-in-picture__footer'>\n        {replyButton}\n        <IconButton className={classNames('status__action-bar-button', { reblogPrivate })} disabled={!publicStatus && !reblogPrivate}  active={status.get('reblogged')} title={reblogTitle} icon='retweet' onClick={this.handleReblogClick} counter={status.get('reblogs_count')} />\n        <IconButton className='status__action-bar-button star-icon' animate active={status.get('favourited')} title={intl.formatMessage(messages.favourite)} icon='star' onClick={this.handleFavouriteClick} counter={status.get('favourites_count')} />\n        {withOpenButton && <IconButton className='status__action-bar-button' title={intl.formatMessage(messages.open)} icon='external-link' onClick={this.handleOpenClick} href={status.get('url')} />}\n      </div>\n    );\n  }\n\n}\n\nexport default connect(makeMapStateToProps)(injectIntl(Footer));\n","// NB: This function can still return unsafe HTML\nexport const unescapeHTML = (html) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = html.replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n').replace(/<[^>]*>/g, '');\n  return wrapper.textContent;\n};\n","/** A function that accepts a potential \"extra argument\" value to be injected later,\r\n * and returns an instance of the thunk middleware that uses that value\r\n */\nfunction createThunkMiddleware(extraArgument) {\n  // Standard Redux middleware definition pattern:\n  // See: https://redux.js.org/tutorials/fundamentals/part-4-store#writing-custom-middleware\n  var middleware = function middleware(_ref) {\n    var dispatch = _ref.dispatch,\n      getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        // The thunk middleware looks for any functions that were passed to `store.dispatch`.\n        // If this \"action\" is really a function, call it and return the result.\n        if (typeof action === 'function') {\n          // Inject the store's `dispatch` and `getState` methods, as well as any \"extra arg\"\n          return action(dispatch, getState, extraArgument);\n        } // Otherwise, pass the action down the middleware chain as usual\n\n        return next(action);\n      };\n    };\n  };\n  return middleware;\n}\nvar thunk = createThunkMiddleware(); // Attach the factory function so users can create a customized version\n// with whatever \"extra arg\" they want to inject into their thunks\n\nthunk.withExtraArgument = createThunkMiddleware;\nexport default thunk;","import Trie from 'substring-trie';\n\nimport { autoPlayGif, useSystemEmojiFont } from 'flavours/glitch/initial_state';\nimport { assetHost } from 'flavours/glitch/utils/config';\n\nimport unicodeMapping from './emoji_unicode_mapping_light';\n\nconst trie = new Trie(Object.keys(unicodeMapping));\n\n// Convert to file names from emojis. (For different variation selector emojis)\nconst emojiFilenames = (emojis) => {\n  return emojis.map(v => unicodeMapping[v].filename);\n};\n\n// Emoji requiring extra borders depending on theme\nconst darkEmoji = emojiFilenames(['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']);\nconst lightEmoji = emojiFilenames(['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']);\n\nconst emojiFilename = (filename) => {\n  const borderedEmoji = (document.body && document.body.classList.contains('skin-mastodon-light')) ? lightEmoji : darkEmoji;\n  return borderedEmoji.includes(filename) ? (filename + '_border') : filename;\n};\n\nconst emojifyTextNode = (node, customEmojis) => {\n  const VS15 = 0xFE0E;\n  const VS16 = 0xFE0F;\n\n  let str = node.textContent;\n\n  const fragment = new DocumentFragment();\n  let i = 0;\n\n  for (;;) {\n    let unicode_emoji;\n\n    // Skip to the next potential emoji to replace (either custom emoji or custom emoji :shortcode:)\n    if (customEmojis === null) {\n      while (i < str.length && (useSystemEmojiFont || !(unicode_emoji = trie.search(str.slice(i))))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    } else {\n      while (i < str.length && str[i] !== ':' && (useSystemEmojiFont || !(unicode_emoji = trie.search(str.slice(i))))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    }\n\n    // We reached the end of the string, nothing to replace\n    if (i === str.length) {\n      break;\n    }\n\n    let rend, replacement = null;\n    if (str[i] === ':') { // Potentially the start of a custom emoji :shortcode:\n      rend = str.indexOf(':', i + 1) + 1;\n\n      // no matching ending ':', skip\n      if (!rend) {\n        i++;\n        continue;\n      }\n\n      const shortcode = str.slice(i, rend);\n      const custom_emoji = customEmojis[shortcode];\n\n      // not a recognized shortcode, skip\n      if (!custom_emoji) {\n        i++;\n        continue;\n      }\n\n      // now got a replacee as ':shortcode:'\n      // if you want additional emoji handler, add statements below which set replacement and return true.\n      const filename = autoPlayGif ? custom_emoji.url : custom_emoji.static_url;\n      replacement = document.createElement('img');\n      replacement.setAttribute('draggable', 'false');\n      replacement.setAttribute('class', 'emojione custom-emoji');\n      replacement.setAttribute('alt', shortcode);\n      replacement.setAttribute('title', shortcode);\n      replacement.setAttribute('src', filename);\n      replacement.setAttribute('data-original', custom_emoji.url);\n      replacement.setAttribute('data-static', custom_emoji.static_url);\n    } else { // start of an unicode emoji\n      rend = i + unicode_emoji.length;\n\n      // If the matched character was followed by VS15 (for selecting text presentation), skip it.\n      if (str.codePointAt(rend - 1) !== VS16 && str.codePointAt(rend) === VS15) {\n        i = rend + 1;\n        continue;\n      }\n\n      const { filename, shortCode } = unicodeMapping[unicode_emoji];\n      const title = shortCode ? `:${shortCode}:` : '';\n\n      replacement = document.createElement('img');\n      replacement.setAttribute('draggable', 'false');\n      replacement.setAttribute('class', 'emojione');\n      replacement.setAttribute('alt', unicode_emoji);\n      replacement.setAttribute('title', title);\n      replacement.setAttribute('src', `${assetHost}/emoji/${emojiFilename(filename)}.svg`);\n    }\n\n    // Add the processed-up-to-now string and the emoji replacement\n    fragment.append(document.createTextNode(str.slice(0, i)));\n    fragment.append(replacement);\n    str = str.slice(rend);\n    i = 0;\n  }\n\n  fragment.append(document.createTextNode(str));\n  node.parentElement.replaceChild(fragment, node);\n};\n\nconst emojifyNode = (node, customEmojis) => {\n  for (const child of node.childNodes) {\n    switch(child.nodeType) {\n    case Node.TEXT_NODE:\n      emojifyTextNode(child, customEmojis);\n      break;\n    case Node.ELEMENT_NODE:\n      if (!child.classList.contains('invisible'))\n        emojifyNode(child, customEmojis);\n      break;\n    }\n  }\n};\n\nconst emojify = (str, customEmojis = {}) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = str;\n\n  if (!Object.keys(customEmojis).length)\n    customEmojis = null;\n\n  emojifyNode(wrapper, customEmojis);\n\n  return wrapper.innerHTML;\n};\n\nexport default emojify;\nexport { unicodeMapping };\n\nexport const buildCustomEmojis = (customEmojis) => {\n  const emojis = [];\n\n  customEmojis.forEach(emoji => {\n    const shortcode = emoji.get('shortcode');\n    const url       = autoPlayGif ? emoji.get('url') : emoji.get('static_url');\n    const name      = shortcode.replace(':', '');\n\n    emojis.push({\n      id: name,\n      name,\n      short_names: [name],\n      text: '',\n      emoticons: [],\n      keywords: [name],\n      imageUrl: url,\n      custom: true,\n      customCategory: emoji.get('category'),\n    });\n  });\n\n  return emojis;\n};\n\nexport const categoriesFromEmojis = customEmojis => customEmojis.reduce((set, emoji) => set.add(emoji.get('category') ? `custom-${emoji.get('category')}` : 'custom'), new Set(['custom']));\n","/*\nCopyright (c) 2020 by Alex Permyakov (https://codepen.io/alexdevp/pen/RNELPV)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nconst hex2rgba = (hex, alpha = 1) => {\n  const [r, g, b] = hex.match(/\\w\\w/g).map(x => parseInt(x, 16));\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n};\n\nexport default class Visualizer {\n\n  constructor (tickSize) {\n    this.tickSize = tickSize;\n  }\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n    if (canvas) {\n      this.context = canvas.getContext('2d');\n    }\n  }\n\n  setAudioContext(context, source) {\n    const analyser = context.createAnalyser();\n\n    analyser.smoothingTimeConstant = 0.6;\n    analyser.fftSize = 2048;\n\n    source.connect(analyser);\n\n    this.analyser = analyser;\n  }\n\n  getTickPoints (count) {\n    const coords = [];\n\n    for(let i = 0; i < count; i++) {\n      const rad = Math.PI * 2 * i / count;\n      coords.push({ x: Math.cos(rad), y: -Math.sin(rad) });\n    }\n\n    return coords;\n  }\n\n  drawTick (cx, cy, mainColor, x1, y1, x2, y2) {\n    const dx1 = Math.ceil(cx + x1);\n    const dy1 = Math.ceil(cy + y1);\n    const dx2 = Math.ceil(cx + x2);\n    const dy2 = Math.ceil(cy + y2);\n\n    const gradient = this.context.createLinearGradient(dx1, dy1, dx2, dy2);\n\n    const lastColor = hex2rgba(mainColor, 0);\n\n    gradient.addColorStop(0, mainColor);\n    gradient.addColorStop(0.6, mainColor);\n    gradient.addColorStop(1, lastColor);\n\n    this.context.beginPath();\n    this.context.strokeStyle = gradient;\n    this.context.lineWidth = 2;\n    this.context.moveTo(dx1, dy1);\n    this.context.lineTo(dx2, dy2);\n    this.context.stroke();\n  }\n\n  getTicks (count, size, radius, scaleCoefficient) {\n    const ticks = this.getTickPoints(count);\n    const lesser = 200;\n    const m = [];\n    const bufferLength = this.analyser ? this.analyser.frequencyBinCount : 0;\n    const frequencyData = new Uint8Array(bufferLength);\n    const allScales = [];\n\n    if (this.analyser) {\n      this.analyser.getByteFrequencyData(frequencyData);\n    }\n\n    ticks.forEach((tick, i) => {\n      const coef = 1 - i / (ticks.length * 2.5);\n\n      let delta = ((frequencyData[i] || 0) - lesser * coef) * scaleCoefficient;\n\n      if (delta < 0) {\n        delta = 0;\n      }\n\n      const k = radius / (radius - (size + delta));\n\n      const x1 = tick.x * (radius - size);\n      const y1 = tick.y * (radius - size);\n      const x2 = x1 * k;\n      const y2 = y1 * k;\n\n      m.push({ x1, y1, x2, y2 });\n\n      if (i < 20) {\n        let scale = delta / (200 * scaleCoefficient);\n        scale = scale < 1 ? 1 : scale;\n        allScales.push(scale);\n      }\n    });\n\n    const scale = allScales.reduce((pv, cv) => pv + cv, 0) / allScales.length;\n\n    return m.map(({ x1, y1, x2, y2 }) => ({\n      x1: x1,\n      y1: y1,\n      x2: x2 * scale,\n      y2: y2 * scale,\n    }));\n  }\n\n  clear (width, height) {\n    this.context.clearRect(0, 0, width, height);\n  }\n\n  draw (cx, cy, color, radius, coefficient) {\n    this.context.save();\n\n    const ticks = this.getTicks(parseInt(360 * coefficient), this.tickSize, radius, coefficient);\n\n    ticks.forEach(tick => {\n      this.drawTick(cx, cy, color, tick.x1, tick.y1, tick.x2, tick.y2);\n    });\n\n    this.context.restore();\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle, debounce } from 'lodash';\n\nimport { Icon }  from 'mastodon/components/icon';\nimport { formatTime, getPointerPosition, fileNameFromURL } from 'mastodon/features/video';\n\nimport { Blurhash } from '../../components/blurhash';\nimport { displayMedia, useBlurhash } from '../../initial_state';\n\nimport Visualizer from './visualizer';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  download: { id: 'video.download', defaultMessage: 'Download file' },\n  hide: { id: 'audio.hide', defaultMessage: 'Hide audio' },\n});\n\nconst TICK_SIZE = 10;\nconst PADDING   = 180;\n\nclass Audio extends PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    poster: PropTypes.string,\n    duration: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    sensitive: PropTypes.bool,\n    editable: PropTypes.bool,\n    fullscreen: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    cacheWidth: PropTypes.func,\n    visible: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    accentColor: PropTypes.string,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    deployPictureInPicture: PropTypes.func,\n  };\n\n  state = {\n    width: this.props.width,\n    currentTime: 0,\n    buffer: 0,\n    duration: null,\n    paused: true,\n    muted: false,\n    volume: 1,\n    dragging: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  constructor (props) {\n    super(props);\n    this.visualizer = new Visualizer(TICK_SIZE);\n  }\n\n  setPlayerRef = c => {\n    this.player = c;\n\n    if (this.player) {\n      this._setDimensions();\n    }\n  };\n\n  _pack() {\n    return {\n      src: this.props.src,\n      volume: this.state.volume,\n      muted: this.state.muted,\n      currentTime: this.audio.currentTime,\n      poster: this.props.poster,\n      backgroundColor: this.props.backgroundColor,\n      foregroundColor: this.props.foregroundColor,\n      accentColor: this.props.accentColor,\n      sensitive: this.props.sensitive,\n      visible: this.props.visible,\n    };\n  }\n\n  _setDimensions () {\n    const width  = this.player.offsetWidth;\n    const height = this.props.fullscreen ? this.player.offsetHeight : (width / (16/9));\n\n    if (this.props.cacheWidth) {\n      this.props.cacheWidth(width);\n    }\n\n    this.setState({ width, height });\n  }\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  setAudioRef = c => {\n    this.audio = c;\n\n    if (this.audio) {\n      this.audio.volume = 1;\n      this.audio.muted = false;\n    }\n  };\n\n  setCanvasRef = c => {\n    this.canvas = c;\n\n    this.visualizer.setCanvas(c);\n  };\n\n  componentDidMount () {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevProps.src !== this.props.src || this.state.width !== prevState.width || this.state.height !== prevState.height || prevProps.accentColor !== this.props.accentColor) {\n      this._clear();\n      this._draw();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleResize);\n\n    if (!this.state.paused && this.audio && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('audio', this._pack());\n    }\n  }\n\n  togglePlay = () => {\n    if (!this.audioContext) {\n      this._initAudioContext();\n    }\n\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.audio.play());\n    } else {\n      this.setState({ paused: true }, () => this.audio.pause());\n    }\n  };\n\n  handleResize = debounce(() => {\n    if (this.player) {\n      this._setDimensions();\n    }\n  }, 250, {\n    trailing: true,\n  });\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      this.audioContext.resume();\n    }\n\n    this._renderCanvas();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n\n    if (this.audioContext) {\n      this.audioContext.suspend();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.audio.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.audio.buffered.end(lastTimeRange) / this.audio.duration * 100) });\n    }\n  };\n\n  toggleMute = () => {\n    const muted = !(this.state.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      if (this.gainNode) {\n        this.gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n      }\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.audio.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.audio.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.audio.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.audio.currentTime,\n      duration: this.audio.duration,\n    });\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        if (this.gainNode) {\n          this.gainNode.gain.value = this.state.muted ? 0 : x;\n        }\n      });\n    }\n  }, 15);\n\n  handleScroll = throttle(() => {\n    if (!this.canvas || !this.audio) {\n      return;\n    }\n\n    const { top, height } = this.canvas.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.audio.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('audio', this._pack());\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  handleLoadedData = () => {\n    const { autoPlay, currentTime } = this.props;\n\n    if (currentTime) {\n      this.audio.currentTime = currentTime;\n    }\n\n    if (autoPlay) {\n      this.togglePlay();\n    }\n  };\n\n  _initAudioContext () {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    const context      = new AudioContext();\n    const source       = context.createMediaElementSource(this.audio);\n    const gainNode     = context.createGain();\n\n    gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n\n    this.visualizer.setAudioContext(context, source);\n    source.connect(gainNode);\n    gainNode.connect(context.destination);\n\n    this.audioContext = context;\n    this.gainNode = gainNode;\n  }\n\n  handleDownload = () => {\n    fetch(this.props.src).then(res => res.blob()).then(blob => {\n      const element   = document.createElement('a');\n      const objectURL = URL.createObjectURL(blob);\n\n      element.setAttribute('href', objectURL);\n      element.setAttribute('download', fileNameFromURL(this.props.src));\n\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n\n      URL.revokeObjectURL(objectURL);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  _renderCanvas () {\n    requestAnimationFrame(() => {\n      if (!this.audio) return;\n\n      this.handleTimeUpdate();\n      this._clear();\n      this._draw();\n\n      if (!this.state.paused) {\n        this._renderCanvas();\n      }\n    });\n  }\n\n  _clear() {\n    this.visualizer.clear(this.state.width, this.state.height);\n  }\n\n  _draw() {\n    this.visualizer.draw(this._getCX(), this._getCY(), this._getAccentColor(), this._getRadius(), this._getScaleCoefficient());\n  }\n\n  _getRadius () {\n    return parseInt((this.state.height || this.props.height) / 2 - PADDING * this._getScaleCoefficient());\n  }\n\n  _getScaleCoefficient () {\n    return (this.state.height || this.props.height) / 982;\n  }\n\n  _getCX() {\n    return Math.floor(this.state.width / 2);\n  }\n\n  _getCY() {\n    return Math.floor((this.state.height || this.props.height) / 2);\n  }\n\n  _getAccentColor () {\n    return this.props.accentColor || '#ffffff';\n  }\n\n  _getBackgroundColor () {\n    return this.props.backgroundColor || '#000000';\n  }\n\n  _getForegroundColor () {\n    return this.props.foregroundColor || '#ffffff';\n  }\n\n  seekBy (time) {\n    const currentTime = this.audio.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleAudioKeyDown = e => {\n    // On the audio element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    }\n  };\n\n  render () {\n    const { src, intl, alt, lang, editable, autoPlay, sensitive, blurhash } = this.props;\n    const { paused, volume, currentTime, duration, buffer, dragging, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    return (\n      <div className={classNames('audio-player', { editable, inactive: !revealed })} ref={this.setPlayerRef} style={{ backgroundColor: this._getBackgroundColor(), color: this._getForegroundColor(), aspectRatio: '16 / 9' }} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} tabIndex={0} onKeyDown={this.handleKeyDown}>\n\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n\n        {(revealed || editable) && <audio\n          src={src}\n          ref={this.setAudioRef}\n          preload={autoPlay ? 'auto' : 'none'}\n          onPlay={this.handlePlay}\n          onPause={this.handlePause}\n          onProgress={this.handleProgress}\n          onLoadedData={this.handleLoadedData}\n          crossOrigin='anonymous'\n        />}\n\n        <canvas\n          role='button'\n          tabIndex={0}\n          className='audio-player__canvas'\n          width={this.state.width}\n          height={this.state.height}\n          style={{ width: '100%', position: 'absolute', top: 0, left: 0 }}\n          ref={this.setCanvasRef}\n          onClick={this.togglePlay}\n          onKeyDown={this.handleAudioKeyDown}\n          title={alt}\n          aria-label={alt}\n          lang={lang}\n        />\n\n        <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n          <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n            <span className='spoiler-button__overlay__label'>\n              {warning}\n              <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n            </span>\n          </button>\n        </div>\n\n        {(revealed || editable) && <img\n          src={this.props.poster}\n          alt=''\n          style={{\n            position: 'absolute',\n            left: '50%',\n            top: '50%',\n            height: `calc(${(100 - 2 * 100 * PADDING / 982)}% - ${TICK_SIZE * 2}px)`,\n            aspectRatio: '1',\n            transform: 'translate(-50%, -50%)',\n            borderRadius: '50%',\n            pointerEvents: 'none',\n          }}\n        />}\n\n        <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n          <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n          <div className='video-player__seek__progress' style={{ width: `${progress}%`, backgroundColor: this._getAccentColor() }} />\n\n          <span\n            className={classNames('video-player__seek__handle', { active: dragging })}\n            tabIndex={0}\n            style={{ left: `${progress}%`, backgroundColor: this._getAccentColor() }}\n            onKeyDown={this.handleAudioKeyDown}\n          />\n        </div>\n\n        <div className='video-player__controls active'>\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay}><Icon id={paused ? 'play' : 'pause'} fixedWidth /></button>\n              <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} fixedWidth /></button>\n\n              <div className={classNames('video-player__volume', { active: this.state.hovered })} ref={this.setVolumeRef} onMouseDown={this.handleVolumeMouseDown}>\n                <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }} />\n\n                <span\n                  className='video-player__volume__handle'\n                  tabIndex={0}\n                  style={{ left: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }}\n                />\n              </div>\n\n              <span className='video-player__time'>\n                <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                <span className='video-player__time-sep'>/</span>\n                <span className='video-player__time-total'>{formatTime(Math.floor(this.state.duration || this.props.duration))}</span>\n              </span>\n            </div>\n\n            <div className='video-player__buttons right'>\n              {!editable && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' fixedWidth /></button>}\n              <a title={intl.formatMessage(messages.download)} aria-label={intl.formatMessage(messages.download)} className='video-player__download__icon player-button' href={this.props.src} download>\n                <Icon id={'download'} fixedWidth />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Audio);\n","/*\nCopyright (c) 2020 by Alex Permyakov (https://codepen.io/alexdevp/pen/RNELPV)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nconst hex2rgba = (hex, alpha = 1) => {\n  const [r, g, b] = hex.match(/\\w\\w/g).map(x => parseInt(x, 16));\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n};\n\nexport default class Visualizer {\n\n  constructor (tickSize) {\n    this.tickSize = tickSize;\n  }\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n    if (canvas) {\n      this.context = canvas.getContext('2d');\n    }\n  }\n\n  setAudioContext(context, source) {\n    const analyser = context.createAnalyser();\n\n    analyser.smoothingTimeConstant = 0.6;\n    analyser.fftSize = 2048;\n\n    source.connect(analyser);\n\n    this.analyser = analyser;\n  }\n\n  getTickPoints (count) {\n    const coords = [];\n\n    for(let i = 0; i < count; i++) {\n      const rad = Math.PI * 2 * i / count;\n      coords.push({ x: Math.cos(rad), y: -Math.sin(rad) });\n    }\n\n    return coords;\n  }\n\n  drawTick (cx, cy, mainColor, x1, y1, x2, y2) {\n    const dx1 = Math.ceil(cx + x1);\n    const dy1 = Math.ceil(cy + y1);\n    const dx2 = Math.ceil(cx + x2);\n    const dy2 = Math.ceil(cy + y2);\n\n    const gradient = this.context.createLinearGradient(dx1, dy1, dx2, dy2);\n\n    const lastColor = hex2rgba(mainColor, 0);\n\n    gradient.addColorStop(0, mainColor);\n    gradient.addColorStop(0.6, mainColor);\n    gradient.addColorStop(1, lastColor);\n\n    this.context.beginPath();\n    this.context.strokeStyle = gradient;\n    this.context.lineWidth = 2;\n    this.context.moveTo(dx1, dy1);\n    this.context.lineTo(dx2, dy2);\n    this.context.stroke();\n  }\n\n  getTicks (count, size, radius, scaleCoefficient) {\n    const ticks = this.getTickPoints(count);\n    const lesser = 200;\n    const m = [];\n    const bufferLength = this.analyser ? this.analyser.frequencyBinCount : 0;\n    const frequencyData = new Uint8Array(bufferLength);\n    const allScales = [];\n\n    if (this.analyser) {\n      this.analyser.getByteFrequencyData(frequencyData);\n    }\n\n    ticks.forEach((tick, i) => {\n      const coef = 1 - i / (ticks.length * 2.5);\n\n      let delta = ((frequencyData[i] || 0) - lesser * coef) * scaleCoefficient;\n\n      if (delta < 0) {\n        delta = 0;\n      }\n\n      const k = radius / (radius - (size + delta));\n\n      const x1 = tick.x * (radius - size);\n      const y1 = tick.y * (radius - size);\n      const x2 = x1 * k;\n      const y2 = y1 * k;\n\n      m.push({ x1, y1, x2, y2 });\n\n      if (i < 20) {\n        let scale = delta / (200 * scaleCoefficient);\n        scale = scale < 1 ? 1 : scale;\n        allScales.push(scale);\n      }\n    });\n\n    const scale = allScales.reduce((pv, cv) => pv + cv, 0) / allScales.length;\n\n    return m.map(({ x1, y1, x2, y2 }) => ({\n      x1: x1,\n      y1: y1,\n      x2: x2 * scale,\n      y2: y2 * scale,\n    }));\n  }\n\n  clear (width, height) {\n    this.context.clearRect(0, 0, width, height);\n  }\n\n  draw (cx, cy, color, radius, coefficient) {\n    this.context.save();\n\n    const ticks = this.getTicks(parseInt(360 * coefficient), this.tickSize, radius, coefficient);\n\n    ticks.forEach(tick => {\n      this.drawTick(cx, cy, color, tick.x1, tick.y1, tick.x2, tick.y2);\n    });\n\n    this.context.restore();\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle, debounce } from 'lodash';\n\nimport { Blurhash } from 'flavours/glitch/components/blurhash';\nimport { Icon } from 'flavours/glitch/components/icon';\nimport { formatTime, getPointerPosition, fileNameFromURL } from 'flavours/glitch/features/video';\nimport { displayMedia, useBlurhash } from 'flavours/glitch/initial_state';\n\nimport Visualizer from './visualizer';\n\n\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  download: { id: 'video.download', defaultMessage: 'Download file' },\n  hide: { id: 'audio.hide', defaultMessage: 'Hide audio' },\n});\n\nconst TICK_SIZE = 10;\nconst PADDING   = 180;\n\nclass Audio extends PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    poster: PropTypes.string,\n    duration: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    sensitive: PropTypes.bool,\n    editable: PropTypes.bool,\n    fullscreen: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    cacheWidth: PropTypes.func,\n    visible: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    accentColor: PropTypes.string,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    deployPictureInPicture: PropTypes.func,\n  };\n\n  state = {\n    width: this.props.width,\n    currentTime: 0,\n    buffer: 0,\n    duration: null,\n    paused: true,\n    muted: false,\n    volume: 1,\n    dragging: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  constructor (props) {\n    super(props);\n    this.visualizer = new Visualizer(TICK_SIZE);\n  }\n\n  setPlayerRef = c => {\n    this.player = c;\n\n    if (this.player) {\n      this._setDimensions();\n    }\n  };\n\n  _pack() {\n    return {\n      src: this.props.src,\n      volume: this.state.volume,\n      muted: this.state.muted,\n      currentTime: this.audio.currentTime,\n      poster: this.props.poster,\n      backgroundColor: this.props.backgroundColor,\n      foregroundColor: this.props.foregroundColor,\n      accentColor: this.props.accentColor,\n      sensitive: this.props.sensitive,\n      visible: this.props.visible,\n    };\n  }\n\n  _setDimensions () {\n    const width  = this.player.offsetWidth;\n    const height = this.props.fullscreen ? this.player.offsetHeight : (width / (16/9));\n\n    if (width && width !== this.state.containerWidth) {\n      if (this.props.cacheWidth) {\n        this.props.cacheWidth(width);\n      }\n\n      this.setState({ width, height });\n    }\n  }\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  setAudioRef = c => {\n    this.audio = c;\n\n    if (this.audio) {\n      this.audio.volume = 1;\n      this.audio.muted = false;\n    }\n  };\n\n  setCanvasRef = c => {\n    this.canvas = c;\n\n    this.visualizer.setCanvas(c);\n  };\n\n  componentDidMount () {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.player) {\n      this._setDimensions();\n    }\n\n    if (prevProps.src !== this.props.src || this.state.width !== prevState.width || this.state.height !== prevState.height || prevProps.accentColor !== this.props.accentColor) {\n      this._clear();\n      this._draw();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleResize);\n\n    if (!this.state.paused && this.audio && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('audio', this._pack());\n    }\n  }\n\n  togglePlay = () => {\n    if (!this.audioContext) {\n      this._initAudioContext();\n    }\n\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.audio.play());\n    } else {\n      this.setState({ paused: true }, () => this.audio.pause());\n    }\n  };\n\n  handleResize = debounce(() => {\n    if (this.player) {\n      this._setDimensions();\n    }\n  }, 250, {\n    trailing: true,\n  });\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      this.audioContext.resume();\n    }\n\n    this._renderCanvas();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n\n    if (this.audioContext) {\n      this.audioContext.suspend();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.audio.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.audio.buffered.end(lastTimeRange) / this.audio.duration * 100) });\n    }\n  };\n\n  toggleMute = () => {\n    const muted = !(this.state.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      if (this.gainNode) {\n        this.gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n      }\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.audio.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.audio.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.audio.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.audio.currentTime,\n      duration: this.audio.duration,\n    });\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        if (this.gainNode) {\n          this.gainNode.gain.value = this.state.muted ? 0 : x;\n        }\n      });\n    }\n  }, 15);\n\n  handleScroll = throttle(() => {\n    if (!this.canvas || !this.audio) {\n      return;\n    }\n\n    const { top, height } = this.canvas.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.audio.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('audio', this._pack());\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  handleLoadedData = () => {\n    const { autoPlay, currentTime } = this.props;\n\n    if (currentTime) {\n      this.audio.currentTime = currentTime;\n    }\n\n    if (autoPlay) {\n      this.togglePlay();\n    }\n  };\n\n  _initAudioContext () {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    const context      = new AudioContext();\n    const source       = context.createMediaElementSource(this.audio);\n    const gainNode     = context.createGain();\n\n    gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n\n    this.visualizer.setAudioContext(context, source);\n    source.connect(gainNode);\n    gainNode.connect(context.destination);\n\n    this.audioContext = context;\n    this.gainNode = gainNode;\n  }\n\n  handleDownload = () => {\n    fetch(this.props.src).then(res => res.blob()).then(blob => {\n      const element   = document.createElement('a');\n      const objectURL = URL.createObjectURL(blob);\n\n      element.setAttribute('href', objectURL);\n      element.setAttribute('download', fileNameFromURL(this.props.src));\n\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n\n      URL.revokeObjectURL(objectURL);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  _renderCanvas () {\n    requestAnimationFrame(() => {\n      if (!this.audio) return;\n\n      this.handleTimeUpdate();\n      this._clear();\n      this._draw();\n\n      if (!this.state.paused) {\n        this._renderCanvas();\n      }\n    });\n  }\n\n  _clear() {\n    this.visualizer.clear(this.state.width, this.state.height);\n  }\n\n  _draw() {\n    this.visualizer.draw(this._getCX(), this._getCY(), this._getAccentColor(), this._getRadius(), this._getScaleCoefficient());\n  }\n\n  _getRadius () {\n    return parseInt((this.state.height || this.props.height) / 2 - PADDING * this._getScaleCoefficient());\n  }\n\n  _getScaleCoefficient () {\n    return (this.state.height || this.props.height) / 982;\n  }\n\n  _getCX() {\n    return Math.floor(this.state.width / 2);\n  }\n\n  _getCY() {\n    return Math.floor((this.state.height || this.props.height) / 2);\n  }\n\n  _getAccentColor () {\n    return this.props.accentColor || '#ffffff';\n  }\n\n  _getBackgroundColor () {\n    return this.props.backgroundColor || '#000000';\n  }\n\n  _getForegroundColor () {\n    return this.props.foregroundColor || '#ffffff';\n  }\n\n  seekBy (time) {\n    const currentTime = this.audio.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleAudioKeyDown = e => {\n    // On the audio element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    }\n  };\n\n  render () {\n    const { src, intl, alt, lang, editable, autoPlay, sensitive, blurhash } = this.props;\n    const { paused, volume, currentTime, duration, buffer, dragging, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    return (\n      <div className={classNames('audio-player', { editable, inactive: !revealed })} ref={this.setPlayerRef} style={{ backgroundColor: this._getBackgroundColor(), color: this._getForegroundColor(), aspectRatio: '16 / 9' }} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} tabIndex={0} onKeyDown={this.handleKeyDown}>\n\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n\n        {(revealed || editable) && <audio\n          src={src}\n          ref={this.setAudioRef}\n          preload={autoPlay ? 'auto' : 'none'}\n          onPlay={this.handlePlay}\n          onPause={this.handlePause}\n          onProgress={this.handleProgress}\n          onLoadedData={this.handleLoadedData}\n          crossOrigin='anonymous'\n        />}\n\n        <canvas\n          role='button'\n          tabIndex={0}\n          className='audio-player__canvas'\n          width={this.state.width}\n          height={this.state.height}\n          style={{ width: '100%', position: 'absolute', top: 0, left: 0 }}\n          ref={this.setCanvasRef}\n          onClick={this.togglePlay}\n          onKeyDown={this.handleAudioKeyDown}\n          title={alt}\n          aria-label={alt}\n          lang={lang}\n        />\n\n        <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n          <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n            <span className='spoiler-button__overlay__label'>\n              {warning}\n              <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n            </span>\n          </button>\n        </div>\n\n        {(revealed || editable) && <img\n          src={this.props.poster}\n          alt=''\n          style={{\n            position: 'absolute',\n            left: '50%',\n            top: '50%',\n            height: `calc(${(100 - 2 * 100 * PADDING / 982)}% - ${TICK_SIZE * 2}px)`,\n            aspectRatio: '1',\n            transform: 'translate(-50%, -50%)',\n            borderRadius: '50%',\n            pointerEvents: 'none',\n          }}\n        />}\n\n        <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n          <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n          <div className='video-player__seek__progress' style={{ width: `${progress}%`, backgroundColor: this._getAccentColor() }} />\n\n          <span\n            className={classNames('video-player__seek__handle', { active: dragging })}\n            tabIndex={0}\n            style={{ left: `${progress}%`, backgroundColor: this._getAccentColor() }}\n            onKeyDown={this.handleAudioKeyDown}\n          />\n        </div>\n\n        <div className='video-player__controls active'>\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay}><Icon id={paused ? 'play' : 'pause'} fixedWidth /></button>\n              <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} fixedWidth /></button>\n\n              <div className={classNames('video-player__volume', { active: this.state.hovered })} ref={this.setVolumeRef} onMouseDown={this.handleVolumeMouseDown}>\n                <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }} />\n\n                <span\n                  className='video-player__volume__handle'\n                  tabIndex={0}\n                  style={{ left: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }}\n                />\n              </div>\n\n              <span className='video-player__time'>\n                <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                <span className='video-player__time-sep'>/</span>\n                <span className='video-player__time-total'>{formatTime(Math.floor(this.state.duration || this.props.duration))}</span>\n              </span>\n            </div>\n\n            <div className='video-player__buttons right'>\n              {!editable && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' fixedWidth /></button>}\n              <a title={intl.formatMessage(messages.download)} aria-label={intl.formatMessage(messages.download)} className='video-player__download__icon player-button' href={this.props.src} download>\n                <Icon id={'download'} fixedWidth />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Audio);\n","import { saveSettings } from './settings';\n\nexport const EMOJI_USE = 'EMOJI_USE';\n\nexport function useEmoji(emoji) {\n  return dispatch => {\n    dispatch({\n      type: EMOJI_USE,\n      emoji,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { saveSettings } from './settings';\n\nexport const EMOJI_USE = 'EMOJI_USE';\n\nexport function useEmoji(emoji) {\n  return dispatch => {\n    dispatch({\n      type: EMOJI_USE,\n      emoji,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nexport default function _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n  function observable() {\n    var _ref;\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n  var shapeAssertionError;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n  var boundActionCreators = {};\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };","// Default to a dummy \"batch\" implementation that just runs the callback\nfunction defaultNoopBatch(callback) {\n  callback();\n}\nlet batch = defaultNoopBatch; // Allow injecting another batching function later\n\nexport const setBatch = newBatch => batch = newBatch; // Supply a getter just to skip dealing with ESM bindings\n\nexport const getBatch = () => batch;","import * as React from 'react';\nconst ContextKey = Symbol.for(`react-redux-context`);\nconst gT = typeof globalThis !== \"undefined\" ? globalThis : /* fall back to a per-module scope (pre-8.1 behaviour) if `globalThis` is not available */\n{};\nfunction getContext() {\n  var _gT$ContextKey;\n  if (!React.createContext) return {};\n  const contextMap = (_gT$ContextKey = gT[ContextKey]) != null ? _gT$ContextKey : gT[ContextKey] = new Map();\n  let realContext = contextMap.get(React.createContext);\n  if (!realContext) {\n    realContext = /*#__PURE__*/React.createContext(null);\n    if (process.env.NODE_ENV !== 'production') {\n      realContext.displayName = 'ReactRedux';\n    }\n    contextMap.set(React.createContext, realContext);\n  }\n  return realContext;\n}\nexport const ReactReduxContext = /*#__PURE__*/getContext();\nexport default ReactReduxContext;","import { useContext } from 'react';\nimport { ReactReduxContext } from '../components/Context';\n\n/**\r\n * Hook factory, which creates a `useReduxContext` hook bound to a given context. This is a low-level\r\n * hook that you should usually not need to call directly.\r\n *\r\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\r\n * @returns {Function} A `useReduxContext` hook bound to the specified context.\r\n */\nexport function createReduxContextHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n  return function useReduxContext() {\n    const contextValue = useContext(context);\n    if (process.env.NODE_ENV !== 'production' && !contextValue) {\n      throw new Error('could not find react-redux context value; please ensure the component is wrapped in a <Provider>');\n    }\n    return contextValue;\n  };\n}\n/**\r\n * A hook to access the value of the `ReactReduxContext`. This is a low-level\r\n * hook that you should usually not need to call directly.\r\n *\r\n * @returns {any} the value of the `ReactReduxContext`\r\n *\r\n * @example\r\n *\r\n * import React from 'react'\r\n * import { useReduxContext } from 'react-redux'\r\n *\r\n * export const CounterComponent = () => {\r\n *   const { store } = useReduxContext()\r\n *   return <div>{store.getState()}</div>\r\n * }\r\n */\n\nexport const useReduxContext = /*#__PURE__*/createReduxContextHook();","export const notInitialized = () => {\n  throw new Error('uSES not initialized!');\n};","import { useCallback, useDebugValue, useRef } from 'react';\nimport { createReduxContextHook, useReduxContext as useDefaultReduxContext } from './useReduxContext';\nimport { ReactReduxContext } from '../components/Context';\nimport { notInitialized } from '../utils/useSyncExternalStore';\nlet useSyncExternalStoreWithSelector = notInitialized;\nexport const initializeUseSelector = fn => {\n  useSyncExternalStoreWithSelector = fn;\n};\nconst refEquality = (a, b) => a === b;\n/**\r\n * Hook factory, which creates a `useSelector` hook bound to a given context.\r\n *\r\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\r\n * @returns {Function} A `useSelector` hook bound to the specified context.\r\n */\n\nexport function createSelectorHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n  const useReduxContext = context === ReactReduxContext ? useDefaultReduxContext : createReduxContextHook(context);\n  return function useSelector(selector, equalityFnOrOptions) {\n    if (equalityFnOrOptions === void 0) {\n      equalityFnOrOptions = {};\n    }\n    const {\n      equalityFn = refEquality,\n      stabilityCheck = undefined,\n      noopCheck = undefined\n    } = typeof equalityFnOrOptions === 'function' ? {\n      equalityFn: equalityFnOrOptions\n    } : equalityFnOrOptions;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!selector) {\n        throw new Error(`You must pass a selector to useSelector`);\n      }\n      if (typeof selector !== 'function') {\n        throw new Error(`You must pass a function as a selector to useSelector`);\n      }\n      if (typeof equalityFn !== 'function') {\n        throw new Error(`You must pass a function as an equality function to useSelector`);\n      }\n    }\n    const {\n      store,\n      subscription,\n      getServerState,\n      stabilityCheck: globalStabilityCheck,\n      noopCheck: globalNoopCheck\n    } = useReduxContext();\n    const firstRun = useRef(true);\n    const wrappedSelector = useCallback({\n      [selector.name](state) {\n        const selected = selector(state);\n        if (process.env.NODE_ENV !== 'production') {\n          const finalStabilityCheck = typeof stabilityCheck === 'undefined' ? globalStabilityCheck : stabilityCheck;\n          if (finalStabilityCheck === 'always' || finalStabilityCheck === 'once' && firstRun.current) {\n            const toCompare = selector(state);\n            if (!equalityFn(selected, toCompare)) {\n              let stack = undefined;\n              try {\n                throw new Error();\n              } catch (e) {\n                ;\n                ({\n                  stack\n                } = e);\n              }\n              console.warn('Selector ' + (selector.name || 'unknown') + ' returned a different result when called with the same parameters. This can lead to unnecessary rerenders.' + '\\nSelectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization', {\n                state,\n                selected,\n                selected2: toCompare,\n                stack\n              });\n            }\n          }\n          const finalNoopCheck = typeof noopCheck === 'undefined' ? globalNoopCheck : noopCheck;\n          if (finalNoopCheck === 'always' || finalNoopCheck === 'once' && firstRun.current) {\n            // @ts-ignore\n            if (selected === state) {\n              let stack = undefined;\n              try {\n                throw new Error();\n              } catch (e) {\n                ;\n                ({\n                  stack\n                } = e);\n              }\n              console.warn('Selector ' + (selector.name || 'unknown') + ' returned the root state when called. This can lead to unnecessary rerenders.' + '\\nSelectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.', {\n                stack\n              });\n            }\n          }\n          if (firstRun.current) firstRun.current = false;\n        }\n        return selected;\n      }\n    }[selector.name], [selector, globalStabilityCheck, stabilityCheck]);\n    const selectedState = useSyncExternalStoreWithSelector(subscription.addNestedSub, store.getState, getServerState || store.getState, wrappedSelector, equalityFn);\n    useDebugValue(selectedState);\n    return selectedState;\n  };\n}\n/**\r\n * A hook to access the redux store's state. This hook takes a selector function\r\n * as an argument. The selector is called with the store state.\r\n *\r\n * This hook takes an optional equality comparison function as the second parameter\r\n * that allows you to customize the way the selected state is compared to determine\r\n * whether the component needs to be re-rendered.\r\n *\r\n * @param {Function} selector the selector function\r\n * @param {Function=} equalityFn the function that will be used to determine equality\r\n *\r\n * @returns {any} the selected state\r\n *\r\n * @example\r\n *\r\n * import React from 'react'\r\n * import { useSelector } from 'react-redux'\r\n *\r\n * export const CounterComponent = () => {\r\n *   const counter = useSelector(state => state.counter)\r\n *   return <div>{counter}</div>\r\n * }\r\n */\n\nexport const useSelector = /*#__PURE__*/createSelectorHook();","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"initMapStateToProps\", \"initMapDispatchToProps\", \"initMergeProps\"];\nimport verifySubselectors from './verifySubselectors';\nexport function pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, _ref2) {\n  let {\n    areStatesEqual,\n    areOwnPropsEqual,\n    areStatePropsEqual\n  } = _ref2;\n  let hasRunAtLeastOnce = false;\n  let state;\n  let ownProps;\n  let stateProps;\n  let dispatchProps;\n  let mergedProps;\n  function handleFirstCall(firstState, firstOwnProps) {\n    state = firstState;\n    ownProps = firstOwnProps;\n    stateProps = mapStateToProps(state, ownProps);\n    dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    hasRunAtLeastOnce = true;\n    return mergedProps;\n  }\n  function handleNewPropsAndNewState() {\n    stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps) dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleNewProps() {\n    if (mapStateToProps.dependsOnOwnProps) stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps) dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleNewState() {\n    const nextStateProps = mapStateToProps(state, ownProps);\n    const statePropsChanged = !areStatePropsEqual(nextStateProps, stateProps);\n    stateProps = nextStateProps;\n    if (statePropsChanged) mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleSubsequentCalls(nextState, nextOwnProps) {\n    const propsChanged = !areOwnPropsEqual(nextOwnProps, ownProps);\n    const stateChanged = !areStatesEqual(nextState, state, nextOwnProps, ownProps);\n    state = nextState;\n    ownProps = nextOwnProps;\n    if (propsChanged && stateChanged) return handleNewPropsAndNewState();\n    if (propsChanged) return handleNewProps();\n    if (stateChanged) return handleNewState();\n    return mergedProps;\n  }\n  return function pureFinalPropsSelector(nextState, nextOwnProps) {\n    return hasRunAtLeastOnce ? handleSubsequentCalls(nextState, nextOwnProps) : handleFirstCall(nextState, nextOwnProps);\n  };\n}\n// TODO: Add more comments\n// The selector returned by selectorFactory will memoize its results,\n// allowing connect's shouldComponentUpdate to return false if final\n// props have not changed.\nexport default function finalPropsSelectorFactory(dispatch, _ref) {\n  let {\n      initMapStateToProps,\n      initMapDispatchToProps,\n      initMergeProps\n    } = _ref,\n    options = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const mapStateToProps = initMapStateToProps(dispatch, options);\n  const mapDispatchToProps = initMapDispatchToProps(dispatch, options);\n  const mergeProps = initMergeProps(dispatch, options);\n  if (process.env.NODE_ENV !== 'production') {\n    verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps);\n  }\n  return pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, options);\n}","import verifyPlainObject from '../utils/verifyPlainObject';\nexport function wrapMapToPropsConstant(\n// * Note:\n//  It seems that the dispatch argument\n//  could be a dispatch function in some cases (ex: whenMapDispatchToPropsIsMissing)\n//  and a state object in some others (ex: whenMapStateToPropsIsMissing)\n// eslint-disable-next-line no-unused-vars\ngetConstant) {\n  return function initConstantSelector(dispatch) {\n    const constant = getConstant(dispatch);\n    function constantSelector() {\n      return constant;\n    }\n    constantSelector.dependsOnOwnProps = false;\n    return constantSelector;\n  };\n} // dependsOnOwnProps is used by createMapToPropsProxy to determine whether to pass props as args\n// to the mapToProps function being wrapped. It is also used by makePurePropsSelector to determine\n// whether mapToProps needs to be invoked when props have changed.\n//\n// A length of one signals that mapToProps does not depend on props from the parent component.\n// A length of zero is assumed to mean mapToProps is getting args via arguments or ...args and\n// therefore not reporting its length accurately..\n// TODO Can this get pulled out so that we can subscribe directly to the store if we don't need ownProps?\n\nexport function getDependsOnOwnProps(mapToProps) {\n  return mapToProps.dependsOnOwnProps ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;\n} // Used by whenMapStateToPropsIsFunction and whenMapDispatchToPropsIsFunction,\n// this function wraps mapToProps in a proxy function which does several things:\n//\n//  * Detects whether the mapToProps function being called depends on props, which\n//    is used by selectorFactory to decide if it should reinvoke on props changes.\n//\n//  * On first call, handles mapToProps if returns another function, and treats that\n//    new function as the true mapToProps for subsequent calls.\n//\n//  * On first call, verifies the first result is a plain object, in order to warn\n//    the developer that their mapToProps function is not returning a valid result.\n//\n\nexport function wrapMapToPropsFunc(mapToProps, methodName) {\n  return function initProxySelector(dispatch, _ref) {\n    let {\n      displayName\n    } = _ref;\n    const proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {\n      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch, undefined);\n    }; // allow detectFactoryAndVerify to get ownProps\n\n    proxy.dependsOnOwnProps = true;\n    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {\n      proxy.mapToProps = mapToProps;\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);\n      let props = proxy(stateOrDispatch, ownProps);\n      if (typeof props === 'function') {\n        proxy.mapToProps = props;\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);\n        props = proxy(stateOrDispatch, ownProps);\n      }\n      if (process.env.NODE_ENV !== 'production') verifyPlainObject(props, displayName, methodName);\n      return props;\n    };\n    return proxy;\n  };\n}","export function createInvalidArgFactory(arg, name) {\n  return (dispatch, options) => {\n    throw new Error(`Invalid value of type ${typeof arg} for ${name} argument when connecting component ${options.wrappedComponentName}.`);\n  };\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport verifyPlainObject from '../utils/verifyPlainObject';\nimport { createInvalidArgFactory } from './invalidArgFactory';\nexport function defaultMergeProps(stateProps, dispatchProps, ownProps) {\n  // @ts-ignore\n  return _extends({}, ownProps, stateProps, dispatchProps);\n}\nexport function wrapMergePropsFunc(mergeProps) {\n  return function initMergePropsProxy(dispatch, _ref) {\n    let {\n      displayName,\n      areMergedPropsEqual\n    } = _ref;\n    let hasRunOnce = false;\n    let mergedProps;\n    return function mergePropsProxy(stateProps, dispatchProps, ownProps) {\n      const nextMergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n      if (hasRunOnce) {\n        if (!areMergedPropsEqual(nextMergedProps, mergedProps)) mergedProps = nextMergedProps;\n      } else {\n        hasRunOnce = true;\n        mergedProps = nextMergedProps;\n        if (process.env.NODE_ENV !== 'production') verifyPlainObject(mergedProps, displayName, 'mergeProps');\n      }\n      return mergedProps;\n    };\n  };\n}\nexport function mergePropsFactory(mergeProps) {\n  return !mergeProps ? () => defaultMergeProps : typeof mergeProps === 'function' ? wrapMergePropsFunc(mergeProps) : createInvalidArgFactory(mergeProps, 'mergeProps');\n}","import { getBatch } from './batch'; // encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nfunction createListenerCollection() {\n  const batch = getBatch();\n  let first = null;\n  let last = null;\n  return {\n    clear() {\n      first = null;\n      last = null;\n    },\n    notify() {\n      batch(() => {\n        let listener = first;\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n    get() {\n      let listeners = [];\n      let listener = first;\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n      return listeners;\n    },\n    subscribe(callback) {\n      let isSubscribed = true;\n      let listener = last = {\n        callback,\n        next: null,\n        prev: last\n      };\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return;\n        isSubscribed = false;\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n  };\n}\nconst nullListeners = {\n  notify() {},\n  get: () => []\n};\nexport function createSubscription(store, parentSub) {\n  let unsubscribe;\n  let listeners = nullListeners; // Reasons to keep the subscription active\n\n  let subscriptionsAmount = 0; // Is this specific subscription subscribed (or only nested ones?)\n\n  let selfSubscribed = false;\n  function addNestedSub(listener) {\n    trySubscribe();\n    const cleanupListener = listeners.subscribe(listener); // cleanup nested sub\n\n    let removed = false;\n    return () => {\n      if (!removed) {\n        removed = true;\n        cleanupListener();\n        tryUnsubscribe();\n      }\n    };\n  }\n  function notifyNestedSubs() {\n    listeners.notify();\n  }\n  function handleChangeWrapper() {\n    if (subscription.onStateChange) {\n      subscription.onStateChange();\n    }\n  }\n  function isSubscribed() {\n    return selfSubscribed;\n  }\n  function trySubscribe() {\n    subscriptionsAmount++;\n    if (!unsubscribe) {\n      unsubscribe = parentSub ? parentSub.addNestedSub(handleChangeWrapper) : store.subscribe(handleChangeWrapper);\n      listeners = createListenerCollection();\n    }\n  }\n  function tryUnsubscribe() {\n    subscriptionsAmount--;\n    if (unsubscribe && subscriptionsAmount === 0) {\n      unsubscribe();\n      unsubscribe = undefined;\n      listeners.clear();\n      listeners = nullListeners;\n    }\n  }\n  function trySubscribeSelf() {\n    if (!selfSubscribed) {\n      selfSubscribed = true;\n      trySubscribe();\n    }\n  }\n  function tryUnsubscribeSelf() {\n    if (selfSubscribed) {\n      selfSubscribed = false;\n      tryUnsubscribe();\n    }\n  }\n  const subscription = {\n    addNestedSub,\n    notifyNestedSubs,\n    handleChangeWrapper,\n    isSubscribed,\n    trySubscribe: trySubscribeSelf,\n    tryUnsubscribe: tryUnsubscribeSelf,\n    getListeners: () => listeners\n  };\n  return subscription;\n}","import * as React from 'react'; // React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser. We need useLayoutEffect to ensure the store\n// subscription callback always has the selector from the latest render commit\n// available, otherwise a store update may happen between render and the effect,\n// which may cause missed updates; we also must ensure the store subscription\n// is created synchronously, otherwise a store update may occur before the\n// subscription is created and an inconsistent state may be observed\n// Matches logic in React's `shared/ExecutionEnvironment` file\n\nexport const canUseDOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined');\nexport const useIsomorphicLayoutEffect = canUseDOM ? React.useLayoutEffect : React.useEffect;","function is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nexport default function shallowEqual(objA, objB) {\n  if (is(objA, objB)) return true;\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return false;\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"reactReduxForwardedRef\"];\n\n/* eslint-disable valid-jsdoc, @typescript-eslint/no-unused-vars */\nimport hoistStatics from 'hoist-non-react-statics';\nimport * as React from 'react';\nimport { isValidElementType, isContextConsumer } from 'react-is';\nimport defaultSelectorFactory from '../connect/selectorFactory';\nimport { mapDispatchToPropsFactory } from '../connect/mapDispatchToProps';\nimport { mapStateToPropsFactory } from '../connect/mapStateToProps';\nimport { mergePropsFactory } from '../connect/mergeProps';\nimport { createSubscription } from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\nimport shallowEqual from '../utils/shallowEqual';\nimport warning from '../utils/warning';\nimport { ReactReduxContext } from './Context';\nimport { notInitialized } from '../utils/useSyncExternalStore';\nlet useSyncExternalStore = notInitialized;\nexport const initializeConnect = fn => {\n  useSyncExternalStore = fn;\n}; // Define some constant arrays just to avoid re-creating these\n\nconst EMPTY_ARRAY = [null, 0];\nconst NO_SUBSCRIPTION_ARRAY = [null, null]; // Attempts to stringify whatever not-really-a-component value we were given\n// for logging in an error message\n\nconst stringifyComponent = Comp => {\n  try {\n    return JSON.stringify(Comp);\n  } catch (err) {\n    return String(Comp);\n  }\n};\n\n// This is \"just\" a `useLayoutEffect`, but with two modifications:\n// - we need to fall back to `useEffect` in SSR to avoid annoying warnings\n// - we extract this to a separate function to avoid closing over values\n//   and causing memory leaks\nfunction useIsomorphicLayoutEffectWithArgs(effectFunc, effectArgs, dependencies) {\n  useIsomorphicLayoutEffect(() => effectFunc(...effectArgs), dependencies);\n} // Effect callback, extracted: assign the latest props values to refs for later usage\n\nfunction captureWrapperProps(lastWrapperProps, lastChildProps, renderIsScheduled, wrapperProps,\n// actualChildProps: unknown,\nchildPropsFromStoreUpdate, notifyNestedSubs) {\n  // We want to capture the wrapper props and child props we used for later comparisons\n  lastWrapperProps.current = wrapperProps;\n  renderIsScheduled.current = false; // If the render was from a store update, clear out that reference and cascade the subscriber update\n\n  if (childPropsFromStoreUpdate.current) {\n    childPropsFromStoreUpdate.current = null;\n    notifyNestedSubs();\n  }\n} // Effect callback, extracted: subscribe to the Redux store or nearest connected ancestor,\n// check for updates after dispatched actions, and trigger re-renders.\n\nfunction subscribeUpdates(shouldHandleStateChanges, store, subscription, childPropsSelector, lastWrapperProps, lastChildProps, renderIsScheduled, isMounted, childPropsFromStoreUpdate, notifyNestedSubs,\n// forceComponentUpdateDispatch: React.Dispatch<any>,\nadditionalSubscribeListener) {\n  // If we're not subscribed to the store, nothing to do here\n  if (!shouldHandleStateChanges) return () => {}; // Capture values for checking if and when this component unmounts\n\n  let didUnsubscribe = false;\n  let lastThrownError = null; // We'll run this callback every time a store subscription update propagates to this component\n\n  const checkForUpdates = () => {\n    if (didUnsubscribe || !isMounted.current) {\n      // Don't run stale listeners.\n      // Redux doesn't guarantee unsubscriptions happen until next dispatch.\n      return;\n    } // TODO We're currently calling getState ourselves here, rather than letting `uSES` do it\n\n    const latestStoreState = store.getState();\n    let newChildProps, error;\n    try {\n      // Actually run the selector with the most recent store state and wrapper props\n      // to determine what the child props should be\n      newChildProps = childPropsSelector(latestStoreState, lastWrapperProps.current);\n    } catch (e) {\n      error = e;\n      lastThrownError = e;\n    }\n    if (!error) {\n      lastThrownError = null;\n    } // If the child props haven't changed, nothing to do here - cascade the subscription update\n\n    if (newChildProps === lastChildProps.current) {\n      if (!renderIsScheduled.current) {\n        notifyNestedSubs();\n      }\n    } else {\n      // Save references to the new child props.  Note that we track the \"child props from store update\"\n      // as a ref instead of a useState/useReducer because we need a way to determine if that value has\n      // been processed.  If this went into useState/useReducer, we couldn't clear out the value without\n      // forcing another re-render, which we don't want.\n      lastChildProps.current = newChildProps;\n      childPropsFromStoreUpdate.current = newChildProps;\n      renderIsScheduled.current = true; // TODO This is hacky and not how `uSES` is meant to be used\n      // Trigger the React `useSyncExternalStore` subscriber\n\n      additionalSubscribeListener();\n    }\n  }; // Actually subscribe to the nearest connected ancestor (or store)\n\n  subscription.onStateChange = checkForUpdates;\n  subscription.trySubscribe(); // Pull data from the store after first render in case the store has\n  // changed since we began.\n\n  checkForUpdates();\n  const unsubscribeWrapper = () => {\n    didUnsubscribe = true;\n    subscription.tryUnsubscribe();\n    subscription.onStateChange = null;\n    if (lastThrownError) {\n      // It's possible that we caught an error due to a bad mapState function, but the\n      // parent re-rendered without this component and we're about to unmount.\n      // This shouldn't happen as long as we do top-down subscriptions correctly, but\n      // if we ever do those wrong, this throw will surface the error in our tests.\n      // In that case, throw the error from here so it doesn't get lost.\n      throw lastThrownError;\n    }\n  };\n  return unsubscribeWrapper;\n} // Reducer initial state creation for our update reducer\n\nconst initStateUpdates = () => EMPTY_ARRAY;\nfunction strictEqual(a, b) {\n  return a === b;\n}\n/**\r\n * Infers the type of props that a connector will inject into a component.\r\n */\n\nlet hasWarnedAboutDeprecatedPureOption = false;\n/**\r\n * Connects a React component to a Redux store.\r\n *\r\n * - Without arguments, just wraps the component, without changing the behavior / props\r\n *\r\n * - If 2 params are passed (3rd param, mergeProps, is skipped), default behavior\r\n * is to override ownProps (as stated in the docs), so what remains is everything that's\r\n * not a state or dispatch prop\r\n *\r\n * - When 3rd param is passed, we don't know if ownProps propagate and whether they\r\n * should be valid component props, because it depends on mergeProps implementation.\r\n * As such, it is the user's responsibility to extend ownProps interface from state or\r\n * dispatch props or both when applicable\r\n *\r\n * @param mapStateToProps A function that extracts values from state\r\n * @param mapDispatchToProps Setup for dispatching actions\r\n * @param mergeProps Optional callback to merge state and dispatch props together\r\n * @param options Options for configuring the connection\r\n *\r\n */\n\nfunction connect(mapStateToProps, mapDispatchToProps, mergeProps, _temp) {\n  let {\n    // The `pure` option has been removed, so TS doesn't like us destructuring this to check its existence.\n    // @ts-ignore\n    pure,\n    areStatesEqual = strictEqual,\n    areOwnPropsEqual = shallowEqual,\n    areStatePropsEqual = shallowEqual,\n    areMergedPropsEqual = shallowEqual,\n    // use React's forwardRef to expose a ref of the wrapped component\n    forwardRef = false,\n    // the context consumer to use\n    context = ReactReduxContext\n  } = _temp === void 0 ? {} : _temp;\n  if (process.env.NODE_ENV !== 'production') {\n    if (pure !== undefined && !hasWarnedAboutDeprecatedPureOption) {\n      hasWarnedAboutDeprecatedPureOption = true;\n      warning('The `pure` option has been removed. `connect` is now always a \"pure/memoized\" component');\n    }\n  }\n  const Context = context;\n  const initMapStateToProps = mapStateToPropsFactory(mapStateToProps);\n  const initMapDispatchToProps = mapDispatchToPropsFactory(mapDispatchToProps);\n  const initMergeProps = mergePropsFactory(mergeProps);\n  const shouldHandleStateChanges = Boolean(mapStateToProps);\n  const wrapWithConnect = WrappedComponent => {\n    if (process.env.NODE_ENV !== 'production' && !isValidElementType(WrappedComponent)) {\n      throw new Error(`You must pass a component to the function returned by connect. Instead received ${stringifyComponent(WrappedComponent)}`);\n    }\n    const wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || 'Component';\n    const displayName = `Connect(${wrappedComponentName})`;\n    const selectorFactoryOptions = {\n      shouldHandleStateChanges,\n      displayName,\n      wrappedComponentName,\n      WrappedComponent,\n      // @ts-ignore\n      initMapStateToProps,\n      // @ts-ignore\n      initMapDispatchToProps,\n      initMergeProps,\n      areStatesEqual,\n      areStatePropsEqual,\n      areOwnPropsEqual,\n      areMergedPropsEqual\n    };\n    function ConnectFunction(props) {\n      const [propsContext, reactReduxForwardedRef, wrapperProps] = React.useMemo(() => {\n        // Distinguish between actual \"data\" props that were passed to the wrapper component,\n        // and values needed to control behavior (forwarded refs, alternate context instances).\n        // To maintain the wrapperProps object reference, memoize this destructuring.\n        const {\n            reactReduxForwardedRef\n          } = props,\n          wrapperProps = _objectWithoutPropertiesLoose(props, _excluded);\n        return [props.context, reactReduxForwardedRef, wrapperProps];\n      }, [props]);\n      const ContextToUse = React.useMemo(() => {\n        // Users may optionally pass in a custom context instance to use instead of our ReactReduxContext.\n        // Memoize the check that determines which context instance we should use.\n        return propsContext && propsContext.Consumer &&\n        // @ts-ignore\n        isContextConsumer( /*#__PURE__*/React.createElement(propsContext.Consumer, null)) ? propsContext : Context;\n      }, [propsContext, Context]); // Retrieve the store and ancestor subscription via context, if available\n\n      const contextValue = React.useContext(ContextToUse); // The store _must_ exist as either a prop or in context.\n      // We'll check to see if it _looks_ like a Redux store first.\n      // This allows us to pass through a `store` prop that is just a plain value.\n\n      const didStoreComeFromProps = Boolean(props.store) && Boolean(props.store.getState) && Boolean(props.store.dispatch);\n      const didStoreComeFromContext = Boolean(contextValue) && Boolean(contextValue.store);\n      if (process.env.NODE_ENV !== 'production' && !didStoreComeFromProps && !didStoreComeFromContext) {\n        throw new Error(`Could not find \"store\" in the context of ` + `\"${displayName}\". Either wrap the root component in a <Provider>, ` + `or pass a custom React context provider to <Provider> and the corresponding ` + `React context consumer to ${displayName} in connect options.`);\n      } // Based on the previous check, one of these must be true\n\n      const store = didStoreComeFromProps ? props.store : contextValue.store;\n      const getServerState = didStoreComeFromContext ? contextValue.getServerState : store.getState;\n      const childPropsSelector = React.useMemo(() => {\n        // The child props selector needs the store reference as an input.\n        // Re-create this selector whenever the store changes.\n        return defaultSelectorFactory(store.dispatch, selectorFactoryOptions);\n      }, [store]);\n      const [subscription, notifyNestedSubs] = React.useMemo(() => {\n        if (!shouldHandleStateChanges) return NO_SUBSCRIPTION_ARRAY; // This Subscription's source should match where store came from: props vs. context. A component\n        // connected to the store via props shouldn't use subscription from context, or vice versa.\n\n        const subscription = createSubscription(store, didStoreComeFromProps ? undefined : contextValue.subscription); // `notifyNestedSubs` is duplicated to handle the case where the component is unmounted in\n        // the middle of the notification loop, where `subscription` will then be null. This can\n        // probably be avoided if Subscription's listeners logic is changed to not call listeners\n        // that have been unsubscribed in the  middle of the notification loop.\n\n        const notifyNestedSubs = subscription.notifyNestedSubs.bind(subscription);\n        return [subscription, notifyNestedSubs];\n      }, [store, didStoreComeFromProps, contextValue]); // Determine what {store, subscription} value should be put into nested context, if necessary,\n      // and memoize that value to avoid unnecessary context updates.\n\n      const overriddenContextValue = React.useMemo(() => {\n        if (didStoreComeFromProps) {\n          // This component is directly subscribed to a store from props.\n          // We don't want descendants reading from this store - pass down whatever\n          // the existing context value is from the nearest connected ancestor.\n          return contextValue;\n        } // Otherwise, put this component's subscription instance into context, so that\n        // connected descendants won't update until after this component is done\n\n        return _extends({}, contextValue, {\n          subscription\n        });\n      }, [didStoreComeFromProps, contextValue, subscription]); // Set up refs to coordinate values between the subscription effect and the render logic\n\n      const lastChildProps = React.useRef();\n      const lastWrapperProps = React.useRef(wrapperProps);\n      const childPropsFromStoreUpdate = React.useRef();\n      const renderIsScheduled = React.useRef(false);\n      const isProcessingDispatch = React.useRef(false);\n      const isMounted = React.useRef(false);\n      const latestSubscriptionCallbackError = React.useRef();\n      useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n          isMounted.current = false;\n        };\n      }, []);\n      const actualChildPropsSelector = React.useMemo(() => {\n        const selector = () => {\n          // Tricky logic here:\n          // - This render may have been triggered by a Redux store update that produced new child props\n          // - However, we may have gotten new wrapper props after that\n          // If we have new child props, and the same wrapper props, we know we should use the new child props as-is.\n          // But, if we have new wrapper props, those might change the child props, so we have to recalculate things.\n          // So, we'll use the child props from store update only if the wrapper props are the same as last time.\n          if (childPropsFromStoreUpdate.current && wrapperProps === lastWrapperProps.current) {\n            return childPropsFromStoreUpdate.current;\n          } // TODO We're reading the store directly in render() here. Bad idea?\n          // This will likely cause Bad Things (TM) to happen in Concurrent Mode.\n          // Note that we do this because on renders _not_ caused by store updates, we need the latest store state\n          // to determine what the child props should be.\n\n          return childPropsSelector(store.getState(), wrapperProps);\n        };\n        return selector;\n      }, [store, wrapperProps]); // We need this to execute synchronously every time we re-render. However, React warns\n      // about useLayoutEffect in SSR, so we try to detect environment and fall back to\n      // just useEffect instead to avoid the warning, since neither will run anyway.\n\n      const subscribeForReact = React.useMemo(() => {\n        const subscribe = reactListener => {\n          if (!subscription) {\n            return () => {};\n          }\n          return subscribeUpdates(shouldHandleStateChanges, store, subscription,\n          // @ts-ignore\n          childPropsSelector, lastWrapperProps, lastChildProps, renderIsScheduled, isMounted, childPropsFromStoreUpdate, notifyNestedSubs, reactListener);\n        };\n        return subscribe;\n      }, [subscription]);\n      useIsomorphicLayoutEffectWithArgs(captureWrapperProps, [lastWrapperProps, lastChildProps, renderIsScheduled, wrapperProps, childPropsFromStoreUpdate, notifyNestedSubs]);\n      let actualChildProps;\n      try {\n        actualChildProps = useSyncExternalStore(\n        // TODO We're passing through a big wrapper that does a bunch of extra side effects besides subscribing\n        subscribeForReact,\n        // TODO This is incredibly hacky. We've already processed the store update and calculated new child props,\n        // TODO and we're just passing that through so it triggers a re-render for us rather than relying on `uSES`.\n        actualChildPropsSelector, getServerState ? () => childPropsSelector(getServerState(), wrapperProps) : actualChildPropsSelector);\n      } catch (err) {\n        if (latestSubscriptionCallbackError.current) {\n          ;\n          err.message += `\\nThe error may be correlated with this previous error:\\n${latestSubscriptionCallbackError.current.stack}\\n\\n`;\n        }\n        throw err;\n      }\n      useIsomorphicLayoutEffect(() => {\n        latestSubscriptionCallbackError.current = undefined;\n        childPropsFromStoreUpdate.current = undefined;\n        lastChildProps.current = actualChildProps;\n      }); // Now that all that's done, we can finally try to actually render the child component.\n      // We memoize the elements for the rendered child component as an optimization.\n\n      const renderedWrappedComponent = React.useMemo(() => {\n        return /*#__PURE__*/(\n          // @ts-ignore\n          React.createElement(WrappedComponent, _extends({}, actualChildProps, {\n            ref: reactReduxForwardedRef\n          }))\n        );\n      }, [reactReduxForwardedRef, WrappedComponent, actualChildProps]); // If React sees the exact same element reference as last time, it bails out of re-rendering\n      // that child, same as if it was wrapped in React.memo() or returned false from shouldComponentUpdate.\n\n      const renderedChild = React.useMemo(() => {\n        if (shouldHandleStateChanges) {\n          // If this component is subscribed to store updates, we need to pass its own\n          // subscription instance down to our descendants. That means rendering the same\n          // Context instance, and putting a different value into the context.\n          return /*#__PURE__*/React.createElement(ContextToUse.Provider, {\n            value: overriddenContextValue\n          }, renderedWrappedComponent);\n        }\n        return renderedWrappedComponent;\n      }, [ContextToUse, renderedWrappedComponent, overriddenContextValue]);\n      return renderedChild;\n    }\n    const _Connect = /*#__PURE__*/React.memo(ConnectFunction);\n\n    // Add a hacky cast to get the right output type\n    const Connect = _Connect;\n    Connect.WrappedComponent = WrappedComponent;\n    Connect.displayName = ConnectFunction.displayName = displayName;\n    if (forwardRef) {\n      const _forwarded = /*#__PURE__*/React.forwardRef(function forwardConnectRef(props, ref) {\n        // @ts-ignore\n        return /*#__PURE__*/React.createElement(Connect, _extends({}, props, {\n          reactReduxForwardedRef: ref\n        }));\n      });\n      const forwarded = _forwarded;\n      forwarded.displayName = displayName;\n      forwarded.WrappedComponent = WrappedComponent;\n      return hoistStatics(forwarded, WrappedComponent);\n    }\n    return hoistStatics(Connect, WrappedComponent);\n  };\n  return wrapWithConnect;\n}\nexport default connect;","import { wrapMapToPropsConstant, wrapMapToPropsFunc } from './wrapMapToProps';\nimport { createInvalidArgFactory } from './invalidArgFactory';\nexport function mapStateToPropsFactory(mapStateToProps) {\n  return !mapStateToProps ? wrapMapToPropsConstant(() => ({})) : typeof mapStateToProps === 'function' ?\n  // @ts-ignore\n  wrapMapToPropsFunc(mapStateToProps, 'mapStateToProps') : createInvalidArgFactory(mapStateToProps, 'mapStateToProps');\n}","import bindActionCreators from '../utils/bindActionCreators';\nimport { wrapMapToPropsConstant, wrapMapToPropsFunc } from './wrapMapToProps';\nimport { createInvalidArgFactory } from './invalidArgFactory';\nexport function mapDispatchToPropsFactory(mapDispatchToProps) {\n  return mapDispatchToProps && typeof mapDispatchToProps === 'object' ? wrapMapToPropsConstant(dispatch =>\n  // @ts-ignore\n  bindActionCreators(mapDispatchToProps, dispatch)) : !mapDispatchToProps ? wrapMapToPropsConstant(dispatch => ({\n    dispatch\n  })) : typeof mapDispatchToProps === 'function' ?\n  // @ts-ignore\n  wrapMapToPropsFunc(mapDispatchToProps, 'mapDispatchToProps') : createInvalidArgFactory(mapDispatchToProps, 'mapDispatchToProps');\n}","export default function bindActionCreators(actionCreators, dispatch) {\n  const boundActionCreators = {};\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = function () {\n        return dispatch(actionCreator(...arguments));\n      };\n    }\n  }\n  return boundActionCreators;\n}","import * as React from 'react';\nimport { ReactReduxContext } from './Context';\nimport { createSubscription } from '../utils/Subscription';\nimport { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect';\nfunction Provider(_ref) {\n  let {\n    store,\n    context,\n    children,\n    serverState,\n    stabilityCheck = 'once',\n    noopCheck = 'once'\n  } = _ref;\n  const contextValue = React.useMemo(() => {\n    const subscription = createSubscription(store);\n    return {\n      store,\n      subscription,\n      getServerState: serverState ? () => serverState : undefined,\n      stabilityCheck,\n      noopCheck\n    };\n  }, [store, serverState, stabilityCheck, noopCheck]);\n  const previousState = React.useMemo(() => store.getState(), [store]);\n  useIsomorphicLayoutEffect(() => {\n    const {\n      subscription\n    } = contextValue;\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    subscription.trySubscribe();\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs();\n    }\n    return () => {\n      subscription.tryUnsubscribe();\n      subscription.onStateChange = undefined;\n    };\n  }, [contextValue, previousState]);\n  const Context = context || ReactReduxContext; // @ts-ignore 'AnyAction' is assignable to the constraint of type 'A', but 'A' could be instantiated with a different subtype\n\n  return /*#__PURE__*/React.createElement(Context.Provider, {\n    value: contextValue\n  }, children);\n}\nexport default Provider;","import { ReactReduxContext } from '../components/Context';\nimport { useReduxContext as useDefaultReduxContext, createReduxContextHook } from './useReduxContext';\n/**\r\n * Hook factory, which creates a `useStore` hook bound to a given context.\r\n *\r\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\r\n * @returns {Function} A `useStore` hook bound to the specified context.\r\n */\n\nexport function createStoreHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n  const useReduxContext =\n  // @ts-ignore\n  context === ReactReduxContext ? useDefaultReduxContext :\n  // @ts-ignore\n  createReduxContextHook(context);\n  return function useStore() {\n    const {\n      store\n    } = useReduxContext(); // @ts-ignore\n\n    return store;\n  };\n}\n/**\r\n * A hook to access the redux store.\r\n *\r\n * @returns {any} the redux store\r\n *\r\n * @example\r\n *\r\n * import React from 'react'\r\n * import { useStore } from 'react-redux'\r\n *\r\n * export const ExampleComponent = () => {\r\n *   const store = useStore()\r\n *   return <div>{store.getState()}</div>\r\n * }\r\n */\n\nexport const useStore = /*#__PURE__*/createStoreHook();","import { ReactReduxContext } from '../components/Context';\nimport { useStore as useDefaultStore, createStoreHook } from './useStore';\n/**\r\n * Hook factory, which creates a `useDispatch` hook bound to a given context.\r\n *\r\n * @param {React.Context} [context=ReactReduxContext] Context passed to your `<Provider>`.\r\n * @returns {Function} A `useDispatch` hook bound to the specified context.\r\n */\n\nexport function createDispatchHook(context) {\n  if (context === void 0) {\n    context = ReactReduxContext;\n  }\n  const useStore =\n  // @ts-ignore\n  context === ReactReduxContext ? useDefaultStore : createStoreHook(context);\n  return function useDispatch() {\n    const store = useStore(); // @ts-ignore\n\n    return store.dispatch;\n  };\n}\n/**\r\n * A hook to access the redux `dispatch` function.\r\n *\r\n * @returns {any|function} redux store's `dispatch` function\r\n *\r\n * @example\r\n *\r\n * import React, { useCallback } from 'react'\r\n * import { useDispatch } from 'react-redux'\r\n *\r\n * export const CounterComponent = ({ value }) => {\r\n *   const dispatch = useDispatch()\r\n *   const increaseCounter = useCallback(() => dispatch({ type: 'increase-counter' }), [])\r\n *   return (\r\n *     <div>\r\n *       <span>{value}</span>\r\n *       <button onClick={increaseCounter}>Increase counter</button>\r\n *     </div>\r\n *   )\r\n * }\r\n */\n\nexport const useDispatch = /*#__PURE__*/createDispatchHook();","// The primary entry point assumes we're working with standard ReactDOM/RN, but\n// older versions that do not include `useSyncExternalStore` (React 16.9 - 17.x).\n// Because of that, the useSyncExternalStore compat shim is needed.\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\nimport { unstable_batchedUpdates as batch } from './utils/reactBatchedUpdates';\nimport { setBatch } from './utils/batch';\nimport { initializeUseSelector } from './hooks/useSelector';\nimport { initializeConnect } from './components/connect';\ninitializeUseSelector(useSyncExternalStoreWithSelector);\ninitializeConnect(useSyncExternalStore); // Enable batched updates in our subscriptions for use\n// with standard React renderers (ReactDOM, React Native)\n\nsetBatch(batch);\nexport { batch };\nexport * from './exports';","\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = {\n  noWobble: {\n    stiffness: 170,\n    damping: 26\n  },\n  // the default, if nothing provided\n  gentle: {\n    stiffness: 120,\n    damping: 14\n  },\n  wobbly: {\n    stiffness: 180,\n    damping: 12\n  },\n  stiff: {\n    stiffness: 210,\n    damping: 20\n  }\n};\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.LoadingBar = exports.TERMINATING_ANIMATION_DURATION = exports.ANIMATION_DURATION = exports.PROGRESS_INCREASE = exports.MAX_PROGRESS = exports.UPDATE_TIME = void 0;\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\nvar _propTypes = require(\"prop-types\");\nvar _reactRedux = require(\"react-redux\");\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n  return cache;\n}\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n  var cache = _getRequireWildcardCache();\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj[\"default\"] = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nvar UPDATE_TIME = 400;\nexports.UPDATE_TIME = UPDATE_TIME;\nvar MAX_PROGRESS = 99;\nexports.MAX_PROGRESS = MAX_PROGRESS;\nvar PROGRESS_INCREASE = 20;\nexports.PROGRESS_INCREASE = PROGRESS_INCREASE;\nvar ANIMATION_DURATION = UPDATE_TIME * 2;\nexports.ANIMATION_DURATION = ANIMATION_DURATION;\nvar TERMINATING_ANIMATION_DURATION = UPDATE_TIME / 2;\nexports.TERMINATING_ANIMATION_DURATION = TERMINATING_ANIMATION_DURATION;\nvar initialState = {\n  percent: 0,\n  status: 'hidden'\n};\nvar LoadingBar = /*#__PURE__*/function (_Component) {\n  _inherits(LoadingBar, _Component);\n  var _super = _createSuper(LoadingBar);\n  _createClass(LoadingBar, null, [{\n    key: \"shouldStart\",\n    value: function shouldStart(props, state) {\n      return props.loading > 0 && ['hidden', 'stopping'].indexOf(state.status) >= 0;\n    }\n  }, {\n    key: \"shouldStop\",\n    value: function shouldStop(props, state) {\n      return props.loading === 0 && ['starting', 'running'].indexOf(state.status) >= 0;\n    }\n  }, {\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (LoadingBar.shouldStart(nextProps, prevState)) {\n        return {\n          status: 'starting'\n        };\n      }\n      if (LoadingBar.shouldStop(nextProps, prevState)) {\n        return {\n          status: 'stopping'\n        };\n      }\n      return null;\n    }\n  }]);\n  function LoadingBar(props) {\n    var _this;\n    _classCallCheck(this, LoadingBar);\n    _this = _super.call(this, props);\n    _this.reset = function () {\n      _this.terminatingAnimationTimeoutId = null;\n      _this.setState(initialState);\n    };\n    _this.newPercent = function (percent, progressIncrease) {\n      // Use cosine as a smoothing function\n      // It could be any function to slow down progress near the ending 100%\n      var smoothedProgressIncrease = progressIncrease * Math.cos(percent * (Math.PI / 2 / 100));\n      return percent + smoothedProgressIncrease;\n    };\n    _this.simulateProgress = function () {\n      _this.setState(function (prevState, _ref) {\n        var maxProgress = _ref.maxProgress,\n          progressIncrease = _ref.progressIncrease;\n        var percent = prevState.percent;\n        var newPercent = _this.newPercent(percent, progressIncrease);\n        if (newPercent <= maxProgress) {\n          percent = newPercent;\n        }\n        return {\n          percent: percent\n        };\n      });\n    };\n    _this.state = _objectSpread({}, initialState);\n    return _this;\n  }\n  _createClass(LoadingBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var status = this.state.status;\n      if (status === 'starting') {\n        this.start();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var status = this.state.status;\n      if (prevState.status !== status) {\n        if (status === 'starting') {\n          this.start();\n        }\n        if (status === 'stopping') {\n          this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.progressIntervalId);\n      clearTimeout(this.terminatingAnimationTimeoutId);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      // There could be previous termination animation going, so we need to\n      // cancel it and forcefully reset the Loading Bar before starting\n      // the progress simulation from 0\n      if (this.terminatingAnimationTimeoutId) {\n        clearTimeout(this.terminatingAnimationTimeoutId);\n        this.reset();\n      }\n      var updateTime = this.props.updateTime;\n      this.progressIntervalId = setInterval(this.simulateProgress, updateTime);\n      this.setState({\n        status: 'running'\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var showFastActions = this.props.showFastActions;\n      clearInterval(this.progressIntervalId);\n      this.progressIntervalId = null;\n      var terminatingAnimationDuration = this.isShown() || showFastActions ? TERMINATING_ANIMATION_DURATION : 0;\n      this.terminatingAnimationTimeoutId = setTimeout(this.reset, terminatingAnimationDuration);\n      this.setState({\n        percent: 100\n      });\n    }\n  }, {\n    key: \"isShown\",\n    value: function isShown() {\n      var percent = this.state.percent;\n      return percent > 0 && percent <= 100;\n    }\n  }, {\n    key: \"buildStyle\",\n    value: function buildStyle() {\n      var _this$state = this.state,\n        status = _this$state.status,\n        percent = _this$state.percent;\n      var _this$props = this.props,\n        className = _this$props.className,\n        customStyle = _this$props.style;\n      var animationDuration = status === 'stopping' ? TERMINATING_ANIMATION_DURATION : ANIMATION_DURATION;\n      var style = {\n        width: \"\".concat(percent, \"%\"),\n        transition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        msTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        WebkitTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        MozTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        OTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        willChange: 'width, opacity'\n      }; // Use default styling if there's no CSS class applied\n\n      if (!className) {\n        style.height = '3px';\n        style.backgroundColor = 'red';\n        style.position = 'absolute';\n      }\n      if (this.isShown()) {\n        style.opacity = '1';\n      } else {\n        style.opacity = '0';\n      }\n      return _objectSpread(_objectSpread({}, style), customStyle);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var status = this.state.status;\n      var _this$props2 = this.props,\n        direction = _this$props2.direction,\n        className = _this$props2.className;\n      if (status === 'hidden') {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null);\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          direction: direction\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: this.buildStyle(),\n        className: className\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          display: 'table',\n          clear: 'both'\n        }\n      }));\n    }\n  }]);\n  return LoadingBar;\n}(_react.Component);\nexports.LoadingBar = LoadingBar;\nLoadingBar.propTypes = {\n  className: _propTypes.string,\n  direction: _propTypes.string,\n  loading: _propTypes.number,\n  maxProgress: _propTypes.number,\n  progressIncrease: _propTypes.number,\n  scope: _propTypes.string,\n  showFastActions: _propTypes.bool,\n  style: _propTypes.object,\n  updateTime: _propTypes.number\n};\nLoadingBar.defaultProps = {\n  className: '',\n  direction: 'ltr',\n  loading: 0,\n  maxProgress: MAX_PROGRESS,\n  progressIncrease: PROGRESS_INCREASE,\n  scope: _loading_bar_ducks.DEFAULT_SCOPE,\n  showFastActions: false,\n  style: {},\n  updateTime: UPDATE_TIME\n};\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    loading: state.loadingBar[ownProps.scope || _loading_bar_ducks.DEFAULT_SCOPE]\n  };\n};\n(0, _reactLifecyclesCompat.polyfill)(LoadingBar);\nvar ConnectedLoadingBar = (0, _reactRedux.connect)(mapStateToProps)(LoadingBar);\nexports[\"default\"] = ConnectedLoadingBar;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _SwipeableViews.default;\n  }\n});\nObject.defineProperty(exports, \"SwipeableViewsContext\", {\n  enumerable: true,\n  get: function get() {\n    return _SwipeableViews.SwipeableViewsContext;\n  }\n});\nvar _SwipeableViews = _interopRequireWildcard(require(\"./SwipeableViews\"));","function _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nmodule.exports = _interopRequireWildcard;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  RESISTANCE_COEF: 0.6,\n  // This value is closed to what browsers are using internally to\n  // trigger a native scroll.\n  UNCERTAINTY_THRESHOLD: 3 // px\n};\n\nexports.default = _default;","var map = {\n\t\"./af.json\": [\n\t\t1220,\n\t\t559\n\t],\n\t\"./an.json\": [\n\t\t1221,\n\t\t560\n\t],\n\t\"./ar.json\": [\n\t\t1222,\n\t\t561\n\t],\n\t\"./ast.json\": [\n\t\t1223,\n\t\t562\n\t],\n\t\"./be.json\": [\n\t\t1224,\n\t\t563\n\t],\n\t\"./bg.json\": [\n\t\t1225,\n\t\t564\n\t],\n\t\"./bn.json\": [\n\t\t1226,\n\t\t565\n\t],\n\t\"./br.json\": [\n\t\t1227,\n\t\t566\n\t],\n\t\"./bs.json\": [\n\t\t1228,\n\t\t567\n\t],\n\t\"./ca.json\": [\n\t\t1229,\n\t\t568\n\t],\n\t\"./ckb.json\": [\n\t\t1230,\n\t\t569\n\t],\n\t\"./co.json\": [\n\t\t1231,\n\t\t570\n\t],\n\t\"./cs.json\": [\n\t\t1232,\n\t\t571\n\t],\n\t\"./cy.json\": [\n\t\t1233,\n\t\t572\n\t],\n\t\"./da.json\": [\n\t\t1234,\n\t\t573\n\t],\n\t\"./de.json\": [\n\t\t1235,\n\t\t574\n\t],\n\t\"./el.json\": [\n\t\t1236,\n\t\t575\n\t],\n\t\"./en-GB.json\": [\n\t\t1237,\n\t\t576\n\t],\n\t\"./en.json\": [\n\t\t1238,\n\t\t577\n\t],\n\t\"./eo.json\": [\n\t\t1239,\n\t\t578\n\t],\n\t\"./es-AR.json\": [\n\t\t1240,\n\t\t579\n\t],\n\t\"./es-MX.json\": [\n\t\t1241,\n\t\t580\n\t],\n\t\"./es.json\": [\n\t\t1242,\n\t\t581\n\t],\n\t\"./et.json\": [\n\t\t1243,\n\t\t582\n\t],\n\t\"./eu.json\": [\n\t\t1244,\n\t\t583\n\t],\n\t\"./fa.json\": [\n\t\t1245,\n\t\t584\n\t],\n\t\"./fi.json\": [\n\t\t1246,\n\t\t585\n\t],\n\t\"./fo.json\": [\n\t\t1247,\n\t\t586\n\t],\n\t\"./fr-QC.json\": [\n\t\t1248,\n\t\t587\n\t],\n\t\"./fr.json\": [\n\t\t1249,\n\t\t588\n\t],\n\t\"./fy.json\": [\n\t\t1250,\n\t\t589\n\t],\n\t\"./ga.json\": [\n\t\t1251,\n\t\t590\n\t],\n\t\"./gd.json\": [\n\t\t1252,\n\t\t591\n\t],\n\t\"./gl.json\": [\n\t\t1253,\n\t\t592\n\t],\n\t\"./he.json\": [\n\t\t1254,\n\t\t593\n\t],\n\t\"./hi.json\": [\n\t\t1255,\n\t\t594\n\t],\n\t\"./hr.json\": [\n\t\t1256,\n\t\t595\n\t],\n\t\"./hu.json\": [\n\t\t1257,\n\t\t596\n\t],\n\t\"./hy.json\": [\n\t\t1258,\n\t\t597\n\t],\n\t\"./id.json\": [\n\t\t1259,\n\t\t598\n\t],\n\t\"./ig.json\": [\n\t\t1260,\n\t\t599\n\t],\n\t\"./io.json\": [\n\t\t1261,\n\t\t600\n\t],\n\t\"./is.json\": [\n\t\t1262,\n\t\t601\n\t],\n\t\"./it.json\": [\n\t\t1263,\n\t\t602\n\t],\n\t\"./ja.json\": [\n\t\t1264,\n\t\t603\n\t],\n\t\"./ka.json\": [\n\t\t1265,\n\t\t604\n\t],\n\t\"./kab.json\": [\n\t\t1266,\n\t\t605\n\t],\n\t\"./kk.json\": [\n\t\t1267,\n\t\t606\n\t],\n\t\"./kn.json\": [\n\t\t1268,\n\t\t607\n\t],\n\t\"./ko.json\": [\n\t\t1269,\n\t\t608\n\t],\n\t\"./ku.json\": [\n\t\t1270,\n\t\t609\n\t],\n\t\"./kw.json\": [\n\t\t1271,\n\t\t610\n\t],\n\t\"./la.json\": [\n\t\t1272,\n\t\t611\n\t],\n\t\"./lt.json\": [\n\t\t1273,\n\t\t612\n\t],\n\t\"./lv.json\": [\n\t\t1274,\n\t\t613\n\t],\n\t\"./mk.json\": [\n\t\t1275,\n\t\t614\n\t],\n\t\"./ml.json\": [\n\t\t1276,\n\t\t615\n\t],\n\t\"./mr.json\": [\n\t\t1277,\n\t\t616\n\t],\n\t\"./ms.json\": [\n\t\t1278,\n\t\t617\n\t],\n\t\"./my.json\": [\n\t\t1279,\n\t\t618\n\t],\n\t\"./nl.json\": [\n\t\t1280,\n\t\t619\n\t],\n\t\"./nn.json\": [\n\t\t1281,\n\t\t620\n\t],\n\t\"./no.json\": [\n\t\t1282,\n\t\t621\n\t],\n\t\"./oc.json\": [\n\t\t1283,\n\t\t622\n\t],\n\t\"./pa.json\": [\n\t\t1284,\n\t\t623\n\t],\n\t\"./pl.json\": [\n\t\t1285,\n\t\t624\n\t],\n\t\"./pt-BR.json\": [\n\t\t1286,\n\t\t625\n\t],\n\t\"./pt-PT.json\": [\n\t\t1287,\n\t\t626\n\t],\n\t\"./ro.json\": [\n\t\t1288,\n\t\t627\n\t],\n\t\"./ru.json\": [\n\t\t1289,\n\t\t628\n\t],\n\t\"./sa.json\": [\n\t\t1290,\n\t\t629\n\t],\n\t\"./sc.json\": [\n\t\t1291,\n\t\t630\n\t],\n\t\"./sco.json\": [\n\t\t1292,\n\t\t631\n\t],\n\t\"./si.json\": [\n\t\t1293,\n\t\t632\n\t],\n\t\"./sk.json\": [\n\t\t1294,\n\t\t633\n\t],\n\t\"./sl.json\": [\n\t\t1295,\n\t\t634\n\t],\n\t\"./sq.json\": [\n\t\t1296,\n\t\t635\n\t],\n\t\"./sr-Latn.json\": [\n\t\t1297,\n\t\t636\n\t],\n\t\"./sr.json\": [\n\t\t1298,\n\t\t637\n\t],\n\t\"./sv.json\": [\n\t\t1299,\n\t\t638\n\t],\n\t\"./szl.json\": [\n\t\t1300,\n\t\t639\n\t],\n\t\"./ta.json\": [\n\t\t1301,\n\t\t640\n\t],\n\t\"./tai.json\": [\n\t\t1302,\n\t\t641\n\t],\n\t\"./te.json\": [\n\t\t1303,\n\t\t642\n\t],\n\t\"./th.json\": [\n\t\t1304,\n\t\t643\n\t],\n\t\"./tr.json\": [\n\t\t1305,\n\t\t644\n\t],\n\t\"./tt.json\": [\n\t\t1306,\n\t\t645\n\t],\n\t\"./ug.json\": [\n\t\t1307,\n\t\t646\n\t],\n\t\"./uk.json\": [\n\t\t1308,\n\t\t647\n\t],\n\t\"./ur.json\": [\n\t\t1309,\n\t\t648\n\t],\n\t\"./vi.json\": [\n\t\t1310,\n\t\t649\n\t],\n\t\"./zgh.json\": [\n\t\t1311,\n\t\t650\n\t],\n\t\"./zh-CN.json\": [\n\t\t1312,\n\t\t651\n\t],\n\t\"./zh-HK.json\": [\n\t\t1313,\n\t\t652\n\t],\n\t\"./zh-TW.json\": [\n\t\t1314,\n\t\t653\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 907;\nmodule.exports = webpackAsyncContext;","var q = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"#\", \"$\", \"%\", \"*\", \"+\", \",\", \"-\", \".\", \":\", \";\", \"=\", \"?\", \"@\", \"[\", \"]\", \"^\", \"_\", \"{\", \"|\", \"}\", \"~\"],\n  x = t => {\n    let e = 0;\n    for (let r = 0; r < t.length; r++) {\n      let n = t[r],\n        l = q.indexOf(n);\n      e = e * 83 + l;\n    }\n    return e;\n  },\n  p = (t, e) => {\n    var r = \"\";\n    for (let n = 1; n <= e; n++) {\n      let l = Math.floor(t) / Math.pow(83, e - n) % 83;\n      r += q[Math.floor(l)];\n    }\n    return r;\n  };\nvar f = t => {\n    let e = t / 255;\n    return e <= .04045 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4);\n  },\n  h = t => {\n    let e = Math.max(0, Math.min(1, t));\n    return e <= .0031308 ? Math.trunc(e * 12.92 * 255 + .5) : Math.trunc((1.055 * Math.pow(e, .4166666666666667) - .055) * 255 + .5);\n  },\n  F = t => t < 0 ? -1 : 1,\n  M = (t, e) => F(t) * Math.pow(Math.abs(t), e);\nvar d = class extends Error {\n  constructor(e) {\n    super(e), this.name = \"ValidationError\", this.message = e;\n  }\n};\nvar C = t => {\n    if (!t || t.length < 6) throw new d(\"The blurhash string must be at least 6 characters\");\n    let e = x(t[0]),\n      r = Math.floor(e / 9) + 1,\n      n = e % 9 + 1;\n    if (t.length !== 4 + 2 * n * r) throw new d(`blurhash length mismatch: length is ${t.length} but it should be ${4 + 2 * n * r}`);\n  },\n  N = t => {\n    try {\n      C(t);\n    } catch (e) {\n      return {\n        result: !1,\n        errorReason: e.message\n      };\n    }\n    return {\n      result: !0\n    };\n  },\n  z = t => {\n    let e = t >> 16,\n      r = t >> 8 & 255,\n      n = t & 255;\n    return [f(e), f(r), f(n)];\n  },\n  L = (t, e) => {\n    let r = Math.floor(t / 361),\n      n = Math.floor(t / 19) % 19,\n      l = t % 19;\n    return [M((r - 9) / 9, 2) * e, M((n - 9) / 9, 2) * e, M((l - 9) / 9, 2) * e];\n  },\n  U = (t, e, r, n) => {\n    C(t), n = n | 1;\n    let l = x(t[0]),\n      m = Math.floor(l / 9) + 1,\n      b = l % 9 + 1,\n      i = (x(t[1]) + 1) / 166,\n      u = new Array(b * m);\n    for (let o = 0; o < u.length; o++) if (o === 0) {\n      let a = x(t.substring(2, 6));\n      u[o] = z(a);\n    } else {\n      let a = x(t.substring(4 + o * 2, 6 + o * 2));\n      u[o] = L(a, i * n);\n    }\n    let c = e * 4,\n      s = new Uint8ClampedArray(c * r);\n    for (let o = 0; o < r; o++) for (let a = 0; a < e; a++) {\n      let y = 0,\n        B = 0,\n        R = 0;\n      for (let w = 0; w < m; w++) for (let P = 0; P < b; P++) {\n        let G = Math.cos(Math.PI * a * P / e) * Math.cos(Math.PI * o * w / r),\n          T = u[P + w * b];\n        y += T[0] * G, B += T[1] * G, R += T[2] * G;\n      }\n      let V = h(y),\n        I = h(B),\n        E = h(R);\n      s[4 * a + 0 + o * c] = V, s[4 * a + 1 + o * c] = I, s[4 * a + 2 + o * c] = E, s[4 * a + 3 + o * c] = 255;\n    }\n    return s;\n  },\n  j = U;\nvar A = 4,\n  D = (t, e, r, n) => {\n    let l = 0,\n      m = 0,\n      b = 0,\n      g = e * A;\n    for (let u = 0; u < e; u++) {\n      let c = A * u;\n      for (let s = 0; s < r; s++) {\n        let o = c + s * g,\n          a = n(u, s);\n        l += a * f(t[o]), m += a * f(t[o + 1]), b += a * f(t[o + 2]);\n      }\n    }\n    let i = 1 / (e * r);\n    return [l * i, m * i, b * i];\n  },\n  $ = t => {\n    let e = h(t[0]),\n      r = h(t[1]),\n      n = h(t[2]);\n    return (e << 16) + (r << 8) + n;\n  },\n  H = (t, e) => {\n    let r = Math.floor(Math.max(0, Math.min(18, Math.floor(M(t[0] / e, .5) * 9 + 9.5)))),\n      n = Math.floor(Math.max(0, Math.min(18, Math.floor(M(t[1] / e, .5) * 9 + 9.5)))),\n      l = Math.floor(Math.max(0, Math.min(18, Math.floor(M(t[2] / e, .5) * 9 + 9.5))));\n    return r * 19 * 19 + n * 19 + l;\n  },\n  O = (t, e, r, n, l) => {\n    if (n < 1 || n > 9 || l < 1 || l > 9) throw new d(\"BlurHash must have between 1 and 9 components\");\n    if (e * r * 4 !== t.length) throw new d(\"Width and height must match the pixels array\");\n    let m = [];\n    for (let s = 0; s < l; s++) for (let o = 0; o < n; o++) {\n      let a = o == 0 && s == 0 ? 1 : 2,\n        y = D(t, e, r, (B, R) => a * Math.cos(Math.PI * o * B / e) * Math.cos(Math.PI * s * R / r));\n      m.push(y);\n    }\n    let b = m[0],\n      g = m.slice(1),\n      i = \"\",\n      u = n - 1 + (l - 1) * 9;\n    i += p(u, 1);\n    let c;\n    if (g.length > 0) {\n      let s = Math.max(...g.map(a => Math.max(...a))),\n        o = Math.floor(Math.max(0, Math.min(82, Math.floor(s * 166 - .5))));\n      c = (o + 1) / 166, i += p(o, 1);\n    } else c = 1, i += p(0, 1);\n    return i += p($(b), 4), g.forEach(s => {\n      i += p(H(s, c), 2);\n    }), i;\n  },\n  S = O;\nexport { d as ValidationError, j as decode, S as encode, N as isBlurhashValid };","function n(n, r, t) {\n  return {\n    r: 255 * t(n.r / 255, r.r / 255),\n    g: 255 * t(n.g / 255, r.g / 255),\n    b: 255 * t(n.b / 255, r.b / 255)\n  };\n}\nfunction r(n, r) {\n  return r;\n}\nfunction t(n, r) {\n  return n * r;\n}\nfunction u(n, r) {\n  return n + r - n * r;\n}\nfunction i(n, r) {\n  return a(r, n);\n}\nfunction o(n, r) {\n  return Math.min(n, r);\n}\nfunction e(n, r) {\n  return Math.min(Math.max(n, r), 1);\n}\nfunction c(n, r) {\n  return 0 === n ? 0 : 1 === r ? 1 : Math.min(1, n / (1 - r));\n}\nfunction f(n, r) {\n  return 1 === n ? 1 : 0 === r ? 0 : 1 - Math.min(1, (1 - n) / r);\n}\nfunction a(n, r) {\n  return r <= .5 ? t(n, 2 * r) : u(n, 2 * r - 1);\n}\nfunction b(n, r) {\n  return r <= .5 ? n - (1 - 2 * r) * n * (1 - n) : n + (2 * r - 1) * ((n <= .25 ? ((16 * n - 12) * n + 4) * n : Math.sqrt(n)) - n);\n}\nfunction g(n, r) {\n  return Math.abs(n - r);\n}\nfunction h(n, r) {\n  return n + r - 2 * n * r;\n}\nfunction M(n, r, t) {\n  return Math.min(Math.max(n || 0, r), t);\n}\nfunction m(n) {\n  return {\n    r: M(n.r, 0, 255),\n    g: M(n.g, 0, 255),\n    b: M(n.b, 0, 255),\n    a: M(n.a, 0, 1)\n  };\n}\nfunction d(n) {\n  return {\n    r: 255 * n.r,\n    g: 255 * n.g,\n    b: 255 * n.b,\n    a: n.a\n  };\n}\nfunction p(n) {\n  return {\n    r: n.r / 255,\n    g: n.g / 255,\n    b: n.b / 255,\n    a: n.a\n  };\n}\nfunction v(n, r) {\n  void 0 === r && (r = 0);\n  var t = Math.pow(10, r);\n  return {\n    r: Math.round(n.r * t) / t,\n    g: Math.round(n.g * t) / t,\n    b: Math.round(n.b * t) / t,\n    a: n.a\n  };\n}\nfunction x(n, r, t, u, i, o) {\n  return (1 - r / t) * u + r / t * Math.round((1 - n) * i + n * o);\n}\nfunction O(n, r, t, u, i) {\n  void 0 === i && (i = {\n    unitInput: !1,\n    unitOutput: !1,\n    roundOutput: !0\n  }), i.unitInput && (n = d(n), r = d(r)), n = m(n);\n  var o = (r = m(r)).a + n.a - r.a * n.a,\n    e = t(n, r, u),\n    c = m({\n      r: x(n.a, r.a, o, n.r, r.r, e.r),\n      g: x(n.a, r.a, o, n.g, r.g, e.g),\n      b: x(n.a, r.a, o, n.b, r.b, e.b),\n      a: o\n    });\n  return c = i.unitOutput ? p(c) : i.roundOutput ? v(c) : function (n) {\n    return v(n, 9);\n  }(c), c;\n}\nfunction s(n, r, t) {\n  return d(t(p(n), p(r)));\n}\nfunction I(n) {\n  return .3 * n.r + .59 * n.g + .11 * n.b;\n}\nfunction q(n, r) {\n  var t = r - I(n);\n  return function (n) {\n    var r = I(n),\n      t = n.r,\n      u = n.g,\n      i = n.b,\n      o = Math.min(t, u, i),\n      e = Math.max(t, u, i);\n    function c(n) {\n      return r + (n - r) * r / (r - o);\n    }\n    function f(n) {\n      return r + (n - r) * (1 - r) / (e - r);\n    }\n    return o < 0 && (t = c(t), u = c(u), i = c(i)), e > 1 && (t = f(t), u = f(u), i = f(i)), {\n      r: t,\n      g: u,\n      b: i\n    };\n  }({\n    r: n.r + t,\n    g: n.g + t,\n    b: n.b + t\n  });\n}\nfunction w(n) {\n  return Math.max(n.r, n.g, n.b) - Math.min(n.r, n.g, n.b);\n}\nfunction j(n, r) {\n  var t = [\"r\", \"g\", \"b\"].sort(function (r, t) {\n      return n[r] - n[t];\n    }),\n    u = t[0],\n    i = t[1],\n    o = t[2],\n    e = {\n      r: n.r,\n      g: n.g,\n      b: n.b\n    };\n  return e[o] > e[u] ? (e[i] = (e[i] - e[u]) * r / (e[o] - e[u]), e[o] = r) : e[i] = e[o] = 0, e[u] = 0, e;\n}\nfunction k(n, r) {\n  return q(j(r, w(n)), I(n));\n}\nfunction l(n, r) {\n  return q(j(n, w(r)), I(n));\n}\nfunction y(n, r) {\n  return q(r, I(n));\n}\nfunction z(n, r) {\n  return q(n, I(r));\n}\nfunction A(t, u) {\n  return O(t, u, n, r);\n}\nfunction B(r, u) {\n  return O(r, u, n, t);\n}\nfunction C(r, t) {\n  return O(r, t, n, u);\n}\nfunction D(r, t) {\n  return O(r, t, n, i);\n}\nfunction E(r, t) {\n  return O(r, t, n, o);\n}\nfunction F(r, t) {\n  return O(r, t, n, e);\n}\nfunction G(r, t) {\n  return O(r, t, n, c);\n}\nfunction H(r, t) {\n  return O(r, t, n, f);\n}\nfunction J(r, t) {\n  return O(r, t, n, a);\n}\nfunction K(r, t) {\n  return O(r, t, n, b);\n}\nfunction L(r, t) {\n  return O(r, t, n, g);\n}\nfunction N(r, t) {\n  return O(r, t, n, h);\n}\nfunction P(n, r) {\n  return O(n, r, s, k);\n}\nfunction Q(n, r) {\n  return O(n, r, s, l);\n}\nfunction R(n, r) {\n  return O(n, r, s, y);\n}\nfunction S(n, r) {\n  return O(n, r, s, z);\n}\nexport { R as color, H as colorBurn, G as colorDodge, E as darken, L as difference, N as exclusion, J as hardLight, P as hue, F as lighten, S as luminosity, B as multiply, A as normal, D as overlay, Q as saturation, C as screen, K as softLight };","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}","// A mapping of unicode strings to an object containing the filename\n// (i.e. the svg filename) and a shortCode intended to be shown\n// as a \"title\" attribute in an HTML element (aka tooltip).\n\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToFilename } from './unicode_to_filename';\n\nconst [\n  shortCodesToEmojiData,\n  _skins,\n  _categories,\n  _short_names,\n  emojisWithoutShortCodes,\n] = emojiCompressed;\n\n// decompress\nconst unicodeMapping = {};\n\nfunction processEmojiMapData(emojiMapData, shortCode) {\n  let [ native, filename ] = emojiMapData;\n  if (!filename) {\n    // filename name can be derived from unicodeToFilename\n    filename = unicodeToFilename(native);\n  }\n  unicodeMapping[native] = {\n    shortCode: shortCode,\n    filename: filename,\n  };\n}\n\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  let [ filenameData ] = shortCodesToEmojiData[shortCode];\n  filenameData.forEach(emojiMapData => processEmojiMapData(emojiMapData, shortCode));\n});\nemojisWithoutShortCodes.forEach(emojiMapData => processEmojiMapData(emojiMapData));\n\nexport default unicodeMapping;\n","import ready from '../ready';\n\nexport let assetHost = '';\n\nready(() => {\n  const cdnHost = document.querySelector('meta[name=cdn-host]');\n  if (cdnHost) {\n    assetHost = cdnHost.content || '';\n  }\n});\n","// A mapping of unicode strings to an object containing the filename\n// (i.e. the svg filename) and a shortCode intended to be shown\n// as a \"title\" attribute in an HTML element (aka tooltip).\n\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToFilename } from './unicode_to_filename';\n\nconst [\n  shortCodesToEmojiData,\n  _skins,\n  _categories,\n  _short_names,\n  emojisWithoutShortCodes,\n] = emojiCompressed;\n\n// decompress\nconst unicodeMapping = {};\n\nfunction processEmojiMapData(emojiMapData, shortCode) {\n  let [ native, filename ] = emojiMapData;\n  if (!filename) {\n    // filename name can be derived from unicodeToFilename\n    filename = unicodeToFilename(native);\n  }\n  unicodeMapping[native] = {\n    shortCode: shortCode,\n    filename: filename,\n  };\n}\n\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  let [ filenameData ] = shortCodesToEmojiData[shortCode];\n  filenameData.forEach(emojiMapData => processEmojiMapData(emojiMapData, shortCode));\n});\nemojisWithoutShortCodes.forEach(emojiMapData => processEmojiMapData(emojiMapData));\n\nexport default unicodeMapping;\n","export const toServerSideType = (columnType: string) => {\n  switch (columnType) {\n    case 'home':\n    case 'notifications':\n    case 'public':\n    case 'thread':\n    case 'account':\n      return columnType;\n    default:\n      if (columnType.includes('list:')) {\n        return 'home';\n      } else {\n        return 'public'; // community, account, hashtag\n      }\n  }\n};\n","import { expandSpoilers } from 'flavours/glitch/initial_state';\n\nfunction _autoUnfoldCW(spoiler_text, skip_unfold_regex) {\n  if (!expandSpoilers)\n    return false;\n\n  if (!skip_unfold_regex)\n    return true;\n\n  let regex = null;\n\n  try {\n    regex = new RegExp(skip_unfold_regex.trim(), 'i');\n  } catch (e) {\n    // Bad regex, skip filters\n    return true;\n  }\n\n  return !regex.test(spoiler_text);\n}\n\nexport function autoHideCW(settings, spoiler_text) {\n  return !_autoUnfoldCW(spoiler_text, settings.getIn(['content_warnings', 'filter']));\n}\n\nexport function autoUnfoldCW(settings, status) {\n  if (!status)\n    return false;\n\n  return _autoUnfoldCW(status.get('spoiler_text'), settings.getIn(['content_warnings', 'filter']));\n}\n","import { useCallback, useState } from 'react';\n\ninterface Props {\n  src: string;\n  key: string;\n  alt?: string;\n  lang?: string;\n  width: number;\n  height: number;\n  onClick?: () => void;\n}\n\nexport const GIFV: React.FC<Props> = ({\n  src,\n  alt,\n  lang,\n  width,\n  height,\n  onClick,\n}) => {\n  const [loading, setLoading] = useState(true);\n\n  const handleLoadedData: React.ReactEventHandler<HTMLVideoElement> =\n    useCallback(() => {\n      setLoading(false);\n    }, [setLoading]);\n\n  const handleClick: React.MouseEventHandler = useCallback(\n    (e) => {\n      if (onClick) {\n        e.stopPropagation();\n        onClick();\n      }\n    },\n    [onClick],\n  );\n\n  return (\n    <div className='gifv' style={{ position: 'relative' }}>\n      {loading && (\n        <canvas\n          width={width}\n          height={height}\n          role='button'\n          tabIndex={0}\n          aria-label={alt}\n          title={alt}\n          lang={lang}\n          onClick={handleClick}\n        />\n      )}\n\n      <video\n        src={src}\n        role='button'\n        tabIndex={0}\n        aria-label={alt}\n        title={alt}\n        lang={lang}\n        muted\n        loop\n        autoPlay\n        playsInline\n        onClick={handleClick}\n        onLoadedData={handleLoadedData}\n        style={{ position: loading ? 'absolute' : 'static', top: 0, left: 0 }}\n      />\n    </div>\n  );\n};\n","const DIGIT_CHARACTERS = [\n  '0',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  'A',\n  'B',\n  'C',\n  'D',\n  'E',\n  'F',\n  'G',\n  'H',\n  'I',\n  'J',\n  'K',\n  'L',\n  'M',\n  'N',\n  'O',\n  'P',\n  'Q',\n  'R',\n  'S',\n  'T',\n  'U',\n  'V',\n  'W',\n  'X',\n  'Y',\n  'Z',\n  'a',\n  'b',\n  'c',\n  'd',\n  'e',\n  'f',\n  'g',\n  'h',\n  'i',\n  'j',\n  'k',\n  'l',\n  'm',\n  'n',\n  'o',\n  'p',\n  'q',\n  'r',\n  's',\n  't',\n  'u',\n  'v',\n  'w',\n  'x',\n  'y',\n  'z',\n  '#',\n  '$',\n  '%',\n  '*',\n  '+',\n  ',',\n  '-',\n  '.',\n  ':',\n  ';',\n  '=',\n  '?',\n  '@',\n  '[',\n  ']',\n  '^',\n  '_',\n  '{',\n  '|',\n  '}',\n  '~',\n];\n\nexport const decode83 = (str: string) => {\n  let value = 0;\n  let digit;\n\n  for (const c of str) {\n    digit = DIGIT_CHARACTERS.indexOf(c);\n    value = value * 83 + digit;\n  }\n\n  return value;\n};\n\nexport const intToRGB = (int: number) => ({\n  r: Math.max(0, int >> 16),\n  g: Math.max(0, (int >> 8) & 255),\n  b: Math.max(0, int & 255),\n});\n\nexport const getAverageFromBlurhash = (blurhash: string) => {\n  if (!blurhash) {\n    return null;\n  }\n\n  return intToRGB(decode83(blurhash.slice(2, 6)));\n};\n","export function recoverHashtags (recognizedTags, text) {\n  return recognizedTags.map(tag => {\n    const re = new RegExp(`(?:^|[^/)\\\\w])#(${tag.name})`, 'i');\n    const matched_hashtag = text.match(re);\n    return matched_hashtag ? matched_hashtag[1] : null;\n  },\n  ).filter(x => x !== null);\n}\n","import { useCallback, useState } from 'react';\nimport * as React from 'react';\n\ninterface Props {\n  src: string;\n  key: string;\n  alt?: string;\n  lang?: string;\n  width: number;\n  height: number;\n  onClick?: () => void;\n}\n\nexport const GIFV: React.FC<Props> = ({\n  src,\n  alt,\n  lang,\n  width,\n  height,\n  onClick,\n}) => {\n  const [loading, setLoading] = useState(true);\n\n  const handleLoadedData: React.ReactEventHandler<HTMLVideoElement> =\n    useCallback(() => {\n      setLoading(false);\n    }, [setLoading]);\n\n  const handleClick: React.MouseEventHandler = useCallback(\n    (e) => {\n      if (onClick) {\n        e.stopPropagation();\n        onClick();\n      }\n    },\n    [onClick],\n  );\n\n  return (\n    <div className='gifv' style={{ position: 'relative' }}>\n      {loading && (\n        <canvas\n          width={width}\n          height={height}\n          role='button'\n          tabIndex={0}\n          aria-label={alt}\n          title={alt}\n          lang={lang}\n          onClick={handleClick}\n        />\n      )}\n\n      <video\n        src={src}\n        role='button'\n        tabIndex={0}\n        aria-label={alt}\n        title={alt}\n        lang={lang}\n        muted\n        loop\n        autoPlay\n        playsInline\n        onClick={handleClick}\n        onLoadedData={handleLoadedData}\n        style={{ position: loading ? 'absolute' : 'static', top: 0, left: 0 }}\n      />\n    </div>\n  );\n};\n","const DIGIT_CHARACTERS = [\n  '0',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  'A',\n  'B',\n  'C',\n  'D',\n  'E',\n  'F',\n  'G',\n  'H',\n  'I',\n  'J',\n  'K',\n  'L',\n  'M',\n  'N',\n  'O',\n  'P',\n  'Q',\n  'R',\n  'S',\n  'T',\n  'U',\n  'V',\n  'W',\n  'X',\n  'Y',\n  'Z',\n  'a',\n  'b',\n  'c',\n  'd',\n  'e',\n  'f',\n  'g',\n  'h',\n  'i',\n  'j',\n  'k',\n  'l',\n  'm',\n  'n',\n  'o',\n  'p',\n  'q',\n  'r',\n  's',\n  't',\n  'u',\n  'v',\n  'w',\n  'x',\n  'y',\n  'z',\n  '#',\n  '$',\n  '%',\n  '*',\n  '+',\n  ',',\n  '-',\n  '.',\n  ':',\n  ';',\n  '=',\n  '?',\n  '@',\n  '[',\n  ']',\n  '^',\n  '_',\n  '{',\n  '|',\n  '}',\n  '~',\n];\n\nexport const decode83 = (str: string) => {\n  let value = 0;\n  let digit;\n\n  for (const c of str) {\n    digit = DIGIT_CHARACTERS.indexOf(c);\n    value = value * 83 + digit;\n  }\n\n  return value;\n};\n\nexport const intToRGB = (int: number) => ({\n  r: Math.max(0, int >> 16),\n  g: Math.max(0, (int >> 8) & 255),\n  b: Math.max(0, int & 255),\n});\n\nexport const getAverageFromBlurhash = (blurhash: string) => {\n  if (!blurhash) {\n    return null;\n  }\n\n  return intToRGB(decode83(blurhash.slice(2, 6)));\n};\n","// The output of this module is designed to mimic emoji-mart's\n// \"data\" object, such that we can use it for a light version of emoji-mart's\n// emojiIndex.search functionality.\nimport type { BaseEmoji } from 'emoji-mart';\nimport type { Emoji } from 'emoji-mart/dist-es/utils/data';\n\nimport type { Search, ShortCodesToEmojiData } from './emoji_compressed';\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToUnifiedName } from './unicode_to_unified_name';\n\ntype Emojis = {\n  [key in NonNullable<keyof ShortCodesToEmojiData>]: {\n    native: BaseEmoji['native'];\n    search: Search;\n    short_names: Emoji['short_names'];\n    unified: Emoji['unified'];\n  };\n};\n\nconst [\n  shortCodesToEmojiData,\n  skins,\n  categories,\n  short_names,\n  _emojisWithoutShortCodes,\n] = emojiCompressed;\n\nconst emojis: Emojis = {};\n\n// decompress\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  const [_filenameData, searchData] = shortCodesToEmojiData[shortCode];\n  const native = searchData[0];\n  let short_names = searchData[1];\n  const search = searchData[2];\n  let unified = searchData[3];\n\n  if (!unified) {\n    // unified name can be derived from unicodeToUnifiedName\n    unified = unicodeToUnifiedName(native);\n  }\n\n  if (short_names) short_names = [shortCode].concat(short_names);\n  emojis[shortCode] = {\n    native,\n    search,\n    short_names,\n    unified,\n  };\n});\n\nexport { emojis, skins, categories, short_names };\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/index.js\n\nimport * as data from './emoji_mart_data_light';\n\nconst buildSearch = (data) => {\n  const search = [];\n\n  let addToSearch = (strings, split) => {\n    if (!strings) {\n      return;\n    }\n\n    (Array.isArray(strings) ? strings : [strings]).forEach((string) => {\n      (split ? string.split(/[-|_|\\s]+/) : [string]).forEach((s) => {\n        s = s.toLowerCase();\n\n        if (search.indexOf(s) === -1) {\n          search.push(s);\n        }\n      });\n    });\n  };\n\n  addToSearch(data.short_names, true);\n  addToSearch(data.name, true);\n  addToSearch(data.keywords, false);\n  addToSearch(data.emoticons, false);\n\n  return search.join(',');\n};\n\nconst _String = String;\n\nconst stringFromCodePoint = _String.fromCodePoint || function () {\n  let MAX_SIZE = 0x4000;\n  let codeUnits = [];\n  let highSurrogate;\n  let lowSurrogate;\n  let index = -1;\n  let length = arguments.length;\n  if (!length) {\n    return '';\n  }\n  let result = '';\n  while (++index < length) {\n    let codePoint = Number(arguments[index]);\n    if (\n      !isFinite(codePoint) ||       // `NaN`, `+Infinity`, or `-Infinity`\n      codePoint < 0 ||              // not a valid Unicode code point\n      codePoint > 0x10FFFF ||       // not a valid Unicode code point\n      Math.floor(codePoint) !== codePoint // not an integer\n    ) {\n      throw RangeError('Invalid code point: ' + codePoint);\n    }\n    if (codePoint <= 0xFFFF) { // BMP code point\n      codeUnits.push(codePoint);\n    } else { // Astral code point; split in surrogate halves\n      // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      codePoint -= 0x10000;\n      highSurrogate = (codePoint >> 10) + 0xD800;\n      lowSurrogate = (codePoint % 0x400) + 0xDC00;\n      codeUnits.push(highSurrogate, lowSurrogate);\n    }\n    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n      result += String.fromCharCode.apply(null, codeUnits);\n      codeUnits.length = 0;\n    }\n  }\n  return result;\n};\n\n\nconst _JSON = JSON;\n\nconst COLONS_REGEX = /^(?::([^:]+):)(?::skin-tone-(\\d):)?$/;\nconst SKINS = [\n  '1F3FA', '1F3FB', '1F3FC',\n  '1F3FD', '1F3FE', '1F3FF',\n];\n\nfunction unifiedToNative(unified) {\n  let unicodes = unified.split('-'),\n    codePoints = unicodes.map((u) => `0x${u}`);\n\n  return stringFromCodePoint.apply(null, codePoints);\n}\n\nfunction sanitize(emoji) {\n  let { name, short_names, skin_tone, skin_variations, emoticons, unified, custom, imageUrl } = emoji,\n    id = emoji.id || short_names[0],\n    colons = `:${id}:`;\n\n  if (custom) {\n    return {\n      id,\n      name,\n      colons,\n      emoticons,\n      custom,\n      imageUrl,\n    };\n  }\n\n  if (skin_tone) {\n    colons += `:skin-tone-${skin_tone}:`;\n  }\n\n  return {\n    id,\n    name,\n    colons,\n    emoticons,\n    unified: unified.toLowerCase(),\n    skin: skin_tone || (skin_variations ? 1 : null),\n    native: unifiedToNative(unified),\n  };\n}\n\nfunction getSanitizedData() {\n  return sanitize(getData(...arguments));\n}\n\nfunction getData(emoji, skin, set) {\n  let emojiData = {};\n\n  if (typeof emoji === 'string') {\n    let matches = emoji.match(COLONS_REGEX);\n\n    if (matches) {\n      emoji = matches[1];\n\n      if (matches[2]) {\n        skin = parseInt(matches[2]);\n      }\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data.short_names, emoji)) {\n      emoji = data.short_names[emoji];\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data.emojis, emoji)) {\n      emojiData = data.emojis[emoji];\n    }\n  } else if (emoji.id) {\n    if (Object.prototype.hasOwnProperty.call(data.short_names, emoji.id)) {\n      emoji.id = data.short_names[emoji.id];\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data.emojis, emoji.id)) {\n      emojiData = data.emojis[emoji.id];\n      skin = skin || emoji.skin;\n    }\n  }\n\n  if (!Object.keys(emojiData).length) {\n    emojiData = emoji;\n    emojiData.custom = true;\n\n    if (!emojiData.search) {\n      emojiData.search = buildSearch(emoji);\n    }\n  }\n\n  emojiData.emoticons = emojiData.emoticons || [];\n  emojiData.variations = emojiData.variations || [];\n\n  if (emojiData.skin_variations && skin > 1 && set) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n\n    let skinKey = SKINS[skin - 1],\n      variationData = emojiData.skin_variations[skinKey];\n\n    if (!variationData.variations && emojiData.variations) {\n      delete emojiData.variations;\n    }\n\n    if (variationData[`has_img_${set}`]) {\n      emojiData.skin_tone = skin;\n\n      for (let k in variationData) {\n        let v = variationData[k];\n        emojiData[k] = v;\n      }\n    }\n  }\n\n  if (emojiData.variations && emojiData.variations.length) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n    emojiData.unified = emojiData.variations.shift();\n  }\n\n  return emojiData;\n}\n\nfunction uniq(arr) {\n  return arr.reduce((acc, item) => {\n    if (acc.indexOf(item) === -1) {\n      acc.push(item);\n    }\n    return acc;\n  }, []);\n}\n\nfunction intersect(a, b) {\n  const uniqA = uniq(a);\n  const uniqB = uniq(b);\n\n  return uniqA.filter(item => uniqB.indexOf(item) >= 0);\n}\n\nfunction deepMerge(a, b) {\n  let o = {};\n\n  for (let key in a) {\n    let originalValue = a[key],\n      value = originalValue;\n\n    if (Object.prototype.hasOwnProperty.call(b, key)) {\n      value = b[key];\n    }\n\n    if (typeof value === 'object') {\n      value = deepMerge(originalValue, value);\n    }\n\n    o[key] = value;\n  }\n\n  return o;\n}\n\n// https://github.com/sonicdoe/measure-scrollbar\nfunction measureScrollbar() {\n  const div = document.createElement('div');\n\n  div.style.width = '100px';\n  div.style.height = '100px';\n  div.style.overflow = 'scroll';\n  div.style.position = 'absolute';\n  div.style.top = '-9999px';\n\n  document.body.appendChild(div);\n  const scrollbarWidth = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n\n  return scrollbarWidth;\n}\n\nexport {\n  getData,\n  getSanitizedData,\n  uniq,\n  intersect,\n  deepMerge,\n  unifiedToNative,\n  measureScrollbar,\n};\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/emoji-index.js\n\nimport * as data from './emoji_mart_data_light';\nimport { getData, getSanitizedData, uniq, intersect } from './emoji_utils';\n\nlet originalPool = {};\nlet index = {};\nlet emojisList = {};\nlet emoticonsList = {};\nlet customEmojisList = [];\n\nfor (let emoji in data.emojis) {\n  let emojiData = data.emojis[emoji];\n  let { short_names, emoticons } = emojiData;\n  let id = short_names[0];\n\n  if (emoticons) {\n    emoticons.forEach(emoticon => {\n      if (emoticonsList[emoticon]) {\n        return;\n      }\n\n      emoticonsList[emoticon] = id;\n    });\n  }\n\n  emojisList[id] = getSanitizedData(id);\n  originalPool[id] = emojiData;\n}\n\nfunction clearCustomEmojis(pool) {\n  customEmojisList.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    delete pool[emojiId];\n    delete emojisList[emojiId];\n  });\n}\n\nfunction addCustomToPool(custom, pool) {\n  if (customEmojisList.length) clearCustomEmojis(pool);\n\n  custom.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    if (emojiId && !pool[emojiId]) {\n      pool[emojiId] = getData(emoji);\n      emojisList[emojiId] = getSanitizedData(emoji);\n    }\n  });\n\n  customEmojisList = custom;\n  index = {};\n}\n\nfunction search(value, { emojisToShowFilter, maxResults, include, exclude, custom } = {}) {\n  if (custom !== undefined) {\n    if (customEmojisList !== custom)\n      addCustomToPool(custom, originalPool);\n  } else {\n    custom = [];\n  }\n\n  maxResults = maxResults || 75;\n  include = include || [];\n  exclude = exclude || [];\n\n  let results = null,\n    pool = originalPool;\n\n  if (value.length) {\n    if (value === '-' || value === '-1') {\n      return [emojisList['-1']];\n    }\n\n    let values = value.toLowerCase().split(/[\\s|,\\-_]+/),\n      allResults = [];\n\n    if (values.length > 2) {\n      values = [values[0], values[1]];\n    }\n\n    if (include.length || exclude.length) {\n      pool = {};\n\n      data.categories.forEach(category => {\n        let isIncluded = include && include.length ? include.indexOf(category.name.toLowerCase()) > -1 : true;\n        let isExcluded = exclude && exclude.length ? exclude.indexOf(category.name.toLowerCase()) > -1 : false;\n        if (!isIncluded || isExcluded) {\n          return;\n        }\n\n        category.emojis.forEach(emojiId => pool[emojiId] = data.emojis[emojiId]);\n      });\n\n      if (custom.length) {\n        let customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n        let customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n        if (customIsIncluded && !customIsExcluded) {\n          addCustomToPool(custom, pool);\n        }\n      }\n    }\n\n    const searchValue = (value) => {\n      let aPool = pool,\n        aIndex = index,\n        length = 0;\n\n      for (let charIndex = 0; charIndex < value.length; charIndex++) {\n        const char = value[charIndex];\n        length++;\n\n        aIndex[char] = aIndex[char] || {};\n        aIndex = aIndex[char];\n\n        if (!aIndex.results) {\n          let scores = {};\n\n          aIndex.results = [];\n          aIndex.pool = {};\n\n          for (let id in aPool) {\n            let emoji = aPool[id],\n              { search } = emoji,\n              sub = value.slice(0, length),\n              subIndex = search.indexOf(sub);\n\n            if (subIndex !== -1) {\n              let score = subIndex + 1;\n              if (sub === id) score = 0;\n\n              aIndex.results.push(emojisList[id]);\n              aIndex.pool[id] = emoji;\n\n              scores[id] = score;\n            }\n          }\n\n          aIndex.results.sort((a, b) => {\n            let aScore = scores[a.id],\n              bScore = scores[b.id];\n\n            return aScore - bScore;\n          });\n        }\n\n        aPool = aIndex.pool;\n      }\n\n      return aIndex.results;\n    };\n\n    if (values.length > 1) {\n      results = searchValue(value);\n    } else {\n      results = [];\n    }\n\n    allResults = values.map(searchValue).filter(a => a);\n\n    if (allResults.length > 1) {\n      allResults = intersect.apply(null, allResults);\n    } else if (allResults.length) {\n      allResults = allResults[0];\n    }\n\n    results = uniq(results.concat(allResults));\n  }\n\n  if (results) {\n    if (emojisToShowFilter) {\n      results = results.filter((result) => emojisToShowFilter(data.emojis[result.id]));\n    }\n\n    if (results && results.length > maxResults) {\n      results = results.slice(0, maxResults);\n    }\n  }\n\n  return results;\n}\n\nexport { search };\n","// The output of this module is designed to mimic emoji-mart's\n// \"data\" object, such that we can use it for a light version of emoji-mart's\n// emojiIndex.search functionality.\nimport type { BaseEmoji } from 'emoji-mart';\nimport type { Emoji } from 'emoji-mart/dist-es/utils/data';\n\nimport type { Search, ShortCodesToEmojiData } from './emoji_compressed';\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToUnifiedName } from './unicode_to_unified_name';\n\ntype Emojis = {\n  [key in NonNullable<keyof ShortCodesToEmojiData>]: {\n    native: BaseEmoji['native'];\n    search: Search;\n    short_names: Emoji['short_names'];\n    unified: Emoji['unified'];\n  };\n};\n\nconst [\n  shortCodesToEmojiData,\n  skins,\n  categories,\n  short_names,\n  _emojisWithoutShortCodes,\n] = emojiCompressed;\n\nconst emojis: Emojis = {};\n\n// decompress\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  const [_filenameData, searchData] = shortCodesToEmojiData[shortCode];\n  const native = searchData[0];\n  let short_names = searchData[1];\n  const search = searchData[2];\n  let unified = searchData[3];\n\n  if (!unified) {\n    // unified name can be derived from unicodeToUnifiedName\n    unified = unicodeToUnifiedName(native);\n  }\n\n  if (short_names) short_names = [shortCode].concat(short_names);\n  emojis[shortCode] = {\n    native,\n    search,\n    short_names,\n    unified,\n  };\n});\n\nexport { emojis, skins, categories, short_names };\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/index.js\n\nimport * as data from './emoji_mart_data_light';\n\nconst buildSearch = (data) => {\n  const search = [];\n\n  let addToSearch = (strings, split) => {\n    if (!strings) {\n      return;\n    }\n\n    (Array.isArray(strings) ? strings : [strings]).forEach((string) => {\n      (split ? string.split(/[-|_|\\s]+/) : [string]).forEach((s) => {\n        s = s.toLowerCase();\n\n        if (search.indexOf(s) === -1) {\n          search.push(s);\n        }\n      });\n    });\n  };\n\n  addToSearch(data.short_names, true);\n  addToSearch(data.name, true);\n  addToSearch(data.keywords, false);\n  addToSearch(data.emoticons, false);\n\n  return search.join(',');\n};\n\nconst _String = String;\n\nconst stringFromCodePoint = _String.fromCodePoint || function () {\n  let MAX_SIZE = 0x4000;\n  let codeUnits = [];\n  let highSurrogate;\n  let lowSurrogate;\n  let index = -1;\n  let length = arguments.length;\n  if (!length) {\n    return '';\n  }\n  let result = '';\n  while (++index < length) {\n    let codePoint = Number(arguments[index]);\n    if (\n      !isFinite(codePoint) ||       // `NaN`, `+Infinity`, or `-Infinity`\n      codePoint < 0 ||              // not a valid Unicode code point\n      codePoint > 0x10FFFF ||       // not a valid Unicode code point\n      Math.floor(codePoint) !== codePoint // not an integer\n    ) {\n      throw RangeError('Invalid code point: ' + codePoint);\n    }\n    if (codePoint <= 0xFFFF) { // BMP code point\n      codeUnits.push(codePoint);\n    } else { // Astral code point; split in surrogate halves\n      // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      codePoint -= 0x10000;\n      highSurrogate = (codePoint >> 10) + 0xD800;\n      lowSurrogate = (codePoint % 0x400) + 0xDC00;\n      codeUnits.push(highSurrogate, lowSurrogate);\n    }\n    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n      result += String.fromCharCode.apply(null, codeUnits);\n      codeUnits.length = 0;\n    }\n  }\n  return result;\n};\n\n\nconst _JSON = JSON;\n\nconst COLONS_REGEX = /^(?::([^:]+):)(?::skin-tone-(\\d):)?$/;\nconst SKINS = [\n  '1F3FA', '1F3FB', '1F3FC',\n  '1F3FD', '1F3FE', '1F3FF',\n];\n\nfunction unifiedToNative(unified) {\n  let unicodes = unified.split('-'),\n    codePoints = unicodes.map((u) => `0x${u}`);\n\n  return stringFromCodePoint.apply(null, codePoints);\n}\n\nfunction sanitize(emoji) {\n  let { name, short_names, skin_tone, skin_variations, emoticons, unified, custom, imageUrl } = emoji,\n    id = emoji.id || short_names[0],\n    colons = `:${id}:`;\n\n  if (custom) {\n    return {\n      id,\n      name,\n      colons,\n      emoticons,\n      custom,\n      imageUrl,\n    };\n  }\n\n  if (skin_tone) {\n    colons += `:skin-tone-${skin_tone}:`;\n  }\n\n  return {\n    id,\n    name,\n    colons,\n    emoticons,\n    unified: unified.toLowerCase(),\n    skin: skin_tone || (skin_variations ? 1 : null),\n    native: unifiedToNative(unified),\n  };\n}\n\nfunction getSanitizedData() {\n  return sanitize(getData(...arguments));\n}\n\nfunction getData(emoji, skin, set) {\n  let emojiData = {};\n\n  if (typeof emoji === 'string') {\n    let matches = emoji.match(COLONS_REGEX);\n\n    if (matches) {\n      emoji = matches[1];\n\n      if (matches[2]) {\n        skin = parseInt(matches[2]);\n      }\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data.short_names, emoji)) {\n      emoji = data.short_names[emoji];\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data.emojis, emoji)) {\n      emojiData = data.emojis[emoji];\n    }\n  } else if (emoji.id) {\n    if (Object.prototype.hasOwnProperty.call(data.short_names, emoji.id)) {\n      emoji.id = data.short_names[emoji.id];\n    }\n\n    if (Object.prototype.hasOwnProperty.call(data.emojis, emoji.id)) {\n      emojiData = data.emojis[emoji.id];\n      skin = skin || emoji.skin;\n    }\n  }\n\n  if (!Object.keys(emojiData).length) {\n    emojiData = emoji;\n    emojiData.custom = true;\n\n    if (!emojiData.search) {\n      emojiData.search = buildSearch(emoji);\n    }\n  }\n\n  emojiData.emoticons = emojiData.emoticons || [];\n  emojiData.variations = emojiData.variations || [];\n\n  if (emojiData.skin_variations && skin > 1 && set) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n\n    let skinKey = SKINS[skin - 1],\n      variationData = emojiData.skin_variations[skinKey];\n\n    if (!variationData.variations && emojiData.variations) {\n      delete emojiData.variations;\n    }\n\n    if (variationData[`has_img_${set}`]) {\n      emojiData.skin_tone = skin;\n\n      for (let k in variationData) {\n        let v = variationData[k];\n        emojiData[k] = v;\n      }\n    }\n  }\n\n  if (emojiData.variations && emojiData.variations.length) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n    emojiData.unified = emojiData.variations.shift();\n  }\n\n  return emojiData;\n}\n\nfunction uniq(arr) {\n  return arr.reduce((acc, item) => {\n    if (acc.indexOf(item) === -1) {\n      acc.push(item);\n    }\n    return acc;\n  }, []);\n}\n\nfunction intersect(a, b) {\n  const uniqA = uniq(a);\n  const uniqB = uniq(b);\n\n  return uniqA.filter(item => uniqB.indexOf(item) >= 0);\n}\n\nfunction deepMerge(a, b) {\n  let o = {};\n\n  for (let key in a) {\n    let originalValue = a[key],\n      value = originalValue;\n\n    if (Object.prototype.hasOwnProperty.call(b, key)) {\n      value = b[key];\n    }\n\n    if (typeof value === 'object') {\n      value = deepMerge(originalValue, value);\n    }\n\n    o[key] = value;\n  }\n\n  return o;\n}\n\n// https://github.com/sonicdoe/measure-scrollbar\nfunction measureScrollbar() {\n  const div = document.createElement('div');\n\n  div.style.width = '100px';\n  div.style.height = '100px';\n  div.style.overflow = 'scroll';\n  div.style.position = 'absolute';\n  div.style.top = '-9999px';\n\n  document.body.appendChild(div);\n  const scrollbarWidth = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n\n  return scrollbarWidth;\n}\n\nexport {\n  getData,\n  getSanitizedData,\n  uniq,\n  intersect,\n  deepMerge,\n  unifiedToNative,\n  measureScrollbar,\n};\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/emoji-index.js\n\nimport * as data from './emoji_mart_data_light';\nimport { getData, getSanitizedData, uniq, intersect } from './emoji_utils';\n\nlet originalPool = {};\nlet index = {};\nlet emojisList = {};\nlet emoticonsList = {};\nlet customEmojisList = [];\n\nfor (let emoji in data.emojis) {\n  let emojiData = data.emojis[emoji];\n  let { short_names, emoticons } = emojiData;\n  let id = short_names[0];\n\n  if (emoticons) {\n    emoticons.forEach(emoticon => {\n      if (emoticonsList[emoticon]) {\n        return;\n      }\n\n      emoticonsList[emoticon] = id;\n    });\n  }\n\n  emojisList[id] = getSanitizedData(id);\n  originalPool[id] = emojiData;\n}\n\nfunction clearCustomEmojis(pool) {\n  customEmojisList.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    delete pool[emojiId];\n    delete emojisList[emojiId];\n  });\n}\n\nfunction addCustomToPool(custom, pool) {\n  if (customEmojisList.length) clearCustomEmojis(pool);\n\n  custom.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    if (emojiId && !pool[emojiId]) {\n      pool[emojiId] = getData(emoji);\n      emojisList[emojiId] = getSanitizedData(emoji);\n    }\n  });\n\n  customEmojisList = custom;\n  index = {};\n}\n\nfunction search(value, { emojisToShowFilter, maxResults, include, exclude, custom } = {}) {\n  if (custom !== undefined) {\n    if (customEmojisList !== custom)\n      addCustomToPool(custom, originalPool);\n  } else {\n    custom = [];\n  }\n\n  maxResults = maxResults || 75;\n  include = include || [];\n  exclude = exclude || [];\n\n  let results = null,\n    pool = originalPool;\n\n  if (value.length) {\n    if (value === '-' || value === '-1') {\n      return [emojisList['-1']];\n    }\n\n    let values = value.toLowerCase().split(/[\\s|,\\-_]+/),\n      allResults = [];\n\n    if (values.length > 2) {\n      values = [values[0], values[1]];\n    }\n\n    if (include.length || exclude.length) {\n      pool = {};\n\n      data.categories.forEach(category => {\n        let isIncluded = include && include.length ? include.indexOf(category.name.toLowerCase()) > -1 : true;\n        let isExcluded = exclude && exclude.length ? exclude.indexOf(category.name.toLowerCase()) > -1 : false;\n        if (!isIncluded || isExcluded) {\n          return;\n        }\n\n        category.emojis.forEach(emojiId => pool[emojiId] = data.emojis[emojiId]);\n      });\n\n      if (custom.length) {\n        let customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n        let customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n        if (customIsIncluded && !customIsExcluded) {\n          addCustomToPool(custom, pool);\n        }\n      }\n    }\n\n    const searchValue = (value) => {\n      let aPool = pool,\n        aIndex = index,\n        length = 0;\n\n      for (let charIndex = 0; charIndex < value.length; charIndex++) {\n        const char = value[charIndex];\n        length++;\n\n        aIndex[char] = aIndex[char] || {};\n        aIndex = aIndex[char];\n\n        if (!aIndex.results) {\n          let scores = {};\n\n          aIndex.results = [];\n          aIndex.pool = {};\n\n          for (let id in aPool) {\n            let emoji = aPool[id],\n              { search } = emoji,\n              sub = value.slice(0, length),\n              subIndex = search.indexOf(sub);\n\n            if (subIndex !== -1) {\n              let score = subIndex + 1;\n              if (sub === id) score = 0;\n\n              aIndex.results.push(emojisList[id]);\n              aIndex.pool[id] = emoji;\n\n              scores[id] = score;\n            }\n          }\n\n          aIndex.results.sort((a, b) => {\n            let aScore = scores[a.id],\n              bScore = scores[b.id];\n\n            return aScore - bScore;\n          });\n        }\n\n        aPool = aIndex.pool;\n      }\n\n      return aIndex.results;\n    };\n\n    if (values.length > 1) {\n      results = searchValue(value);\n    } else {\n      results = [];\n    }\n\n    allResults = values.map(searchValue).filter(a => a);\n\n    if (allResults.length > 1) {\n      allResults = intersect.apply(null, allResults);\n    } else if (allResults.length) {\n      allResults = allResults[0];\n    }\n\n    results = uniq(results.concat(allResults));\n  }\n\n  if (results) {\n    if (emojisToShowFilter) {\n      results = results.filter((result) => emojisToShowFilter(data.emojis[result.id]));\n    }\n\n    if (results && results.length > maxResults) {\n      results = results.slice(0, maxResults);\n    }\n  }\n\n  return results;\n}\n\nexport { search };\n","// @ts-check\n\n/**\n * @param {(() => void) | (() => Promise<void>)} callback\n * @returns {Promise<void>}\n */\nexport default function ready(callback) {\n  return new Promise((resolve, reject) => {\n    function loaded() {\n      let result;\n      try {\n        result = callback();\n      } catch (err) {\n        reject(err);\n\n        return;\n      }\n\n      if (typeof result?.then === 'function') {\n        result.then(resolve).catch(reject);\n      } else {\n        resolve();\n      }\n    }\n\n    if (['interactive', 'complete'].includes(document.readyState)) {\n      loaded();\n    } else {\n      document.addEventListener('DOMContentLoaded', loaded);\n    }\n  });\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport { IconButton } from 'mastodon/components/icon_button';\n\nconst messages = defineMessages({\n  compress: { id: 'lightbox.compress', defaultMessage: 'Compress image view box' },\n  expand: { id: 'lightbox.expand', defaultMessage: 'Expand image view box' },\n});\n\nconst MIN_SCALE = 1;\nconst MAX_SCALE = 4;\nconst NAV_BAR_HEIGHT = 66;\n\nconst getMidpoint = (p1, p2) => ({\n  x: (p1.clientX + p2.clientX) / 2,\n  y: (p1.clientY + p2.clientY) / 2,\n});\n\nconst getDistance = (p1, p2) =>\n  Math.sqrt(Math.pow(p1.clientX - p2.clientX, 2) + Math.pow(p1.clientY - p2.clientY, 2));\n\nconst clamp = (min, max, value) => Math.min(max, Math.max(min, value));\n\n// Normalizing mousewheel speed across browsers\n// copy from: https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\nconst normalizeWheel = event => {\n  // Reasonable defaults\n  const PIXEL_STEP = 10;\n  const LINE_HEIGHT = 40;\n  const PAGE_HEIGHT = 800;\n\n  let sX = 0,\n    sY = 0, // spinX, spinY\n    pX = 0,\n    pY = 0; // pixelX, pixelY\n\n  // Legacy\n  if ('detail' in event) {\n    sY = event.detail;\n  }\n  if ('wheelDelta' in event) {\n    sY = -event.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in event) {\n    sY = -event.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in event) {\n    sX = -event.wheelDeltaX / 120;\n  }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ('axis' in event && event.axis === event.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) {\n    pY = event.deltaY;\n  }\n  if ('deltaX' in event) {\n    pX = event.deltaX;\n  }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode === 1) { // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else { // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) {\n    sX = (pX < 1) ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = (pY < 1) ? -1 : 1;\n  }\n\n  return {\n    spinX: sX,\n    spinY: sY,\n    pixelX: pX,\n    pixelY: pY,\n  };\n};\n\nclass ZoomableImage extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    scale: MIN_SCALE,\n    zoomMatrix: {\n      type: null, // 'width' 'height'\n      fullScreen: null, // bool\n      rate: null, // full screen scale rate\n      clientWidth: null,\n      clientHeight: null,\n      offsetWidth: null,\n      offsetHeight: null,\n      clientHeightFixed: null,\n      scrollTop: null,\n      scrollLeft: null,\n      translateX: null,\n      translateY: null,\n    },\n    zoomState: 'expand', // 'expand' 'compress'\n    navigationHidden: false,\n    dragPosition: { top: 0, left: 0, x: 0, y: 0 },\n    dragged: false,\n    lockScroll: { x: 0, y: 0 },\n    lockTranslate: { x: 0, y: 0 },\n  };\n\n  removers = [];\n  container = null;\n  image = null;\n  lastTouchEndTime = 0;\n  lastDistance = 0;\n\n  componentDidMount () {\n    let handler = this.handleTouchStart;\n    this.container.addEventListener('touchstart', handler);\n    this.removers.push(() => this.container.removeEventListener('touchstart', handler));\n    handler = this.handleTouchMove;\n    // on Chrome 56+, touch event listeners will default to passive\n    // https://www.chromestatus.com/features/5093566007214080\n    this.container.addEventListener('touchmove', handler, { passive: false });\n    this.removers.push(() => this.container.removeEventListener('touchend', handler));\n\n    handler = this.mouseDownHandler;\n    this.container.addEventListener('mousedown', handler);\n    this.removers.push(() => this.container.removeEventListener('mousedown', handler));\n\n    handler = this.mouseWheelHandler;\n    this.container.addEventListener('wheel', handler);\n    this.removers.push(() => this.container.removeEventListener('wheel', handler));\n    // Old Chrome\n    this.container.addEventListener('mousewheel', handler);\n    this.removers.push(() => this.container.removeEventListener('mousewheel', handler));\n    // Old Firefox\n    this.container.addEventListener('DOMMouseScroll', handler);\n    this.removers.push(() => this.container.removeEventListener('DOMMouseScroll', handler));\n\n    this.initZoomMatrix();\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  componentDidUpdate () {\n    this.setState({ zoomState: this.state.scale >= this.state.zoomMatrix.rate ? 'compress' : 'expand' });\n\n    if (this.state.scale === MIN_SCALE) {\n      this.container.style.removeProperty('cursor');\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps () {\n    // reset when slide to next image\n    if (this.props.zoomButtonHidden) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockTranslate: { x: 0, y: 0 },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    }\n  }\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  mouseWheelHandler = e => {\n    e.preventDefault();\n\n    const event = normalizeWheel(e);\n\n    if (this.state.zoomMatrix.type === 'width') {\n      // full width, scroll vertical\n      this.container.scrollTop = Math.max(this.container.scrollTop + event.pixelY, this.state.lockScroll.y);\n    } else {\n      // full height, scroll horizontal\n      this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelY, this.state.lockScroll.x);\n    }\n\n    // lock horizontal scroll\n    this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelX, this.state.lockScroll.x);\n  };\n\n  mouseDownHandler = e => {\n    this.container.style.cursor = 'grabbing';\n    this.container.style.userSelect = 'none';\n\n    this.setState({ dragPosition: {\n      left: this.container.scrollLeft,\n      top: this.container.scrollTop,\n      // Get the current mouse position\n      x: e.clientX,\n      y: e.clientY,\n    } });\n\n    this.image.addEventListener('mousemove', this.mouseMoveHandler);\n    this.image.addEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  mouseMoveHandler = e => {\n    const dx = e.clientX - this.state.dragPosition.x;\n    const dy = e.clientY - this.state.dragPosition.y;\n\n    this.container.scrollLeft = Math.max(this.state.dragPosition.left - dx, this.state.lockScroll.x);\n    this.container.scrollTop = Math.max(this.state.dragPosition.top - dy, this.state.lockScroll.y);\n\n    this.setState({ dragged: true });\n  };\n\n  mouseUpHandler = () => {\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n\n    this.image.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.image.removeEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  handleTouchStart = e => {\n    if (e.touches.length !== 2) return;\n\n    this.lastDistance = getDistance(...e.touches);\n  };\n\n  handleTouchMove = e => {\n    const { scrollTop, scrollHeight, clientHeight } = this.container;\n    if (e.touches.length === 1 && scrollTop !== scrollHeight - clientHeight) {\n      // prevent propagating event to MediaModal\n      e.stopPropagation();\n      return;\n    }\n    if (e.touches.length !== 2) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const distance = getDistance(...e.touches);\n    const midpoint = getMidpoint(...e.touches);\n    const _MAX_SCALE = Math.max(MAX_SCALE, this.state.zoomMatrix.rate);\n    const scale = clamp(MIN_SCALE, _MAX_SCALE, this.state.scale * distance / this.lastDistance);\n\n    this.zoom(scale, midpoint);\n\n    this.lastMidpoint = midpoint;\n    this.lastDistance = distance;\n  };\n\n  zoom(nextScale, midpoint) {\n    const { scale, zoomMatrix } = this.state;\n    const { scrollLeft, scrollTop } = this.container;\n\n    // math memo:\n    // x = (scrollLeft + midpoint.x) / scrollWidth\n    // x' = (nextScrollLeft + midpoint.x) / nextScrollWidth\n    // scrollWidth = clientWidth * scale\n    // scrollWidth' = clientWidth * nextScale\n    // Solve x = x' for nextScrollLeft\n    const nextScrollLeft = (scrollLeft + midpoint.x) * nextScale / scale - midpoint.x;\n    const nextScrollTop = (scrollTop + midpoint.y) * nextScale / scale - midpoint.y;\n\n    this.setState({ scale: nextScale }, () => {\n      this.container.scrollLeft = nextScrollLeft;\n      this.container.scrollTop = nextScrollTop;\n      // reset the translateX/Y constantly\n      if (nextScale < zoomMatrix.rate) {\n        this.setState({\n          lockTranslate: {\n            x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n            y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n          },\n        });\n      }\n    });\n  }\n\n  handleClick = e => {\n    // don't propagate event to MediaModal\n    e.stopPropagation();\n    const dragged = this.state.dragged;\n    this.setState({ dragged: false });\n    if (dragged) return;\n    const handler = this.props.onClick;\n    if (handler) handler();\n    this.setState({ navigationHidden: !this.state.navigationHidden });\n  };\n\n  handleMouseDown = e => {\n    e.preventDefault();\n  };\n\n  initZoomMatrix = () => {\n    const { width, height } = this.props;\n    const { clientWidth, clientHeight } = this.container;\n    const { offsetWidth, offsetHeight } = this.image;\n    const clientHeightFixed = clientHeight - NAV_BAR_HEIGHT;\n\n    const type = width / height < clientWidth / clientHeightFixed ? 'width' : 'height';\n    const fullScreen = type === 'width' ?  width > clientWidth : height > clientHeightFixed;\n    const rate = type === 'width' ? Math.min(clientWidth, width) / offsetWidth : Math.min(clientHeightFixed, height) / offsetHeight;\n    const scrollTop = type === 'width' ?  (clientHeight - offsetHeight) / 2 - NAV_BAR_HEIGHT : (clientHeightFixed - offsetHeight) / 2;\n    const scrollLeft = (clientWidth - offsetWidth) / 2;\n    const translateX = type === 'width' ? (width - offsetWidth) / (2 * rate) : 0;\n    const translateY = type === 'height' ? (height - offsetHeight) / (2 * rate) : 0;\n\n    this.setState({\n      zoomMatrix: {\n        type: type,\n        fullScreen: fullScreen,\n        rate: rate,\n        clientWidth: clientWidth,\n        clientHeight: clientHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight,\n        clientHeightFixed: clientHeightFixed,\n        scrollTop: scrollTop,\n        scrollLeft: scrollLeft,\n        translateX: translateX,\n        translateY: translateY,\n      },\n    });\n  };\n\n  handleZoomClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { scale, zoomMatrix } = this.state;\n\n    if ( scale >= zoomMatrix.rate ) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockScroll: {\n          x: 0,\n          y: 0,\n        },\n        lockTranslate: {\n          x: 0,\n          y: 0,\n        },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    } else {\n      this.setState({\n        scale: zoomMatrix.rate,\n        lockScroll: {\n          x: zoomMatrix.scrollLeft,\n          y: zoomMatrix.scrollTop,\n        },\n        lockTranslate: {\n          x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX,\n          y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY,\n        },\n      }, () => {\n        this.container.scrollLeft = zoomMatrix.scrollLeft;\n        this.container.scrollTop = zoomMatrix.scrollTop;\n      });\n    }\n\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n  };\n\n  setContainerRef = c => {\n    this.container = c;\n  };\n\n  setImageRef = c => {\n    this.image = c;\n  };\n\n  render () {\n    const { alt, lang, src, width, height, intl } = this.props;\n    const { scale, lockTranslate } = this.state;\n    const overflow = scale === MIN_SCALE ? 'hidden' : 'scroll';\n    const zoomButtonShouldHide = this.state.navigationHidden || this.props.zoomButtonHidden || this.state.zoomMatrix.rate <= MIN_SCALE ? 'media-modal__zoom-button--hidden' : '';\n    const zoomButtonTitle = this.state.zoomState === 'compress' ? intl.formatMessage(messages.compress) : intl.formatMessage(messages.expand);\n\n    return (\n      <>\n        <IconButton\n          className={`media-modal__zoom-button ${zoomButtonShouldHide}`}\n          title={zoomButtonTitle}\n          icon={this.state.zoomState}\n          onClick={this.handleZoomClick}\n          size={40}\n          style={{\n            fontSize: '30px', /* Fontawesome's fa-compress fa-expand is larger than fa-close */\n          }}\n        />\n        <div\n          className='zoomable-image'\n          ref={this.setContainerRef}\n          style={{ overflow }}\n        >\n          <img\n            role='presentation'\n            ref={this.setImageRef}\n            alt={alt}\n            title={alt}\n            lang={lang}\n            src={src}\n            width={width}\n            height={height}\n            style={{\n              transform: `scale(${scale}) translate(-${lockTranslate.x}px, -${lockTranslate.y}px)`,\n              transformOrigin: '0 0',\n            }}\n            draggable={false}\n            onClick={this.handleClick}\n            onMouseDown={this.handleMouseDown}\n          />\n        </div>\n      </>\n    );\n  }\n\n}\n\nexport default injectIntl(ZoomableImage);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport classNames from 'classnames';\n\nimport { LoadingBar } from 'react-redux-loading-bar';\n\nimport ZoomableImage from './zoomable_image';\n\nexport default class ImageLoader extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    previewSrc: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    loading: true,\n    error: false,\n    width: null,\n  };\n\n  removers = [];\n  canvas = null;\n\n  get canvasContext() {\n    if (!this.canvas) {\n      return null;\n    }\n    this._canvasContext = this._canvasContext || this.canvas.getContext('2d');\n    return this._canvasContext;\n  }\n\n  componentDidMount () {\n    this.loadImage(this.props);\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (this.props.src !== nextProps.src) {\n      this.loadImage(nextProps);\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  loadImage (props) {\n    this.removeEventListeners();\n    this.setState({ loading: true, error: false });\n    Promise.all([\n      props.previewSrc && this.loadPreviewCanvas(props),\n      this.hasSize() && this.loadOriginalImage(props),\n    ].filter(Boolean))\n      .then(() => {\n        this.setState({ loading: false, error: false });\n        this.clearPreviewCanvas();\n      })\n      .catch(() => this.setState({ loading: false, error: true }));\n  }\n\n  loadPreviewCanvas = ({ previewSrc, width, height }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      this.canvasContext.drawImage(image, 0, 0, width, height);\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = previewSrc;\n    this.removers.push(removeEventListeners);\n  });\n\n  clearPreviewCanvas () {\n    const { width, height } = this.canvas;\n    this.canvasContext.clearRect(0, 0, width, height);\n  }\n\n  loadOriginalImage = ({ src }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = src;\n    this.removers.push(removeEventListeners);\n  });\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  hasSize () {\n    const { width, height } = this.props;\n    return typeof width === 'number' && typeof height === 'number';\n  }\n\n  setCanvasRef = c => {\n    this.canvas = c;\n    if (c) this.setState({ width: c.offsetWidth });\n  };\n\n  render () {\n    const { alt, lang, src, width, height, onClick } = this.props;\n    const { loading } = this.state;\n\n    const className = classNames('image-loader', {\n      'image-loader--loading': loading,\n      'image-loader--amorphous': !this.hasSize(),\n    });\n\n    return (\n      <div className={className}>\n        {loading ? (\n          <>\n            <div className='loading-bar__container' style={{ width: this.state.width || width }}>\n              <LoadingBar className='loading-bar' loading={1} />\n            </div>\n            <canvas\n              className='image-loader__preview-canvas'\n              ref={this.setCanvasRef}\n              width={width}\n              height={height}\n            />\n          </>\n        ) : (\n          <ZoomableImage\n            alt={alt}\n            lang={lang}\n            src={src}\n            onClick={onClick}\n            width={width}\n            height={height}\n            zoomButtonHidden={this.props.zoomButtonHidden}\n          />\n        )}\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport { IconButton } from 'flavours/glitch/components/icon_button';\n\nconst messages = defineMessages({\n  compress: { id: 'lightbox.compress', defaultMessage: 'Compress image view box' },\n  expand: { id: 'lightbox.expand', defaultMessage: 'Expand image view box' },\n});\n\nconst MIN_SCALE = 1;\nconst MAX_SCALE = 4;\nconst NAV_BAR_HEIGHT = 66;\n\nconst getMidpoint = (p1, p2) => ({\n  x: (p1.clientX + p2.clientX) / 2,\n  y: (p1.clientY + p2.clientY) / 2,\n});\n\nconst getDistance = (p1, p2) =>\n  Math.sqrt(Math.pow(p1.clientX - p2.clientX, 2) + Math.pow(p1.clientY - p2.clientY, 2));\n\nconst clamp = (min, max, value) => Math.min(max, Math.max(min, value));\n\n// Normalizing mousewheel speed across browsers\n// copy from: https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\nconst normalizeWheel = event => {\n  // Reasonable defaults\n  const PIXEL_STEP = 10;\n  const LINE_HEIGHT = 40;\n  const PAGE_HEIGHT = 800;\n\n  let sX = 0,\n    sY = 0, // spinX, spinY\n    pX = 0,\n    pY = 0; // pixelX, pixelY\n\n  // Legacy\n  if ('detail' in event) {\n    sY = event.detail;\n  }\n  if ('wheelDelta' in event) {\n    sY = -event.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in event) {\n    sY = -event.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in event) {\n    sX = -event.wheelDeltaX / 120;\n  }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ('axis' in event && event.axis === event.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) {\n    pY = event.deltaY;\n  }\n  if ('deltaX' in event) {\n    pX = event.deltaX;\n  }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode === 1) { // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else { // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) {\n    sX = (pX < 1) ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = (pY < 1) ? -1 : 1;\n  }\n\n  return {\n    spinX: sX,\n    spinY: sY,\n    pixelX: pX,\n    pixelY: pY,\n  };\n};\n\nclass ZoomableImage extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    scale: MIN_SCALE,\n    zoomMatrix: {\n      type: null, // 'width' 'height'\n      fullScreen: null, // bool\n      rate: null, // full screen scale rate\n      clientWidth: null,\n      clientHeight: null,\n      offsetWidth: null,\n      offsetHeight: null,\n      clientHeightFixed: null,\n      scrollTop: null,\n      scrollLeft: null,\n      translateX: null,\n      translateY: null,\n    },\n    zoomState: 'expand', // 'expand' 'compress'\n    navigationHidden: false,\n    dragPosition: { top: 0, left: 0, x: 0, y: 0 },\n    dragged: false,\n    lockScroll: { x: 0, y: 0 },\n    lockTranslate: { x: 0, y: 0 },\n  };\n\n  removers = [];\n  container = null;\n  image = null;\n  lastTouchEndTime = 0;\n  lastDistance = 0;\n\n  componentDidMount () {\n    let handler = this.handleTouchStart;\n    this.container.addEventListener('touchstart', handler);\n    this.removers.push(() => this.container.removeEventListener('touchstart', handler));\n    handler = this.handleTouchMove;\n    // on Chrome 56+, touch event listeners will default to passive\n    // https://www.chromestatus.com/features/5093566007214080\n    this.container.addEventListener('touchmove', handler, { passive: false });\n    this.removers.push(() => this.container.removeEventListener('touchend', handler));\n\n    handler = this.mouseDownHandler;\n    this.container.addEventListener('mousedown', handler);\n    this.removers.push(() => this.container.removeEventListener('mousedown', handler));\n\n    handler = this.mouseWheelHandler;\n    this.container.addEventListener('wheel', handler);\n    this.removers.push(() => this.container.removeEventListener('wheel', handler));\n    // Old Chrome\n    this.container.addEventListener('mousewheel', handler);\n    this.removers.push(() => this.container.removeEventListener('mousewheel', handler));\n    // Old Firefox\n    this.container.addEventListener('DOMMouseScroll', handler);\n    this.removers.push(() => this.container.removeEventListener('DOMMouseScroll', handler));\n\n    this.initZoomMatrix();\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  componentDidUpdate () {\n    this.setState({ zoomState: this.state.scale >= this.state.zoomMatrix.rate ? 'compress' : 'expand' });\n\n    if (this.state.scale === MIN_SCALE) {\n      this.container.style.removeProperty('cursor');\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps () {\n    // reset when slide to next image\n    if (this.props.zoomButtonHidden) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockTranslate: { x: 0, y: 0 },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    }\n  }\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  mouseWheelHandler = e => {\n    e.preventDefault();\n\n    const event = normalizeWheel(e);\n\n    if (this.state.zoomMatrix.type === 'width') {\n      // full width, scroll vertical\n      this.container.scrollTop = Math.max(this.container.scrollTop + event.pixelY, this.state.lockScroll.y);\n    } else {\n      // full height, scroll horizontal\n      this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelY, this.state.lockScroll.x);\n    }\n\n    // lock horizontal scroll\n    this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelX, this.state.lockScroll.x);\n  };\n\n  mouseDownHandler = e => {\n    this.container.style.cursor = 'grabbing';\n    this.container.style.userSelect = 'none';\n\n    this.setState({ dragPosition: {\n      left: this.container.scrollLeft,\n      top: this.container.scrollTop,\n      // Get the current mouse position\n      x: e.clientX,\n      y: e.clientY,\n    } });\n\n    this.image.addEventListener('mousemove', this.mouseMoveHandler);\n    this.image.addEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  mouseMoveHandler = e => {\n    const dx = e.clientX - this.state.dragPosition.x;\n    const dy = e.clientY - this.state.dragPosition.y;\n\n    this.container.scrollLeft = Math.max(this.state.dragPosition.left - dx, this.state.lockScroll.x);\n    this.container.scrollTop = Math.max(this.state.dragPosition.top - dy, this.state.lockScroll.y);\n\n    this.setState({ dragged: true });\n  };\n\n  mouseUpHandler = () => {\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n\n    this.image.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.image.removeEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  handleTouchStart = e => {\n    if (e.touches.length !== 2) return;\n\n    this.lastDistance = getDistance(...e.touches);\n  };\n\n  handleTouchMove = e => {\n    const { scrollTop, scrollHeight, clientHeight } = this.container;\n    if (e.touches.length === 1 && scrollTop !== scrollHeight - clientHeight) {\n      // prevent propagating event to MediaModal\n      e.stopPropagation();\n      return;\n    }\n    if (e.touches.length !== 2) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const distance = getDistance(...e.touches);\n    const midpoint = getMidpoint(...e.touches);\n    const _MAX_SCALE = Math.max(MAX_SCALE, this.state.zoomMatrix.rate);\n    const scale = clamp(MIN_SCALE, _MAX_SCALE, this.state.scale * distance / this.lastDistance);\n\n    this.zoom(scale, midpoint);\n\n    this.lastMidpoint = midpoint;\n    this.lastDistance = distance;\n  };\n\n  zoom(nextScale, midpoint) {\n    const { scale, zoomMatrix } = this.state;\n    const { scrollLeft, scrollTop } = this.container;\n\n    // math memo:\n    // x = (scrollLeft + midpoint.x) / scrollWidth\n    // x' = (nextScrollLeft + midpoint.x) / nextScrollWidth\n    // scrollWidth = clientWidth * scale\n    // scrollWidth' = clientWidth * nextScale\n    // Solve x = x' for nextScrollLeft\n    const nextScrollLeft = (scrollLeft + midpoint.x) * nextScale / scale - midpoint.x;\n    const nextScrollTop = (scrollTop + midpoint.y) * nextScale / scale - midpoint.y;\n\n    this.setState({ scale: nextScale }, () => {\n      this.container.scrollLeft = nextScrollLeft;\n      this.container.scrollTop = nextScrollTop;\n      // reset the translateX/Y constantly\n      if (nextScale < zoomMatrix.rate) {\n        this.setState({\n          lockTranslate: {\n            x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n            y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n          },\n        });\n      }\n    });\n  }\n\n  handleClick = e => {\n    // don't propagate event to MediaModal\n    e.stopPropagation();\n    const dragged = this.state.dragged;\n    this.setState({ dragged: false });\n    if (dragged) return;\n    const handler = this.props.onClick;\n    if (handler) handler();\n    this.setState({ navigationHidden: !this.state.navigationHidden });\n  };\n\n  handleMouseDown = e => {\n    e.preventDefault();\n  };\n\n  initZoomMatrix = () => {\n    const { width, height } = this.props;\n    const { clientWidth, clientHeight } = this.container;\n    const { offsetWidth, offsetHeight } = this.image;\n    const clientHeightFixed = clientHeight - NAV_BAR_HEIGHT;\n\n    const type = width / height < clientWidth / clientHeightFixed ? 'width' : 'height';\n    const fullScreen = type === 'width' ?  width > clientWidth : height > clientHeightFixed;\n    const rate = type === 'width' ? Math.min(clientWidth, width) / offsetWidth : Math.min(clientHeightFixed, height) / offsetHeight;\n    const scrollTop = type === 'width' ?  (clientHeight - offsetHeight) / 2 - NAV_BAR_HEIGHT : (clientHeightFixed - offsetHeight) / 2;\n    const scrollLeft = (clientWidth - offsetWidth) / 2;\n    const translateX = type === 'width' ? (width - offsetWidth) / (2 * rate) : 0;\n    const translateY = type === 'height' ? (height - offsetHeight) / (2 * rate) : 0;\n\n    this.setState({\n      zoomMatrix: {\n        type: type,\n        fullScreen: fullScreen,\n        rate: rate,\n        clientWidth: clientWidth,\n        clientHeight: clientHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight,\n        clientHeightFixed: clientHeightFixed,\n        scrollTop: scrollTop,\n        scrollLeft: scrollLeft,\n        translateX: translateX,\n        translateY: translateY,\n      },\n    });\n  };\n\n  handleZoomClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { scale, zoomMatrix } = this.state;\n\n    if ( scale >= zoomMatrix.rate ) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockScroll: {\n          x: 0,\n          y: 0,\n        },\n        lockTranslate: {\n          x: 0,\n          y: 0,\n        },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    } else {\n      this.setState({\n        scale: zoomMatrix.rate,\n        lockScroll: {\n          x: zoomMatrix.scrollLeft,\n          y: zoomMatrix.scrollTop,\n        },\n        lockTranslate: {\n          x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX,\n          y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY,\n        },\n      }, () => {\n        this.container.scrollLeft = zoomMatrix.scrollLeft;\n        this.container.scrollTop = zoomMatrix.scrollTop;\n      });\n    }\n\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n  };\n\n  setContainerRef = c => {\n    this.container = c;\n  };\n\n  setImageRef = c => {\n    this.image = c;\n  };\n\n  render () {\n    const { alt, lang, src, width, height, intl } = this.props;\n    const { scale, lockTranslate } = this.state;\n    const overflow = scale === MIN_SCALE ? 'hidden' : 'scroll';\n    const zoomButtonShouldHide = this.state.navigationHidden || this.props.zoomButtonHidden || this.state.zoomMatrix.rate <= MIN_SCALE ? 'media-modal__zoom-button--hidden' : '';\n    const zoomButtonTitle = this.state.zoomState === 'compress' ? intl.formatMessage(messages.compress) : intl.formatMessage(messages.expand);\n\n    return (\n      <>\n        <IconButton\n          className={`media-modal__zoom-button ${zoomButtonShouldHide}`}\n          title={zoomButtonTitle}\n          icon={this.state.zoomState}\n          onClick={this.handleZoomClick}\n          size={40}\n          style={{\n            fontSize: '30px', /* Fontawesome's fa-compress fa-expand is larger than fa-close */\n          }}\n        />\n        <div\n          className='zoomable-image'\n          ref={this.setContainerRef}\n          style={{ overflow }}\n        >\n          <img\n            role='presentation'\n            ref={this.setImageRef}\n            alt={alt}\n            title={alt}\n            lang={lang}\n            src={src}\n            width={width}\n            height={height}\n            style={{\n              transform: `scale(${scale}) translate(-${lockTranslate.x}px, -${lockTranslate.y}px)`,\n              transformOrigin: '0 0',\n            }}\n            draggable={false}\n            onClick={this.handleClick}\n            onMouseDown={this.handleMouseDown}\n          />\n        </div>\n      </>\n    );\n  }\n\n}\n\nexport default injectIntl(ZoomableImage);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport classNames from 'classnames';\n\nimport { LoadingBar } from 'react-redux-loading-bar';\n\nimport ZoomableImage from './zoomable_image';\n\nexport default class ImageLoader extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    previewSrc: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    loading: true,\n    error: false,\n    width: null,\n  };\n\n  removers = [];\n  canvas = null;\n\n  get canvasContext() {\n    if (!this.canvas) {\n      return null;\n    }\n    this._canvasContext = this._canvasContext || this.canvas.getContext('2d');\n    return this._canvasContext;\n  }\n\n  componentDidMount () {\n    this.loadImage(this.props);\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (this.props.src !== nextProps.src) {\n      this.loadImage(nextProps);\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  loadImage (props) {\n    this.removeEventListeners();\n    this.setState({ loading: true, error: false });\n    Promise.all([\n      props.previewSrc && this.loadPreviewCanvas(props),\n      this.hasSize() && this.loadOriginalImage(props),\n    ].filter(Boolean))\n      .then(() => {\n        this.setState({ loading: false, error: false });\n        this.clearPreviewCanvas();\n      })\n      .catch(() => this.setState({ loading: false, error: true }));\n  }\n\n  loadPreviewCanvas = ({ previewSrc, width, height }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      this.canvasContext.drawImage(image, 0, 0, width, height);\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = previewSrc;\n    this.removers.push(removeEventListeners);\n  });\n\n  clearPreviewCanvas () {\n    const { width, height } = this.canvas;\n    this.canvasContext.clearRect(0, 0, width, height);\n  }\n\n  loadOriginalImage = ({ src }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = src;\n    this.removers.push(removeEventListeners);\n  });\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  hasSize () {\n    const { width, height } = this.props;\n    return typeof width === 'number' && typeof height === 'number';\n  }\n\n  setCanvasRef = c => {\n    this.canvas = c;\n    if (c) this.setState({ width: c.offsetWidth });\n  };\n\n  render () {\n    const { alt, lang, src, width, height, onClick } = this.props;\n    const { loading } = this.state;\n\n    const className = classNames('image-loader', {\n      'image-loader--loading': loading,\n      'image-loader--amorphous': !this.hasSize(),\n    });\n\n    return (\n      <div className={className}>\n        {loading ? (\n          <>\n            <div className='loading-bar__container' style={{ width: this.state.width || width }}>\n              <LoadingBar className='loading-bar' loading={1} />\n            </div>\n            <canvas\n              className='image-loader__preview-canvas'\n              ref={this.setCanvasRef}\n              width={width}\n              height={height}\n            />\n          </>\n        ) : (\n          <ZoomableImage\n            alt={alt}\n            lang={lang}\n            src={src}\n            onClick={onClick}\n            width={width}\n            height={height}\n            zoomButtonHidden={this.props.zoomButtonHidden}\n          />\n        )}\n      </div>\n    );\n  }\n\n}\n","import punycode from 'punycode';\n\nconst IDNA_PREFIX = 'xn--';\n\nexport const decode = domain => {\n  return domain\n    .split('.')\n    .map(part => part.indexOf(IDNA_PREFIX) === 0 ? punycode.decode(part.slice(IDNA_PREFIX.length)) : part)\n    .join('.');\n};\n"],"sourceRoot":""}